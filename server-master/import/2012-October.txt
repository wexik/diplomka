From hitesh1907nayyar@gmail.com Sun Sep 30 23:16:38 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913Gcb9019088 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Sep 2012 23:16:38 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913GX99014007
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:16:33 -0400
Received: from mail-vc0-f174.google.com (mail-vc0-f174.google.com
	[209.85.220.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q913GWX2017181
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:16:32 -0400
Received: by vcbfo13 with SMTP id fo13so6052528vcb.33
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 20:16:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=XH5v2ItQmEf1M8erx+UfuzEpAY20hXcDzcQcAV4n/Co=;
	b=0kfm72jZww9MeRNOMHY28BFmhS8THASAqtGHZPpY0CQI8JHFmWAh5doqY9ts2bzqvW
	yom8xI5q68oyX4JVAFXl1E+2U6Ie0cM8DhKcetKEAS4t066POzaAzn70eikdbVoNRRoS
	8EbWn2paPTkMNUd9kjmgJJlTedff+QGXZLMNU3knPKOeGe6OZuMob8llOmUlaHBqsVo6
	7FNVsnqSz0iijrZOfyltT1DAF5yClJ1vFlb0qftvKGjG9lRfA8gXtLoEQF2b6DhuU2xl
	uL5PsiEAa7iplacvklaJ7+664sUYOlMOEZ/hE/tJHQY099TXSqfDWEDmsqrBAQ+Zht51
	P+Cg==
MIME-Version: 1.0
Received: by 10.58.23.202 with SMTP id o10mr7700089vef.57.1349061392031; Sun,
	30 Sep 2012 20:16:32 -0700 (PDT)
Received: by 10.220.135.9 with HTTP; Sun, 30 Sep 2012 20:16:31 -0700 (PDT)
Date: Mon, 1 Oct 2012 08:46:31 +0530
Message-ID: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
From: hitesh nayyar <hitesh1907nayyar@gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=047d7b3398590d5f2504caf6d51e
X-RedHat-Spam-Score: -1.592  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, LOCALPART_IN_SUBJECT,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 03:16:39 -0000

--047d7b3398590d5f2504caf6d51e
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Hi,

I am facing issuing in setting up Linux cluster. Here is the issue that i
am facing.

I have 2 Linux desktop and have following ip's and name:

hitesh12-192.168.1.23
saanvi12-192.168.1.30

i enabled ricci service and have setup passwod as well.Enabled luci service
as well.

When cluster using GUI by activating luci GUI i see error logs in my
/var/log/messages from hitesh12 -192.168.1.23


Sep 30 22:31:57 localhost dlm_controld[2945]: dlm_controld 3.0.12 started
Sep 30 22:32:18 localhost gfs_controld[3010]: gfs_controld 3.0.12 started
Sep 30 22:33:39 localhost kernel: dlm: Using TCP for communications
Sep 30 22:33:41 localhost fenced[2930]: fencing node saanvi12
Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none
result: error no method
*Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 failed
Sep 30 22:33:47 localhost fenced[2930]: fencing node saanvi12
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none
result: error no method
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 failed
Sep 30 22:33:52 localhost fenced[2930]: fencing node saanvi12*

With the above error the result in by issuing clustat -i 1 command is :

*Cluster Status for dhoni @ Sun Sep 30 23:04:08 2012
Member Status: Quorate

Member Name ID Status
------ ---- ---- ------
hitesh12 1 Online, Local
saanvi12 2 Offline*


I have disabled by firewall on both my linux servers and is able to telnet
each other.


Can somebdy please help me out as how can i remove my fence error ?

--047d7b3398590d5f2504caf6d51e
Content-Type: text/html; charset=ISO-8859-1

Hi,<br><br>Hi,<br>
<br>
I am facing issuing in setting up Linux cluster. Here is the issue that i am facing.<br>
<br>
I have 2 Linux desktop and have following ip&#39;s and name:<br>
<br>
hitesh12-192.168.1.23<br>
saanvi12-192.168.1.30<br>
<br>
i enabled ricci service and have setup passwod as well.Enabled luci service as well.<br>
<br>
When cluster using GUI by activating  luci GUI i see error logs in my /var/log/messages from hitesh12 -192.168.1.23<br>
<br>
<br>
Sep 30 22:31:57 localhost dlm_controld[2945]: dlm_controld 3.0.12 started<br>
Sep 30 22:32:18 localhost gfs_controld[3010]: gfs_controld 3.0.12 started<br>
Sep 30 22:33:39 localhost kernel: dlm: Using TCP for communications<br>
Sep 30 22:33:41 localhost fenced[2930]: fencing node saanvi12<br>
Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none result: error no method<br>
<b>Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 failed<br>
Sep 30 22:33:47 localhost fenced[2930]: fencing node saanvi12<br>
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none result: error no method<br>
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 failed<br>
Sep 30 22:33:52 localhost fenced[2930]: fencing node saanvi12</b><br>
<br>
With the above error the result in by issuing clustat -i 1 command is :<br>
<br>
<b>Cluster Status for dhoni @ Sun Sep 30 23:04:08 2012<br>
Member Status: Quorate<br>
<br>
 Member Name                                                     ID   Status<br>
 ------ ----                                                     ---- ------<br>
 hitesh12                                                            1 Online, Local<br>
 saanvi12                                                            2 Offline</b><br>
<br>
<br>
I have disabled by firewall on both my linux servers and is able to telnet each other.<br>
<br>
<br>
Can somebdy please help me out as how can i remove my fence error ?<br>

--047d7b3398590d5f2504caf6d51e--

From lists@alteeve.ca Sun Sep 30 23:22:23 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913MNO1019230 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Sep 2012 23:22:23 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q913MHDb031715
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:22:18 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q913MGqh006998
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:22:16 -0400
Received: from lemass.alteeve.ca (unknown [208.67.150.233])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id A9A37421042;
	Sun, 30 Sep 2012 23:22:13 -0400 (EDT)
Message-ID: <50690C66.2070603@alteeve.ca>
Date: Sun, 30 Sep 2012 23:22:14 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
In-Reply-To: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 03:22:23 -0000

Did you setup fencing? Can you send your cluster.conf file please?

digimer

On 09/30/2012 11:16 PM, hitesh nayyar wrote:
> Hi,
>
> Hi,
>
> I am facing issuing in setting up Linux cluster. Here is the issue that
> i am facing.
>
> I have 2 Linux desktop and have following ip's and name:
>
> hitesh12-192.168.1.23
> saanvi12-192.168.1.30
>
> i enabled ricci service and have setup passwod as well.Enabled luci
> service as well.
>
> When cluster using GUI by activating luci GUI i see error logs in my
> /var/log/messages from hitesh12 -192.168.1.23
>
>
> Sep 30 22:31:57 localhost dlm_controld[2945]: dlm_controld 3.0.12 started
> Sep 30 22:32:18 localhost gfs_controld[3010]: gfs_controld 3.0.12 started
> Sep 30 22:33:39 localhost kernel: dlm: Using TCP for communications
> Sep 30 22:33:41 localhost fenced[2930]: fencing node saanvi12
> Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 dev 0.0 agent
> none result: error no method
> *Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 failed
> Sep 30 22:33:47 localhost fenced[2930]: fencing node saanvi12
> Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 dev 0.0 agent
> none result: error no method
> Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 failed
> Sep 30 22:33:52 localhost fenced[2930]: fencing node saanvi12*
>
> With the above error the result in by issuing clustat -i 1 command is :
>
> *Cluster Status for dhoni @ Sun Sep 30 23:04:08 2012
> Member Status: Quorate
>
> Member Name ID Status
> ------ ---- ---- ------
> hitesh12 1 Online, Local
> saanvi12 2 Offline*
>
>
> I have disabled by firewall on both my linux servers and is able to
> telnet each other.
>
>
> Can somebdy please help me out as how can i remove my fence error ?
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From raju.rajsand@gmail.com Sun Sep 30 23:43:46 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913hkbx021085 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Sep 2012 23:43:46 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q913hfYX027159
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:43:41 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q913heqW027173
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:43:40 -0400
Received: by obbuo13 with SMTP id uo13so5297547obb.33
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 20:43:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=Xs83tmRBaANIUAlTD43IODVtz4mQ5RRy0V1D2IP5e9A=;
	b=C8nB4rMT9V7LUgynzs+eZIYGK0FZo+VAlhbBO/2/zRRRKGP22Eflo4SEwFmyeVZXSM
	o1whInUOV6LX5V1RD5tcqKtwzDQwfhrBISMb7MGpPofl39avm6B/PBPME5vMbGQkYJBd
	IbRyW+b+0Y7e4sexnGtjcjhkuSMc+LCWcVNuPvLE6kQ8zbsnN08RaFYm5ocVgKuq/iEg
	8qgdxsEJje8ZlAi0luo1oBitQt/F415v6TCoxdFQWpt5ru47KyXi9morQnEe3tnsJhM4
	Hsv/HN33tPtNYdrYfc84Ho5YszUIz7uXSjYe6Upssj3XXCwrH49d9m+q9DPqE5Gd2iKW
	uivA==
MIME-Version: 1.0
Received: by 10.60.170.76 with SMTP id ak12mr10984387oec.22.1349063019865;
	Sun, 30 Sep 2012 20:43:39 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Sun, 30 Sep 2012 20:43:39 -0700 (PDT)
In-Reply-To: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
Date: Mon, 1 Oct 2012 09:13:39 +0530
X-Google-Sender-Auth: 13K2TBkWRrXF9Rhi0IAFP4fb3yM
Message-ID: <CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 03:43:46 -0000

Greetings,

On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
<hitesh1907nayyar@gmail.com> wrote:
>
> I have 2 Linux desktop and have following ip's and name:
>

>From what I can gather, This seems to be a desktop class machines.
Hence they may not have IPMI/ILO etc.

I am 99.99% certain that fencing has not been configured.

I also doubt if it has external storage.

(I can identify as I tried my experiments with clusters first time
with such desktop class machines)

The only solution for this is Power Fencing.

-- 
Regards,

Rajagopal

From hitesh1907nayyar@gmail.com Mon Oct  1 00:53:55 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q914rtL2027172 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 00:53:55 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q914rn5d011430
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 00:53:49 -0400
Received: from mail-vc0-f174.google.com (mail-vc0-f174.google.com
	[209.85.220.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q914rmw9022353
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 00:53:48 -0400
Received: by vcbfo13 with SMTP id fo13so6105696vcb.33
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 21:53:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=HLtd79qXwlmV0Z1wncyDRzG85/5B3MepIf3Z9t+c8uM=;
	b=tHOhtcfPPqZPlaJGExAmY/c2nWdMibFC6aVdXVa2ZRr0IjLXpDA3PxfE81IPuC/9Q9
	Gc078T2496bI6o50wZCFVQT9ohu+KfAfsL4TyDwMs7T1TCxKJwHZA/26DtfUo8Yfv0CV
	5q+0EW8sK37MG0DhUH2XO9eJf5+uYe7G9mulp2FTMmHCcJgUZGwZWz6YN1d64mFvTjqZ
	iE74PDIhvHuY2+GI34VcfxqLHVVnNih0wKYQq+sI0dqFijNwVCcnWvU8LUWmPtrGL9vj
	baoGW1eQatZ4EmOwKY3eBB238PSE4q0bgLcdkHc4gtxNGHvbIErYPMwOHcbzGJjD79Bx
	9gmA==
MIME-Version: 1.0
Received: by 10.220.150.14 with SMTP id w14mr7733216vcv.13.1349067228223; Sun,
	30 Sep 2012 21:53:48 -0700 (PDT)
Received: by 10.220.135.9 with HTTP; Sun, 30 Sep 2012 21:53:48 -0700 (PDT)
In-Reply-To: <CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
Date: Mon, 1 Oct 2012 10:23:48 +0530
Message-ID: <CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
From: hitesh nayyar <hitesh1907nayyar@gmail.com>
To: linux clustering <linux-cluster@redhat.com>, lists@alteeve.ca,
	raju.rajsand@gmail.com
Content-Type: multipart/alternative; boundary=f46d043c81ccea983704caf8307c
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 04:53:55 -0000

--f46d043c81ccea983704caf8307c
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am not aware of fencing.Yes you are correct i have not configured
anything related to fencing.

Can you please let me know as how can i proceed...Do i have to purchase
some sort of hardware?

How can i implement Power Fencing?

I am using virtual box machines on my desktop in which linux are installed
and have been connected through swtich.


[root@hitesh12 ~]# cat /etc/cluster/cluster.conf
<?xml version="1.0"?>
<cluster config_version="1" name="dhoni">
        <clusternodes>
                <clusternode name="hitesh12" nodeid="1"/>
                <clusternode name="saanvi12" nodeid="2"/>
        </clusternodes>
        <cman expected_votes="1" two_node="1"/>
        <fencedevices/>
        <rm/>
</cluster>






On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan <
raju.rajsand@gmail.com> wrote:

> Greetings,
>
> On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
> <hitesh1907nayyar@gmail.com> wrote:
> >
> > I have 2 Linux desktop and have following ip's and name:
> >
>
> >From what I can gather, This seems to be a desktop class machines.
> Hence they may not have IPMI/ILO etc.
>
> I am 99.99% certain that fencing has not been configured.
>
> I also doubt if it has external storage.
>
> (I can identify as I tried my experiments with clusters first time
> with such desktop class machines)
>
> The only solution for this is Power Fencing.
>
> --
> Regards,
>
> Rajagopal
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--f46d043c81ccea983704caf8307c
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,<br><br>I am not aware of fencing.Yes you are correct i have not conf=
igured anything related to fencing.<br><br>Can you please let me know as ho=
w can i proceed...Do i have to purchase some sort of hardware?<br><br>How c=
an i implement Power Fencing?<br>
<br>I am using virtual box machines on my desktop in which linux are instal=
led and have been connected through swtich.<br><br><br>[root@hitesh12 ~]# c=
at /etc/cluster/cluster.conf<br>&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster config_version=3D&quot;1&quot; name=3D&quot;dhoni&quot;&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;hitesh12&quot; nodeid=3D&qu=
ot;1&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;cluste=
rnode name=3D&quot;saanvi12&quot; nodeid=3D&quot;2&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cm=
an expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0 &lt;fencedevices/&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm/&gt;<=
br>&lt;/cluster&gt;<br><br><br><br><br><br><br><div class=3D"gmail_quote">
On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan <span dir=3D"ltr">&lt=
;<a href=3D"mailto:raju.rajsand@gmail.com" target=3D"_blank">raju.rajsand@g=
mail.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Greetings,<br>
<div><br>
On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar<br>
&lt;<a href=3D"mailto:hitesh1907nayyar@gmail.com" target=3D"_blank">hitesh1=
907nayyar@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; I have 2 Linux desktop and have following ip&#39;s and name:<br>
&gt;<br>
<br>
</div>&gt;From what I can gather, This seems to be a desktop class machines=
.<br>
Hence they may not have IPMI/ILO etc.<br>
<br>
I am 99.99% certain that fencing has not been configured.<br>
<br>
I also doubt if it has external storage.<br>
<br>
(I can identify as I tried my experiments with clusters first time<br>
with such desktop class machines)<br>
<br>
The only solution for this is Power Fencing.<br>
<span><font color=3D"#888888"><br>
--<br>
Regards,<br>
<br>
Rajagopal<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com" target=3D"_blank">Linux-cluster=
@redhat.com</a><br>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</font></span></blockquote></div><br>

--f46d043c81ccea983704caf8307c--

From lists@alteeve.ca Mon Oct  1 01:14:10 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q915EA6I028411 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 01:14:10 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q915E5hB015277
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:14:05 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q915E3V8027002
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:14:04 -0400
Received: from lemass.alteeve.ca (unknown [216.66.185.229])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 54A0C421042;
	Mon,  1 Oct 2012 01:14:01 -0400 (EDT)
Message-ID: <5069269A.2050405@alteeve.ca>
Date: Mon, 01 Oct 2012 01:14:02 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: hitesh nayyar <hitesh1907nayyar@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
In-Reply-To: <CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 05:14:10 -0000

First up, give this section a read. It will explain what fencing does 
and why you're seeing what you are;

https://alteeve.ca/w/2-Node_Red_Hat_KVM_Cluster_Tutorial#Concept.3B_Fencing

As for being virtualbox guests, you're in a bit of a spot as there 
doesn't seem to be a native agent. Google shows this though;

https://forums.virtualbox.org/viewtopic.php?f=7&t=35372

If you can switch to KVM or Xen, then you can use the fence_virsh or 
fence_xvm agents.

cheers

On 10/01/2012 12:53 AM, hitesh nayyar wrote:
> Hello,
>
> I am not aware of fencing.Yes you are correct i have not configured
> anything related to fencing.
>
> Can you please let me know as how can i proceed...Do i have to purchase
> some sort of hardware?
>
> How can i implement Power Fencing?
>
> I am using virtual box machines on my desktop in which linux are
> installed and have been connected through swtich.
>
>
> [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
> <?xml version="1.0"?>
> <cluster config_version="1" name="dhoni">
>          <clusternodes>
>                  <clusternode name="hitesh12" nodeid="1"/>
>                  <clusternode name="saanvi12" nodeid="2"/>
>          </clusternodes>
>          <cman expected_votes="1" two_node="1"/>
>          <fencedevices/>
>          <rm/>
> </cluster>
>
>
>
>
>
>
> On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan
> <raju.rajsand@gmail.com <mailto:raju.rajsand@gmail.com>> wrote:
>
>     Greetings,
>
>     On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
>     <hitesh1907nayyar@gmail.com <mailto:hitesh1907nayyar@gmail.com>> wrote:
>      >
>      > I have 2 Linux desktop and have following ip's and name:
>      >
>
>      >From what I can gather, This seems to be a desktop class machines.
>     Hence they may not have IPMI/ILO etc.
>
>     I am 99.99% certain that fencing has not been configured.
>
>     I also doubt if it has external storage.
>
>     (I can identify as I tried my experiments with clusters first time
>     with such desktop class machines)
>
>     The only solution for this is Power Fencing.
>
>     --
>     Regards,
>
>     Rajagopal
>
>     --
>     Linux-cluster mailing list
>     Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>     https://www.redhat.com/mailman/listinfo/linux-cluster
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From lists@alteeve.ca Mon Oct  1 01:49:45 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q915nj5g030920 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 01:49:45 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q915ndJk012076
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:49:39 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q915ncfk032442
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:49:38 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b9e5.dsl.look.ca
	[216.66.185.229])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id BEB7F422461;
	Mon,  1 Oct 2012 01:49:35 -0400 (EDT)
Message-ID: <50692EF0.2000505@alteeve.ca>
Date: Mon, 01 Oct 2012 01:49:36 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: hitesh nayyar <hitesh1907nayyar@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
In-Reply-To: <CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 05:49:45 -0000

Please keep replies on the mailing list. These question helps other in 
the future by being seachable in the archives.

Xen and KVM are types of hypervisors, like virtualbox is, but they run 
on Linux hosts. To use them, you would need to install linux on the bare 
machine. This in turn requires a CPU that supports virtualization (which 
most CPUs made in the last few years do support).

If you can install CentOS 6, you can use KVM which is what I recommend.

digimer

On 10/01/2012 01:26 AM, hitesh nayyar wrote:
> One more thing...till now i have used this setup:
>
> have Windows vista OS ---> Virtual Box---->Red Hat installed.
>
> If i download Xen or KVM can i use the same setup instead of Virtual Box?
>
> Windows vista OS ---->Xen or KVM ---->Red Hat installed
>
> BR//
> Hitesh
>
> On Mon, Oct 1, 2012 at 10:48 AM, hitesh nayyar
> <hitesh1907nayyar@gmail.com <mailto:hitesh1907nayyar@gmail.com>> wrote:
>
>     Hello Again,
>
>     Can you please let me know what refers to KVM or Xen? I have never
>     used this
>
>     Thanks
>
>
>     On Mon, Oct 1, 2012 at 10:44 AM, Digimer <lists@alteeve.ca
>     <mailto:lists@alteeve.ca>> wrote:
>
>         First up, give this section a read. It will explain what fencing
>         does and why you're seeing what you are;
>
>         https://alteeve.ca/w/2-Node___Red_Hat_KVM_Cluster_Tutorial#__Concept.3B_Fencing
>         <https://alteeve.ca/w/2-Node_Red_Hat_KVM_Cluster_Tutorial#Concept.3B_Fencing>
>
>         As for being virtualbox guests, you're in a bit of a spot as
>         there doesn't seem to be a native agent. Google shows this though;
>
>         https://forums.virtualbox.org/__viewtopic.php?f=7&t=35372
>         <https://forums.virtualbox.org/viewtopic.php?f=7&t=35372>
>
>         If you can switch to KVM or Xen, then you can use the
>         fence_virsh or fence_xvm agents.
>
>         cheers
>
>
>         On 10/01/2012 12:53 AM, hitesh nayyar wrote:
>
>             Hello,
>
>             I am not aware of fencing.Yes you are correct i have not
>             configured
>             anything related to fencing.
>
>             Can you please let me know as how can i proceed...Do i have
>             to purchase
>             some sort of hardware?
>
>             How can i implement Power Fencing?
>
>             I am using virtual box machines on my desktop in which linux are
>             installed and have been connected through swtich.
>
>
>             [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
>             <?xml version="1.0"?>
>             <cluster config_version="1" name="dhoni">
>                       <clusternodes>
>                               <clusternode name="hitesh12" nodeid="1"/>
>                               <clusternode name="saanvi12" nodeid="2"/>
>                       </clusternodes>
>                       <cman expected_votes="1" two_node="1"/>
>                       <fencedevices/>
>                       <rm/>
>             </cluster>
>
>
>
>
>
>
>             On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan
>             <raju.rajsand@gmail.com <mailto:raju.rajsand@gmail.com>
>             <mailto:raju.rajsand@gmail.com
>             <mailto:raju.rajsand@gmail.com>__>> wrote:
>
>                  Greetings,
>
>                  On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
>                  <hitesh1907nayyar@gmail.com
>             <mailto:hitesh1907nayyar@gmail.com>
>             <mailto:hitesh1907nayyar@__gmail.com
>             <mailto:hitesh1907nayyar@gmail.com>>> wrote:
>                   >
>                   > I have 2 Linux desktop and have following ip's and name:
>                   >
>
>                   >From what I can gather, This seems to be a desktop
>             class machines.
>                  Hence they may not have IPMI/ILO etc.
>
>                  I am 99.99% certain that fencing has not been configured.
>
>                  I also doubt if it has external storage.
>
>                  (I can identify as I tried my experiments with clusters
>             first time
>                  with such desktop class machines)
>
>                  The only solution for this is Power Fencing.
>
>                  --
>                  Regards,
>
>                  Rajagopal
>
>                  --
>                  Linux-cluster mailing list
>             Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>             <mailto:Linux-cluster@redhat.__com
>             <mailto:Linux-cluster@redhat.com>>
>             https://www.redhat.com/__mailman/listinfo/linux-cluster
>             <https://www.redhat.com/mailman/listinfo/linux-cluster>
>
>
>
>
>         --
>         Digimer
>         Papers and Projects: https://alteeve.ca
>         "Hydrogen is just a colourless, odorless gas which, if left
>         alone in sufficient quantities for long periods of time, begins
>         to think about itself."
>
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From lists@alteeve.ca Mon Oct  1 02:19:48 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q916Jlo4000516 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 02:19:48 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q916Jgr3014505
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 02:19:42 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q916Jel2020905
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 02:19:40 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b9e5.dsl.look.ca
	[216.66.185.229])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 673FC422461;
	Mon,  1 Oct 2012 02:19:38 -0400 (EDT)
Message-ID: <506935FB.8060606@alteeve.ca>
Date: Mon, 01 Oct 2012 02:19:39 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: hitesh nayyar <hitesh1907nayyar@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
In-Reply-To: <CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 06:19:48 -0000

You don't seem to be reading what I am typing. Please go back over the 
various replies and read again what I said. Follow the links and read 
what they say.

And please don't reply only to me. Click "Reply All" and include the 
mailing list.

digimer

On 10/01/2012 02:11 AM, hitesh nayyar wrote:
> Hi,
>
> I have a constraint of using Linux on bare machine for my 2 desktop.
>
> Is there not any way i can get use the agent  or perform clustering on
> Virtual box or VM ware software.....
>
> On Mon, Oct 1, 2012 at 11:19 AM, Digimer <lists@alteeve.ca
> <mailto:lists@alteeve.ca>> wrote:
>
>     Please keep replies on the mailing list. These question helps other
>     in the future by being seachable in the archives.
>
>     Xen and KVM are types of hypervisors, like virtualbox is, but they
>     run on Linux hosts. To use them, you would need to install linux on
>     the bare machine. This in turn requires a CPU that supports
>     virtualization (which most CPUs made in the last few years do support).
>
>     If you can install CentOS 6, you can use KVM which is what I recommend.
>
>     digimer
>
>
>     On 10/01/2012 01:26 AM, hitesh nayyar wrote:
>
>         One more thing...till now i have used this setup:
>
>         have Windows vista OS ---> Virtual Box---->Red Hat installed.
>
>         If i download Xen or KVM can i use the same setup instead of
>         Virtual Box?
>
>         Windows vista OS ---->Xen or KVM ---->Red Hat installed
>
>         BR//
>         Hitesh
>
>         On Mon, Oct 1, 2012 at 10:48 AM, hitesh nayyar
>         <hitesh1907nayyar@gmail.com <mailto:hitesh1907nayyar@gmail.com>
>         <mailto:hitesh1907nayyar@__gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>>> wrote:
>
>              Hello Again,
>
>              Can you please let me know what refers to KVM or Xen? I
>         have never
>              used this
>
>              Thanks
>
>
>              On Mon, Oct 1, 2012 at 10:44 AM, Digimer <lists@alteeve.ca
>         <mailto:lists@alteeve.ca>
>              <mailto:lists@alteeve.ca <mailto:lists@alteeve.ca>>> wrote:
>
>                  First up, give this section a read. It will explain
>         what fencing
>                  does and why you're seeing what you are;
>
>         https://alteeve.ca/w/2-Node_____Red_Hat_KVM_Cluster_Tutorial#____Concept.3B_Fencing
>         <https://alteeve.ca/w/2-Node___Red_Hat_KVM_Cluster_Tutorial#__Concept.3B_Fencing>
>
>
>         <https://alteeve.ca/w/2-Node___Red_Hat_KVM_Cluster_Tutorial#__Concept.3B_Fencing
>         <https://alteeve.ca/w/2-Node_Red_Hat_KVM_Cluster_Tutorial#Concept.3B_Fencing>>
>
>                  As for being virtualbox guests, you're in a bit of a
>         spot as
>                  there doesn't seem to be a native agent. Google shows
>         this though;
>
>         https://forums.virtualbox.org/____viewtopic.php?f=7&t=35372
>         <https://forums.virtualbox.org/__viewtopic.php?f=7&t=35372>
>
>
>         <https://forums.virtualbox.__org/viewtopic.php?f=7&t=35372
>         <https://forums.virtualbox.org/viewtopic.php?f=7&t=35372>>
>
>                  If you can switch to KVM or Xen, then you can use the
>                  fence_virsh or fence_xvm agents.
>
>                  cheers
>
>
>                  On 10/01/2012 12:53 AM, hitesh nayyar wrote:
>
>                      Hello,
>
>                      I am not aware of fencing.Yes you are correct i
>         have not
>                      configured
>                      anything related to fencing.
>
>                      Can you please let me know as how can i
>         proceed...Do i have
>                      to purchase
>                      some sort of hardware?
>
>                      How can i implement Power Fencing?
>
>                      I am using virtual box machines on my desktop in
>         which linux are
>                      installed and have been connected through swtich.
>
>
>                      [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
>                      <?xml version="1.0"?>
>                      <cluster config_version="1" name="dhoni">
>                                <clusternodes>
>                                        <clusternode name="hitesh12"
>         nodeid="1"/>
>                                        <clusternode name="saanvi12"
>         nodeid="2"/>
>                                </clusternodes>
>                                <cman expected_votes="1" two_node="1"/>
>                                <fencedevices/>
>                                <rm/>
>                      </cluster>
>
>
>
>
>
>
>                      On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan
>                      <raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com> <mailto:raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com>__>
>                      <mailto:raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com>
>
>                      <mailto:raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com>__>__>> wrote:
>
>                           Greetings,
>
>                           On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
>                           <hitesh1907nayyar@gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>
>                      <mailto:hitesh1907nayyar@__gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>>
>                      <mailto:hitesh1907nayyar@
>         <mailto:hitesh1907nayyar@>__gma__il.com <http://gmail.com>
>
>                      <mailto:hitesh1907nayyar@__gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>>>> wrote:
>                            >
>                            > I have 2 Linux desktop and have following
>         ip's and name:
>                            >
>
>                            >From what I can gather, This seems to be a
>         desktop
>                      class machines.
>                           Hence they may not have IPMI/ILO etc.
>
>                           I am 99.99% certain that fencing has not been
>         configured.
>
>                           I also doubt if it has external storage.
>
>                           (I can identify as I tried my experiments with
>         clusters
>                      first time
>                           with such desktop class machines)
>
>                           The only solution for this is Power Fencing.
>
>                           --
>                           Regards,
>
>                           Rajagopal
>
>                           --
>                           Linux-cluster mailing list
>         Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>         <mailto:Linux-cluster@redhat.__com
>         <mailto:Linux-cluster@redhat.com>>
>                      <mailto:Linux-cluster@redhat.
>         <mailto:Linux-cluster@redhat.>____com
>                      <mailto:Linux-cluster@redhat.__com
>         <mailto:Linux-cluster@redhat.com>>>
>         https://www.redhat.com/____mailman/listinfo/linux-cluster
>         <https://www.redhat.com/__mailman/listinfo/linux-cluster>
>
>
>         <https://www.redhat.com/__mailman/listinfo/linux-cluster
>         <https://www.redhat.com/mailman/listinfo/linux-cluster>__>
>
>
>
>
>                  --
>                  Digimer
>                  Papers and Projects: https://alteeve.ca
>                  "Hydrogen is just a colourless, odorless gas which, if left
>                  alone in sufficient quantities for long periods of
>         time, begins
>                  to think about itself."
>
>
>
>
>
>     --
>     Digimer
>     Papers and Projects: https://alteeve.ca
>     "Hydrogen is just a colourless, odorless gas which, if left alone in
>     sufficient quantities for long periods of time, begins to think
>     about itself."
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From tserong@suse.com Mon Oct  1 08:23:15 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91CNF7r014476 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 08:23:15 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91CNAn3019948
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 08:23:10 -0400
Received: from mx2.suse.de (cantor2.suse.de [195.135.220.15])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q91CN4qn009379
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 08:23:05 -0400
Received: from relay2.suse.de (unknown [195.135.220.254])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx2.suse.de (Postfix) with ESMTP id 4B29AA0FF5
	for <linux-cluster@redhat.com>; Mon,  1 Oct 2012 14:23:04 +0200 (CEST)
Message-ID: <50698B21.4020802@suse.com>
Date: Mon, 01 Oct 2012 22:22:57 +1000
From: Tim Serong <tserong@suse.com>
User-Agent: Mozilla/5.0 (X11; Linux i686;
	rv:15.0) Gecko/20120825 Thunderbird/15.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
X-Enigmail-Version: 1.4.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] CFP: Cloud Infrastructure,
 Distributed Storage and High Availability at LCA 2013
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 12:23:15 -0000

I'm pleased to announce that we will be holding a one day Cloud
Infrastructure, Distributed Storage and High Availability mini
conference[1] on Monday 28 January 2013 as part of linux.conf.au 2013 in
Canberra, Australia[2].

This miniconf is about building reliable infrastructure, from two-node
HA failover pairs to multi-thousand-core cloud systems.  You might like
to think of it as a sequel to the LCA 2012 High Availability and
Distributed Storage miniconf[3].

Do any of the following describe you?

* You're building cloud infrastructure for others to use
  (openstack, cloudstack, eucalyptus, ...)
* Your data needs to be reliably available everywhere
  (ceph, glusterfs, drbd, ...)
* Your system absolutely must be up all the time
  (pacemaker, corosync, ...)

If so, this is the miniconf for you!  Please consider submitting a
presentation at:

  http://tinyurl.com/cidsha-lca2013

We're expecting most talk slots to be 25 minutes (including questions
and changeover), but there will be openings for shorter lightning talks
and maybe a couple of longer talks.  CFP closes on Sunday November 4,
2012.  Notifications of acceptance will be emailed out after this date.

Note that there is also an OpenStack-specific miniconf[4] running on
Tuesday 29 January.  We're hoping this will give us a pretty awesome
two-day LCA 2013 CloudFest.  As a rough rule of thumb, more generic or
infrastructure-related talks should go to Cloud, Distributed Storage &
HA, while deeper OpenStack-specific talks should probably go to the
OpenStack miniconf.  If in doubt, or if you have any other questions,
please contact me directly at tserong@suse.com.

Thanks!

Tim

[1] http://lca2013.linux.org.au/schedule/30073/view_talk
[2] http://lca2013.linux.org.au/
[3]
http://lca2012.linux.org.au/wiki/index.php/Miniconfs/HighAvailabilityAndDistributedStorage
(also videos at http://www.youtube.com/playlist?list=PLE70D0FFF98BC9579)
[4] http://lca2013.linux.org.au/schedule/30100/view_talk?day=tuesday
--
Tim Serong
Senior Clustering Engineer
SUSE
tserong@suse.com

From raju.rajsand@gmail.com Mon Oct  1 12:45:35 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91GjZS9016871 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 12:45:35 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91GjU4e025461
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 12:45:30 -0400
Received: from mail-oa0-f46.google.com (mail-oa0-f46.google.com
	[209.85.219.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q91GjT5g008219
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 12:45:29 -0400
Received: by oagh16 with SMTP id h16so6094439oag.33
	for <linux-cluster@redhat.com>; Mon, 01 Oct 2012 09:45:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=4VSUdXzmU3pf1Qedh2tzWjcuNB1g0qkmAFBNRaE2Sbk=;
	b=MDQ1NWRendAVbubMrRk+WxVLWz7xHVOTwMuAceyLaZ2AEnPMOavTTDCmFJjVWrmsX2
	vCbjt5PbAxuf40XElXlBqVroEyjb0t0YtQXeoowNwbK3J/nW9CMEEajSbixrePNIa4Hv
	+EsqrgYuCA5KnabsTorOc0/T2QPDEqXiC9JoAj1TpXu7YioDh+9utpf6gMrXuoSDEHi8
	hYjLLVjyp7sK1mtJLgKbbYW48PxljTJdJNrDQslwMDxLdvfvi3Hbm6BU6mc4kxfubtcU
	oVk3Y1lhsrnjnU2lUUs6J+jAcs2SwvXqSqBG7ddQxSZIyvTTGKopMJf6yOtjDH/NCy2b
	Bugw==
MIME-Version: 1.0
Received: by 10.60.172.235 with SMTP id bf11mr11826626oec.30.1349109928887;
	Mon, 01 Oct 2012 09:45:28 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Mon, 1 Oct 2012 09:45:28 -0700 (PDT)
In-Reply-To: <506935FB.8060606@alteeve.ca>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
Date: Mon, 1 Oct 2012 22:15:28 +0530
X-Google-Sender-Auth: BaFxypzxkkdmioQbpa5WokTRrRw
Message-ID: <CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 16:45:35 -0000

Greetings,


Hitesh,

Please follow list guidlines.


On Mon, Oct 1, 2012 at 11:49 AM, Digimer <lists@alteeve.ca> wrote:
> You don't seem to be reading what I am typing. Please go back over the
> various replies and read again what I said. Follow the links and read what
> they say.
>
> And please don't reply only to me. Click "Reply All" and include the mailing
> list.
>
>>
>> I have a constraint of using Linux on bare machine for my 2 desktop.

>>                      Can you please let me know as how can i
>>         proceed...Do i have
>>                      to purchase
>>                      some sort of hardware?

Yes. You will need to buy power fencing device -- basically a power
strip with a ethernet port

I would strongly suggest you have two network port on each system.

What you want to do with a cluster?

>>
>>         One more thing...till now i have used this setup:
>>
>>         have Windows vista OS ---> Virtual Box---->Red Hat installed.
>>

You have to be kidding. You are using vista on bare metal for your HA?

>>         If i download Xen or KVM can i use the same setup instead of
>>         Virtual Box?
>>
>>         Windows vista OS ---->Xen or KVM ---->Red Hat installed

http://www.youtube.com/watch?v=oKI-tD0L18A



>>                      [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
>>                      <?xml version="1.0"?>
>>                      <cluster config_version="1" name="dhoni">

There needs to be two_node directive somewher there. Read up.

Better yet get help of some local technical person who knows what is HA.

It is a lot more than simple desktop install.

Or you need to invest quite a bit of time in learning and money in
getting some extra hardware (fence devices, switches, NIC, External
storage -- if required). And dont commit for or do that on production
without knowing what you are getting into.

If you can post more descriptively the objective of using cluster,
perhaps you will get more specific information.

Digimer's _*excellent*_ tutorial covers more or less all that you need
to know about clusters.

I wish I had that when I started playing around with that way back in 2007.

-- 
Regards,

Rajagopal

From parvez.h.shaikh@gmail.com Tue Oct  2 04:00:41 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9280f81001704 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 04:00:41 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9280Zme021339
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 04:00:35 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9280Xxc017200
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 04:00:33 -0400
Received: by bkcjk13 with SMTP id jk13so5177190bkc.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 01:00:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=ee/dID7fNkCubGgp4WR/W9C2BUYZU5KslIZlPsBcmDs=;
	b=tHKZ+1354VmxzdIyqpM3u4KZbUx7/m8rDo3LbfVKyNpYUK/VwAC8CsgcE6sCKSXL9D
	zg5USlVguoUkKAvU2wcW4KAT686JlfEpwpcPb/DLCqJBpO6NC6XzYLKAeeR3j/IM1N8m
	8lrHy2bVqq8F4DKErdDwf4Fl0uhI5UnOtPnG+ZdgWanz6IrQJulf+9gM4pzVLxjUu4op
	Fq2bsp7uxqGY2fjkkXR/pLPoPwlQz42UJ0kTQ1acjVnuuyl5gj1zpY4voj9MYJ0zK/6c
	L/fL7qOGsy4U0a2wG2vxjvr+njNNmXa9jqAWhFJkCha1EUPo4KCJVDyal7rysWS6PNO/
	bncw==
MIME-Version: 1.0
Received: by 10.204.156.81 with SMTP id v17mr2204889bkw.49.1349164832800; Tue,
	02 Oct 2012 01:00:32 -0700 (PDT)
Received: by 10.204.4.198 with HTTP; Tue, 2 Oct 2012 01:00:32 -0700 (PDT)
In-Reply-To: <CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
Date: Tue, 2 Oct 2012 13:30:32 +0530
Message-ID: <CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=0015175cb6849a3fe604cb0eeae6
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 08:00:41 -0000

--0015175cb6849a3fe604cb0eeae6
Content-Type: text/plain; charset=ISO-8859-1

What kind of cluster is this - an academic project or production quality
solution?

If its former - go for manual fencing. You wont need fence device but
failover wont be automatic

If its later - yes you'll need fence device

On Mon, Oct 1, 2012 at 10:15 PM, Rajagopal Swaminathan <
raju.rajsand@gmail.com> wrote:

> Greetings,
>
>
> Hitesh,
>
> Please follow list guidlines.
>
>
> On Mon, Oct 1, 2012 at 11:49 AM, Digimer <lists@alteeve.ca> wrote:
> > You don't seem to be reading what I am typing. Please go back over the
> > various replies and read again what I said. Follow the links and read
> what
> > they say.
> >
> > And please don't reply only to me. Click "Reply All" and include the
> mailing
> > list.
> >
> >>
> >> I have a constraint of using Linux on bare machine for my 2 desktop.
>
> >>                      Can you please let me know as how can i
> >>         proceed...Do i have
> >>                      to purchase
> >>                      some sort of hardware?
>
> Yes. You will need to buy power fencing device -- basically a power
> strip with a ethernet port
>
> I would strongly suggest you have two network port on each system.
>
> What you want to do with a cluster?
>
> >>
> >>         One more thing...till now i have used this setup:
> >>
> >>         have Windows vista OS ---> Virtual Box---->Red Hat installed.
> >>
>
> You have to be kidding. You are using vista on bare metal for your HA?
>
> >>         If i download Xen or KVM can i use the same setup instead of
> >>         Virtual Box?
> >>
> >>         Windows vista OS ---->Xen or KVM ---->Red Hat installed
>
> http://www.youtube.com/watch?v=oKI-tD0L18A
>
>
>
> >>                      [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
> >>                      <?xml version="1.0"?>
> >>                      <cluster config_version="1" name="dhoni">
>
> There needs to be two_node directive somewher there. Read up.
>
> Better yet get help of some local technical person who knows what is HA.
>
> It is a lot more than simple desktop install.
>
> Or you need to invest quite a bit of time in learning and money in
> getting some extra hardware (fence devices, switches, NIC, External
> storage -- if required). And dont commit for or do that on production
> without knowing what you are getting into.
>
> If you can post more descriptively the objective of using cluster,
> perhaps you will get more specific information.
>
> Digimer's _*excellent*_ tutorial covers more or less all that you need
> to know about clusters.
>
> I wish I had that when I started playing around with that way back in 2007.
>
> --
> Regards,
>
> Rajagopal
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--0015175cb6849a3fe604cb0eeae6
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

What kind of cluster is this - an academic project or production quality so=
lution?<br><br>If its former - go for manual fencing. You wont need fence d=
evice but failover wont be automatic<br><br>If its later - yes you&#39;ll n=
eed fence device<br>
<br><div class=3D"gmail_quote">On Mon, Oct 1, 2012 at 10:15 PM, Rajagopal S=
waminathan <span dir=3D"ltr">&lt;<a href=3D"mailto:raju.rajsand@gmail.com" =
target=3D"_blank">raju.rajsand@gmail.com</a>&gt;</span> wrote:<br><blockquo=
te class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc so=
lid;padding-left:1ex">
Greetings,<br>
<br>
<br>
Hitesh,<br>
<br>
Please follow list guidlines.<br>
<div class=3D"im"><br>
<br>
On Mon, Oct 1, 2012 at 11:49 AM, Digimer &lt;<a href=3D"mailto:lists@alteev=
e.ca">lists@alteeve.ca</a>&gt; wrote:<br>
&gt; You don&#39;t seem to be reading what I am typing. Please go back over=
 the<br>
&gt; various replies and read again what I said. Follow the links and read =
what<br>
&gt; they say.<br>
&gt;<br>
&gt; And please don&#39;t reply only to me. Click &quot;Reply All&quot; and=
 include the mailing<br>
&gt; list.<br>
&gt;<br>
&gt;&gt;<br>
</div><div class=3D"im">&gt;&gt; I have a constraint of using Linux on bare=
 machine for my 2 desktop.<br>
<br>
</div><div class=3D"im">&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0Can you please let me know as how can i<br>
&gt;&gt; =A0 =A0 =A0 =A0 proceed...Do i have<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0to purchase<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0some sort of hardware?<=
br>
<br>
</div>Yes. You will need to buy power fencing device -- basically a power<b=
r>
strip with a ethernet port<br>
<br>
I would strongly suggest you have two network port on each system.<br>
<br>
What you want to do with a cluster?<br>
<div class=3D"im"><br>
&gt;&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 One more thing...till now i have used this setup:<=
br>
&gt;&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 have Windows vista OS ---&gt; Virtual Box----&gt;R=
ed Hat installed.<br>
&gt;&gt;<br>
<br>
</div>You have to be kidding. You are using vista on bare metal for your HA=
?<br>
<div class=3D"im"><br>
&gt;&gt; =A0 =A0 =A0 =A0 If i download Xen or KVM can i use the same setup =
instead of<br>
&gt;&gt; =A0 =A0 =A0 =A0 Virtual Box?<br>
&gt;&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 Windows vista OS ----&gt;Xen or KVM ----&gt;Red Ha=
t installed<br>
<br>
</div><a href=3D"http://www.youtube.com/watch?v=3DoKI-tD0L18A" target=3D"_b=
lank">http://www.youtube.com/watch?v=3DoKI-tD0L18A</a><br>
<div class=3D"im"><br>
<br>
<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[root@hitesh12 ~]# cat =
/etc/cluster/cluster.conf<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;?xml version=3D&quo=
t;1.0&quot;?&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;cluster config_vers=
ion=3D&quot;1&quot; name=3D&quot;dhoni&quot;&gt;<br>
<br>
</div>There needs to be two_node directive somewher there. Read up.<br>
<br>
Better yet get help of some local technical person who knows what is HA.<br=
>
<br>
It is a lot more than simple desktop install.<br>
<br>
Or you need to invest quite a bit of time in learning and money in<br>
getting some extra hardware (fence devices, switches, NIC, External<br>
storage -- if required). And dont commit for or do that on production<br>
without knowing what you are getting into.<br>
<br>
If you can post more descriptively the objective of using cluster,<br>
perhaps you will get more specific information.<br>
<br>
Digimer&#39;s _*excellent*_ tutorial covers more or less all that you need<=
br>
to know about clusters.<br>
<br>
I wish I had that when I started playing around with that way back in 2007.=
<br>
<div class=3D"im"><br>
--<br>
Regards,<br>
<br>
Rajagopal<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
</div><a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" tar=
get=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br=
>
</blockquote></div><br>

--0015175cb6849a3fe604cb0eeae6--

From lists@alteeve.ca Tue Oct  2 09:38:37 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92DcbsU015631 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 09:38:37 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q92DcVSH026699
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:38:32 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92DcUa5026782
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:38:30 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b005.dsl.look.ca
	[216.66.176.5])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id E366A422461;
	Tue,  2 Oct 2012 09:38:27 -0400 (EDT)
Message-ID: <506AEE54.7070209@alteeve.ca>
Date: Tue, 02 Oct 2012 09:38:28 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
In-Reply-To: <CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 13:38:37 -0000

On 10/02/2012 04:00 AM, Parvez Shaikh wrote:
> What kind of cluster is this - an academic project or production quality
> solution?
>
> If its former - go for manual fencing. You wont need fence device but
> failover wont be automatic

*Please* don't do this. Manual fencing support was dropped for a reason. 
It's *far* too easy to mess things up when an admin uses it before 
identifying a problem.

> If its later - yes you'll need fence device

This is the only sane option; Academic or production. Fencing is an 
integral part of the cluster and you do yourself no favour by not 
learning it in an academic setup.

-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odourless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From parvez.h.shaikh@gmail.com Tue Oct  2 09:43:48 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92Dhm4L016685 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 09:43:48 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q92DhgfX008275
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:43:42 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92DheXM003231
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:43:41 -0400
Received: by bkcjk13 with SMTP id jk13so5384197bkc.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 06:43:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type;
	bh=LqM9w+DMD74LFuvAa92+BtCoflkHKaN5mD2hBT8ZiFg=;
	b=OcxQjU3RzmOSyTkj/ZLu8JyFdztRbMpKklX5BpgBJ+Fy1W3T5HxkhvsBdtfk+vnXTc
	lfDEMtUCS/9D4hqB9QqpZ6Z6Pg/vwVuqVOKhqP0aG9FWhmsqm29yh/p4HAq/7zI+DMza
	T/26Q5MrlukigQAdoCo6hPnncIIxUjWNrIyU3imL9DCRBVyRB14L5OkwmhtK4JqBaGEN
	lC97p49bB/7++8w+L2OWEeKhRsnvpQiUxzfRlW+ppLPMSSYZ2A+JfbymRcfwXBOm3Zx9
	+BXRzUsoyBUOkc5hhms6b3/f0uU5J20qPw5xH1CGdOcZRZhk0jQqMTPWgMwE57Cqbi1I
	7Yag==
MIME-Version: 1.0
Received: by 10.205.123.147 with SMTP id gk19mr363267bkc.90.1349185420410;
	Tue, 02 Oct 2012 06:43:40 -0700 (PDT)
Received: by 10.204.4.198 with HTTP; Tue, 2 Oct 2012 06:43:40 -0700 (PDT)
In-Reply-To: <506AEE54.7070209@alteeve.ca>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
	<506AEE54.7070209@alteeve.ca>
Date: Tue, 2 Oct 2012 19:13:40 +0530
Message-ID: <CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=000e0ce03f0eb83f2004cb13b5bf
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 13:43:48 -0000

--000e0ce03f0eb83f2004cb13b5bf
Content-Type: text/plain; charset=ISO-8859-1

Hi Digimer,

Could you please give me reference/case studies of problem about why manual
fencing was dropped and how automated fencing is fixing those?

Thanks,
Parvez

On Tue, Oct 2, 2012 at 7:08 PM, Digimer <lists@alteeve.ca> wrote:

> On 10/02/2012 04:00 AM, Parvez Shaikh wrote:
>
>> What kind of cluster is this - an academic project or production quality
>> solution?
>>
>> If its former - go for manual fencing. You wont need fence device but
>> failover wont be automatic
>>
>
> *Please* don't do this. Manual fencing support was dropped for a reason.
> It's *far* too easy to mess things up when an admin uses it before
> identifying a problem.
>
>
>  If its later - yes you'll need fence device
>>
>
> This is the only sane option; Academic or production. Fencing is an
> integral part of the cluster and you do yourself no favour by not learning
> it in an academic setup.
>
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca
> "Hydrogen is just a colourless, odourless gas which, if left alone in
> sufficient quantities for long periods of time, begins to think about
> itself."
>

--000e0ce03f0eb83f2004cb13b5bf
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Digimer,<br><br>Could you please give me reference/case studies of probl=
em about why manual fencing was dropped and how automated fencing is fixing=
 those?<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote">On Tue, =
Oct 2, 2012 at 7:08 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"mailto:lis=
ts@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div class=3D"im">On 10/02/2012 04:00 AM, Pa=
rvez Shaikh wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
What kind of cluster is this - an academic project or production quality<br=
>
solution?<br>
<br>
If its former - go for manual fencing. You wont need fence device but<br>
failover wont be automatic<br>
</blockquote>
<br></div>
*Please* don&#39;t do this. Manual fencing support was dropped for a reason=
. It&#39;s *far* too easy to mess things up when an admin uses it before id=
entifying a problem.<div class=3D"im"><br>
<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
If its later - yes you&#39;ll need fence device<br>
</blockquote>
<br></div>
This is the only sane option; Academic or production. Fencing is an integra=
l part of the cluster and you do yourself no favour by not learning it in a=
n academic setup.<div class=3D"im"><br>
<br>
-- <br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca" target=3D"_blank">https=
://alteeve.ca</a><br></div>
&quot;Hydrogen is just a colourless, odourless gas which, if left alone in =
sufficient quantities for long periods of time, begins to think about itsel=
f.&quot;<br>
</blockquote></div><br>

--000e0ce03f0eb83f2004cb13b5bf--

From lists@alteeve.ca Tue Oct  2 10:03:14 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92E3EwB019443 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 10:03:14 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q92E38V3017364
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 10:03:09 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92E37n2009493
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 10:03:07 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b005.dsl.look.ca
	[216.66.176.5])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 2E0D3422488;
	Tue,  2 Oct 2012 10:03:05 -0400 (EDT)
Message-ID: <506AF41A.5000906@alteeve.ca>
Date: Tue, 02 Oct 2012 10:03:06 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: Parvez Shaikh <parvez.h.shaikh@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
	<506AEE54.7070209@alteeve.ca>
	<CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
In-Reply-To: <CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 14:03:14 -0000

This talks about how manual fencing isn't actual fencing;

https://fedorahosted.org/cluster/wiki/Fence

There was a page where it was said that manual fencing was in no way 
supported, but I can't find it at the moment.

The reason it is not safe is that an admin is likely to issue it in a 
panic while trying to get a hung cluster back online. If this happens 
without first ensuring the peer node(s) is fenced, you can walk into a 
split-brain.

digimer

On 10/02/2012 09:43 AM, Parvez Shaikh wrote:
> Hi Digimer,
>
> Could you please give me reference/case studies of problem about why
> manual fencing was dropped and how automated fencing is fixing those?
>
> Thanks,
> Parvez
>
> On Tue, Oct 2, 2012 at 7:08 PM, Digimer <lists@alteeve.ca
> <mailto:lists@alteeve.ca>> wrote:
>
>     On 10/02/2012 04:00 AM, Parvez Shaikh wrote:
>
>         What kind of cluster is this - an academic project or production
>         quality
>         solution?
>
>         If its former - go for manual fencing. You wont need fence
>         device but
>         failover wont be automatic
>
>
>     *Please* don't do this. Manual fencing support was dropped for a
>     reason. It's *far* too easy to mess things up when an admin uses it
>     before identifying a problem.
>
>
>         If its later - yes you'll need fence device
>
>
>     This is the only sane option; Academic or production. Fencing is an
>     integral part of the cluster and you do yourself no favour by not
>     learning it in an academic setup.
>
>
>     --
>     Digimer
>     Papers and Projects: https://alteeve.ca
>     "Hydrogen is just a colourless, odourless gas which, if left alone
>     in sufficient quantities for long periods of time, begins to think
>     about itself."
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From raju.rajsand@gmail.com Tue Oct  2 12:08:16 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92G8GnP006293 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 12:08:16 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92G8Bet032316
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 12:08:11 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92G89EL027603
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 12:08:10 -0400
Received: by obbuo13 with SMTP id uo13so7249171obb.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 09:08:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=kY/v/QKULWSeSJ2bibixxKcbYYnfh116xcOUAIvpH7Q=;
	b=UiOAyMVK8pGUXy2DOH+t4JBbZhSIjYpNO/SuvMIHb3tB2Ptfexrb5SL2zHIoOC2Vd8
	gYoRXCJXPdDzYqSWTX1zVuaihWY/yekEMdfyCA1dHZJgJTPOcnUex2ItvXD70CUNywng
	I3ZUKV/P2ebflHJjV6tBjd3oHBcf6znymLAJw9JM2UYFw5yFqxETiJvStSYf8GuGt17u
	PLEorCahZwH+LDlQveeafYTLMpJVcg8YCBkx5DGaHVG+biBIxUB4Pqg/mT4zPvfTe1Om
	du80YWy0FO1HSf6hadFQCc6vH72gJXnMDTD3S4NqMeCjcZqjJtdVMzaLnWkW6uOrI9wc
	Ufdg==
MIME-Version: 1.0
Received: by 10.60.14.165 with SMTP id q5mr3979239oec.28.1349194089718; Tue,
	02 Oct 2012 09:08:09 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Tue, 2 Oct 2012 09:08:09 -0700 (PDT)
In-Reply-To: <506AF41A.5000906@alteeve.ca>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
	<506AEE54.7070209@alteeve.ca>
	<CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
	<506AF41A.5000906@alteeve.ca>
Date: Tue, 2 Oct 2012 21:38:09 +0530
X-Google-Sender-Auth: NVp034V4MWJFGmakOPbuCe76wdU
Message-ID: <CA+YdgaqWTJ7HHobz=k4SGJ-fK_T02meU4AXh4GvpCQq5eC5CoQ@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 16:08:16 -0000

Greetings,

On Tue, Oct 2, 2012 at 7:33 PM, Digimer <lists@alteeve.ca> wrote:
>
> The reason it is not safe is that an admin is likely to issue it in a panic
> while trying to get a hung cluster back online. If this happens without
>

+1
+1
+1

> first ensuring the peer node(s) is fenced, you can walk into a split-brain.

My first attempts without fencing landed me in the nightmare of "been
there done that" of cleaning up the mess of split brain or more aptly,
"the fluid brain which hit the fan"

To rephrase the old adage "To err is human, but to really, completely
mess it up, it takes a cluster with split brain". It might be probably
easier to use magnet to write bits on the disk than to clean up *that*
mess.

Not to talk about downtime and the fury of users.

No baby, A HA cluster ain't worth its name without fencing.

And mine was in an academic environment.

-- 
Regards,

Rajagopal

From parvez.h.shaikh@gmail.com Wed Oct  3 01:23:25 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q935NPuI017851 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 3 Oct 2012 01:23:25 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q935NKNe027795
	for <linux-cluster@redhat.com>; Wed, 3 Oct 2012 01:23:20 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q935NHQv009154
	for <linux-cluster@redhat.com>; Wed, 3 Oct 2012 01:23:18 -0400
Received: by bkcjk13 with SMTP id jk13so5738562bkc.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 22:23:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=SPYEdN/XxalBfTOg2ZYSADYVaiNIBMyf/5a0wmS03y0=;
	b=k4pVutRIDMBovAVAAoA2DrWH8WvMhQhZhgQi8eARZoJdBiaAOFjeIZa/uwf82qxyKB
	H2insPzFQy1mLvkFtUiQMxpls0qGVub5kNXUVpSp7cLGV/iJPu0lgJTXE1hI4rB66M6T
	ZxwOxjMpOlOe/Qu4wgUOd8vv5e0nSF0ScniSvYl7E6cSXUMxZpD918+qBhPrgZlT4xNx
	6fiYGtEnbKucANXMJS4w7BRb5429hLt5l5ge0eNlZ4epVAxv+AGt4EruLvgYOzH2Rra8
	dY3U+JWUKJgA0zQIpokPBO07n/y2M1Uz9C3Stn5gWXu+gb1+VFzAMmYbfYbAp9fyli0t
	KkXQ==
MIME-Version: 1.0
Received: by 10.205.137.7 with SMTP id im7mr166510bkc.25.1349241797213; Tue,
	02 Oct 2012 22:23:17 -0700 (PDT)
Received: by 10.204.4.198 with HTTP; Tue, 2 Oct 2012 22:23:17 -0700 (PDT)
In-Reply-To: <CADFPcS3xSoq0UnxAwZPTtrgxvURt15-W-5i3nBjMo90qDkgfPg@mail.gmail.com>
References: <CADFPcS28S1nNMFBtVZ8bONBn=jWtF17CuBBcd4bbSVSViovKhg@mail.gmail.com>
	<CADFPcS0qL-m7_aHGVzH+baMHXp6io=YsbWSkcjs0JPrCt0sa1g@mail.gmail.com>
	<1347383423.10128.555.camel@aeapen.blr.redhat.com>
	<CADFPcS1tAJS+GTA5+dfvFuLuD+8GJnsHrm8FE3tQD+Zrfn_8Jw@mail.gmail.com>
	<1347445264.32050.398.camel@aeapen.blr.redhat.com>
	<CADFPcS3QiReQ96ZV6a1+0hNSOYc=ouzX1YiW-YkropJFa0YADg@mail.gmail.com>
	<CADFPcS3xSoq0UnxAwZPTtrgxvURt15-W-5i3nBjMo90qDkgfPg@mail.gmail.com>
Date: Wed, 3 Oct 2012 10:53:17 +0530
Message-ID: <CAKrd533gB9t4-nzf+5sU=mfqNFtX8Q=nWT83zuEzzqKbLJrCbg@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Renchu Mathew <renchumv@gmail.com>,
	linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=000e0ce03dc209fd4b04cb20d604
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Hi
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 03 Oct 2012 05:23:25 -0000

--000e0ce03dc209fd4b04cb20d604
Content-Type: text/plain; charset=ISO-8859-1

A curious observation, there is a sudden surge of sending emails on private
addresses rather than sending over a mailing list.

Please send your doubts / questions on mailing list "
linux-cluster@redhat.com" instead of addressing personally.

Regarding configuration for manual fencing - I don't have it with me, it
was available with RHEL 5.5. Check it out in system-config-cluster tool if
you can add manual fencing.

Thanks,
Parvez

On Wed, Oct 3, 2012 at 10:46 AM, Renchu Mathew <renchumv@gmail.com> wrote:

>  Hi Purvez,
>
> I am trying to setup a test cluster environmet. But I haven't doen
> fencing. Please find below error messages. Some time after the nodes
> restarted, the other node is going down. can you please send me
> theconfiguration for manual fencing?
>
>
>>  > Please find attached my cluster setup. It is not stable
>> > and /var/log/messages shows the below errors.
>> >
>> >
>> > Sep 11 08:49:10 node1 corosync[1814]:   [QUORUM] Members[2]: 1 2
>> > Sep 11 08:49:10 node1 corosync[1814]:   [QUORUM] Members[2]: 1 2
>> > Sep 11 08:49:10 node1 corosync[1814]:   [CPG   ] chosen downlist:
>> > sender r(0) ip(192.168.1.251) ; members(old:2 left:1)
>> > Sep 11 08:49:10 node1 corosync[1814]:   [MAIN  ] Completed service
>> > synchronization, ready to provide service.
>> > Sep 11 08:49:11 node1 corosync[1814]: cman killed by node 2 because we
>> > were killed by cman_tool or other application
>> > Sep 11 08:49:11 node1 fenced[1875]: telling cman to remove nodeid 2
>> > from cluster
>> > Sep 11 08:49:11 node1 fenced[1875]: cluster is down, exiting
>> > Sep 11 08:49:11 node1 gfs_controld[1950]: cluster is down, exiting
>> > Sep 11 08:49:11 node1 gfs_controld[1950]: daemon cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 gfs_controld[1950]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cluster is down, exiting
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: daemon cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 fenced[1875]: daemon cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 rgmanager[2409]: #67: Shutting down uncleanly
>> > Sep 11 08:49:11 node1 rgmanager[17059]: [clusterfs] unmounting /Data
>> > Sep 11 08:49:11 node1 rgmanager[17068]: [clusterfs] Sending SIGTERM to
>> > processes on /Data
>> > Sep 11 08:49:16 node1 rgmanager[17104]: [clusterfs] unmounting /Data
>> > Sep 11 08:49:16 node1 rgmanager[17113]: [clusterfs] Sending SIGKILL to
>> > processes on /Data
>> > Sep 11 08:49:19 node1 kernel: dlm: closing connection to node 2
>> > Sep 11 08:49:19 node1 kernel: dlm: closing connection to node 1
>> > Sep 11 08:49:19 node1 kernel: dlm: gfs2: no userland control daemon,
>> > stopping lockspace
>> > Sep 11 08:49:22 node1 rgmanager[17149]: [clusterfs] unmounting /Data
>> > Sep 11 08:49:22 node1 rgmanager[17158]: [clusterfs] Sending SIGKILL to
>> > processes on /Data
>> >
>> >
>> >
>> > Also when I try to restart the cman service, below error comes.
>> > Starting cluster:
>> >    Checking if cluster has been disabled at boot...        [  OK  ]
>> >    Checking Network Manager...                             [  OK  ]
>> >    Global setup...                                         [  OK  ]
>> >    Loading kernel modules...                               [  OK  ]
>> >    Mounting configfs...                                    [  OK  ]
>> >    Starting cman...                                        [  OK  ]
>> >    Waiting for quorum...                                   [  OK  ]
>> >    Starting fenced...                                      [  OK  ]
>> >    Starting dlm_controld...                                [  OK  ]
>> >    Starting gfs_controld...                                [  OK  ]
>> >    Unfencing self... fence_node: cannot connect to cman
>> >                                                            [FAILED]
>> > Stopping cluster:
>> >    Leaving fence domain...                                 [  OK  ]
>> >    Stopping gfs_controld...                                [  OK  ]
>> >    Stopping dlm_controld...                                [  OK  ]
>> >    Stopping fenced...                                      [  OK  ]
>> >    Stopping cman...                                        [  OK  ]
>> >    Unloading kernel modules...                             [  OK  ]
>> >    Unmounting configfs...                                  [  OK  ]
>> >
>> > Thanks again.
>> > Renchu Mathew
>> > On Tue, Sep 11, 2012 at 9:10 PM, Arun Eapen CISSP, RHCA
>> > <arun@redhat.com> wrote:
>> >
>> >
>> >
>> >         Put the fenced in debug mode and copy the error messages, for
>> >         me to
>> >         debug
>> >
>> >         On Tue, 2012-09-11 at 11:52 +0400, Renchu Mathew wrote:
>> >         > Hi Arun,
>> >         >
>> >         > I have done the RH436 course in conducted by you at Redhat
>> >         b'lore. How
>> >         > r u?
>> >         >
>> >         > I have configured a 2 node failover cluster setup (almost
>> >         same like
>> >         > our RH436 lab setup in b'lore) It is almost ok except
>> >         fencing. If I
>> >         > pull the active node network cable it is not switching to
>> >         the other
>> >         > automatically. It is getting hung. Then I have to do this
>> >         manually. Is
>> >         > there any script for creating the dummy fencing in RHCS
>> >         which will
>> >         > restart or shutdown the other node. Please find attached my
>> >         > cluster.conf file. is there anyway we can power fence using
>> >         APC UPS.
>> >         >
>> >         > Could you please help me if you get some time.
>> >         >
>> >         > Thanks and regards
>> >         > Renchu Mathew
>> >         >
>> >         >
>> >         >
>> >
>> >
>> >
>> >         --
>> >         Arun Eapen
>> >         CISSP, RHC{A,DS,E,I,SS,VA,X}
>> >         Senior Technical Consultant & Certification Poobah
>> >         Red Hat India Pvt. Ltd.,
>> >         No - 4/1, Bannergatta Road,
>> >         IBC Knowledge Park,
>> >         11th floor, Tower D,
>> >         Bangalore - 560029, INDIA.
>> >
>> >
>> >
>>
>>
>> --
>> Arun Eapen
>> CISSP, RHC{A,DS,E,I,SS,VA,X}
>> Senior Technical Consultant & Certification Poobah
>> Red Hat India Pvt. Ltd.,
>> No - 4/1, Bannergatta Road,
>> IBC Knowledge Park,
>> 11th floor, Tower D,
>> Bangalore - 560029, INDIA.
>>
>
>
>

--000e0ce03dc209fd4b04cb20d604
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

A curious observation, there is a sudden surge of sending emails on private=
 addresses rather than sending over a mailing list.<br><br>Please send your=
 doubts / questions on mailing list &quot;<span class=3D"gI"><a href=3D"mai=
lto:linux-cluster@redhat.com">linux-cluster@redhat.com</a>&quot; instead of=
 addressing personally.<br>
<br>Regarding configuration for manual fencing - I don&#39;t have it with m=
e, it was available with RHEL 5.5. Check it out in system-config-cluster to=
ol if you can add manual fencing.<br><br>Thanks,<br>Parvez<br></span><br>
<div class=3D"gmail_quote">On Wed, Oct 3, 2012 at 10:46 AM, Renchu Mathew <=
span dir=3D"ltr">&lt;<a href=3D"mailto:renchumv@gmail.com" target=3D"_blank=
">renchumv@gmail.com</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_qu=
ote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-left:1px solid rgb(204,204,20=
4);padding-left:1ex">
<div dir=3D"ltr"><div class=3D"gmail_quote">
<div dir=3D"ltr">
<div class=3D"gmail_quote">
<div>Hi Purvez,</div>
<div>=A0</div>
<div>I am trying to setup a test cluster environmet. But I haven&#39;t doen=
 fencing. Please find below error messages. Some time after the nodes resta=
rted, the other node is going down. can you please send me theconfiguration=
 for manual fencing?</div>


<div>=A0</div>
<blockquote style=3D"border-left:1px solid rgb(204,204,204);margin:0px 0px =
0px 0.8ex;padding-left:1ex" class=3D"gmail_quote">
<div>
<div>&gt; Please find attached my cluster setup. It is not stable<br>&gt; a=
nd /var/log/messages shows the below errors.<br>&gt;<br>&gt;<br>&gt; Sep 11=
 08:49:10 node1 corosync[1814]: =A0 [QUORUM] Members[2]: 1 2<br>&gt; Sep 11=
 08:49:10 node1 corosync[1814]: =A0 [QUORUM] Members[2]: 1 2<br>

&gt; Sep 11 08:49:10 node1 corosync[1814]: =A0 [CPG =A0 ] chosen downlist:<=
br>&gt; sender r(0) ip(192.168.1.251) ; members(old:2 left:1)<br>&gt; Sep 1=
1 08:49:10 node1 corosync[1814]: =A0 [MAIN =A0] Completed service<br>&gt; s=
ynchronization, ready to provide service.<br>

&gt; Sep 11 08:49:11 node1 corosync[1814]: cman killed by node 2 because we=
<br>&gt; were killed by cman_tool or other application<br>&gt; Sep 11 08:49=
:11 node1 fenced[1875]: telling cman to remove nodeid 2<br>&gt; from cluste=
r<br>

&gt; Sep 11 08:49:11 node1 fenced[1875]: cluster is down, exiting<br>&gt; S=
ep 11 08:49:11 node1 gfs_controld[1950]: cluster is down, exiting<br>&gt; S=
ep 11 08:49:11 node1 gfs_controld[1950]: daemon cpg_dispatch error 2<br>

&gt; Sep 11 08:49:11 node1 gfs_controld[1950]: cpg_dispatch error 2<br>&gt;=
 Sep 11 08:49:11 node1 dlm_controld[1889]: cluster is down, exiting<br>&gt;=
 Sep 11 08:49:11 node1 dlm_controld[1889]: daemon cpg_dispatch error 2<br>

&gt; Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2<br>&gt;=
 Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2<br>&gt; Sep=
 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2<br>&gt; Sep 11 =
08:49:11 node1 fenced[1875]: daemon cpg_dispatch error 2<br>

&gt; Sep 11 08:49:11 node1 rgmanager[2409]: #67: Shutting down uncleanly<br=
>&gt; Sep 11 08:49:11 node1 rgmanager[17059]: [clusterfs] unmounting /Data<=
br>&gt; Sep 11 08:49:11 node1 rgmanager[17068]: [clusterfs] Sending SIGTERM=
 to<br>

&gt; processes on /Data<br>&gt; Sep 11 08:49:16 node1 rgmanager[17104]: [cl=
usterfs] unmounting /Data<br>&gt; Sep 11 08:49:16 node1 rgmanager[17113]: [=
clusterfs] Sending SIGKILL to<br>&gt; processes on /Data<br>&gt; Sep 11 08:=
49:19 node1 kernel: dlm: closing connection to node 2<br>

&gt; Sep 11 08:49:19 node1 kernel: dlm: closing connection to node 1<br>&gt=
; Sep 11 08:49:19 node1 kernel: dlm: gfs2: no userland control daemon,<br>&=
gt; stopping lockspace<br>&gt; Sep 11 08:49:22 node1 rgmanager[17149]: [clu=
sterfs] unmounting /Data<br>

&gt; Sep 11 08:49:22 node1 rgmanager[17158]: [clusterfs] Sending SIGKILL to=
<br>&gt; processes on /Data<br>&gt;<br>&gt;<br>&gt;<br>&gt; Also when I try=
 to restart the cman service, below error comes.<br>&gt; Starting cluster:<=
br>

&gt; =A0 =A0Checking if cluster has been disabled at boot... =A0 =A0 =A0 =
=A0[ =A0OK =A0]<br>&gt; =A0 =A0Checking Network Manager... =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Global =
setup... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 [ =A0OK =A0]<br>

&gt; =A0 =A0Loading kernel modules... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Mounting configfs... =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =
=A0OK =A0]<br>&gt; =A0 =A0Starting cman... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>

&gt; =A0 =A0Waiting for quorum... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Starting fenced... =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
[ =A0OK =A0]<br>&gt; =A0 =A0Starting dlm_controld... =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>

&gt; =A0 =A0Starting gfs_controld... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>&gt; =A0 =A0Unfencing self... fe=
nce_node: cannot connect to cman<br>&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0[FAILED]<br>&gt; Stopping cluster:<br>

&gt; =A0 =A0Leaving fence domain... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Stopping gfs_controld.=
.. =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =
=A0]<br>&gt; =A0 =A0Stopping dlm_controld... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>

&gt; =A0 =A0Stopping fenced... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>&gt; =A0 =A0Stopping cman...=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0[ =A0OK =A0]<br>&gt; =A0 =A0Unloading kernel modules... =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>

&gt; =A0 =A0Unmounting configfs... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>&gt;<br>&gt; Thanks again.<br>&g=
t; Renchu Mathew<br>&gt; On Tue, Sep 11, 2012 at 9:10 PM, Arun Eapen CISSP,=
 RHCA<br>&gt; &lt;<a href=3D"mailto:arun@redhat.com" target=3D"_blank">arun=
@redhat.com</a>&gt; wrote:<br>

&gt;<br>&gt;<br>&gt;<br>&gt; =A0 =A0 =A0 =A0 Put the fenced in debug mode a=
nd copy the error messages, for<br>&gt; =A0 =A0 =A0 =A0 me to<br>&gt; =A0 =
=A0 =A0 =A0 debug<br>&gt;<br>&gt; =A0 =A0 =A0 =A0 On Tue, 2012-09-11 at 11:=
52 +0400, Renchu Mathew wrote:<br>

&gt; =A0 =A0 =A0 =A0 &gt; Hi Arun,<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0=
 =A0 =A0 =A0 &gt; I have done the RH436 course in conducted by you at Redha=
t<br>&gt; =A0 =A0 =A0 =A0 b&#39;lore. How<br>&gt; =A0 =A0 =A0 =A0 &gt; r u?=
<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0 =A0 =A0 =A0 &gt; I have configure=
d a 2 node failover cluster setup (almost<br>

&gt; =A0 =A0 =A0 =A0 same like<br>&gt; =A0 =A0 =A0 =A0 &gt; our RH436 lab s=
etup in b&#39;lore) It is almost ok except<br>&gt; =A0 =A0 =A0 =A0 fencing.=
 If I<br>&gt; =A0 =A0 =A0 =A0 &gt; pull the active node network cable it is=
 not switching to<br>&gt; =A0 =A0 =A0 =A0 the other<br>

&gt; =A0 =A0 =A0 =A0 &gt; automatically. It is getting hung. Then I have to=
 do this<br>&gt; =A0 =A0 =A0 =A0 manually. Is<br>&gt; =A0 =A0 =A0 =A0 &gt; =
there any script for creating the dummy fencing in RHCS<br>&gt; =A0 =A0 =A0=
 =A0 which will<br>&gt; =A0 =A0 =A0 =A0 &gt; restart or shutdown the other =
node. Please find attached my<br>

&gt; =A0 =A0 =A0 =A0 &gt; cluster.conf file. is there anyway we can power f=
ence using<br>&gt; =A0 =A0 =A0 =A0 APC UPS.<br>&gt; =A0 =A0 =A0 =A0 &gt;<br=
>&gt; =A0 =A0 =A0 =A0 &gt; Could you please help me if you get some time.<b=
r>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0 =A0 =A0 =A0 &gt; Thanks and regards=
<br>

&gt; =A0 =A0 =A0 =A0 &gt; Renchu Mathew<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt=
; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt;<br>&gt;<br>&gt;=
<br>&gt; =A0 =A0 =A0 =A0 --<br>&gt; =A0 =A0 =A0 =A0 Arun Eapen<br>&gt; =A0 =
=A0 =A0 =A0 CISSP, RHC{A,DS,E,I,SS,VA,X}<br>&gt; =A0 =A0 =A0 =A0 Senior Tec=
hnical Consultant &amp; Certification Poobah<br>

&gt; =A0 =A0 =A0 =A0 Red Hat India Pvt. Ltd.,<br>&gt; =A0 =A0 =A0 =A0 No - =
4/1, Bannergatta Road,<br>&gt; =A0 =A0 =A0 =A0 IBC Knowledge Park,<br>&gt; =
=A0 =A0 =A0 =A0 11th floor, Tower D,<br>&gt; =A0 =A0 =A0 =A0 Bangalore - 56=
0029, INDIA.<br>&gt;<br>&gt;<br>&gt;<br>

<br><span class=3D"HOEnZb"><font color=3D"#888888"><span><font color=3D"#88=
8888"><br>--<br>Arun Eapen<br>CISSP, RHC{A,DS,E,I,SS,VA,X}<br>Senior Techni=
cal Consultant &amp; Certification Poobah<br>Red Hat India Pvt. Ltd.,<br>No=
 - 4/1, Bannergatta Road,<br>
IBC Knowledge Park,<br>
11th floor, Tower D,<br>Bangalore - 560029, INDIA.<br></font></span></font>=
</span></div></div></blockquote></div><br></div></div><br></div>
</blockquote></div><br>

--000e0ce03dc209fd4b04cb20d604--

From lists@verwilst.be Thu Oct  4 09:47:40 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q94Dld4M024159 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 4 Oct 2012 09:47:40 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q94DlY5l010608
	for <linux-cluster@redhat.com>; Thu, 4 Oct 2012 09:47:34 -0400
Received: from mail.intux.be (mail.intux.be [109.68.162.134])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q94DlW0s020685
	for <Linux-cluster@redhat.com>; Thu, 4 Oct 2012 09:47:33 -0400
Received: from webmail.intux.be (web.intux [10.254.128.29])
	by mail.intux.be (Postfix) with ESMTPSA id 747BB5F759
	for <Linux-cluster@redhat.com>; Thu,  4 Oct 2012 15:47:31 +0200 (CEST)
Received: from dD5769628.access.telenet.be ([213.118.150.40])
	by webmail.intux.be
	with HTTP (HTTP/1.1 POST); Thu, 04 Oct 2012 15:47:31 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Thu, 04 Oct 2012 15:47:31 +0200
From: Bart Verwilst <lists@verwilst.be>
To: <Linux-cluster@redhat.com>
Message-ID: <2c3f847bbba16467723fe057dbded285@verwilst.be>
X-Sender: lists@verwilst.be
User-Agent: Intux Webmail/0.8.1
X-RedHat-Spam-Score: -1.9  (BAYES_00)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Failover network device with rgmanager
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 04 Oct 2012 13:47:40 -0000

Hi,

I would like to make rgmanager manage a network interface i configured 
under sysconfig ( ifcfg-ethX ). It should be brought up by the active 
node as a resource, and ifdown'ed by the standby node. ( It's actually a 
GRE tunnel interface ). Is there a straightforward way on how to do this 
with CentOS 6.2 cman/rgmanager?

Thanks in advance!

Kind regards,

Bart Verwilst

From lhh@redhat.com Thu Oct  4 11:57:16 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q94FvGXm010267 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 4 Oct 2012 11:57:16 -0400
Received: from zealand.bos.redhat.com (dhcp-186-68.bos.redhat.com
	[10.16.186.68])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q94FvAFl031400; Thu, 4 Oct 2012 11:57:10 -0400
Message-ID: <506DB1C4.2080609@redhat.com>
Date: Thu, 04 Oct 2012 11:56:52 -0400
From: Lon Hohberger <lhh@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120827 Thunderbird/15.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <2c3f847bbba16467723fe057dbded285@verwilst.be>
In-Reply-To: <2c3f847bbba16467723fe057dbded285@verwilst.be>
X-Enigmail-Version: 1.4.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Failover network device with rgmanager
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 04 Oct 2012 15:57:16 -0000

On 10/04/2012 09:47 AM, Bart Verwilst wrote:
> Hi,
> 
> I would like to make rgmanager manage a network interface i configured
> under sysconfig ( ifcfg-ethX ). It should be brought up by the active
> node as a resource, and ifdown'ed by the standby node. ( It's actually a
> GRE tunnel interface ). Is there a straightforward way on how to do this
> with CentOS 6.2 cman/rgmanager?
> 

'script' resource, like:

#!/bin/sh

case $1 in
start)
	ifup ethX
	exit $?
	;;
stop)
	ifdown ethX
	exit $?
	;;
status)
        ...
	;;
esac

exit 1

-- Lon

From heiko.nardmann@itechnical.de Thu Oct  4 12:22:59 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q94GMx6N013366 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 4 Oct 2012 12:22:59 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q94GMsYo024474
	for <linux-cluster@redhat.com>; Thu, 4 Oct 2012 12:22:54 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de [212.227.17.8])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q94GMq05005640
	for <linux-cluster@redhat.com>; Thu, 4 Oct 2012 12:22:52 -0400
Received: from laptop.itechnical.de (tmo-009-237.customers.d1-online.com
	[80.187.9.237])
	by mrelayeu.kundenserver.de (node=mreu3) with ESMTP (Nemesis)
	id 0LZYSm-1TgjtH3KQe-00lUCJ; Thu, 04 Oct 2012 18:22:52 +0200
Message-ID: <506DB7D9.3080909@itechnical.de>
Date: Thu, 04 Oct 2012 18:22:49 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120825 Thunderbird/15.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <2c3f847bbba16467723fe057dbded285@verwilst.be>
	<506DB1C4.2080609@redhat.com>
In-Reply-To: <506DB1C4.2080609@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:ej5LpI7QIZoPgJOziii65j8a1LGNTE6hvSdlaRi1cFG
	/tFi4YAWTMhai0RdJMnWdEO2hfKFWyJ4zSGiGw7flsrRKQKhX3
	bYBZS0kn3Z7SAtej/g65ec723hjQH4BVBHf7/YlTekcHYzdtZK
	MYhw8mSe8OMw+E9yIkAEiu2Je2lTEu6Rnnm/dX4it8l35mSpG1
	9I06XqKTTeTNGhgfOYExCZxwh/FB5SGaBJ34FVm6vCpfHV7VxU
	Ey7jL5e/3V4gsu4cBG9ZbTgsNdJECLXy1SwAyBmzGrR/BQFEWP
	ekzqd4FVFsQ+1IHu1Uj5LcCAlnORpjDLrwDfwOPEO/J4UBQcAQ
	W7cm39H9VatXsqxayNtcgnnPfzB5Z2gKaSWlDxTzc
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Failover network device with rgmanager
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 04 Oct 2012 16:22:59 -0000

Isn't that a standard ip resource inside cluster.conf?

Kind regards,

    Heiko

Am 04.10.2012 17:56, schrieb Lon Hohberger:
> On 10/04/2012 09:47 AM, Bart Verwilst wrote:
>> Hi,
>>
>> I would like to make rgmanager manage a network interface i configured
>> under sysconfig ( ifcfg-ethX ). It should be brought up by the active
>> node as a resource, and ifdown'ed by the standby node. ( It's actually a
>> GRE tunnel interface ). Is there a straightforward way on how to do this
>> with CentOS 6.2 cman/rgmanager?
>>
> 'script' resource, like:
>
> #!/bin/sh
>
> case $1 in
> start)
> 	ifup ethX
> 	exit $?
> 	;;
> stop)
> 	ifdown ethX
> 	exit $?
> 	;;
> status)
>         ...
> 	;;
> esac
>
> exit 1
>
> -- Lon

From mgrac@redhat.com Fri Oct  5 07:19:10 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q95BJAOC027166; Fri, 5 Oct 2012 07:19:10 -0400
Received: from [10.36.6.121] (vpn1-6-121.ams2.redhat.com [10.36.6.121])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q95BJ3lj019759; Fri, 5 Oct 2012 07:19:03 -0400
Message-ID: <506EC226.1010900@redhat.com>
Date: Fri, 05 Oct 2012 13:19:02 +0200
From: Marek Grac <mgrac@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120827 Thunderbird/15.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>, cluster-devel@redhat.com
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] fence-agents-3.1.10 stable release
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 05 Oct 2012 11:19:10 -0000

Welcome to the fence-agents 3.1.10 release.

This release includes these updates:
* Faster fencing in fence_vmware_soap
* Action metadata is supported also on older fence agents
* support for using sudo in fence_virsh

The new source tarball can be downloaded here:

https://fedorahosted.org/releases/f/e/fence-agents/fence-agents-3.1.10.tar.xz 


To report bugs or issues:

https://bugzilla.redhat.com/

Would you like to meet the cluster team or members of its community?

    Join us on IRC (irc.freenode.net #linux-cluster) and share your
    experience  with other sysadministrators or power users.

Thanks/congratulations to all people that contributed to achieve this
great milestone.

m,

From mmorgan@dca.net Fri Oct  5 16:22:44 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q95KMix9018259 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 5 Oct 2012 16:22:44 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q95KMdvH021119
	for <linux-cluster@redhat.com>; Fri, 5 Oct 2012 16:22:39 -0400
Received: from staff.dca.net (staff.dca.net [207.245.84.197])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q95KMH9Z019118
	for <linux-cluster@redhat.com>; Fri, 5 Oct 2012 16:22:17 -0400
Received: by staff.dca.net (Postfix, from userid 514)
	id C92982C6A32; Fri,  5 Oct 2012 16:22:16 -0400 (EDT)
Date: Fri, 5 Oct 2012 16:22:16 -0400
From: Michael Morgan <mmorgan@dca.net>
To: linux-cluster@redhat.com
Message-ID: <20121005202216.GK17352@staff.dca.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.2i
Organization: DCANet, a division of Consult Dynamics Inc.
X-RedHat-Spam-Score: -1.863  (BAYES_05,RP_MATCHES_RCVD,SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] GFS2 showing the wrong directory contents on one
	node?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 05 Oct 2012 20:22:44 -0000

Hello,

 I have a 6 node CentOS 5.8 cluster with 4 nodes mounting a GFS2 filesystem.
Everything had been running nicely for about 2 years but over the past few
months I've had a strange occurence happen twice. One of the two web server
nodes will suddenly start listing the wrong directory contents, both nodes have
been affected at different times. This only seems to affect one or two
directories but it's hard to be certain since there are a large numer of them.
There are no errors logged anywhere on the cluster. Unmounting GFS2 on this
node usually causes a hang and eventual fence. The node will come back online
without issue and begin functioning normally again.

 Just a few minutes ago it started happening again. I currently have services
stopped but have not gone through the unmount/reboot process yet. Before I do
that I figured I'd check the list to see if anyone has come across this before.
Is there any GFS2/cluster information I should be dumping to track down the
cause? Any insight would be appreciated. Thanks.

-Mike

From shanti.pahari@sierra.sg Sun Oct  7 21:58:05 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q981w4Fa009645 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 7 Oct 2012 21:58:05 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q981vwOO012902
	for <linux-cluster@redhat.com>; Sun, 7 Oct 2012 21:57:59 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q981vtP6019042
	for <linux-cluster@redhat.com>; Sun, 7 Oct 2012 21:57:56 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 5A3BC25DD882
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 09:57:05 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id B8Nnfg+hvDzi for <linux-cluster@redhat.com>;
	Mon,  8 Oct 2012 09:57:01 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 467B125DCCC1
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 09:57:01 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Mon, 8 Oct 2012 09:57:01 +0800 (SGT)
Message-ID: <b7083cda.00000e68.00001f42@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_4619_01CDA53B.5FBE1A40"
Thread-Index: Ac2k975YFOC7pPBkRH6B2GFHbsYENA==
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -2.64  (BAYES_05,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 01:58:05 -0000

This is a multipart message in MIME format.

------=_NextPart_000_4619_01CDA53B.5FBE1A40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,

 

After I added root volume in volume_list in lvm.conf I cannot inlitilize
other lvm .

If I remove volume_list from lvm.conf then only I can intilize other lvm.
But volume_list with only root volume  is required for the cluster.

 

Volume_list  =  [ "myrootvolume", "@hostname" ]

 

Can you help me how can I solve this?

 

Regards,

Shanti


------=_NextPart_000_4619_01CDA53B.5FBE1A40
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Hi =
all,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>After I added root volume in volume_list in lvm.conf I =
cannot inlitilize other lvm .<o:p></o:p></p><p class=3DMsoNormal>If I =
remove volume_list from lvm.conf then only I can intilize other lvm. But =
volume_list with only root volume &nbsp;is required for the =
cluster.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Volume_list&nbsp; =3D&nbsp; [ =
&#8220;myrootvolume&#8221;, &#8220;@hostname&#8221; ]<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Can you help =
me how can I solve this?<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Regards,<o:p></o:p></p><p =
class=3DMsoNormal>Shanti<o:p></o:p></p></div></body></html>
------=_NextPart_000_4619_01CDA53B.5FBE1A40--

From bmr@redhat.com Mon Oct  8 06:43:04 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98Ah4rU006150 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 06:43:04 -0400
Received: from bmr.usersys.redhat.com (dhcp-1-199.fab.redhat.com [10.33.1.199])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98Agu6T014068
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 06:42:59 -0400
Message-ID: <5072AE30.3000904@redhat.com>
Date: Mon, 08 Oct 2012 11:42:56 +0100
From: "Bryn M. Reeves" <bmr@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:13.0) Gecko/20120605 Thunderbird/13.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
In-Reply-To: <b7083cda.00000e68.00001f42@sierra-A66>
X-Enigmail-Version: 1.4.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 10:43:04 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 02:57 AM, Shanti Pahari wrote:
> If I remove volume_list from lvm.conf then only I can intilize
> other lvm. But volume_list with only root volume  is required for
> the cluster.
> 
> 
> 
> Volume_list  =  [ "myrootvolume", "@hostname" ]

It's 'volume_list' (lowercase 'v') and if you're specifying a logical
volume (rather than a volume group) it needs to be "vgname/lvname".

Also make sure it goes in the 'activation' section - there should be a
commented-out example you can use as a template in the default lvm.conf:

# If volume_list is defined, each LV is only activated if there is a
# match against the list.
#  "vgname" and "vgname/lvname" are matched exactly.
#  "@tag" matches any tag set in the LV or VG.
#  "@*" matches if any tag defined on the host is set in the LV or VG
#
# volume_list = [ "vg1", "vg2/lvol1", "@tag1", "@*" ]

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByri8ACgkQ6YSQoMYUY94ZNgCeL/ectFyPgippkiQVEYTPWpn7
lP0AoIls3TalqQZgQ0M5fxJppFrUnjVK
=AsGP
-----END PGP SIGNATURE-----

From shanti.pahari@sierra.sg Mon Oct  8 08:14:32 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98CEWm9017093 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 08:14:32 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98CEQMQ021404
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 08:14:27 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q98CENXa023516
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 08:14:24 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 0CA1F25DE535
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 20:13:34 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UcNFeGVnuEHB for <linux-cluster@redhat.com>;
	Mon,  8 Oct 2012 20:13:33 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 4292225DE52A
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 20:13:33 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'linux clustering'" <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
	<5072AE30.3000904@redhat.com>
In-Reply-To: <5072AE30.3000904@redhat.com>
Date: Mon, 8 Oct 2012 20:13:33 +0800 (SGT)
Message-ID: <25537b6b.00000e68.00001f81@sierra-A66>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
Thread-Index: AQHCwgadwRZWi+92joRbx5FqQfmUCAIGmg8pl7TjbeA=
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.038  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 12:14:33 -0000

volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]

where my vg_pdcpicpl01 is Volume group rather than logical volume. This is
my root volume .

In example I saw that I have to specify only VG of root .

Can you help me where I am wrong ?

Thanks,
Shanti



-----Original Message-----
From: linux-cluster-bounces@redhat.com
[mailto:linux-cluster-bounces@redhat.com] On Behalf Of Bryn M. Reeves
Sent: Monday, 8 October, 2012 6:43 PM
To: linux clustering
Subject: Re: [Linux-cluster] LVM cannot initilize

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 02:57 AM, Shanti Pahari wrote:
> If I remove volume_list from lvm.conf then only I can intilize other 
> lvm. But volume_list with only root volume  is required for the 
> cluster.
> 
> 
> 
> Volume_list  =  [ "myrootvolume", "@hostname" ]

It's 'volume_list' (lowercase 'v') and if you're specifying a logical
volume (rather than a volume group) it needs to be "vgname/lvname".

Also make sure it goes in the 'activation' section - there should be a
commented-out example you can use as a template in the default lvm.conf:

# If volume_list is defined, each LV is only activated if there is a #
match against the list.
#  "vgname" and "vgname/lvname" are matched exactly.
#  "@tag" matches any tag set in the LV or VG.
#  "@*" matches if any tag defined on the host is set in the LV or VG # #
volume_list = [ "vg1", "vg2/lvol1", "@tag1", "@*" ]

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByri8ACgkQ6YSQoMYUY94ZNgCeL/ectFyPgippkiQVEYTPWpn7
lP0AoIls3TalqQZgQ0M5fxJppFrUnjVK
=AsGP
-----END PGP SIGNATURE-----

--
Linux-cluster mailing list
Linux-cluster@redhat.com
https://www.redhat.com/mailman/listinfo/linux-cluster

From bmr@redhat.com Mon Oct  8 08:47:05 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98Cl5Dh020428 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 08:47:05 -0400
Received: from bmr.usersys.redhat.com (dhcp-1-199.fab.redhat.com [10.33.1.199])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q98CkwvO007302
	(version=TLSv1/SSLv3 cipher=DHE-RSA-CAMELLIA256-SHA bits=256 verify=NO);
	Mon, 8 Oct 2012 08:47:00 -0400
Message-ID: <5072CB41.4090006@redhat.com>
Date: Mon, 08 Oct 2012 13:46:57 +0100
From: "Bryn M. Reeves" <bmr@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:13.0) Gecko/20120605 Thunderbird/13.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
	<5072AE30.3000904@redhat.com>
	<25537b6b.00000e68.00001f81@sierra-A66>
In-Reply-To: <25537b6b.00000e68.00001f81@sierra-A66>
X-Enigmail-Version: 1.4.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 12:47:06 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 01:13 PM, Shanti Pahari wrote:
> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]
> 
> where my vg_pdcpicpl01 is Volume group rather than logical volume.
> This is my root volume .

Either a tag "@tagname", a volume group as "vgname", or a logical
volume name as "vgname/lvname" (otherwise the tools cannot know which
LV you mean if there are multiple LVs with the same name in different
VGs).

In your earlier example you seemed to have an LV name:

>> Volume_list  =  [ "myrootvolume", "@hostname" ]

Which won't work since the LV name is unqualified by a VG. Your later
example:

> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]

Looks correct assuming that vg_pdcpicpl01 is the name of a VG on your
system.

> In example I saw that I have to specify only VG of root .

It's up to you whether you want to specify just an LV or a whole VG.

> Can you help me where I am wrong ?

It's hard to say. What error do you get initialising LVM? Try adding
more -v if there's nothing useful printed (normally syntax errors in
lvm.conf give a useful message).

Failing that you could post your full lvm.conf to a pastebin somewhere
and mail the link so that others can review your config.

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByy0EACgkQ6YSQoMYUY95VEgCdFK9QqeTOGAiiYnZiuAJ6iHY5
BrUAmwbCBULcq9gEVBtqOg8wAAGXph5M
=UsOX
-----END PGP SIGNATURE-----

From cfeist@redhat.com Mon Oct  8 20:27:42 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q990RgHK010829 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 20:27:42 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q990RajO006094; Mon, 8 Oct 2012 20:27:36 -0400
Message-ID: <50736F78.3060906@redhat.com>
Date: Mon, 08 Oct 2012 19:27:36 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: pacemaker@oss.clusterlabs.org, linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 00:27:42 -0000

We've been making improvements to the pcs (pacemaker/corosync configuration 
system) command line tool over the past few months.

Currently you can setup a basic cluster (including configuring corosync 2.0 udpu).

David Vossel has also created a version of the "Clusters from Scratch" document 
that illustrates setting up a cluster using pcs.  This should be showing up shortly.

You can view the source here: https://github.com/feist/pcs/

Or download the latest tarball:
https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz

There is also a Fedora 18 package that will be included with the next release. 
You should be able to find that package in the following locations...

RPM:
http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm

SRPM:
http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm

In the near future we are planning on having builds for SUSE & Ubuntu/Debian.

We're also actively working on a GUI/Daemon that will allow control of your 
entire cluster from one node and/or a web browser.

Please feel free to email me (cfeist@redhat.com) or open issues on the pcs 
project at github (https://github.com/feist/pcs/issues) if you have any 
questions or problems.

Thanks!
Chris

From ming-ming.chen@hp.com Mon Oct  8 21:51:27 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q991pRse028524 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 21:51:27 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q991pMDx012804
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:51:22 -0400
Received: from g4t0014.houston.hp.com (g4t0014.houston.hp.com [15.201.24.17])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q991pLIE011085
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:51:21 -0400
Received: from G9W0369G.americas.hpqcorp.net (g9w0369g.houston.hp.com
	[16.216.193.232]) (using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by g4t0014.houston.hp.com (Postfix) with ESMTPS id A475D24553;
	Tue,  9 Oct 2012 01:51:21 +0000 (UTC)
Received: from G9W0364.americas.hpqcorp.net (16.216.193.45) by
	G9W0369G.americas.hpqcorp.net (16.216.193.232) with Microsoft SMTP
	Server (TLS) id 14.2.283.4; Tue, 9 Oct 2012 01:47:15 +0000
Received: from G9W0733.americas.hpqcorp.net ([169.254.12.105]) by
	G9W0364.americas.hpqcorp.net ([16.216.193.45]) with mapi id
	14.02.0283.004; Tue, 9 Oct 2012 01:47:15 +0000
From: "Chen, Ming Ming" <ming-ming.chen@hp.com>
To: linux clustering <linux-cluster@redhat.com>, "bentech4you@gmail.com"
	<bentech4you@gmail.com>
Thread-Topic: [Linux-cluster] Configure multiple heartbeat on a redhat cluster
Thread-Index: AQHNpcAB9ri0xyfg5E6Y4Sw06+Hnyw==
Date: Tue, 9 Oct 2012 01:47:14 +0000
Message-ID: <1D241511770E2F4BA89AFD224EDD527141025BAE@G9W0733.americas.hpqcorp.net>
References: <CA+C_GOV08RN0bv4v--xVyY1hkU54r4ntVyXvHk4UgUtWjt3sSg@mail.gmail.com>
	<5057D17D.9060108@alteeve.ca>
	<CA+C_GOXhjW8aeEb586Oum81Qn+u2ryKNwx1pDHA_a7v6WBrcgw@mail.gmail.com>
	<5057E9C5.60506@alteeve.ca>
	<CA+C_GOW=epBq8N-XFhzQ=Fij+Ahz6J-9B+gASyb5PGi31v=8RQ@mail.gmail.com>
	<5057ED14.4030601@alteeve.ca>
In-Reply-To: <5057ED14.4030601@alteeve.ca>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [16.210.48.12]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -109.038  (BAYES_00, RCVD_IN_DNSWL_HI, RP_MATCHES_RCVD,
	USER_IN_WHITELIST)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q991pRse028524
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster]  Configure multiple heartbeat on a redhat cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 01:51:27 -0000



 Hi,
 Is there a way to configure multiple heartbeat network in the /etc/cluster.conf file.
I'm using redhat cluster.
Regards
Ming


From ming-ming.chen@hp.com Mon Oct  8 21:56:16 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q991uGnj029635 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 21:56:16 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q991uAa0014912
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:56:11 -0400
Received: from g4t0015.houston.hp.com (g4t0015.houston.hp.com [15.201.24.18])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q991u9IA006797
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:56:09 -0400
Received: from G4W3011G.americas.hpqcorp.net (g4w3011g.houston.hp.com
	[16.234.25.125]) (using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by g4t0015.houston.hp.com (Postfix) with ESMTPS id 81E1F8634
	for <linux-cluster@redhat.com>; Tue,  9 Oct 2012 01:56:09 +0000 (UTC)
Received: from G9W2161G.americas.hpqcorp.net (16.216.113.179) by
	G4W3011G.americas.hpqcorp.net (16.234.25.125) with Microsoft SMTP
	Server (TLS) id 14.2.283.4; Tue, 9 Oct 2012 01:55:03 +0000
Received: from G9W0733.americas.hpqcorp.net ([169.254.12.105]) by
	G9W2161G.americas.hpqcorp.net ([16.216.113.179]) with mapi id
	14.02.0283.004; Tue, 9 Oct 2012 01:55:03 +0000
From: "Chen, Ming Ming" <ming-ming.chen@hp.com>
To: linux clustering <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster] problem quorum cman
Thread-Index: AQHNZlnET4V9DO7ziEeSMGvaMrmeO5ewtSmw
Date: Tue, 9 Oct 2012 01:55:01 +0000
Message-ID: <1D241511770E2F4BA89AFD224EDD527141025C87@G9W0733.americas.hpqcorp.net>
References: <CANQ3Co9=qVZehgECe=ZGj_wEv-eGGR__-TbDF-M=yMgeQuRpyg@mail.gmail.com>
In-Reply-To: <CANQ3Co9=qVZehgECe=ZGj_wEv-eGGR__-TbDF-M=yMgeQuRpyg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [16.210.48.12]
Content-Type: multipart/alternative;
	boundary="_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_"
MIME-Version: 1.0
X-RedHat-Spam-Score: -109.037  (BAYES_00, HTML_MESSAGE, RCVD_IN_DNSWL_HI,
	RP_MATCHES_RCVD, USER_IN_WHITELIST)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] problem quorum cman
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 01:56:16 -0000

--_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

Have you ever resolved this issue? If so, what is the problem? I sometime s=
ee the same issue on my cluster.

Ming





From: linux-cluster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat=
.com] On Behalf Of hakim abdellaoui
Sent: Friday, July 20, 2012 2:15 AM
To: linux-cluster@redhat.com
Subject: [Linux-cluster] problem quorum cman



Hi,

I use rhel6.3 with packages :

cman-3.0.12.1-32.el6.x86_64
rgmanager-3.0.12.1-12.el6.x86_64
openais-1.1.1-7.el6.x86_64

I have two virtual nodes  (vmware) and a quorum share disk (it's a virtual =
disk i use scsi sharing multi-write)

the cluster work sometime.

if i reboot node2 the cman not start i have   : Waiting for quorum... Timed=
-out waiting for cluster.

On the log corosync i have :

Jul 20 10:51:22 corosync [TOTEM ] A processor joined or left the membership=
 and a new membership was formed.
Jul 20 10:51:22 corosync [CPG   ] chosen downlist: sender r(0) ip(192.168.1=
0.154) ; members(old:1 left:0)
Jul 20 10:51:22 corosync [MAIN  ] Completed service synchronization, ready =
to provide service.
Jul 20 10:51:23 corosync [CMAN  ] quorum device unregistered


On the node1 when i type clustat i have :

Cluster Status for clusterweb @ Fri Jul 20 10:38:57 2012
Member Status: Quorate

 Member Name                                  ID   Status
 ------ ----                                  ---- ------
 server-1                                      1 Online, Local
 server-2                                      2 Offline
 /dev/block/8:16                           0 Online, Quorum Disk


If i restart cman on node1 and  i restart cman on node2 the cman start prop=
erly a
When i  type clustat on both nodes i can see all online.


I don't understand why i must restart on node1 the cman if i want to add th=
e node2 on the
cluster .


You can see my cluster.conf

<?xml version=3D"1.0"?>
<cluster config_version=3D"6" name=3D"clusterweb">
        <clusternodes>
                <clusternode name=3D"server-1" nodeid=3D"1"/>
                <clusternode name=3D"server-2" nodeid=3D"2"/>
        </clusternodes>
        <cman expected_votes=3D"3"/>
        <quorumd label=3D"quorum">
                <heuristic program=3D"ping -c3 -t2 192.168.254.254"/>
        </quorumd>
</cluster>


Very thanks for your help

Best regards.


--_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 12 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
-->
</style><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext=3D"edit">
  <o:idmap v:ext=3D"edit" data=3D"1" />
 </o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D">Hi,<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D">Have you ever resolved this issue? If so, what is the proble=
m? I sometime see the same issue on my cluster.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D">Ming<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<div style=3D"border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in =
0in 0in">
<p class=3D"MsoNormal"><b><span style=3D"font-size:10.0pt;font-family:&quot=
;Tahoma&quot;,&quot;sans-serif&quot;">From:</span></b><span style=3D"font-s=
ize:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;"> linux-cl=
uster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat.com]
<b>On Behalf Of </b>hakim abdellaoui<br>
<b>Sent:</b> Friday, July 20, 2012 2:15 AM<br>
<b>To:</b> linux-cluster@redhat.com<br>
<b>Subject:</b> [Linux-cluster] problem quorum cman<o:p></o:p></span></p>
</div>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Hi,<br>
<br>
I use rhel6.3 with packages :<br>
<br>
cman-3.0.12.1-32.el6.x86_64<br>
rgmanager-3.0.12.1-12.el6.x86_64<br>
openais-1.1.1-7.el6.x86_64<br>
<br>
I have two virtual nodes&nbsp; (vmware) and a quorum share disk (it's a vir=
tual disk i use scsi sharing multi-write)<br>
<br>
the cluster work sometime.<br>
<br>
if i reboot node2 the cman not start i have&nbsp;&nbsp; : <b>Waiting for qu=
orum... Timed-out waiting for cluster.</b><br>
<br>
On the log corosync i have :<br>
<br>
<b>Jul 20 10:51:22 corosync [TOTEM ] A processor joined or left the members=
hip and a new membership was formed.<br>
Jul 20 10:51:22 corosync [CPG&nbsp;&nbsp; ] chosen downlist: sender r(0) ip=
(192.168.10.154) ; members(old:1 left:0)<br>
Jul 20 10:51:22 corosync [MAIN&nbsp; ] Completed service synchronization, r=
eady to provide service.<br>
Jul 20 10:51:23 corosync [CMAN&nbsp; ] quorum device unregistered</b><br>
<br>
<br>
On the node1 when i type clustat i have :<br>
&nbsp;<br>
Cluster Status for clusterweb @ Fri Jul 20 10:38:57 2012<br>
Member Status: Quorate<br>
<br>
&nbsp;Member Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ID&nbsp;&=
nbsp; Status<br>
&nbsp;------ ----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---- ----=
--<br>
&nbsp;server-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; 1 Online, Local<br>
&nbsp;server-2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; 2 Offline<br>
&nbsp;/dev/block/8:16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp; 0 Online, Quorum Disk<br>
<br>
<br>
If i restart cman on node1 and&nbsp; i restart cman on node2 the cman start=
 properly a<br>
When i&nbsp; type clustat on both nodes i can see all online.<br>
<br>
<br>
I don't understand why i must restart on node1 the cman if i want to add th=
e node2 on the
<br>
cluster .<br>
<br>
<br>
You can see my cluster.conf<br>
<br>
&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster config_version=3D&quot;6&quot; name=3D&quot;clusterweb&quot;&gt=
;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clusternodes&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; &lt;clusternode name=3D&quot;server-1&quot; nodeid=3D&quot;=
1&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; &lt;clusternode name=3D&quot;server-2&quot; nodeid=3D&quot;=
2&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/clusternodes&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;cman expected_votes=3D&quot;=
3&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;quorumd label=3D&quot;quorum=
&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; &lt;heuristic program=3D&quot;ping -c3 -t2 192.168.254.254&=
quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/quorumd&gt;<br>
&lt;/cluster&gt;<br>
<br>
<br>
Very thanks for your help<br>
<br>
Best regards.<o:p></o:p></p>
</div>
</body>
</html>

--_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_--

From lists@alteeve.ca Mon Oct  8 21:58:14 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q991wDCs029700 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 21:58:13 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q991w8PY021641; Mon, 8 Oct 2012 21:58:08 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q991w6rP017427;
	Mon, 8 Oct 2012 21:58:07 -0400
Received: from lemass.alteeve.ca (unknown [216.66.176.13])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 6263C422488;
	Mon,  8 Oct 2012 21:58:04 -0400 (EDT)
Message-ID: <507384AC.5010805@alteeve.ca>
Date: Mon, 08 Oct 2012 21:58:04 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Cc: pacemaker@oss.clusterlabs.org
Subject: Re: [Linux-cluster] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 01:58:14 -0000

Well, I was looking for a reason to download and start testing Fedora 
18. Suppose this is a good enough reason. :)

digimer

On 10/08/2012 08:27 PM, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync
> configuration system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync
> 2.0 udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should
> be showing up shortly.
>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next
> release. You should be able to find that package in the following
> locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE &
> Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of
> your entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the
> pcs project at github (https://github.com/feist/pcs/issues) if you have
> any questions or problems.
>
> Thanks!
> Chris
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From fdinitto@redhat.com Tue Oct  9 02:53:25 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q996rPat030789 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 02:53:25 -0400
Received: from [192.168.0.11] (ovpn-113-79.phx2.redhat.com [10.3.113.79])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q996rIJ3002146
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 02:53:19 -0400
Message-ID: <5073C9E3.7000009@redhat.com>
Date: Tue, 09 Oct 2012 08:53:23 +0200
From: "Fabio M. Di Nitto" <fdinitto@redhat.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1;
	rv:15.0) Gecko/20120907 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
X-Enigmail-Version: 1.4.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 06:53:25 -0000

On 10/9/2012 2:27 AM, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync
> configuration system) command line tool over the past few months.
> 
> Currently you can setup a basic cluster (including configuring corosync
> 2.0 udpu).
> 
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should
> be showing up shortly.
>

well done guys!!!

Fabio

From shanti.pahari@sierra.sg Tue Oct  9 05:08:10 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9998AmC020306 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 05:08:10 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q99984kG015878; Tue, 9 Oct 2012 05:08:05 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q999807b015832;
	Tue, 9 Oct 2012 05:08:02 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 34D2E25DEA51;
	Tue,  9 Oct 2012 17:07:11 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id r1FyQpswGn2T; Tue,  9 Oct 2012 17:07:10 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 7456F25DEA4B;
	Tue,  9 Oct 2012 17:07:10 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'Bryn M. Reeves'" <bmr@redhat.com>,
	"'linux clustering'" <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
	<5072AE30.3000904@redhat.com>
	<25537b6b.00000e68.00001f81@sierra-A66>
	<5072CB41.4090006@redhat.com>
In-Reply-To: <5072CB41.4090006@redhat.com>
Date: Tue, 9 Oct 2012 17:07:10 +0800 (SGT)
Message-ID: <97898eab.00001f6c.00000041@sierra-A66>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
Thread-Index: AQHCwgadwRZWi+92joRbx5FqQfmUCAIGmg8pAWtf8u4Ba79Djpefh1fg
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.038  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 09:08:10 -0000

Hi Bryn,

>From example:
On each cluster node, edit /etc/lvm/lvm.conf and change the volume_list
field to
match the boot volume (myvg) and name of the node cluster interconnect
(ha-web1).
This restricts the list of volumes available during system boot to only
the root volume
and prevents cluster nodes from updating and potentially corrupting the
metadata on
the HA-LVM volume:
volume_list = [ "myvg", "@ha-web1" ]

so I added volume_list = [ " vg_pdcpicpl01 " , "@PDC-PIC-PL-01" ]

PDC-PIC-PL-01 : is my hostname

# dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)
# shutdown -r now "Activating ramdisk LVM changes"

Reboot

I have /dev/HA-Web-VG/ha-web-lv also, but after reboot I cannot initialize
my volume it throws  nor create logical volume
lvcreate gets error message "not activating volume group lv does not pass
activation filter"

-----Original Message-----
From: Bryn M. Reeves [mailto:bmr@redhat.com] 
Sent: Monday, 8 October, 2012 8:47 PM
To: linux clustering
Cc: Shanti Pahari
Subject: Re: [Linux-cluster] LVM cannot initilize

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 01:13 PM, Shanti Pahari wrote:
> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]
> 
> where my vg_pdcpicpl01 is Volume group rather than logical volume.
> This is my root volume .

Either a tag "@tagname", a volume group as "vgname", or a logical volume
name as "vgname/lvname" (otherwise the tools cannot know which LV you mean
if there are multiple LVs with the same name in different VGs).

In your earlier example you seemed to have an LV name:

>> Volume_list  =  [ "myrootvolume", "@hostname" ]

Which won't work since the LV name is unqualified by a VG. Your later
example:

> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]

Looks correct assuming that vg_pdcpicpl01 is the name of a VG on your
system.

> In example I saw that I have to specify only VG of root .

It's up to you whether you want to specify just an LV or a whole VG.

> Can you help me where I am wrong ?

It's hard to say. What error do you get initialising LVM? Try adding more
-v if there's nothing useful printed (normally syntax errors in lvm.conf
give a useful message).

Failing that you could post your full lvm.conf to a pastebin somewhere and
mail the link so that others can review your config.

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByy0EACgkQ6YSQoMYUY95VEgCdFK9QqeTOGAiiYnZiuAJ6iHY5
BrUAmwbCBULcq9gEVBtqOg8wAAGXph5M
=UsOX
-----END PGP SIGNATURE-----

From mmorgan@dca.net Tue Oct  9 09:44:16 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99DiGiR021121 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 09:44:16 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q99DiAL9002481
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 09:44:11 -0400
Received: from staff.dca.net (staff.dca.net [207.245.84.197])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q99Di6mt016915
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 09:44:06 -0400
Received: by staff.dca.net (Postfix, from userid 514)
	id 06A652C6A32; Tue,  9 Oct 2012 09:44:06 -0400 (EDT)
Date: Tue, 9 Oct 2012 09:44:06 -0400
From: Michael Morgan <mmorgan@dca.net>
To: linux-cluster@redhat.com
Message-ID: <20121009134406.GB9351@staff.dca.net>
References: <20121005202216.GK17352@staff.dca.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20121005202216.GK17352@staff.dca.net>
User-Agent: Mutt/1.4.2.2i
Organization: DCANet, a division of Consult Dynamics Inc.
X-RedHat-Spam-Score: -3.262  (BAYES_00,RP_MATCHES_RCVD,SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] GFS2 showing the wrong directory contents on
	one node?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 13:44:16 -0000

Replying to myself,

 I was out of the office yesterday but I come back in this morning and
everything looks correct again. Apache is still stopped and nobody has touched
the server since I stopped services on Friday. Very strange

-Mike

On Fri, Oct 05, 2012 at 04:22:16PM -0400, Michael Morgan wrote:
> Hello,
> 
>  I have a 6 node CentOS 5.8 cluster with 4 nodes mounting a GFS2 filesystem.
> Everything had been running nicely for about 2 years but over the past few
> months I've had a strange occurence happen twice. One of the two web server
> nodes will suddenly start listing the wrong directory contents, both nodes have
> been affected at different times. This only seems to affect one or two
> directories but it's hard to be certain since there are a large numer of them.
> There are no errors logged anywhere on the cluster. Unmounting GFS2 on this
> node usually causes a hang and eventual fence. The node will come back online
> without issue and begin functioning normally again.
> 
>  Just a few minutes ago it started happening again. I currently have services
> stopped but have not gone through the unmount/reboot process yet. Before I do
> that I figured I'd check the list to see if anyone has come across this before.
> Is there any GFS2/cluster information I should be dumping to track down the
> cause? Any insight would be appreciated. Thanks.
> 
> -Mike
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From queszama@yahoo.in Tue Oct  9 12:25:09 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99GP8xS013319 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 12:25:09 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99GP3Lq023366
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:25:03 -0400
Received: from nm6-vm8.bullet.mail.sg3.yahoo.com
	(nm6-vm8.bullet.mail.sg3.yahoo.com [106.10.148.167])
	by mx1.redhat.com (8.14.4/8.14.4) with SMTP id q99GP1VK018601
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:25:02 -0400
Received: from [106.10.166.126] by nm6.bullet.mail.sg3.yahoo.com with NNFMP;
	09 Oct 2012 16:25:01 -0000
Received: from [106.10.151.203] by tm15.bullet.mail.sg3.yahoo.com with NNFMP;
	09 Oct 2012 16:25:01 -0000
Received: from [127.0.0.1] by omp1015.mail.sg3.yahoo.com with NNFMP;
	09 Oct 2012 16:25:01 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 48940.58227.bm@omp1015.mail.sg3.yahoo.com
Received: (qmail 96358 invoked by uid 60001); 9 Oct 2012 16:25:01 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.in; s=s1024;
	t=1349799900; bh=LSVmXYMIEhcSgY/LfAnAD8xQt8oAJX+V9Twa38RXIhc=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
	b=0a57y5W6gl/hOPc8IQUghteXGfO7KQarrqk8PkVQdW8X0cCLNd2VkaxOSGyD0BmiT1IeG/HpRVmykwZ+6CxqOsOtE8H0Lf05Fd6uF1jQPLwsk01k8pBXhzgdUKWa6dJ4RNKnlxMxFVY54jcctRBLvOvi7ByKVZUK8z2xT6/A/8w=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.in;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
	b=EB8WdcYPRi6Co3TNCaIbvbrKXJYK+ZiOduG9VYRc40/tPWFzxkR25mR/9Of02yAYOHRQeV+lPrr01RXLebQBMhBwfUUB+sYpCe9uzpCV8f3nutMHNAMYZolyD1+FpEJl0hfHLuVv9CcQoI0zUDSdGpVg+L0mamDzC8dn1Fh/4S0=;
X-YMail-OSG: 0847JTwVM1lDf66W8l.ScmpQtxyzu5P3EqIleBw1BM5v5L6
	dkgebhN0lvCRs02LGbRvxEOEp.fkNk3.ntb1vW6nyTdiaU6Ciy1nXpmhDy5i
	GsFGQ5d_D6nLFmH0itgO_wgLduS.6HMGnzE5dfHiUMuJJT3Vrd_FnIvk60z5
	IbH8Nd1MtcbGbif8zn0RYIJO20KPN_c6plwuoSe4R_I8NKYSGDrAYvPPy7jK
	7XnioNxFkZuLUt9kQu8zlwZfp7yyVFSUwSvdms82cLfGm1s3I8M5I674RP7M
	zYd7JqttT2WL5mHEfbQom12ly7CPR4WX9uyDnmf0cutWaGohPY4o6vfW4v6z
	I7kgcIiYusscHtx_K3BJCD.Fs_6EXAprFjq7jMEn7BDbjZFw6x7q4TlitAYC
	FVp3PiXFg3A--
Received: from [115.253.216.35] by web193006.mail.sg3.yahoo.com via HTTP;
	Wed, 10 Oct 2012 00:25:00 SGT
X-Rocket-MIMEInfo: 001.001,
	SGkgQWxsLAoKTmVlZCBoZWxwIGluIHNlbGVjdGluZyB0aGUgcmlnaHQgZmVuY2luZyBkZXZpY2UgZm9yIG91ciBIQSBjbHVzdGVyIG9mIHR3byBub2RlcyAuIFRoZSBzZXJ2ZXIgaGFyZHdhcmUgdXNlZCBpcyBIUCBQcm9saWFudCBTZXJ2ZXJzIGFuZCBPUyB3ZSBhcmUgdXNpbmcgaXMgQ2VudE9TIDUKClRoZXJlIGFyZSB0d28gb3B0aW9ucyBmb3IgdXMgaW4gc2VsZWN0aW5nIHRoZSBmZW5jaW5nIGRldmljZSAuIAoKCk9uZSBpcyBzZWxlY3RpbmcgYSBTQU4gQnJvY2FkZSBzd2l0Y2guIEluIHRoaXMgY2FzZSABMAEBAQE-
Message-ID: <1349799900.92783.YahooMailNeo@web193006.mail.sg3.yahoo.com>
Date: Wed, 10 Oct 2012 00:25:00 +0800 (SGT)
From: Zama Ques <queszama@yahoo.in>
To: linux clustering <linux-cluster@redhat.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="-488649105-436588037-1349799900=:92783"
X-RedHat-Spam-Score: 0.692  (BAYES_50, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Choosing a fencing device
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Zama Ques <queszama@yahoo.in>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 16:25:09 -0000

---488649105-436588037-1349799900=:92783
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi All,=0A=0ANeed help in selecting the right fencing device for our HA clu=
ster of two nodes . The server hardware used is HP Proliant Servers and OS =
we are using is CentOS 5=0A=0AThere are two options for us in selecting the=
 fencing device . =0A=0A=0AOne is selecting a SAN Brocade switch. In this c=
ase , we will use ILO as secondary fencing device .=0A=0AOther option for u=
s is using HP ILO as primary fencing device and IPMI fencing for secondary =
fencing =0A=0A=0AOf the two options which will be better to go for configur=
ing fencing .Any known issues with ILO or SAN Brocade switch in configuring=
 fencing ?=A0 Any suggestions will be greatly helpful.=A0=0A=0AThanks=0AZam=
an=0A
---488649105-436588037-1349799900=:92783
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:ar=
ial, helvetica, sans-serif;font-size:12pt"><div>Hi All,<br><br>Need help in=
 selecting the right fencing device for our HA cluster of two nodes . The s=
erver hardware used is HP Proliant Servers and OS we are using is CentOS 5<=
br><br>There are two options for us in selecting the fencing device . <br><=
br><br>One is selecting a SAN Brocade switch. In this case , we will use IL=
O as secondary fencing device .<br><br>Other option for us is using HP ILO =
as primary fencing device and IPMI fencing for secondary fencing <br><br><b=
r>Of the two options which will be better to go for configuring fencing .An=
y known issues with ILO or SAN Brocade switch in configuring fencing ?&nbsp=
; Any suggestions will be greatly helpful.&nbsp;</div><div style=3D"color: =
rgb(0, 0, 0); font-size: 16px; font-family: arial,helvetica,sans-serif; bac=
kground-color: transparent; font-style: normal;"><br></div><div
 style=3D"color: rgb(0, 0, 0); font-size: 16px; font-family: arial,helvetic=
a,sans-serif; background-color: transparent; font-style: normal;">Thanks</d=
iv><div style=3D"color: rgb(0, 0, 0); font-size: 16px; font-family: arial,h=
elvetica,sans-serif; background-color: transparent; font-style: normal;">Za=
man</div></div></body></html>
---488649105-436588037-1349799900=:92783--

From lists@alteeve.ca Tue Oct  9 12:58:51 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99Gwppw019516 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 12:58:51 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q99GwjmQ012476
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:58:45 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q99GwhwL006017
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:58:43 -0400
Received: from lemass.alteeve.ca (199-7-156-147.eng.wind.ca [199.7.156.147])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 34353422502;
	Tue,  9 Oct 2012 12:58:41 -0400 (EDT)
Message-ID: <507457C1.1020402@alteeve.ca>
Date: Tue, 09 Oct 2012 12:58:41 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: Zama Ques <queszama@yahoo.in>, linux clustering <linux-cluster@redhat.com>
References: <1349799900.92783.YahooMailNeo@web193006.mail.sg3.yahoo.com>
In-Reply-To: <1349799900.92783.YahooMailNeo@web193006.mail.sg3.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Choosing a fencing device
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 16:58:51 -0000

On 10/09/2012 12:25 PM, Zama Ques wrote:
> Hi All,
>
> Need help in selecting the right fencing device for our HA cluster of
> two nodes . The server hardware used is HP Proliant Servers and OS we
> are using is CentOS 5
>
> There are two options for us in selecting the fencing device .
>
>
> One is selecting a SAN Brocade switch. In this case , we will use ILO as
> secondary fencing device .
>
> Other option for us is using HP ILO as primary fencing device and IPMI
> fencing for secondary fencing
>
>
> Of the two options which will be better to go for configuring fencing
> .Any known issues with ILO or SAN Brocade switch in configuring fencing
> ?  Any suggestions will be greatly helpful.
>
> Thanks
> Zaman

There is no benefit to use fence_ilo and fence_ipmilan as they work on 
the same device... If one fails, the other will, too.

Personally, I'd use fence_ipmilan (more tested than fence_ilo) as 
primary and SAN fencing as a backup in case the out of band management 
fails (as could happen if the node lost it's power).

The reason I recommend the oob interface as primary is that power 
fencing has a chance of recovering the node where fabric fencing merely 
cuts it off, which is fine for fencing, but stays offline until an admin 
solves the problem and unfences the nodes.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From shanti.pahari@sierra.sg Wed Oct 10 03:07:35 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9A77Z63010322 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 03:07:35 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9A77Tsl001806
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 03:07:30 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9A77Nko016066
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 03:07:24 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 4823325DEE23
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 15:06:33 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lpd9XOC5-9CX for <linux-cluster@redhat.com>;
	Wed, 10 Oct 2012 15:06:31 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id E87C725DEE1D
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 15:06:30 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Wed, 10 Oct 2012 15:06:30 +0800 (SGT)
Message-ID: <a2202e87.00001f6c.00000065@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0238_01CDA6F8.EE9784E0"
Thread-Index: Ac2mtGR/xVgfv7BlSg6B1HSV901+Yw==
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.039  (BAYES_00, HTML_MESSAGE, MIME_QP_LONG_LINE,
	RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 07:07:36 -0000

This is a multipart message in MIME format.

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0239_01CDA6F8.EE9784E0"


------=_NextPart_001_0239_01CDA6F8.EE9784E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Dear all,

 

I have cluster setup with 2 node and created web cluster service on it but
it cannot run.

I have not listed anything in lvm.conf volume_list because once I add
anything in volume_list and reboot the system then I cannot mount and even
cannot read the lv which I created for my web . It throws error as 

error message "not activating volume group lv does not pass activation
filter"

Therefore I didn't add anything in lvm.conf . Then I try to start my
cluster servers for web server but the service failed.

Please help me so that I can solve this out.

 

I have attached my cluster.conf , lvdisplay , /var/log/messages and
lvm.conf and my /etc/hosts.

 

I will be greatful if anyone can help me!

Thanks

 

And my clustat: 

Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012

Member Status: Quorate

 

Member Name                                                     ID
Status

------ ----                                                     ----
------

PDC-PIC-PL-CL1                                                      1
Online, Local, rgmanager

PDC-PIC-PL-CL2                                                      2
Online, rgmanager

 

Service Name                                               Owner (Last)
State         

 ------- ----                                               ----- ------
-----         

 service:ha-web-service
(PDC-PIC-PL-CL1)                                           failed        


------=_NextPart_001_0239_01CDA6F8.EE9784E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Dear =
all,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>I have cluster setup with 2 node and created web =
cluster service on it but it cannot run.<o:p></o:p></p><p =
class=3DMsoNormal>I have not listed anything in lvm.conf volume_list =
because once I add anything in volume_list and reboot the system then I =
cannot mount and even cannot read the lv which I created for my web . It =
throws error as <o:p></o:p></p><p class=3DMsoNormal>error message =
&quot;not activating volume group lv does not pass activation =
filter&quot;<o:p></o:p></p><p class=3DMsoNormal>Therefore I didn&#8217;t =
add anything in lvm.conf . Then I try to start my cluster servers for =
web server but the service failed.<o:p></o:p></p><p =
class=3DMsoNormal>Please help me so that I can solve this =
out.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>I have attached my cluster.conf , lvdisplay , =
/var/log/messages and lvm.conf and my /etc/hosts.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>I will be =
greatful if anyone can help me!<o:p></o:p></p><p =
class=3DMsoNormal>Thanks<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>And my =
clustat: <o:p></o:p></p><p class=3DMsoNormal>Cluster Status for =
PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012<o:p></o:p></p><p =
class=3DMsoNormal>Member Status: Quorate<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal> Member =
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; ID&nbsp;&nbsp; Status<o:p></o:p></p><p =
class=3DMsoNormal> ------ =
----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; ---- ------<o:p></o:p></p><p class=3DMsoNormal> =
PDC-PIC-PL-CL1&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;1 Online, Local, rgmanager<o:p></o:p></p><p =
class=3DMsoNormal> =
PDC-PIC-PL-CL2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 Online, =
rgmanager<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal> Service =
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Owner =
(Last)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;State&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp; <o:p></o:p></p><p class=3DMsoNormal>&nbsp;------- =
----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----- =
------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;service:ha-web-service&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
(PDC-PIC-PL-CL1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
failed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
<o:p></o:p></p></div></body></html>
------=_NextPart_001_0239_01CDA6F8.EE9784E0--

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: application/octet-stream;
	name="cluster.conf"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="cluster.conf"

<?xml version=3D"1.0"?>=0A=
<cluster config_version=3D"11" name=3D"PDC-PIC-PL-CL">=0A=
	<clusternodes>=0A=
		<clusternode name=3D"PDC-PIC-PL-CL1" nodeid=3D"1"/>=0A=
		<clusternode name=3D"PDC-PIC-PL-CL2" nodeid=3D"2"/>=0A=
	</clusternodes>=0A=
	<cman expected_votes=3D"1" two_node=3D"1"/>=0A=
	<fencedevices>=0A=
		<fencedevice agent=3D"fence_ipmilan" auth=3D"password" =
ipaddr=3D"192.168.25.18" lanplus=3D"on" login=3D"hpadmin" =
name=3D"IPMI-PDC-PIC-PL-CL1" passwd=3D"hpinvent"/>=0A=
		<fencedevice agent=3D"fence_ipmilan" auth=3D"password" =
ipaddr=3D"192.168.25.26" lanplus=3D"on" login=3D"hpadmin" =
name=3D"IIPMI-PDC-PIC-PL-CL2" passwd=3D"hpinvent"/>=0A=
	</fencedevices>=0A=
	<rm>=0A=
		<failoverdomains>=0A=
			<failoverdomain name=3D"HA-web-failover" ordered=3D"1">=0A=
				<failoverdomainnode name=3D"PDC-PIC-PL-CL1" priority=3D"1"/>=0A=
				<failoverdomainnode name=3D"PDC-PIC-PL-CL2" priority=3D"2"/>=0A=
			</failoverdomain>=0A=
		</failoverdomains>=0A=
		<resources>=0A=
			<ip address=3D"192.168.24.37" sleeptime=3D"10"/>=0A=
			<fs device=3D"/dev/HA-Web-VG/ha-web-lv" fsid=3D"56432" =
fstype=3D"ext4" mountpoint=3D"/opt/ha-web" name=3D"ha-web-filesystem" =
self_fence=3D"on"/>=0A=
			<lvm lv_name=3D"ha-web-lv" name=3D"ha-web-HA-LVM" self_fence=3D"on" =
vg_name=3D"HA-Web-VG"/>=0A=
			<script file=3D"/etc/init.d/httpd" name=3D"ha-web-apache-script"/>=0A=
		</resources>=0A=
		<service domain=3D"HA-web-failover" name=3D"ha-web-service" =
recovery=3D"relocate">=0A=
			<ip ref=3D"192.168.24.37"/>=0A=
			<fs ref=3D"ha-web-filesystem"/>=0A=
			<lvm ref=3D"ha-web-HA-LVM"/>=0A=
			<script ref=3D"ha-web-apache-script"/>=0A=
		</service>=0A=
	</rm>=0A=
</cluster>=0A=

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: text/plain;
	name="lvdisplay.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="lvdisplay.txt"

[root@PDC-PIC-PL-01 cluster]# lvdisplay
  --- Logical volume ---
  LV Name                /dev/vg_pdcpicpl01/lv_swap
  VG Name                vg_pdcpicpl01
  LV UUID                im1tvN-btxf-zYJs-Wtuy-UDyq-gPHm-iMZ3pJ
  LV Write Access        read/write
  LV Status              available
  # open                 1
  LV Size                15.62 GiB
  Current LE             4000
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:1
   
  --- Logical volume ---
  LV Name                /dev/vg_pdcpicpl01/lv_root
  VG Name                vg_pdcpicpl01
  LV UUID                p2nRu2-oDdS-j1VZ-lLZr-CbEQ-G0Yf-Wl9dHA
  LV Write Access        read/write
  LV Status              available
  # open                 1
  LV Size                214.42 GiB
  Current LE             54892
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:4
   
  --- Logical volume ---
  LV Name                /dev/vg_pdcpicpl01/lv_home
  VG Name                vg_pdcpicpl01
  LV UUID                EZ3FqQ-yjeW-Yx4a-Iljz-WClZ-1LXd-S16l4J
  LV Write Access        read/write
  LV Status              available
  # open                 1
  LV Size                48.83 GiB
  Current LE             12500
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:5
   
  --- Logical volume ---
  LV Name                /dev/HA-Web-VG/ha-web-lv
  VG Name                HA-Web-VG
  LV UUID                CdZ00K-pZSo-AJ4W-BVQZ-WvHF-O1yu-EGeC8n
  LV Write Access        read/write
  LV Status              NOT available
  LV Size                15.00 GiB
  Current LE             3840
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
   

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: text/plain;
	name="log.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="log.txt"

Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24083]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24130]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24113]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24138]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24167]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24164]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24192]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Starting stopped service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24358]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24380]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: start on lvm =
"ha-web-HA-LVM" returned 1 (generic error)
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: #68: Failed to start =
service:ha-web-service; return value: 1
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Stopping service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24411]: [script] Executing =
/etc/init.d/httpd stop
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24490]: [fs] stop: Could not =
match /dev/HA-Web-VG/ha-web-lv with a real device
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: stop on fs =
"ha-web-filesystem" returned 2 (invalid argument(s))
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24528]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24550]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24572]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24602]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24624]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24649]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24673]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #12: RG =
service:ha-web-service failed to stop; intervention required
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: Service =
service:ha-web-service is failed
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #13: Service =
service:ha-web-service failed to stop cleanly
(END)=20
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24083]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24130]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24113]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24138]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24167]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24164]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24192]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Starting stopped service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24358]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24380]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: start on lvm =
"ha-web-HA-LVM" returned 1 (generic error)
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: #68: Failed to start =
service:ha-web-service; return value: 1
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Stopping service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24411]: [script] Executing =
/etc/init.d/httpd stop
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24490]: [fs] stop: Could not =
match /dev/HA-Web-VG/ha-web-lv with a real device
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: stop on fs =
"ha-web-filesystem" returned 2 (invalid argument(s))
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24528]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24550]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24572]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24602]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24624]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24649]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24673]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #12: RG =
service:ha-web-service failed to stop; intervention required
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: Service =
service:ha-web-service is failed
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #13: Service =
service:ha-web-service failed to stop cleanly

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: application/octet-stream;
	name="lvm.conf"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="lvm.conf"

# This is an example configuration file for the LVM2 system.=0A=
# It contains the default settings that would be used if there was no=0A=
# /etc/lvm/lvm.conf file.=0A=
#=0A=
# Refer to 'man lvm.conf' for further information including the file =
layout.=0A=
#=0A=
# To put this file in a different directory and override /etc/lvm set=0A=
# the environment variable LVM_SYSTEM_DIR before running the tools.=0A=
=0A=
=0A=
# This section allows you to configure which block devices should=0A=
# be used by the LVM system.=0A=
devices {=0A=
=0A=
    # Where do you want your volume groups to appear ?=0A=
    dir =3D "/dev"=0A=
=0A=
    # An array of directories that contain the device nodes you wish=0A=
    # to use with LVM2.=0A=
    scan =3D [ "/dev" ]=0A=
=0A=
    # If several entries in the scanned directories correspond to the=0A=
    # same block device and the tools need to display a name for device,=0A=
    # all the pathnames are matched against each item in the following=0A=
    # list of regular expressions in turn and the first match is used.=0A=
    # preferred_names =3D [ ]=0A=
=0A=
    # Try to avoid using undescriptive /dev/dm-N names, if present.=0A=
    preferred_names =3D [ "^/dev/mpath/", "^/dev/mapper/mpath", =
"^/dev/[hs]d" ]=0A=
=0A=
    # A filter that tells LVM2 to only use a restricted set of devices.=0A=
    # The filter consists of an array of regular expressions.  These=0A=
    # expressions can be delimited by a character of your choice, and=0A=
    # prefixed with either an 'a' (for accept) or 'r' (for reject).=0A=
    # The first expression found to match a device name determines if=0A=
    # the device will be accepted or rejected (ignored).  Devices that=0A=
    # don't match any patterns are accepted.=0A=
=0A=
    # Be careful if there there are symbolic links or multiple =
filesystem =0A=
    # entries for the same device as each name is checked separately =
against=0A=
    # the list of patterns.  The effect is that if any name matches any =
'a'=0A=
    # pattern, the device is accepted; otherwise if any name matches any =
'r'=0A=
    # pattern it is rejected; otherwise it is accepted.=0A=
=0A=
    # Don't have more than one filter line active at once: only one gets =
used.=0A=
=0A=
    # Run vgscan after you change this parameter to ensure that=0A=
    # the cache file gets regenerated (see below).=0A=
    # If it doesn't do what you expect, check the output of 'vgscan =
-vvvv'.=0A=
=0A=
=0A=
    # By default we accept every block device:=0A=
    filter =3D [ "a/.*/" ]=0A=
=0A=
    # Exclude the cdrom drive=0A=
    # filter =3D [ "r|/dev/cdrom|" ]=0A=
=0A=
    # When testing I like to work with just loopback devices:=0A=
    # filter =3D [ "a/loop/", "r/.*/" ]=0A=
=0A=
    # Or maybe all loops and ide drives except hdc:=0A=
    # filter =3D[ "a|loop|", "r|/dev/hdc|", "a|/dev/ide|", "r|.*|" ]=0A=
=0A=
    # Use anchors if you want to be really specific=0A=
    # filter =3D [ "a|^/dev/hda8$|", "r/.*/" ]=0A=
=0A=
    # The results of the filtering are cached on disk to avoid=0A=
    # rescanning dud devices (which can take a very long time).=0A=
    # By default this cache is stored in the /etc/lvm/cache directory=0A=
    # in a file called '.cache'.=0A=
    # It is safe to delete the contents: the tools regenerate it.=0A=
    # (The old setting 'cache' is still respected if neither of=0A=
    # these new ones is present.)=0A=
    cache_dir =3D "/etc/lvm/cache"=0A=
    cache_file_prefix =3D ""=0A=
=0A=
    # You can turn off writing this cache file by setting this to 0.=0A=
    write_cache_state =3D 1=0A=
=0A=
    # Advanced settings.=0A=
=0A=
    # List of pairs of additional acceptable block device types found =0A=
    # in /proc/devices with maximum (non-zero) number of partitions.=0A=
    # types =3D [ "fd", 16 ]=0A=
=0A=
    # If sysfs is mounted (2.6 kernels) restrict device scanning to =0A=
    # the block devices it believes are valid.=0A=
    # 1 enables; 0 disables.=0A=
    sysfs_scan =3D 1=0A=
=0A=
    # By default, LVM2 will ignore devices used as components of=0A=
    # software RAID (md) devices by looking for md superblocks.=0A=
    # 1 enables; 0 disables.=0A=
    md_component_detection =3D 1=0A=
=0A=
    # By default, if a PV is placed directly upon an md device, LVM2=0A=
    # will align its data blocks with the md device's stripe-width.=0A=
    # 1 enables; 0 disables.=0A=
    md_chunk_alignment =3D 1=0A=
=0A=
    # Default alignment of the start of a data area in MB.  If set to 0,=0A=
    # a value of 64KB will be used.  Set to 1 for 1MiB, 2 for 2MiB, etc.=0A=
    # default_data_alignment =3D 1=0A=
=0A=
    # By default, the start of a PV's data area will be a multiple of=0A=
    # the 'minimum_io_size' or 'optimal_io_size' exposed in sysfs.=0A=
    # - minimum_io_size - the smallest request the device can perform=0A=
    #   w/o incurring a read-modify-write penalty (e.g. MD's chunk size)=0A=
    # - optimal_io_size - the device's preferred unit of receiving I/O=0A=
    #   (e.g. MD's stripe width)=0A=
    # minimum_io_size is used if optimal_io_size is undefined (0).=0A=
    # If md_chunk_alignment is enabled, that detects the optimal_io_size.=0A=
    # This setting takes precedence over md_chunk_alignment.=0A=
    # 1 enables; 0 disables.=0A=
    data_alignment_detection =3D 1=0A=
=0A=
    # Alignment (in KB) of start of data area when creating a new PV.=0A=
    # md_chunk_alignment and data_alignment_detection are disabled if =
set.=0A=
    # Set to 0 for the default alignment (see: data_alignment_default)=0A=
    # or page size, if larger.=0A=
    data_alignment =3D 0=0A=
=0A=
    # By default, the start of the PV's aligned data area will be =
shifted by=0A=
    # the 'alignment_offset' exposed in sysfs.  This offset is often 0 =
but=0A=
    # may be non-zero; e.g.: certain 4KB sector drives that compensate =
for=0A=
    # windows partitioning will have an alignment_offset of 3584 bytes=0A=
    # (sector 7 is the lowest aligned logical block, the 4KB sectors =
start=0A=
    # at LBA -1, and consequently sector 63 is aligned on a 4KB =
boundary).=0A=
    # But note that pvcreate --dataalignmentoffset will skip this =
detection.=0A=
    # 1 enables; 0 disables.=0A=
    data_alignment_offset_detection =3D 1=0A=
=0A=
    # If, while scanning the system for PVs, LVM2 encounters a =
device-mapper=0A=
    # device that has its I/O suspended, it waits for it to become =
accessible.=0A=
    # Set this to 1 to skip such devices.  This should only be needed=0A=
    # in recovery situations.=0A=
    ignore_suspended_devices =3D 0=0A=
=0A=
    # During each LVM operation errors received from each device are =
counted.=0A=
    # If the counter of a particular device exceeds the limit set here, =
no=0A=
    # further I/O is sent to that device for the remainder of the =
respective=0A=
    # operation. Setting the parameter to 0 disables the counters =
altogether.=0A=
    disable_after_error_count =3D 0=0A=
=0A=
    # Allow use of pvcreate --uuid without requiring --restorefile.=0A=
    require_restorefile_with_uuid =3D 1=0A=
}=0A=
=0A=
# This section allows you to configure the way in which LVM selects=0A=
# free space for its Logical Volumes.=0A=
#allocation {=0A=
#    When searching for free space to extend an LV, the "cling"=0A=
#    allocation policy will choose space on the same PVs as the last=0A=
#    segment of the existing LV.  If there is insufficient space and a=0A=
#    list of tags is defined here, it will check whether any of them are=0A=
#    attached to the PVs concerned and then seek to match those PV tags=0A=
#    between existing extents and new extents.=0A=
#    Use the special tag "@*" as a wildcard to match any PV tag.=0A=
#    =0A=
#    Example: LVs are mirrored between two sites within a single VG.=0A=
#    PVs are tagged with either @site1 or @site2 to indicate where=0A=
#    they are situated.=0A=
#=0A=
#    cling_tag_list =3D [ "@site1", "@site2" ]=0A=
#    cling_tag_list =3D [ "@*" ]=0A=
#}=0A=
=0A=
# This section that allows you to configure the nature of the=0A=
# information that LVM2 reports.=0A=
log {=0A=
=0A=
    # Controls the messages sent to stdout or stderr.=0A=
    # There are three levels of verbosity, 3 being the most verbose.=0A=
    verbose =3D 0=0A=
=0A=
    # Should we send log messages through syslog?=0A=
    # 1 is yes; 0 is no.=0A=
    syslog =3D 1=0A=
=0A=
    # Should we log error and debug messages to a file?=0A=
    # By default there is no log file.=0A=
    #file =3D "/var/log/lvm2.log"=0A=
=0A=
    # Should we overwrite the log file each time the program is run?=0A=
    # By default we append.=0A=
    overwrite =3D 0=0A=
=0A=
    # What level of log messages should we send to the log file and/or =
syslog?=0A=
    # There are 6 syslog-like log levels currently in use - 2 to 7 =
inclusive.=0A=
    # 7 is the most verbose (LOG_DEBUG).=0A=
    level =3D 0=0A=
=0A=
    # Format of output messages=0A=
    # Whether or not (1 or 0) to indent messages according to their =
severity=0A=
    indent =3D 1=0A=
=0A=
    # Whether or not (1 or 0) to display the command name on each line =
output=0A=
    command_names =3D 0=0A=
=0A=
    # A prefix to use before the message text (but after the command =
name,=0A=
    # if selected).  Default is two spaces, so you can see/grep the =
severity=0A=
    # of each message.=0A=
    prefix =3D "  "=0A=
=0A=
    # To make the messages look similar to the original LVM tools use:=0A=
    #   indent =3D 0=0A=
    #   command_names =3D 1=0A=
    #   prefix =3D " -- "=0A=
=0A=
    # Set this if you want log messages during activation.=0A=
    # Don't use this in low memory situations (can deadlock).=0A=
    # activation =3D 0=0A=
}=0A=
=0A=
# Configuration of metadata backups and archiving.  In LVM2 when we=0A=
# talk about a 'backup' we mean making a copy of the metadata for the=0A=
# *current* system.  The 'archive' contains old metadata configurations.=0A=
# Backups are stored in a human readeable text format.=0A=
backup {=0A=
=0A=
    # Should we maintain a backup of the current metadata configuration ?=0A=
    # Use 1 for Yes; 0 for No.=0A=
    # Think very hard before turning this off!=0A=
    backup =3D 1=0A=
=0A=
    # Where shall we keep it ?=0A=
    # Remember to back up this directory regularly!=0A=
    backup_dir =3D "/etc/lvm/backup"=0A=
=0A=
    # Should we maintain an archive of old metadata configurations.=0A=
    # Use 1 for Yes; 0 for No.=0A=
    # On by default.  Think very hard before turning this off.=0A=
    archive =3D 1=0A=
=0A=
    # Where should archived files go ?=0A=
    # Remember to back up this directory regularly!=0A=
    archive_dir =3D "/etc/lvm/archive"=0A=
=0A=
    # What is the minimum number of archive files you wish to keep ?=0A=
    retain_min =3D 10=0A=
=0A=
    # What is the minimum time you wish to keep an archive file for ?=0A=
    retain_days =3D 30=0A=
}=0A=
=0A=
# Settings for the running LVM2 in shell (readline) mode.=0A=
shell {=0A=
=0A=
    # Number of lines of history to store in ~/.lvm_history=0A=
    history_size =3D 100=0A=
}=0A=
=0A=
=0A=
# Miscellaneous global LVM2 settings=0A=
global {=0A=
=0A=
    # The file creation mask for any files and directories created.=0A=
    # Interpreted as octal if the first digit is zero.=0A=
    umask =3D 077=0A=
=0A=
    # Allow other users to read the files=0A=
    #umask =3D 022=0A=
=0A=
    # Enabling test mode means that no changes to the on disk metadata=0A=
    # will be made.  Equivalent to having the -t option on every=0A=
    # command.  Defaults to off.=0A=
    test =3D 0=0A=
=0A=
    # Default value for --units argument=0A=
    units =3D "h"=0A=
=0A=
    # Since version 2.02.54, the tools distinguish between powers of=0A=
    # 1024 bytes (e.g. KiB, MiB, GiB) and powers of 1000 bytes (e.g.=0A=
    # KB, MB, GB).=0A=
    # If you have scripts that depend on the old behaviour, set this to 0=0A=
    # temporarily until you update them.=0A=
    si_unit_consistency =3D 1=0A=
=0A=
    # Whether or not to communicate with the kernel device-mapper.=0A=
    # Set to 0 if you want to use the tools to manipulate LVM metadata =0A=
    # without activating any logical volumes.=0A=
    # If the device-mapper kernel driver is not present in your kernel=0A=
    # setting this to 0 should suppress the error messages.=0A=
    activation =3D 1=0A=
=0A=
    # If we can't communicate with device-mapper, should we try running =0A=
    # the LVM1 tools?=0A=
    # This option only applies to 2.4 kernels and is provided to help you=0A=
    # switch between device-mapper kernels and LVM1 kernels.=0A=
    # The LVM1 tools need to be installed with .lvm1 suffices=0A=
    # e.g. vgscan.lvm1 and they will stop working after you start using=0A=
    # the new lvm2 on-disk metadata format.=0A=
    # The default value is set when the tools are built.=0A=
    # fallback_to_lvm1 =3D 0=0A=
=0A=
    # The default metadata format that commands should use - "lvm1" or =
"lvm2".=0A=
    # The command line override is -M1 or -M2.=0A=
    # Defaults to "lvm2".=0A=
    # format =3D "lvm2"=0A=
=0A=
    # Location of proc filesystem=0A=
    proc =3D "/proc"=0A=
=0A=
    # Type of locking to use. Defaults to local file-based locking (1).=0A=
    # Turn locking off by setting to 0 (dangerous: risks metadata =
corruption=0A=
    # if LVM2 commands get run concurrently).=0A=
    # Type 2 uses the external shared library locking_library.=0A=
    # Type 3 uses built-in clustered locking.=0A=
    # Type 4 uses read-only locking which forbids any operations that =
might =0A=
    # change metadata.=0A=
    locking_type =3D 1=0A=
=0A=
    # Set to 0 to fail when a lock request cannot be satisfied =
immediately.=0A=
    wait_for_locks =3D 1=0A=
=0A=
    # If using external locking (type 2) and initialisation fails,=0A=
    # with this set to 1 an attempt will be made to use the built-in=0A=
    # clustered locking.=0A=
    # If you are using a customised locking_library you should set this =
to 0.=0A=
    fallback_to_clustered_locking =3D 1=0A=
=0A=
    # If an attempt to initialise type 2 or type 3 locking failed, =
perhaps=0A=
    # because cluster components such as clvmd are not running, with =
this set=0A=
    # to 1 an attempt will be made to use local file-based locking (type =
1).=0A=
    # If this succeeds, only commands against local volume groups will =
proceed.=0A=
    # Volume Groups marked as clustered will be ignored.=0A=
    fallback_to_local_locking =3D 1=0A=
=0A=
    # Local non-LV directory that holds file-based locks while commands =
are=0A=
    # in progress.  A directory like /tmp that may get wiped on reboot =
is OK.=0A=
    locking_dir =3D "/var/lock/lvm"=0A=
=0A=
    # Whenever there are competing read-only and read-write access =
requests for=0A=
    # a volume group's metadata, instead of always granting the read-only=0A=
    # requests immediately, delay them to allow the read-write requests =
to be=0A=
    # serviced.  Without this setting, write access may be stalled by a =
high=0A=
    # volume of read-only requests.=0A=
    # NB. This option only affects locking_type =3D 1 viz. local =
file-based=0A=
    # locking.=0A=
    prioritise_write_locks =3D 1=0A=
=0A=
    # Other entries can go here to allow you to load shared libraries=0A=
    # e.g. if support for LVM1 metadata was compiled as a shared library =
use=0A=
    #   format_libraries =3D "liblvm2format1.so" =0A=
    # Full pathnames can be given.=0A=
=0A=
    # Search this directory first for shared libraries.=0A=
    #   library_dir =3D "/lib"=0A=
=0A=
    # The external locking library to load if locking_type is set to 2.=0A=
    #   locking_library =3D "liblvm2clusterlock.so"=0A=
=0A=
    # Treat any internal errors as fatal errors, aborting the process =
that=0A=
    # encountered the internal error. Please only enable for debugging.=0A=
    abort_on_internal_errors =3D 0=0A=
=0A=
    # If set to 1, no operations that change on-disk metadata will be =
permitted.=0A=
    # Additionally, read-only commands that encounter metadata in need =
of repair=0A=
    # will still be allowed to proceed exactly as if the repair had been =0A=
    # performed (except for the unchanged vg_seqno).=0A=
    # Inappropriate use could mess up your system, so seek advice first!=0A=
    metadata_read_only =3D 0=0A=
}=0A=
=0A=
activation {=0A=
    # Set to 0 to disable udev synchronisation (if compiled into the =
binaries).=0A=
    # Processes will not wait for notification from udev.=0A=
    # They will continue irrespective of any possible udev processing=0A=
    # in the background.  You should only use this if udev is not running=0A=
    # or has rules that ignore the devices LVM2 creates.=0A=
    # The command line argument --nodevsync takes precedence over this =
setting.=0A=
    # If set to 1 when udev is not running, and there are LVM2 processes=0A=
    # waiting for udev, run 'dmsetup udevcomplete_all' manually to wake =
them up.=0A=
    udev_sync =3D 1=0A=
=0A=
    # Set to 0 to disable the udev rules installed by LVM2 (if built with=0A=
    # --enable-udev_rules). LVM2 will then manage the /dev nodes and =
symlinks=0A=
    # for active logical volumes directly itself.=0A=
    # N.B. Manual intervention may be required if this setting is changed=0A=
    # while any logical volumes are active.=0A=
    udev_rules =3D 1=0A=
=0A=
    # How to fill in missing stripes if activating an incomplete volume.=0A=
    # Using "error" will make inaccessible parts of the device return=0A=
    # I/O errors on access.  You can instead use a device path, in which =0A=
    # case, that device will be used to in place of missing stripes.=0A=
    # But note that using anything other than "error" with mirrored =0A=
    # or snapshotted volumes is likely to result in data corruption.=0A=
    missing_stripe_filler =3D "error"=0A=
=0A=
    # How much stack (in KB) to reserve for use while devices suspended=0A=
    reserved_stack =3D 256=0A=
=0A=
    # How much memory (in KB) to reserve for use while devices suspended=0A=
    reserved_memory =3D 8192=0A=
=0A=
    # Nice value used while devices suspended=0A=
    process_priority =3D -18=0A=
=0A=
    # If volume_list is defined, each LV is only activated if there is a=0A=
    # match against the list.=0A=
    #   "vgname" and "vgname/lvname" are matched exactly.=0A=
    #   "@tag" matches any tag set in the LV or VG.=0A=
    #   "@*" matches if any tag defined on the host is also set in the =
LV or VG=0A=
    #=0A=
    # volume_list =3D [ "vg1", "vg2/lvol1", "@tag1", "@*" ]=0A=
=0A=
    # Size (in KB) of each copy operation when mirroring=0A=
    mirror_region_size =3D 512=0A=
=0A=
    # Setting to use when there is no readahead value stored in the =
metadata.=0A=
    #=0A=
    # "none" - Disable readahead.=0A=
    # "auto" - Use default value chosen by kernel.=0A=
    readahead =3D "auto"=0A=
=0A=
    # 'mirror_image_fault_policy' and 'mirror_log_fault_policy' define=0A=
    # how a device failure affecting a mirror is handled.=0A=
    # A mirror is composed of mirror images (copies) and a log.=0A=
    # A disk log ensures that a mirror does not need to be re-synced=0A=
    # (all copies made the same) every time a machine reboots or crashes.=0A=
    #=0A=
    # In the event of a failure, the specified policy will be used to =
determine=0A=
    # what happens. This applies to automatic repairs (when the mirror =
is being=0A=
    # monitored by dmeventd) and to manual lvconvert --repair when=0A=
    # --use-policies is given.=0A=
    #=0A=
    # "remove" - Simply remove the faulty device and run without it.  If=0A=
    #            the log device fails, the mirror would convert to using=0A=
    #            an in-memory log.  This means the mirror will not=0A=
    #            remember its sync status across crashes/reboots and=0A=
    #            the entire mirror will be re-synced.  If a=0A=
    #            mirror image fails, the mirror will convert to a=0A=
    #            non-mirrored device if there is only one remaining good=0A=
    #            copy.=0A=
    #=0A=
    # "allocate" - Remove the faulty device and try to allocate space on=0A=
    #            a new device to be a replacement for the failed device.=0A=
    #            Using this policy for the log is fast and maintains the=0A=
    #            ability to remember sync state through crashes/reboots.=0A=
    #            Using this policy for a mirror device is slow, as it=0A=
    #            requires the mirror to resynchronize the devices, but it=0A=
    #            will preserve the mirror characteristic of the device.=0A=
    #            This policy acts like "remove" if no suitable device and=0A=
    #            space can be allocated for the replacement.=0A=
    #=0A=
    # "allocate_anywhere" - Not yet implemented. Useful to place the log =
device=0A=
    #            temporarily on same physical volume as one of the mirror=0A=
    #            images. This policy is not recommended for mirror =
devices=0A=
    #            since it would break the redundant nature of the =
mirror. This=0A=
    #            policy acts like "remove" if no suitable device and =
space can=0A=
    #            be allocated for the replacement.=0A=
=0A=
    mirror_log_fault_policy =3D "allocate"=0A=
    mirror_image_fault_policy =3D "remove"=0A=
=0A=
    # 'snapshot_autoextend_threshold' and 'snapshot_autoextend_percent' =
define=0A=
    # how to handle automatic snapshot extension. The former defines =
when the=0A=
    # snapshot should be extended: when its space usage exceeds this many=0A=
    # percent. The latter defines how much extra space should be =
allocated for=0A=
    # the snapshot, in percent of its current size.=0A=
    #=0A=
    # For example, if you set snapshot_autoextend_threshold to 70 and=0A=
    # snapshot_autoextend_percent to 20, whenever a snapshot exceeds 70% =
usage,=0A=
    # it will be extended by another 20%. For a 1G snapshot, using up =
700M will=0A=
    # trigger a resize to 1.2G. When the usage exceeds 840M, the =
snapshot will=0A=
    # be extended to 1.44G, and so on.=0A=
    #=0A=
    # Setting snapshot_autoextend_threshold to 100 disables automatic=0A=
    # extensions. The minimum value is 50 (A setting below 50 will be =
treated=0A=
    # as 50).=0A=
=0A=
    snapshot_autoextend_threshold =3D 100=0A=
    snapshot_autoextend_percent =3D 20=0A=
=0A=
    # While activating devices, I/O to devices being (re)configured is=0A=
    # suspended, and as a precaution against deadlocks, LVM2 needs to pin=0A=
    # any memory it is using so it is not paged out.  Groups of pages =
that=0A=
    # are known not to be accessed during activation need not be pinned=0A=
    # into memory.  Each string listed in this setting is compared =
against=0A=
    # each line in /proc/self/maps, and the pages corresponding to any=0A=
    # lines that match are not pinned.  On some systems locale-archive =
was=0A=
    # found to make up over 80% of the memory used by the process.=0A=
    # mlock_filter =3D [ "locale/locale-archive", =
"gconv/gconv-modules.cache" ]=0A=
=0A=
    # Set to 1 to revert to the default behaviour prior to version =
2.02.62=0A=
    # which used mlockall() to pin the whole process's memory while =
activating=0A=
    # devices.=0A=
    use_mlockall =3D 0=0A=
=0A=
    # Monitoring is enabled by default when activating logical volumes.=0A=
    # Set to 0 to disable monitoring or use the --ignoremonitoring =
option.=0A=
    monitoring =3D 1=0A=
=0A=
    # When pvmove or lvconvert must wait for the kernel to finish=0A=
    # synchronising or merging data, they check and report progress=0A=
    # at intervals of this number of seconds.  The default is 15 seconds.=0A=
    # If this is set to 0 and there is only one thing to wait for, there=0A=
    # are no progress reports, but the process is awoken immediately the=0A=
    # operation is complete.=0A=
    polling_interval =3D 15=0A=
}=0A=
=0A=
=0A=
####################=0A=
# Advanced section #=0A=
####################=0A=
=0A=
# Metadata settings=0A=
#=0A=
# metadata {=0A=
    # Default number of copies of metadata to hold on each PV.  0, 1 or =
2.=0A=
    # You might want to override it from the command line with 0 =0A=
    # when running pvcreate on new PVs which are to be added to large =
VGs.=0A=
=0A=
    # pvmetadatacopies =3D 1=0A=
=0A=
    # Default number of copies of metadata to maintain for each VG.=0A=
    # If set to a non-zero value, LVM automatically chooses which of=0A=
    # the available metadata areas to use to achieve the requested=0A=
    # number of copies of the VG metadata.  If you set a value larger=0A=
    # than the the total number of metadata areas available then=0A=
    # metadata is stored in them all.=0A=
    # The default value of 0 ("unmanaged") disables this automatic=0A=
    # management and allows you to control which metadata areas=0A=
    # are used at the individual PV level using 'pvchange=0A=
    # --metadataignore y/n'.=0A=
=0A=
    # vgmetadatacopies =3D 0=0A=
=0A=
    # Approximate default size of on-disk metadata areas in sectors.=0A=
    # You should increase this if you have large volume groups or=0A=
    # you want to retain a large on-disk history of your metadata =
changes.=0A=
=0A=
    # pvmetadatasize =3D 255=0A=
=0A=
    # List of directories holding live copies of text format metadata.=0A=
    # These directories must not be on logical volumes!=0A=
    # It's possible to use LVM2 with a couple of directories here,=0A=
    # preferably on different (non-LV) filesystems, and with no other =0A=
    # on-disk metadata (pvmetadatacopies =3D 0). Or this can be in=0A=
    # addition to on-disk metadata areas.=0A=
    # The feature was originally added to simplify testing and is not=0A=
    # supported under low memory situations - the machine could lock up.=0A=
    #=0A=
    # Never edit any files in these directories by hand unless you=0A=
    # you are absolutely sure you know what you are doing! Use=0A=
    # the supplied toolset to make changes (e.g. vgcfgrestore).=0A=
=0A=
    # dirs =3D [ "/etc/lvm/metadata", "/mnt/disk2/lvm/metadata2" ]=0A=
#}=0A=
=0A=
# Event daemon=0A=
#=0A=
dmeventd {=0A=
    # mirror_library is the library used when monitoring a mirror device.=0A=
    #=0A=
    # "libdevmapper-event-lvm2mirror.so" attempts to recover from=0A=
    # failures.  It removes failed devices from a volume group and=0A=
    # reconfigures a mirror as necessary. If no mirror library is=0A=
    # provided, mirrors are not monitored through dmeventd.=0A=
=0A=
    mirror_library =3D "libdevmapper-event-lvm2mirror.so"=0A=
=0A=
    # snapshot_library is the library used when monitoring a snapshot =
device.=0A=
    #=0A=
    # "libdevmapper-event-lvm2snapshot.so" monitors the filling of=0A=
    # snapshots and emits a warning through syslog when the use of=0A=
    # the snapshot exceeds 80%. The warning is repeated when 85%, 90% and=0A=
    # 95% of the snapshot is filled.=0A=
=0A=
    snapshot_library =3D "libdevmapper-event-lvm2snapshot.so"=0A=
=0A=
    # Full path of the dmeventd binary.=0A=
    #=0A=
    # executable =3D "/sbin/dmeventd"=0A=
}=0A=

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: text/plain;
	name="hosts.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="hosts.txt"

[root@PDC-PIC-PL-01 cluster]# cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 =
localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 =
localhost6.localdomain6
192.168.24.32   PDC-PIC-PL-01   PDC-PIC-PL-01.chcs.sg
192.168.25.132  PDC-PIC-PL-01-PM
192.168.26.13   PDC-PIC-PL-CL1
192.168.24.33   PDC-PIC-PL-02  PDC-PIC-PL-02.chcs.sg
192.168.25.133  PDC-PIC-PL-02-PM
192.168.26.14   PDC-PIC-PL-CL2

------=_NextPart_000_0238_01CDA6F8.EE9784E0--

From andrew@beekhof.net Wed Oct 10 06:47:24 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AAlOYe006413 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 06:47:24 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AAlJVp030853
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 06:47:19 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AAlIK6032767
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 06:47:18 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so359581obb.33
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 03:47:17 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type:x-gm-message-state;
	bh=jVWsIeLhC+SgxL9kwunnqyoBc6z4ydOcOTeMgrsUtJE=;
	b=A1W5Z1V5HX21g4o7M188HtZxEMKxkyCalpFAkA4gXnOpQyPJ1l5cBqwoYeHgHV8tGH
	qQGvexXGIOcb1ZpenYFCUFPisn56vNhfZbsupWTFLL6/RKzL5/DSdaMNkuBOmSPLxZTK
	cadNxUDCvkRyEjn8ojVYfse3IPVQsHmmUV57M06s9BnLGFeZhIanEmxcvt1tl8jfLijO
	lkO98cAPREUe6nMcEW2bvEPclTd/yA+nc+jWn4qbCzTEAy55l0DzxPtuaI5t8SXhtLds
	h1ULK5aCXdAaBCClDiamxpdRLFA+JMjGz05doh6ItuY9HdshLfo0EDfnOeUqsIbnvmhS
	MYPQ==
MIME-Version: 1.0
Received: by 10.60.13.3 with SMTP id d3mr18591096oec.118.1349866037792; Wed,
	10 Oct 2012 03:47:17 -0700 (PDT)
Received: by 10.76.173.70 with HTTP; Wed, 10 Oct 2012 03:47:17 -0700 (PDT)
In-Reply-To: <50736F78.3060906@redhat.com>
References: <50736F78.3060906@redhat.com>
Date: Wed, 10 Oct 2012 21:47:17 +1100
Message-ID: <CAEDLWG2iTtphgjAnBcGTVSDSuaUPHSbvr2bij9LanXbehtCATA@mail.gmail.com>
From: Andrew Beekhof <andrew@beekhof.net>
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQngsPJrETv586fT4qRRnl5ycdhO4uXAFJ18dBadfgADzlrNb4kSY4TBoqUf3sf6DgG8Qu/a
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 10:47:24 -0000

On Tue, Oct 9, 2012 at 11:27 AM, Chris Feist <cfeist@redhat.com> wrote:
> We've been making improvements to the pcs (pacemaker/corosync configuration
> system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync 2.0
> udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should be
> showing up shortly.

Its now available at the usual location:

   http://www.clusterlabs.org/doc

>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next
> release. You should be able to find that package in the following
> locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE &
> Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of your
> entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the pcs
> project at github (https://github.com/feist/pcs/issues) if you have any
> questions or problems.
>
> Thanks!
> Chris
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org

From andrewd@sterling.net Wed Oct 10 11:27:12 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AFRBao028120 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 11:27:11 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AFR6Tj003320
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:27:06 -0400
Received: from mail4.sterling.net (mail4.sterling.net [199.108.225.109])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AFR39G022556
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:27:03 -0400
Received: from str-exchange2.sterling.local (exchange.sterling.net
	[199.107.167.35]) (using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail4.sterling.net (Postfix) with ESMTPS id DC0AACA81E5;
	Wed, 10 Oct 2012 08:27:02 -0700 (PDT)
Received: from dali.sterling.local (10.10.1.154) by exchange.sterling.net
	(10.10.1.5) with Microsoft SMTP Server (TLS) id 14.2.318.1;
	Wed, 10 Oct 2012 08:27:02 -0700
Message-ID: <507593C6.5040708@sterling.net>
Date: Wed, 10 Oct 2012 08:27:02 -0700
From: Andrew Denton <andrewd@sterling.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
In-Reply-To: <a2202e87.00001f6c.00000065@sierra-A66>
X-Enigmail-Version: 1.4.4
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="------------enigFA6B042CF070239471FEACBD"
X-RedHat-Spam-Score: -4.043  (BAYES_00, HTML_MESSAGE, RP_MATCHES_RCVD,
	SPF_HELO_PASS, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 15:27:13 -0000

--------------enigFA6B042CF070239471FEACBD
Content-Type: multipart/alternative;
	boundary="------------060608050606010400020401"

This is a multi-part message in MIME format.
--------------060608050606010400020401
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 10/10/2012 12:06 AM, Shanti Pahari wrote:
> I have cluster setup with 2 node and created web cluster service on it
> but it cannot run.
>
> I have not listed anything in lvm.conf volume_list because once I add
> anything in volume_list and reboot the system then I cannot mount and
> even cannot read the lv which I created for my web . It throws error as=

>
> error message "not activating volume group lv does not pass activation
> filter"
>
> Therefore I didn't add anything in lvm.conf . Then I try to start my
> cluster servers for web server but the service failed.
>

I've seen this failure too when building my cluster. You either need to
add the system's volume groups to volume_list, or tag the system's vgs
with the @hostname so it can still activate them.
e.g.
    volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL=
2" ]
on one node and
    volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL=
2" ]
on the other. Next it will complain about initrd being older than
lvm.conf, so I've been running
# mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`
Not sure if that's the right command but it works for me =3D)

One of these days I'm going to tag the system's vgs properly so I can
use the same lvm.conf across the nodes. I think it's something like
lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root
etc...

By the way, to display how things are tagged, you have to do
lvs -o +tags
I wish it displayed them in lvdisplay, but it doesn't.

-- Andrew




--------------060608050606010400020401
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<html>
  <head>
    <meta content=3D"text/html; charset=3DISO-8859-1"
      http-equiv=3D"Content-Type">
  </head>
  <body bgcolor=3D"#FFFFFF" text=3D"#000000">
    <div class=3D"moz-cite-prefix">On 10/10/2012 12:06 AM, Shanti Pahari
      wrote:<br>
    </div>
    <blockquote cite=3D"mid:a2202e87.00001f6c.00000065@sierra-A66"
      type=3D"cite">
      <meta http-equiv=3D"Content-Type" content=3D"text/html;
        charset=3DISO-8859-1">
      <meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered
        medium)">
      <style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
=2EMsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
      <div class=3D"WordSection1">I have cluster setup with 2 node and
        created web cluster service on it but it cannot run.<o:p></o:p>
        <p class=3D"MsoNormal">I have not listed anything in lvm.conf
          volume_list because once I add anything in volume_list and
          reboot the system then I cannot mount and even cannot read the
          lv which I created for my web . It throws error as <o:p></o:p><=
/p>
        <p class=3D"MsoNormal">error message "not activating volume group=

          lv does not pass activation filter"<o:p></o:p></p>
        <p class=3D"MsoNormal">Therefore I didn&#8217;t add anything in l=
vm.conf
          . Then I try to start my cluster servers for web server but
          the service failed.<o:p></o:p></p>
      </div>
    </blockquote>
    <br>
    I've seen this failure too when building my cluster. You either need
    to add the system's volume groups to volume_list, or tag the
    system's vgs with the @hostname so it can still activate them. <br>
    e.g.<br>
    &nbsp;&nbsp;&nbsp; volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL=
1",
    "@PDC-PIC-PL-CL2" ]<br>
    on one node and<br>
    &nbsp;&nbsp;&nbsp; volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL=
1",
    "@PDC-PIC-PL-CL2" ]<br>
    on the other. Next it will complain about initrd being older than
    lvm.conf, so I've been running<br>
    # mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`<br>
    Not sure if that's the right command but it works for me =3D)<br>
    <br>
    One of these days I'm going to tag the system's vgs properly so I
    can use the same lvm.conf across the nodes. I think it's something
    like<br>
    lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root <br>
    etc...<br>
    <br>
    By the way, to display how things are tagged, you have to do<br>
    lvs -o +tags<br>
    I wish it displayed them in lvdisplay, but it doesn't.<br>
    <br>
    -- Andrew<br>
    <br>
    <br>
    <br>
  </body>
</html>

--------------060608050606010400020401--

--------------enigFA6B042CF070239471FEACBD
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://www.enigmail.net/

iQIcBAEBAgAGBQJQdZPGAAoJENMx+en9ioCI0pcP/jZ2HdW3Wnl4gU+4IXQcwDBU
OfRuzJaF4zfBE7AU5tjs/DeA6kx9QHcNvLRiozxk2wU3081Kg9ZFNu7xrd0J4jFR
hz5AdhLHBgAGRkeuh79JBHUnvVVTxJHe8cckqyQj5qOZOhKbqXHV1ke/EAqSyaQ7
qvE9R1ZT5rFPfEAgy+kBKBAcRxbEJxmxNMCZ6+RJGl9yzecvXWyeBomnm6Mbpb9q
tLhmuY9Rip9u133MW97VBoo7C5ij5MtaxS5gjBoQUOsUUha3YTLQIMdvcQ+kyCpi
w73JlsgWiMumhkukCj4j0tPK1X44OsgispLwcTz/xsetNQUS2AifyomDGjyQWbuK
J8ibzHjRsIizHiNOBwURp536in/E7QhqiVd4FSKbI2IwqVixC1BPw8hX4qKd6IyP
2nxH4u2gagpcQsYMkLlmOjcM3bCQFZJiM9KIIHnugrCHPu2XV59xnPQom6vCv+RP
L/mkHmsVVs89EVYt3lDCOBihruDVc9cTpI8ODKewqQGz5ZAdD3GhKDUJioLLOEpq
+z47W68UFyjFmse3sO6uQv3LjoHsL+zSxaXRbxXfy/52CACFw5wLCTfo/LOX79bP
Ct9OwKcxz8ybRbKJDLN8QbzABY+3AS99Ghi1uToXU0FwxTdb9rGLw5CdsWpPANVi
c9XZZaFWiEwVgMr8cTvS
=ig5y
-----END PGP SIGNATURE-----

--------------enigFA6B042CF070239471FEACBD--

From lists@alteeve.ca Wed Oct 10 11:50:45 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AFoiNs030375 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 11:50:45 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AFodKw030043
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:50:39 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AFob75008549
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:50:38 -0400
Received: from lemass.alteeve.ca (unknown [199.119.232.211])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 1B739422488;
	Wed, 10 Oct 2012 11:50:33 -0400 (EDT)
Message-ID: <50759946.7060303@alteeve.ca>
Date: Wed, 10 Oct 2012 11:50:30 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
In-Reply-To: <a2202e87.00001f6c.00000065@sierra-A66>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 15:50:45 -0000

Your fencing is not setup properly. You define the fence devices, but do 
not use them as <method>'s under each node definition. You should be 
able to 'fence_node <target>' and watch it get rebooted. Until then, 
your cluster will hang (by design) the first time there is a problem.

Assuming you want to use clustered LVM, you need to change locking_type 
to '3' and, I advise, change 'falllback_to_local_locking' to '0'. This 
also requires that the 'clvmd' daemon is running, which in turn needs 
cman to be running first.

What is your backing device for the LVM PV?

digimer

On 10/10/2012 03:06 AM, Shanti Pahari wrote:
> Dear all,
>
> I have cluster setup with 2 node and created web cluster service on it
> but it cannot run.
>
> I have not listed anything in lvm.conf volume_list because once I add
> anything in volume_list and reboot the system then I cannot mount and
> even cannot read the lv which I created for my web . It throws error as
>
> error message "not activating volume group lv does not pass activation
> filter"
>
> Therefore I didnt add anything in lvm.conf . Then I try to start my
> cluster servers for web server but the service failed.
>
> Please help me so that I can solve this out.
>
> I have attached my cluster.conf , lvdisplay , /var/log/messages and
> lvm.conf and my /etc/hosts.
>
> I will be greatful if anyone can help me!
>
> Thanks
>
> And my clustat:
>
> Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
>
> Member Status: Quorate
>
> Member Name                                                     ID   Status
>
> ------ ----                                                     ---- ------
>
> PDC-PIC-PL-CL1                                                      1
> Online, Local, rgmanager
>
> PDC-PIC-PL-CL2                                                      2
> Online, rgmanager
>
> Service Name                                               Owner
> (Last)                                               State
>
>   ------- ----                                               -----
> ------                                               -----
>
>   service:ha-web-service
> (PDC-PIC-PL-CL1)                                           failed
>
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From CBurke@innova-partners.com Wed Oct 10 14:45:22 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AIjMIF010343 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 14:45:22 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AIjHrW009235
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 14:45:17 -0400
Received: from spam.innova-partners.com (mail.innova-partners.com
	[65.118.247.8])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AIjFcG026439
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 14:45:16 -0400
X-ASG-Debug-ID: 1349894714-03f73742b9688590001-nvKthU
Received: from alexandria.innova.local ([192.168.30.100]) by
	spam.innova-partners.com with ESMTP id HPRMDEvdPTCvgqz6 for
	<linux-cluster@redhat.com>; Wed, 10 Oct 2012 14:45:14 -0400 (EDT)
X-Barracuda-Envelope-From: CBurke@innova-partners.com
X-ASG-Whitelist: Client
Received: from alexandria.innova.local ([::1]) by alexandria.innova.local
	([::1]) with mapi id 14.02.0309.002; Wed, 10 Oct 2012 14:45:14 -0400
From: Chip Burke <CBurke@innova-partners.com>
X-Barracuda-Apparent-Source-IP: ::1
To: linux clustering <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster]  Configure multiple heartbeat on a redhat cluster
X-ASG-Orig-Subj: Re: [Linux-cluster] Configure multiple heartbeat on a redhat
	cluster
Thread-Index: AQHNpcAB9ri0xyfg5E6Y4Sw06+Hny5ey40IA
Date: Wed, 10 Oct 2012 18:45:13 +0000
Message-ID: <F6CC886A516DF049A33F32C149ED21C823C3FAD9@alexandria.innova.local>
In-Reply-To: <1D241511770E2F4BA89AFD224EDD527141025BAE@G9W0733.americas.hpqcorp.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [192.168.15.109]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <3811175A9B610143AB0581874FE9E994@innova-partners.com>
MIME-Version: 1.0
X-Barracuda-Connect: UNKNOWN[192.168.30.100]
X-Barracuda-Start-Time: 1349894714
X-Barracuda-URL: http://spam.innova-partners.com:8000/cgi-mod/mark.cgi
X-Virus-Scanned: by bsmtpd at innova-partners.com
X-RedHat-Spam-Score: -4.042  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9AIjMIF010343
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Configure multiple heartbeat on a redhat cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 18:45:22 -0000

I have been looking for an answer to this myself. The only answer I have
found is using bonded interfaces.

https://access.redhat.com/knowledge/node/48157

However, seeing that it uses multicast, I am not sure it say you have NICs
on a production LAN and then NICs on an iSCSI LAN, that they all
send/receive heartbeat packets to the multicast address on all attached
LANs.


________________________________________
Chip Burke







On 10/8/12 9:47 PM, "Chen, Ming Ming" <ming-ming.chen@hp.com> wrote:

>
>
> Hi,
> Is there a way to configure multiple heartbeat network in the
>/etc/cluster.conf file.
>I'm using redhat cluster.
>Regards
>Ming
>
>
>-- 
>Linux-cluster mailing list
>Linux-cluster@redhat.com
>https://www.redhat.com/mailman/listinfo/linux-cluster


From lists@alteeve.ca Wed Oct 10 22:36:58 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9B2awi5012890 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 22:36:58 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9B2aqFA020512; Wed, 10 Oct 2012 22:36:52 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9B2aoSD012261;
	Wed, 10 Oct 2012 22:36:50 -0400
Received: from lemass.alteeve.ca (unknown [216.66.176.13])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id DBBCE42249F;
	Wed, 10 Oct 2012 22:36:47 -0400 (EDT)
Message-ID: <507630C0.2010607@alteeve.ca>
Date: Wed, 10 Oct 2012 22:36:48 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 02:36:58 -0000

On 10/08/2012 08:27 PM, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync
> configuration system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync
> 2.0 udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should
> be showing up shortly.
>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next
> release. You should be able to find that package in the following
> locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE &
> Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of
> your entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the
> pcs project at github (https://github.com/feist/pcs/issues) if you have
> any questions or problems.
>
> Thanks!
> Chris

Hi Chris,

   I started following Andrew's new pcs-based tutorial today on a fresh, 
minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;

===
yum install -y pcs

2.5 Setup

<snip>

# systemctl start pcsd.service
# systemctl enable pcsd.service
===

This fails, and Andrew suggested using the version of pcs you annouced 
here. Same problem though;

===
[root@an-c01n01 ~]# rpm -Uvh 
http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
Retrieving http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
Preparing...                ########################################### 
[100%]
    1:pcs                    ########################################### 
[100%]
[root@an-c01n01 ~]# systemctl start pcsd.service
Failed to issue method call: Unit pcsd.service failed to load: No such 
file or directory. See system logs and 'systemctl status pcsd.service' 
for details.

[root@an-c01n01 ~]# rpm -q pacemaker corosync pcs
pacemaker-1.1.7-2.fc17.x86_64
corosync-2.0.1-1.fc17.x86_64
pcs-0.9.26-1.fc18.noarch
===

Any thoughts?

Cheers!

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From shanti.pahari@sierra.sg Wed Oct 10 22:55:45 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9B2tjR9013940 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 22:55:45 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9B2td2P013220
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 22:55:39 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9B2tYAW004822
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 22:55:35 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 8EE1525DF0F7;
	Thu, 11 Oct 2012 10:54:44 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id x6Rr4VuVH4Cp; Thu, 11 Oct 2012 10:54:42 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id A537B25DF0F5;
	Thu, 11 Oct 2012 10:54:42 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'Andrew Denton'" <andrewd@sterling.net>,
	"'linux clustering'" <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
	<507593C6.5040708@sterling.net>
In-Reply-To: <507593C6.5040708@sterling.net>
Date: Thu, 11 Oct 2012 10:54:42 +0800 (SGT)
Message-ID: <27d23437.00001f6c.000000ff@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0425_01CDA79E.EA87C490"
Thread-Index: AQKAFHoF1ve9uTx3zEYklPiVsevdRgIcGZ1Wlj2sjhA=
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.041  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 02:55:45 -0000

This is a multipart message in MIME format.

------=_NextPart_000_0425_01CDA79E.EA87C490
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi Andrew,

 

Now I added following in my lvm.conf

volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]

and

# dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)

# shutdown -r now "Activating ramdisk LVM changes"

 

After that when the system tries to boot up:

Kernel panic - not syncing: Attempted to kill init!

 

So didn't have luck L

 


volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]

The hostname should be cluster connect name or initial hostname ?

My /etc/hosts:

 

192.168.24.32   PDC-PIC-PL-01   PDC-PIC-PL-01.chcs.sg

192.168.25.132  PDC-PIC-PL-01-PM        

192.168.26.13   PDC-PIC-PL-CL1

192.168.24.33   PDC-PIC-PL-02  PDC-PIC-PL-02.chcs.sg

192.168.25.133  PDC-PIC-PL-02-PM

192.168.26.14   PDC-PIC-PL-CL2

 

 

 

From: Andrew Denton [mailto:andrewd@sterling.net] 
Sent: Wednesday, 10 October, 2012 11:27 PM
To: linux clustering
Cc: Shanti Pahari
Subject: Re: [Linux-cluster] cannot run cluster service

 

On 10/10/2012 12:06 AM, Shanti Pahari wrote:

I have cluster setup with 2 node and created web cluster service on it but
it cannot run. 

I have not listed anything in lvm.conf volume_list because once I add
anything in volume_list and reboot the system then I cannot mount and even
cannot read the lv which I created for my web . It throws error as 

error message "not activating volume group lv does not pass activation
filter"

Therefore I didn't add anything in lvm.conf . Then I try to start my
cluster servers for web server but the service failed.


I've seen this failure too when building my cluster. You either need to
add the system's volume groups to volume_list, or tag the system's vgs
with the @hostname so it can still activate them. 
e.g.
    volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"
]
on one node and
    volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"
]
on the other. Next it will complain about initrd being older than
lvm.conf, so I've been running
# mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`
Not sure if that's the right command but it works for me =)

One of these days I'm going to tag the system's vgs properly so I can use
the same lvm.conf across the nodes. I think it's something like
lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root 
etc...

By the way, to display how things are tagged, you have to do
lvs -o +tags
I wish it displayed them in lvdisplay, but it doesn't.

-- Andrew





------=_NextPart_000_0425_01CDA79E.EA87C490
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:LiberationMono;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:LiberationMono-Bold;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	color:black;
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body bgcolor=3Dwhite =
lang=3DEN-SG link=3Dblue vlink=3Dpurple><div class=3DWordSection1><p =
class=3DMsoNormal><span style=3D'color:#1F497D'>Hi =
Andrew,<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span style=3D'color:#1F497D'>Now I added following in =
my lvm.conf<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'color:#1F497D'> </span><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>volume_list =3D [ =
&quot;vg_pdcpicpl02&quot;, &quot;@PDC-PIC-PL-CL1&quot;, =
&quot;@PDC-PIC-PL-CL2&quot; ]<o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'> and<o:p></o:p></span></p><p =
class=3DMsoNormal style=3D'text-autospace:none'><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'> </span><span =
style=3D'font-size:10.5pt;font-family:LiberationMono;color:windowtext;mso=
-fareast-language:EN-SG'># </span><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>dracut --hostonly --force =
/boot/initramfs-$(uname -r).img $(uname -r)<o:p></o:p></span></b></p><p =
class=3DMsoNormal><span =
style=3D'font-size:10.5pt;font-family:LiberationMono;color:windowtext;mso=
-fareast-language:EN-SG'># </span><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>shutdown -r now &quot;Activating ramdisk =
LVM changes&quot;<o:p></o:p></span></b></p><p class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>After that when the system tries to boot =
up:<o:p></o:p></span></b></p><p class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>Kernel panic &#8211; not syncing: =
Attempted to kill init!<o:p></o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>So didn&#8217;t have luck =
</span></b><b><span =
style=3D'font-size:10.5pt;font-family:Wingdings;color:windowtext;mso-fare=
ast-language:EN-SG'>L</span></b><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p></o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></b></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><br>volume_list =3D [ =
&quot;vg_pdcpicpl02&quot;, &quot;@PDC-PIC-PL-CL1&quot;, =
&quot;@PDC-PIC-PL-CL2&quot; ]<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>The hostname should be =
cluster connect name or initial hostname ?<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>My =
/etc/hosts:<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></p><p=
 class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times =
New Roman","serif";mso-fareast-language:EN-SG'>192.168.24.32&nbsp;&nbsp; =
PDC-PIC-PL-01&nbsp;&nbsp; PDC-PIC-PL-01.chcs.sg<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.25.132&nbsp; =
PDC-PIC-PL-01-PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.26.13&nbsp;&nbsp; =
PDC-PIC-PL-CL1<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.24.33&nbsp;&nbsp; =
PDC-PIC-PL-02&nbsp; PDC-PIC-PL-02.chcs.sg<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.25.133&nbsp; =
PDC-PIC-PL-02-PM<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.26.14&nbsp;&nbsp; =
PDC-PIC-PL-CL2<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></p><p=
 class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><div><div =
style=3D'border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0cm =
0cm 0cm'><p class=3DMsoNormal><b><span lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif";color:windowt=
ext;mso-fareast-language:EN-SG'>From:</span></b><span lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif";color:windowt=
ext;mso-fareast-language:EN-SG'> Andrew Denton =
[mailto:andrewd@sterling.net] <br><b>Sent:</b> Wednesday, 10 October, =
2012 11:27 PM<br><b>To:</b> linux clustering<br><b>Cc:</b> Shanti =
Pahari<br><b>Subject:</b> Re: [Linux-cluster] cannot run cluster =
service<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p class=3DMsoNormal>On =
10/10/2012 12:06 AM, Shanti Pahari =
wrote:<o:p></o:p></p></div><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>I have cluster setup with 2 =
node and created web cluster service on it but it cannot run. =
<o:p></o:p></span></p><p class=3DMsoNormal>I have not listed anything in =
lvm.conf volume_list because once I add anything in volume_list and =
reboot the system then I cannot mount and even cannot read the lv which =
I created for my web . It throws error as <o:p></o:p></p><p =
class=3DMsoNormal>error message &quot;not activating volume group lv =
does not pass activation filter&quot;<o:p></o:p></p><p =
class=3DMsoNormal>Therefore I didn&#8217;t add anything in lvm.conf . =
Then I try to start my cluster servers for web server but the service =
failed.<o:p></o:p></p></blockquote><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><br>I've seen this failure =
too when building my cluster. You either need to add the system's volume =
groups to volume_list, or tag the system's vgs with the @hostname so it =
can still activate them. <br>e.g.<br>&nbsp;&nbsp;&nbsp; volume_list =3D =
[ &quot;vg_pdcpicpl01&quot;, &quot;@PDC-PIC-PL-CL1&quot;, =
&quot;@PDC-PIC-PL-CL2&quot; ]<br>on one node and<br>&nbsp;&nbsp;&nbsp; =
volume_list =3D [ &quot;vg_pdcpicpl02&quot;, =
&quot;@PDC-PIC-PL-CL1&quot;, &quot;@PDC-PIC-PL-CL2&quot; ]<br>on the =
other. Next it will complain about initrd being older than lvm.conf, so =
I've been running<br># mkinitrd -f /boot/initrd-`uname -r`.img `uname =
-r`<br>Not sure if that's the right command but it works for me =
=3D)<br><br>One of these days I'm going to tag the system's vgs properly =
so I can use the same lvm.conf across the nodes. I think it's something =
like<br>lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root =
<br>etc...<br><br>By the way, to display how things are tagged, you have =
to do<br>lvs -o +tags<br>I wish it displayed them in lvdisplay, but it =
doesn't.<br><br>-- =
Andrew<br><br><br><o:p></o:p></span></p></div></body></html>
------=_NextPart_000_0425_01CDA79E.EA87C490--

From shanti.pahari@sierra.sg Wed Oct 10 23:03:10 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9B33Aet014379 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 23:03:10 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9B334eR024984
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 23:03:04 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9B3339E011196
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 23:03:03 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 0217225DF109;
	Thu, 11 Oct 2012 11:02:13 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zMhuUAx8Xn2D; Thu, 11 Oct 2012 11:02:11 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 4E9F125DF0FD;
	Thu, 11 Oct 2012 11:02:11 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'Digimer'" <lists@alteeve.ca>,
	"'linux clustering'" <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
	<50759946.7060303@alteeve.ca>
In-Reply-To: <50759946.7060303@alteeve.ca>
Date: Thu, 11 Oct 2012 11:02:11 +0800 (SGT)
Message-ID: <ab9b4ebf.00001f6c.00000104@sierra-A66>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 8bit
Thread-Index: AQKAFHoF1ve9uTx3zEYklPiVsevdRgJWcSaNljvc2lA=
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.042  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 03:03:10 -0000

Thanks!

I updated the fencing method in each of the nodes. But after I added
volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]
and
# dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)
# shutdown -r now "Activating ramdisk LVM changes"

After that when the system tries to boot up:
Kernel panic  not syncing: Attempted to kill init!

So didnt have luck 

Can you help me pls!

-----Original Message-----
From: Digimer [mailto:lists@alteeve.ca]
Sent: Wednesday, 10 October, 2012 11:51 PM
To: linux clustering
Cc: Shanti Pahari
Subject: Re: [Linux-cluster] cannot run cluster service

Your fencing is not setup properly. You define the fence devices, but do not 
use them as <method>'s under each node definition. You should be able to 
'fence_node <target>' and watch it get rebooted. Until then, your cluster 
will hang (by design) the first time there is a problem.

Assuming you want to use clustered LVM, you need to change locking_type to 
'3' and, I advise, change 'falllback_to_local_locking' to '0'. This also 
requires that the 'clvmd' daemon is running, which in turn needs cman to be 
running first.

What is your backing device for the LVM PV?

digimer

On 10/10/2012 03:06 AM, Shanti Pahari wrote:
> Dear all,
>
> I have cluster setup with 2 node and created web cluster service on it
> but it cannot run.
>
> I have not listed anything in lvm.conf volume_list because once I add
> anything in volume_list and reboot the system then I cannot mount and
> even cannot read the lv which I created for my web . It throws error
> as
>
> error message "not activating volume group lv does not pass activation
> filter"
>
> Therefore I didnt add anything in lvm.conf . Then I try to start my
> cluster servers for web server but the service failed.
>
> Please help me so that I can solve this out.
>
> I have attached my cluster.conf , lvdisplay , /var/log/messages and
> lvm.conf and my /etc/hosts.
>
> I will be greatful if anyone can help me!
>
> Thanks
>
> And my clustat:
>
> Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
>
> Member Status: Quorate
>
> Member Name                                                     ID 
> Status
>
> ------ ----                                                     ---- ------
>
> PDC-PIC-PL-CL1                                                      1
> Online, Local, rgmanager
>
> PDC-PIC-PL-CL2                                                      2
> Online, rgmanager
>
> Service Name                                               Owner
> (Last)                                               State
>
>   ------- ----                                               -----
> ------                                               -----
>
>   service:ha-web-service
> (PDC-PIC-PL-CL1)                                           failed
>
>
>


--
Digimer
Papers and Projects: https://alteeve.ca/w/ "Hydrogen is just a colourless, 
odorless gas which, if left alone in sufficient quantities for long periods 
of time, begins to think about itself."

From ali.bendriss@gmail.com Thu Oct 11 06:03:39 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BA3dUc006769 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 06:03:39 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BA3YSe015386
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:03:34 -0400
Received: from azel.univ-paris8.fr (azel.univ-paris8.fr [193.54.174.2])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BA3XX1007002
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:03:33 -0400
Received: from localhost (localhost [127.0.0.1])
	by azel.univ-paris8.fr (Postfix) with ESMTP id 0E44EBE0A
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:03:32 +0200 (CEST)
Received: from azel.univ-paris8.fr ([127.0.0.1])
	by localhost (azel.univ-paris8.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id M0rjHhHHweqi for <linux-cluster@redhat.com>;
	Thu, 11 Oct 2012 12:03:31 +0200 (CEST)
Received: from zapp.localnet (pcinf10.dsi.univ-paris8.fr [193.54.165.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by azel.univ-paris8.fr (Postfix) with ESMTPSA id E8CE4BE04
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:03:31 +0200 (CEST)
From: Ali Bendriss <ali.bendriss@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Thu, 11 Oct 2012 12:03:02 +0200
Message-ID: <1552642.6zb82LHdvl@zapp>
User-Agent: KMail/4.8.5 (Linux/3.2.29; KDE/4.8.5; x86_64; ; )
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
X-RedHat-Spam-Score: -0.219  (BAYES_00, DKIM_ADSP_CUSTOM_MED, FREEMAIL_FROM,
	NML_ADSP_CUSTOM_MED, SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] locking_type
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 10:03:39 -0000

Hello,

I'm runnning a two nodes clusters on linux: 

- current setup:
cluster-3.1.93
LVM2-2.02.96
kernel 3.2.29

- previous setup:
cluster-3.1.92
LVM2.2.02.84
kernel 3.4.3

Since the updrade to current setup, I'm only able to run clvmd if it is 
compiled using "--with-cluster=shared" and setting the locking_type = 2 in 
clvm.conf

before that using the previous setup I was able to compile clvmd using 
"--with-cluster=internal"  and setting the locking_type = 3

Is there any problem running a gfs2 fs with clvmd using the external shared 
library locking_library ?

thanks

--
Ali

From ali.bendriss@gmail.com Thu Oct 11 06:14:22 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BAEMnc008018 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 06:14:22 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BAEHAF006900
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:14:17 -0400
Received: from azel.univ-paris8.fr (azel.univ-paris8.fr [193.54.174.2])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BAEGnB011709
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:14:16 -0400
Received: from localhost (localhost [127.0.0.1])
	by azel.univ-paris8.fr (Postfix) with ESMTP id 4D300BE0A
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:14:16 +0200 (CEST)
Received: from azel.univ-paris8.fr ([127.0.0.1])
	by localhost (azel.univ-paris8.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZOTZhDqmkRU9 for <linux-cluster@redhat.com>;
	Thu, 11 Oct 2012 12:14:16 +0200 (CEST)
Received: from zapp.localnet (pcinf10.dsi.univ-paris8.fr [193.54.165.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by azel.univ-paris8.fr (Postfix) with ESMTPSA id 325B5BE01
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:14:16 +0200 (CEST)
From: Ali Bendriss <ali.bendriss@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Thu, 11 Oct 2012 12:13:45 +0200
Message-ID: <1780785.LbQT9riKYZ@zapp>
User-Agent: KMail/4.8.5 (Linux/3.2.29; KDE/4.8.5; x86_64; ; )
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="nextPart1418095.5W5VQxmf8P"
Content-Transfer-Encoding: 7Bit
X-RedHat-Spam-Score: -0.218  (BAYES_00, DKIM_ADSP_CUSTOM_MED, FREEMAIL_FROM,
	HTML_MESSAGE, NML_ADSP_CUSTOM_MED, SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] snapshot status
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 10:14:22 -0000


--nextPart1418095.5W5VQxmf8P
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"

Hello,

I'm runnning a two nodes clusters on linux using gfs2
(cluster-3.1.93, LVM2-2.02.96, kernel 3.2.29).
I would like to know what is the current status of the snapshot support.
I've got a third node that I would like to use for the backup. Could someone 
give me some hint about backuping a gfs2 shared file system.

thanks

--
Ali


--nextPart1418095.5W5VQxmf8P
Content-Transfer-Encoding: 7Bit
Content-Type: text/html; charset="us-ascii"

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Sans Serif'; font-size:9pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=" font-size:12px; color:#1f1c1b;">Hello,</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=" font-size:12px; color:#1f1c1b;">I'm runnning a two nodes clusters on linux using gfs2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=" font-size:12px; color:#1f1c1b;">(cluster-3.1.93, LVM2-2.02.96, kernel 3.2.29).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">I would like to know what is the current status of the snapshot support.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">I've got a third node that I would like to use for the backup. Could someone give me some hint about backuping a gfs2 shared file system.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">thanks</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">--</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">Ali<br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p></body></html>
--nextPart1418095.5W5VQxmf8P--

From agk@redhat.com Thu Oct 11 06:36:11 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BAaBax011673 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 06:36:11 -0400
Received: from agk-dp.fab.redhat.com (agk-dp.fab.redhat.com [10.33.0.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BAa5qQ014775
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 11 Oct 2012 06:36:06 -0400
Received: from agk by agk-dp.fab.redhat.com with local (Exim 4.69)
	(envelope-from <agk@agk-dp.fab.redhat.com>)
	id 1TMG7Z-0001At-36; Thu, 11 Oct 2012 11:36:05 +0100
Date: Thu, 11 Oct 2012 11:36:05 +0100
From: Alasdair G Kergon <agk@redhat.com>
To: Ali Bendriss <ali.bendriss@gmail.com>
Message-ID: <20121011103604.GD2133@agk-dp.fab.redhat.com>
Mail-Followup-To: Ali Bendriss <ali.bendriss@gmail.com>,
	linux clustering <linux-cluster@redhat.com>
References: <1552642.6zb82LHdvl@zapp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1552642.6zb82LHdvl@zapp>
Organization: Red Hat UK Ltd. Registered in England and Wales, number
	03798903. Registered Office: 64 Baker Street, 4th floor, London,
	W1U 7DF.
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] locking_type
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 10:36:11 -0000

On Thu, Oct 11, 2012 at 12:03:02PM +0200, Ali Bendriss wrote:
> Since the updrade to current setup, I'm only able to run clvmd if it is 
> compiled using "--with-cluster=shared" and setting the locking_type = 2 in 
> clvm.conf
 
What is the error you get?

I don't think we stopped this working intentionally, but admittedly it's
not a configuration we test very often.

Alasdair

From ali.bendriss@gmail.com Thu Oct 11 07:19:40 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BBJerq016733 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 07:19:40 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BBJZjD009696; Thu, 11 Oct 2012 07:19:35 -0400
Received: from azel.univ-paris8.fr (azel.univ-paris8.fr [193.54.174.2])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BBJXGc026862;
	Thu, 11 Oct 2012 07:19:34 -0400
Received: from localhost (localhost [127.0.0.1])
	by azel.univ-paris8.fr (Postfix) with ESMTP id A2C26BE0C;
	Thu, 11 Oct 2012 13:19:33 +0200 (CEST)
Received: from azel.univ-paris8.fr ([127.0.0.1])
	by localhost (azel.univ-paris8.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WNgSBxiN2AR9; Thu, 11 Oct 2012 13:19:33 +0200 (CEST)
Received: from zapp.localnet (pcinf10.dsi.univ-paris8.fr [193.54.165.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by azel.univ-paris8.fr (Postfix) with ESMTPSA id 7F9ABBE04;
	Thu, 11 Oct 2012 13:19:33 +0200 (CEST)
From: Ali Bendriss <ali.bendriss@gmail.com>
To: Alasdair G Kergon <agk@redhat.com>
Date: Thu, 11 Oct 2012 13:19:09 +0200
Message-ID: <2094091.Y1l6vVcmm9@zapp>
User-Agent: KMail/4.8.5 (Linux/3.2.29; KDE/4.8.5; x86_64; ; )
In-Reply-To: <20121011103604.GD2133@agk-dp.fab.redhat.com>
References: <1552642.6zb82LHdvl@zapp>
	<20121011103604.GD2133@agk-dp.fab.redhat.com>
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
X-RedHat-Spam-Score: -0.219  (BAYES_00, DKIM_ADSP_CUSTOM_MED, FREEMAIL_FROM,
	NML_ADSP_CUSTOM_MED, SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] locking_type
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 11:19:41 -0000

On Thursday, October 11, 2012 11:36:05 AM Alasdair G Kergon wrote:
> On Thu, Oct 11, 2012 at 12:03:02PM +0200, Ali Bendriss wrote:
> > Since the updrade to current setup, I'm only able to run clvmd if it is
> > compiled using "--with-cluster=shared" and setting the locking_type = 2 in
> > clvm.conf
> 
> What is the error you get?
> 
Starting the node with locking type = 3 and clvmd compiled using with-
cluster=internal , I've got no error:
clvmd: Cluster LVM daemon started - connected to CMAN

but running for example vgscan desn't work:
/sbin/vgscan
  connect() failed on local socket: No such file or directory
  Internal cluster locking initialisation failed.
  WARNING: Falling back to local file-based locking.
  Volume Groups with the clustered attribute will be inaccessible.
  Reading all physical volumes.  This may take a while...
  Skipping clustered volume group samba4
  Skipping clustered volume group ctdb
  Skipping clustered volume group shared
  Found volume group "main" using metadata type lvm2

the same command is working using clvmd compiled using the shared locking.

more log below

> I don't think we stopped this working intentionally, but admittedly it's
> not a configuration we test very often.
> 
I was thinking that "--with-cluster=internal", was the recommended 
configuration.
  
> Alasdair

--------------------------------------------------------------------------------------------
(using locking type = 3) and calling vgscan

#clvmd -d 1 
CLVMD[9d22b740]: Oct 11 13:03:51 CLVMD started
CLVMD[9d22b740]: Oct 11 13:03:51 Connected to CMAN
CLVMD[9d22b740]: Oct 11 13:03:51 CMAN initialisation complete
CLVMD[9d22b740]: Oct 11 13:03:51 Created DLM lockspace for CLVMD.
CLVMD[9d22b740]: Oct 11 13:03:51 DLM initialisation complete
CLVMD[9d22b740]: Oct 11 13:03:51 Cluster ready, doing some more initialisation
CLVMD[9d22b740]: Oct 11 13:03:51 starting LVM thread
CLVMD[9d22a700]: Oct 11 13:03:51 LVM thread function started
WARNING: Locking disabled. Be careful! This could corrupt your metadata.
Incorrect metadata area header checksum on /dev/sdd at offset 4096
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 1
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 2
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 3
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 4
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 5
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 6
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 7
CLVMD[9d22a700]: Oct 11 13:03:51 Sub thread ready for work.
CLVMD[9d22b740]: Oct 11 13:03:51 clvmd ready for work
CLVMD[9d22b740]: Oct 11 13:03:51 Using timeout of 60 seconds
CLVMD[9d22a700]: Oct 11 13:03:51 LVM thread waiting for work

-------------------------------------------------------------------------------------------------------------------------------------
using locking type = 2 and calling vgscan
# clvmd -d 1 

CLVMD[6d153740]: Oct 11 13:07:57 CLVMD started
CLVMD[6d153740]: Oct 11 13:07:57 Connected to CMAN
CLVMD[6d153740]: Oct 11 13:07:57 CMAN initialisation complete
CLVMD[6d153740]: Oct 11 13:07:57 Created DLM lockspace for CLVMD.
CLVMD[6d153740]: Oct 11 13:07:57 DLM initialisation complete
CLVMD[6d153740]: Oct 11 13:07:57 Cluster ready, doing some more initialisation
CLVMD[6d153740]: Oct 11 13:07:57 starting LVM thread
CLVMD[6d152700]: Oct 11 13:07:57 LVM thread function started
WARNING: Locking disabled. Be careful! This could corrupt your metadata.
Incorrect metadata area header checksum on /dev/sdd at offset 4096
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 1
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 2
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 3
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 4
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 5
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 6
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 7
  Incorrect LVM locking library specified in lvm.conf, cluster operations may 
not work.
CLVMD[6d152700]: Oct 11 13:07:57 Sub thread ready for work.
CLVMD[6d152700]: Oct 11 13:07:57 LVM thread waiting for work
CLVMD[6d153740]: Oct 11 13:07:57 clvmd ready for work
CLVMD[6d153740]: Oct 11 13:07:57 Using timeout of 60 seconds
CLVMD[6d153740]: Oct 11 13:08:56 Got new connection on fd 11
CLVMD[6d153740]: Oct 11 13:08:56 Read on local socket 11, len = 29
CLVMD[6d153740]: Oct 11 13:08:56 check_all_clvmds_running
CLVMD[6d153740]: Oct 11 13:08:56 creating pipe, [12, 13]
CLVMD[6d153740]: Oct 11 13:08:56 Creating pre&post thread
CLVMD[6d153740]: Oct 11 13:08:56 Created pre&post thread, state = 0
CLVMD[6d131700]: Oct 11 13:08:56 in sub thread: client = 0x12d06d0
CLVMD[6d131700]: Oct 11 13:08:56 doing PRE command LOCK_VG 'P_#global' at 4 
(client=0x12d06d0)
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: 'P_#global' mode:4 flags=0
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: returning lkid 8
CLVMD[6d131700]: Oct 11 13:08:56 Writing status 0 down pipe 13
CLVMD[6d131700]: Oct 11 13:08:56 Waiting to do post command - state = 0
CLVMD[6d153740]: Oct 11 13:08:56 read on PIPE 12: 4 bytes: status: 0
CLVMD[6d153740]: Oct 11 13:08:56 background routine status was 0, 
sock_client=0x12d06d0
CLVMD[6d153740]: Oct 11 13:08:56 distribute command: XID = 0, flags=0x0 ()
CLVMD[6d153740]: Oct 11 13:08:56 add_to_lvmqueue: cmd=0x12d0a10. 
client=0x12d06d0, msg=0x12d02f0, len=29, csid=(nil), xid=0
CLVMD[6d153740]: Oct 11 13:08:56 Sending message to all cluster nodes
CLVMD[6d152700]: Oct 11 13:08:56 process_work_item: local
CLVMD[6d152700]: Oct 11 13:08:56 process_local_command: LOCK_VG (0x33) 
msg=0x12d0a50, msglen =29, client=0x12d06d0
CLVMD[6d152700]: Oct 11 13:08:56 do_lock_vg: resource 'P_#global', cmd = 0x4 
LCK_VG (WRITE|VG), flags = 0x4 ( DMEVENTD_MONITOR ), critical_section = 0
CLVMD[6d152700]: Oct 11 13:08:56 Refreshing context
  Incorrect metadata area header checksum on /dev/sdd at offset 4096
CLVMD[6d152700]: Oct 11 13:08:56 Reply from node node-10: 0 bytes
CLVMD[6d152700]: Oct 11 13:08:56 Got 1 replies, expecting: 2
CLVMD[6d152700]: Oct 11 13:08:56 LVM thread waiting for work
CLVMD[6d153740]: Oct 11 13:08:56 Reply from node node-11: 0 bytes
CLVMD[6d153740]: Oct 11 13:08:56 Got 2 replies, expecting: 2
CLVMD[6d131700]: Oct 11 13:08:56 Got post command condition...
CLVMD[6d131700]: Oct 11 13:08:56 Waiting for next pre command
CLVMD[6d153740]: Oct 11 13:08:56 read on PIPE 12: 4 bytes: status: 0
CLVMD[6d153740]: Oct 11 13:08:56 background routine status was 0, 
sock_client=0x12d06d0
CLVMD[6d153740]: Oct 11 13:08:56 Send local reply
CLVMD[6d153740]: Oct 11 13:08:56 Read on local socket 11, len = 28
CLVMD[6d131700]: Oct 11 13:08:56 Got pre command condition...
CLVMD[6d131700]: Oct 11 13:08:56 doing PRE command LOCK_VG 'V_samba4' at 1 
(client=0x12d06d0)
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: 'V_samba4' mode:3 flags=0
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: returning lkid 9
CLVMD[6d131700]: Oct 11 13:08:56 Writing status 0 down pipe 13
CLVMD[6d131700]: Oct 11 13:08:56 Waiting to do post command - state = 0
CLVMD[6d153740]: Oct 11 13:08:56 read on PIPE 12: 4 bytes: status: 0
CLVMD[6d153740]: Oct 11 13:08:56 background routine status was 0, 
sock_client=0x12d06d0
CLVMD[6d153740]: Oct 11 13:08:56 distribute command: XID = 1, flags=0x1 (LOCAL)
CLVMD[6d153740]: Oct 11 13:08:56 add_to_lvmqueue: cmd=0x12d0a10. 
client=0x12d06d0, msg=0x12d02f0, len=28, csid=(nil), xid=1
CLVMD[6d152700]: Oct 11 13:08:56 process_work_item: local
CLVMD[6d152700]: Oct 11 13:08:56 process_local_command: LOCK_VG (0x33) 
msg=0x12d0a50, msglen =28, client=0x12d06d0
CLVMD[6d152700]: Oct 11 13:08:56 do_lock_vg: resource 'V_samba4', cmd = 0x1 
LCK_VG (READ|VG), flags = 0x4 ( DMEVENTD_MONITOR ), critical_section = 0
CLVMD[6d152700]: Oct 11 13:08:56 Invalidating cached metadata for VG samba4
...

From jpokorny@redhat.com Thu Oct 11 07:26:03 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BBQ3fY017730 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 07:26:03 -0400
Received: from redhat.com (poki.brq.redhat.com [10.34.129.84])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BBPsOE026464
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 07:25:57 -0400
Date: Thu, 11 Oct 2012 13:25:54 +0200
From: Jan =?utf-8?Q?Pokorn=C3=BD?= <jpokorny@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <20121011112554.GC29887@redhat.com>
References: <50736F78.3060906@redhat.com>
 <507630C0.2010607@alteeve.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <507630C0.2010607@alteeve.ca>
User-Agent: Mutt/1.5.21 (2011-07-01)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 11:26:03 -0000

Hello Digimer,

On 10/10/12 22:36 -0400, Digimer wrote:
>   I started following Andrew's new pcs-based tutorial today on a fresh,
> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
> 
> ===
> yum install -y pcs
> 
> 2.5 Setup
> 
> <snip>
> 
> # systemctl start pcsd.service
> # systemctl enable pcsd.service
> ===
> 
> This fails, and Andrew suggested using the version of pcs you annouced here.
> Same problem though;
> 
> ===
> [root@an-c01n01 ~]# rpm -Uvh
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
> Retrieving http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
> Preparing...                ###########################################
> [100%]
>    1:pcs                    ###########################################
> [100%]
> [root@an-c01n01 ~]# systemctl start pcsd.service
> Failed to issue method call: Unit pcsd.service failed to load: No such file
> or directory. See system logs and 'systemctl status pcsd.service' for
> details.
> 
> [...]
> 
> Any thoughts?

this is part of pcs-gui project [1] packaging of which is probably pending.

[1] https://github.com/feist/pcs-gui

-- 
Jan

From shanti.pahari@sierra.sg Thu Oct 11 09:44:25 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BDiPTp005425 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 09:44:25 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BDiJcF023080
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 09:44:19 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BDiEZx014036
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 09:44:15 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 47EE725DF3CF
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:43:24 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7E9LntwIH3f3 for <linux-cluster@redhat.com>;
	Thu, 11 Oct 2012 21:43:23 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 9EB5A25D79E8
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:43:23 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Thu, 11 Oct 2012 21:43:23 +0800 (SGT)
Message-ID: <0a55cf02.00000e4c.00000039@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0105_01CDA7F9.884C75E0"
Thread-Index: Ac2ntiK0E6I8OTrfSkWfNscMEAN//A==
Content-Language: en-sg
X-Originating-IP: [119.56.122.237]
X-RedHat-Spam-Score: -4.042  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] lvm.conf for HA LVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 13:44:26 -0000

This is a multipart message in MIME format.

------=_NextPart_000_0105_01CDA7F9.884C75E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,

 

Please help me to configure lvm.conf .

I always get problem when I add volume_list in lvm.conf file.

After I add volume_list  = [ "vg_pdcpicpl101" , "@pdc-pic-pl-01" ] and
reboot it later my other lvm goes down L cannot initialize it. Or do I
need to add all my VG in volume list?

 

Please help!

 

Thanks,

Shanti


------=_NextPart_000_0105_01CDA7F9.884C75E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Hi =
all,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Please help me to configure lvm.conf =
.<o:p></o:p></p><p class=3DMsoNormal>I always get problem when I add =
volume_list in lvm.conf file.<o:p></o:p></p><p class=3DMsoNormal>After I =
add volume_list&nbsp; =3D [ &#8220;vg_pdcpicpl101&#8221; , =
&#8220;@pdc-pic-pl-01&#8221; ] and reboot it later my other lvm goes =
down <span style=3D'font-family:Wingdings'>L</span> cannot initialize =
it. Or do I need to add all my VG in volume list?<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Please =
help!<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Thanks,<o:p></o:p></p><p =
class=3DMsoNormal>Shanti<o:p></o:p></p></div></body></html>
------=_NextPart_000_0105_01CDA7F9.884C75E0--

From bergman@merctech.com Thu Oct 11 13:01:47 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BH1k6g001146 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:01:47 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BH1fLV025477
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:41 -0400
Received: from mailbackend.panix.com (mailbackend.panix.com [166.84.1.89])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BH1dq8005352
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:40 -0400
Received: from merctech.com (braid.uphs.upenn.edu [165.123.243.100])
	by mailbackend.panix.com (Postfix) with ESMTP id B9FFF2ED1F
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:38 -0400 (EDT)
Received: from localhost.localdomain (localhost [127.0.0.1])
	by merctech.com (8.14.5/8.14.5) with ESMTP id q9BH1caB004148
	(version=TLSv1/SSLv3 cipher=DHE-DSS-AES256-SHA bits=256 verify=NO)
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:38 -0400
Received: from localhost (bergman@localhost)
	by localhost.localdomain (8.14.5/8.14.5/Submit) with ESMTP id
	q9BH1cIT004137
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:38 -0400
To: linux clustering <linux-cluster@redhat.com>
From: bergman@merctech.com
In-Reply-To: Your message of "Thu, 11 Oct 2012 11:02:11 +0800."
	<ab9b4ebf.00001f6c.00000104@sierra-A66>
References: <ab9b4ebf.00001f6c.00000104@sierra-A66>
	<a2202e87.00001f6c.00000065@sierra-A66>
	<50759946.7060303@alteeve.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
Content-ID: <4135.1349974897.1@localhost>
Date: Thu, 11 Oct 2012 13:01:37 -0400
Message-ID: <4136.1349974897@localhost>
X-RedHat-Spam-Score: -4.2  (BAYES_00,RCVD_IN_DNSWL_MED)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9BH1k6g001146
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: bergman@merctech.com, linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:01:47 -0000

In the message dated: Thu, 11 Oct 2012 11:02:11 +0800,
The pithy ruminations from "Shanti Pahari" on 
<Re: [Linux-cluster] cannot run cluster service> were:
=> Thanks!
=> 
=> I updated the fencing method in each of the nodes. But after I added
=> volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]
=> and
=> # dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)

Note that the lvm.conf data that is stored within the initrd.img is not an
exact copy of /etc/lvm/lvm.conf, but it is a filtered version, created
by "lvm dumpconfig". Previous bugs have meant that the embedded version was
not alway bootable...perhaps you're having a similar problem.

=> # shutdown -r now "Activating ramdisk LVM changes"
=> 
=> After that when the system tries to boot up:
=> Kernel panic  not syncing: Attempted to kill init!

I don't recall information from you about what OS distribution you are using,
but this problem sounds similar to:

	https://bugzilla.redhat.com/show_bug.cgi?id=517868


Before giving up on LVM and and moving all filesystem management out of RHCS
control, I had several problems with the the embedded copy of /etc/lvm.conf
that's stored within the initrd image. I ended up with a procedure where I
would replace the embedded version (produced with "lvm dumpconfig" by the
mkinitrd process) inside the initrd image with the full working version.

This procedure was necessary after any kernel or lvm.conf change.

An abbreviated set of steps (ommitting all error checking, etc) is:

	gunzip < $initrdfile > /tmp/initrd.unzipped.img
	cpio -i --make-directories < /tmp/initrd.unzipped.img
	cd /tmp/initrd.$$/etc/lvm
	cp /etc/lvm/lvm.conf .
	cd /tmp/initrd.$$
	find ./ | cpio -H newc -o > /tmp/initrd.unzipped.img
	gzip < /tmp/initrd.unzipped.img > /tmp/initrd.zipped.img
	mv /tmp/initrd.zipped.img $initrdfile

I do not recommend this as a standard procedure, but it might be worth
doing once, in order to see whether the embedded version of the lvm.conf
file used in the initrd.img is causing your problem.

Mark

=> 
=> So didnt have luck 
=> 
=> Can you help me pls!
=> 
=> -----Original Message-----
=> From: Digimer [mailto:lists@alteeve.ca]
=> Sent: Wednesday, 10 October, 2012 11:51 PM
=> To: linux clustering
=> Cc: Shanti Pahari
=> Subject: Re: [Linux-cluster] cannot run cluster service
=> 
=> Your fencing is not setup properly. You define the fence devices, but do not 
=> use them as <method>'s under each node definition. You should be able to 
=> 'fence_node <target>' and watch it get rebooted. Until then, your cluster 
=> will hang (by design) the first time there is a problem.
=> 
=> Assuming you want to use clustered LVM, you need to change locking_type to 
=> '3' and, I advise, change 'falllback_to_local_locking' to '0'. This also 
=> requires that the 'clvmd' daemon is running, which in turn needs cman to be 
=> running first.
=> 
=> What is your backing device for the LVM PV?
=> 
=> digimer
=> 
=> On 10/10/2012 03:06 AM, Shanti Pahari wrote:
=> > Dear all,
=> >
=> > I have cluster setup with 2 node and created web cluster service on it
=> > but it cannot run.
=> >
=> > I have not listed anything in lvm.conf volume_list because once I add
=> > anything in volume_list and reboot the system then I cannot mount and
=> > even cannot read the lv which I created for my web . It throws error
=> > as
=> >
=> > error message "not activating volume group lv does not pass activation
=> > filter"
=> >
=> > Therefore I didnt add anything in lvm.conf . Then I try to start my
=> > cluster servers for web server but the service failed.
=> >
=> > Please help me so that I can solve this out.
=> >
=> > I have attached my cluster.conf , lvdisplay , /var/log/messages and
=> > lvm.conf and my /etc/hosts.
=> >
=> > I will be greatful if anyone can help me!
=> >
=> > Thanks
=> >
=> > And my clustat:
=> >
=> > Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
=> >
=> > Member Status: Quorate
=> >
=> > Member Name                                                     ID 
=> > Status
=> >
=> > ------ ----                                                     ---- ------
=> >
=> > PDC-PIC-PL-CL1                                                      1
=> > Online, Local, rgmanager
=> >
=> > PDC-PIC-PL-CL2                                                      2
=> > Online, rgmanager
=> >
=> > Service Name                                               Owner
=> > (Last)                                               State
=> >
=> >   ------- ----                                               -----
=> > ------                                               -----
=> >
=> >   service:ha-web-service
=> > (PDC-PIC-PL-CL1)                                           failed
=> >
=> >
=> >
=> 
=> 
=> --
=> Digimer
=> Papers and Projects: https://alteeve.ca/w/ "Hydrogen is just a colourless, 
=> odorless gas which, if left alone in sufficient quantities for long periods 
=> of time, begins to think about itself."
=> 
=> -- 
=> Linux-cluster mailing list
=> Linux-cluster@redhat.com
=> https://www.redhat.com/mailman/listinfo/linux-cluster
=> 



From lists@alteeve.ca Thu Oct 11 13:14:19 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHEJBe002801 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:14:19 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHEDx7017704
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:14:14 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BHEBNY012241
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:14:12 -0400
Received: from lemass.alteeve.ca (lns2-pool-d8429402.dsl.look.ca
	[216.66.148.2])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 613F1422488;
	Thu, 11 Oct 2012 13:14:09 -0400 (EDT)
Message-ID: <5076FE62.9000707@alteeve.ca>
Date: Thu, 11 Oct 2012 13:14:10 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: Shanti Pahari <shanti.pahari@sierra.sg>
References: <a2202e87.00001f6c.00000065@sierra-A66>
	<50759946.7060303@alteeve.ca>
	<ab9b4ebf.00001f6c.00000104@sierra-A66>
In-Reply-To: <ab9b4ebf.00001f6c.00000104@sierra-A66>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: 'linux clustering' <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:14:20 -0000

I don't think you addressed any of my comments.

On 10/10/2012 11:02 PM, Shanti Pahari wrote:
> Thanks!
>
> I updated the fencing method in each of the nodes. But after I added
> volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]
> and
> # dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)
> # shutdown -r now "Activating ramdisk LVM changes"
>
> After that when the system tries to boot up:
> Kernel panic  not syncing: Attempted to kill init!
>
> So didnt have luck 
>
> Can you help me pls!
>
> -----Original Message-----
> From: Digimer [mailto:lists@alteeve.ca]
> Sent: Wednesday, 10 October, 2012 11:51 PM
> To: linux clustering
> Cc: Shanti Pahari
> Subject: Re: [Linux-cluster] cannot run cluster service
>
> Your fencing is not setup properly. You define the fence devices, but do not
> use them as <method>'s under each node definition. You should be able to
> 'fence_node <target>' and watch it get rebooted. Until then, your cluster
> will hang (by design) the first time there is a problem.
>
> Assuming you want to use clustered LVM, you need to change locking_type to
> '3' and, I advise, change 'falllback_to_local_locking' to '0'. This also
> requires that the 'clvmd' daemon is running, which in turn needs cman to be
> running first.
>
> What is your backing device for the LVM PV?
>
> digimer
>
> On 10/10/2012 03:06 AM, Shanti Pahari wrote:
>> Dear all,
>>
>> I have cluster setup with 2 node and created web cluster service on it
>> but it cannot run.
>>
>> I have not listed anything in lvm.conf volume_list because once I add
>> anything in volume_list and reboot the system then I cannot mount and
>> even cannot read the lv which I created for my web . It throws error
>> as
>>
>> error message "not activating volume group lv does not pass activation
>> filter"
>>
>> Therefore I didnt add anything in lvm.conf . Then I try to start my
>> cluster servers for web server but the service failed.
>>
>> Please help me so that I can solve this out.
>>
>> I have attached my cluster.conf , lvdisplay , /var/log/messages and
>> lvm.conf and my /etc/hosts.
>>
>> I will be greatful if anyone can help me!
>>
>> Thanks
>>
>> And my clustat:
>>
>> Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
>>
>> Member Status: Quorate
>>
>> Member Name                                                     ID
>> Status
>>
>> ------ ----                                                     ---- ------
>>
>> PDC-PIC-PL-CL1                                                      1
>> Online, Local, rgmanager
>>
>> PDC-PIC-PL-CL2                                                      2
>> Online, rgmanager
>>
>> Service Name                                               Owner
>> (Last)                                               State
>>
>>    ------- ----                                               -----
>> ------                                               -----
>>
>>    service:ha-web-service
>> (PDC-PIC-PL-CL1)                                           failed
>>
>>
>>
>
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/ "Hydrogen is just a colourless,
> odorless gas which, if left alone in sufficient quantities for long periods
> of time, begins to think about itself."
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From mkathuria@tuxtechnologies.co.in Thu Oct 11 13:36:25 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHaPgA005814 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:36:25 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BHaKi4013109
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:36:20 -0400
Received: from mail-yh0-f46.google.com (mail-yh0-f46.google.com
	[209.85.213.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BHaHJo023148
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:36:18 -0400
Received: by mail-yh0-f46.google.com with SMTP id m54so542344yhm.33
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 10:36:17 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:content-transfer-encoding:x-gm-message-state;
	bh=sfXmHELHTtj3fr54rXCosR2/8sdvwRo8BSuGA/lFT44=;
	b=c8IAFBA2AR1iZ5pwi765N59hjROXYs0j9OxvArK6i/ZmtMcyWrshQKXks2dxtpm96V
	OXJ5ltwrpZFdgub7QTFLzZohjEXymuofJVevGpBdPtWC3QC4my4z5WK5G/hXE1c5XjJl
	vrBXdWCyDsQCvKywYtRjPq61PyoqzvO0VYVWtYpLFgG9fb+LqZBoFzquvVTs25E72+6R
	3G+fBMyXL/7Jz1H8cdaoAnh1NPw74DoO3Wjzj50QEnRlxHFYy9NNWDQ9yO5qDUL0W29G
	z15fnPtaHt5YgyS68w6JjSuKgQgPYJbziXvtdzaFwWaKIRBIzDJyKBNG+sHyVYm6FA4c
	rX9w==
MIME-Version: 1.0
Received: by 10.236.154.165 with SMTP id h25mr1586942yhk.38.1349976977718;
	Thu, 11 Oct 2012 10:36:17 -0700 (PDT)
Received: by 10.147.161.30 with HTTP; Thu, 11 Oct 2012 10:36:17 -0700 (PDT)
In-Reply-To: <0a55cf02.00000e4c.00000039@sierra-A66>
References: <0a55cf02.00000e4c.00000039@sierra-A66>
Date: Thu, 11 Oct 2012 23:06:17 +0530
Message-ID: <CALiQAgno1d2DLs3xrVmiPC1coiZvR6h5oxKK8Gnc2+SqJAiv-g@mail.gmail.com>
From: Manish Kathuria <mkathuria@tuxtechnologies.co.in>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=windows-1252
X-Gm-Message-State: ALoCoQmfvqBT4UkFpbBMexSLOzgFqfmqq0ZZKI85fC3JDg4S8mhS4OoiGPPGGFJ9YZoFzR5eR2V9
X-RedHat-Spam-Score: -0.977  (BAYES_00,RCVD_IN_DNSWL_LOW,URIBL_SBL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9BHaPgA005814
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] lvm.conf for HA LVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:36:25 -0000

On Thu, Oct 11, 2012 at 7:13 PM, Shanti Pahari <shanti.pahari@sierra.sg> wrote:
> Hi all,
>
>
>
> Please help me to configure lvm.conf .
>
> I always get problem when I add volume_list in lvm.conf file.
>
> After I add volume_list  = [ vg_pdcpicpl101 , @pdc-pic-pl-01 ] and
> reboot it later my other lvm goes down L cannot initialize it. Or do I need
> to add all my VG in volume list?

The Volume Groups which are to be shared using HA LVM should not be
added to this volume list. They need to be included as resources in
the cluster configuration.

>

You can refer to the following document for the steps to configure HA LVM

https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Cluster_Administration/ap-ha-halvm-CA.html

Thanks,
-- 
Manish Kathuria

From gumbs.alfred@att.net Thu Oct 11 13:51:49 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHpnF7007861 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:51:49 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BHphLT020360
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:51:43 -0400
Received: from nm8.bullet.mail.sp2.yahoo.com (nm8.bullet.mail.sp2.yahoo.com
	[98.139.91.78])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BHpgrp029838
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:51:42 -0400
Received: from [72.30.22.78] by nm8.bullet.mail.sp2.yahoo.com with NNFMP;
	11 Oct 2012 17:49:29 -0000
Received: from [98.139.44.66] by tm12.bullet.mail.sp2.yahoo.com with NNFMP;
	11 Oct 2012 17:49:29 -0000
Received: from [127.0.0.1] by omp1003.access.mail.sp2.yahoo.com with NNFMP;
	11 Oct 2012 17:49:29 -0000
X-Yahoo-Newman-Id: 164293.60658.bm@omp1003.access.mail.sp2.yahoo.com
Received: (qmail 27453 invoked from network); 11 Oct 2012 17:49:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=att.net; s=s1024;
	t=1349977768; bh=Hw9zejHvLs1AhVp97UzvqNIp6ufBWWwVZC2bcrHXsY4=;
	h=X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:In-Reply-To:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
	b=DXPRJ3VuPMFhKBbEBO/OBOuQ2xC88A5aSdmMxAHPxgboal6g/P+zb297GfLXIB0ArYX5Zz2hRBcfQqdmJzJo4qB5XUr7kd5g1D3rxLO04TQPznGwJtG81E1l+inaEftAgJnJ06crF/WBOKgV6GpIVT8MFmIkp+FHw7LDjE9Sguo=
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: PQAvLwEVM1nX_v8xhsmvUpr8CgQ9i046wmmQRJL92PC.Ud0
	W0E.bd2itjztVvQRmdKvYLOxBS.LAMdQWY.bMC7CaZWd8mymp8PfT0qg4zns
	u6Rs7uSL_QJ_FFqo2sxQ3tMofs91Upa67LLn11xFLBc6M6IN.BJykIWr_KGT
	7GgDaQPs1fGPFVGRxVJ3HESJcGVhp3XszktW5SMT74xaMSm3MKOwXWHBz0wC
	USzA_8.k30F14wKfSqTB1Gw9uCYFNI.Eh3YJ0KdcNlkMH1TSqfJwtQ6OY5Nm
	f_BcmL6mv7.ilaw5qSBW7wxn_j5cxGiJy1JZSNpD8sxbSpTGO9VEmEzVVbVT
	rYi6s6X5ckHnlU3rz.kLiZaJUwb_oV3pZVv4BsreLR8bF57HVnOAs6K2zAzj
	QAYLgkdw1Z.sxjXDxbIc2rZ3dZ2J7saB8NSZXaAw7rINLND7dLNKU72Ngmdm
	_PFxwjoHx0ioHO7ZyfvDU0vEvu5gPVlDBetK.R6S1_Yq1rAKQ2x_Dg9IfjuD
	HVIb6j1p_ApcO73Dc0sakJXwFNA--
X-Yahoo-SMTP: epJVGXmswBC8gpPBhL8iiEDCBTk3aBlLw11k1Sivx6gI
Received: from AlfredPC (gumbs.alfred@76.242.78.203 with login)
	by smtp108.sbc.mail.gq1.yahoo.com with SMTP;
	11 Oct 2012 10:49:28 -0700 PDT
Message-ID: <318E18D064474C05AA6F41B04602BF0A@AlfredPC>
From: "Alfred Gumbs" <gumbs.alfred@att.net>
To: "linux clustering" <linux-cluster@redhat.com>,
	"'Andrew Denton'" <andrewd@sterling.net>
References: <a2202e87.00001f6c.00000065@sierra-A66><507593C6.5040708@sterling.net>
	<27d23437.00001f6c.000000ff@sierra-A66>
In-Reply-To: <27d23437.00001f6c.000000ff@sierra-A66>
Date: Thu, 11 Oct 2012 12:49:25 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0098_01CDA7AE.D8613610"
X-Priority: 3
X-MSMail-Priority: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6002.18463
X-RedHat-Spam-Score: -2.007  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE,
	UNPARSEABLE_RELAY)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:51:49 -0000

This is a multi-part message in MIME format.

------=_NextPart_000_0098_01CDA7AE.D8613610
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'm not certain of your complete configuration.  However looking at the =
entry that you placed in the volume_list.  It looks like you listed the =
VG that is part of your cluster's resource group.  However, the =
volume_lists should actually list all the volume groups that are not =
part of the cluster. =20

The VG's in the volume_list are actually the ones that the system needs =
to bring up.  The volume group that are part of the cluster will be =
brought up by rgmanager, so they should not  be in volumes_list.  The =
reason for the system panic is because the required volume groups were =
not listed in volume_list.  So the kernel could not varyon the system =
VG.

If I have mistakenly interprettted what you've done I'm sorry. =20
  ----- Original Message -----=20
  From: Shanti Pahari=20
  To: 'Andrew Denton' ; 'linux clustering'=20
  Sent: Wednesday, October 10, 2012 9:54 PM
  Subject: Re: [Linux-cluster] cannot run cluster service


  Hi Andrew,

  =20

  Now I added following in my lvm.conf

  volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]

  and

  # dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname =
-r)

  # shutdown -r now "Activating ramdisk LVM changes"

  =20

  After that when the system tries to boot up:

  Kernel panic - not syncing: Attempted to kill init!

  =20

  So didn't have luck L

  =20


  volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]

  The hostname should be cluster connect name or initial hostname ?

  My /etc/hosts:

  =20

  192.168.24.32   PDC-PIC-PL-01   PDC-PIC-PL-01.chcs.sg

  192.168.25.132  PDC-PIC-PL-01-PM       =20

  192.168.26.13   PDC-PIC-PL-CL1

  192.168.24.33   PDC-PIC-PL-02  PDC-PIC-PL-02.chcs.sg

  192.168.25.133  PDC-PIC-PL-02-PM

  192.168.26.14   PDC-PIC-PL-CL2

  =20

  =20

  =20

  From: Andrew Denton [mailto:andrewd@sterling.net]=20
  Sent: Wednesday, 10 October, 2012 11:27 PM
  To: linux clustering
  Cc: Shanti Pahari
  Subject: Re: [Linux-cluster] cannot run cluster service

  =20

  On 10/10/2012 12:06 AM, Shanti Pahari wrote:

    I have cluster setup with 2 node and created web cluster service on =
it but it cannot run.=20

    I have not listed anything in lvm.conf volume_list because once I =
add anything in volume_list and reboot the system then I cannot mount =
and even cannot read the lv which I created for my web . It throws error =
as=20

    error message "not activating volume group lv does not pass =
activation filter"

    Therefore I didn't add anything in lvm.conf . Then I try to start my =
cluster servers for web server but the service failed.


  I've seen this failure too when building my cluster. You either need =
to add the system's volume groups to volume_list, or tag the system's =
vgs with the @hostname so it can still activate them.=20
  e.g.
      volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]
  on one node and
      volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]
  on the other. Next it will complain about initrd being older than =
lvm.conf, so I've been running
  # mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`
  Not sure if that's the right command but it works for me =3D)

  One of these days I'm going to tag the system's vgs properly so I can =
use the same lvm.conf across the nodes. I think it's something like
  lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root=20
  etc...

  By the way, to display how things are tagged, you have to do
  lvs -o +tags
  I wish it displayed them in lvdisplay, but it doesn't.

  -- Andrew






-------------------------------------------------------------------------=
-----


  --=20
  Linux-cluster mailing list
  Linux-cluster@redhat.com
  https://www.redhat.com/mailman/listinfo/linux-cluster
------=_NextPart_000_0098_01CDA7AE.D8613610
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns=3D"http://www.w3.org/TR/REC-html40" xmlns:v =3D=20
"urn:schemas-microsoft-com:vml" xmlns:o =3D=20
"urn:schemas-microsoft-com:office:office" xmlns:w =3D=20
"urn:schemas-microsoft-com:office:word" xmlns:m =3D=20
"http://schemas.microsoft.com/office/2004/12/omml"><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META name=3DGENERATOR content=3D"MSHTML 9.00.8112.16447">
<STYLE>@font-face {
	font-family: Wingdings;
}
@font-face {
	font-family: Wingdings;
}
@font-face {
	font-family: Calibri;
}
@font-face {
	font-family: Tahoma;
}
@font-face {
	font-family: LiberationMono;
}
@font-face {
	font-family: LiberationMono-Bold;
}
@page WordSection1 {size: 612.0pt 792.0pt; margin: 72.0pt 72.0pt 72.0pt =
72.0pt; }
P.MsoNormal {
	MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Calibri","sans-serif"; COLOR: black; =
FONT-SIZE: 11pt; mso-fareast-language: EN-US
}
LI.MsoNormal {
	MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Calibri","sans-serif"; COLOR: black; =
FONT-SIZE: 11pt; mso-fareast-language: EN-US
}
DIV.MsoNormal {
	MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Calibri","sans-serif"; COLOR: black; =
FONT-SIZE: 11pt; mso-fareast-language: EN-US
}
A:link {
	COLOR: blue; TEXT-DECORATION: underline; mso-style-priority: 99
}
SPAN.MsoHyperlink {
	COLOR: blue; TEXT-DECORATION: underline; mso-style-priority: 99
}
A:visited {
	COLOR: purple; TEXT-DECORATION: underline; mso-style-priority: 99
}
SPAN.MsoHyperlinkFollowed {
	COLOR: purple; TEXT-DECORATION: underline; mso-style-priority: 99
}
SPAN.EmailStyle17 {
	FONT-FAMILY: "Calibri","sans-serif"; COLOR: windowtext; mso-style-type: =
personal
}
SPAN.EmailStyle18 {
	FONT-FAMILY: "Calibri","sans-serif"; COLOR: #1f497d; mso-style-type: =
personal-reply
}
.MsoChpDefault {
	FONT-SIZE: 10pt; mso-style-type: export-only
}
DIV.WordSection1 {
	page: WordSection1
}
</STYLE>
<!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></HEAD>
<BODY lang=3DEN-SG bgColor=3Dwhite vLink=3Dpurple link=3Dblue>
<DIV><FONT size=3D2 face=3DArial>I'm not certain of your complete=20
configuration.&nbsp; However looking at the entry that you placed in the =

volume_list.&nbsp; It looks like you listed the VG that is part of your=20
cluster's resource group.&nbsp; However, the volume_lists should =
actually list=20
all the volume groups that are not part of the cluster.&nbsp; =
</FONT></DIV>
<DIV><FONT size=3D2 face=3DArial></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2 face=3DArial>The VG's in the volume_list are =
actually the ones=20
that the system needs to bring up.&nbsp; The volume group that are part =
of the=20
cluster will be brought up by rgmanager, so they should not&nbsp; be in=20
volumes_list.&nbsp; The reason for the system panic is because the =
required=20
volume groups were not listed in volume_list.&nbsp; So the kernel could =
not=20
varyon the system VG.</FONT></DIV>
<DIV><FONT size=3D2 face=3DArial></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2 face=3DArial>If I have mistakenly interprettted what =
you've done=20
I'm sorry.&nbsp; </FONT></DIV>
<BLOCKQUOTE=20
style=3D"BORDER-LEFT: #000000 2px solid; PADDING-LEFT: 5px; =
PADDING-RIGHT: 0px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 0px">
  <DIV style=3D"FONT: 10pt arial">----- Original Message ----- </DIV>
  <DIV=20
  style=3D"FONT: 10pt arial; BACKGROUND: #e4e4e4; font-color: =
black"><B>From:</B>=20
  <A title=3Dshanti.pahari@sierra.sg =
href=3D"mailto:shanti.pahari@sierra.sg">Shanti=20
  Pahari</A> </DIV>
  <DIV style=3D"FONT: 10pt arial"><B>To:</B> <A =
title=3Dandrewd@sterling.net=20
  href=3D"mailto:andrewd@sterling.net">'Andrew Denton'</A> ; <A=20
  title=3Dlinux-cluster@redhat.com =
href=3D"mailto:linux-cluster@redhat.com">'linux=20
  clustering'</A> </DIV>
  <DIV style=3D"FONT: 10pt arial"><B>Sent:</B> Wednesday, October 10, =
2012 9:54=20
  PM</DIV>
  <DIV style=3D"FONT: 10pt arial"><B>Subject:</B> Re: [Linux-cluster] =
cannot run=20
  cluster service</DIV>
  <DIV><BR></DIV>
  <DIV class=3DWordSection1>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: #1f497d">Hi=20
  Andrew,<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: =
#1f497d"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: #1f497d">Now I added =
following in my=20
  lvm.conf<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: #1f497d"></SPAN><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">volume_list=20
  =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"=20
  ]<o:p></o:p></SPAN></P>
  <P style=3D"TEXT-AUTOSPACE: " class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">and<o:p></o:p></SPAN></P>
  <P style=3D"TEXT-AUTOSPACE: " class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"></SPAN><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono; COLOR: windowtext; FONT-SIZE: =
10.5pt; mso-fareast-language: EN-SG">#=20
  </SPAN><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">dracut=20
  --hostonly --force /boot/initramfs-$(uname -r).img $(uname=20
  -r)<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono; COLOR: windowtext; FONT-SIZE: =
10.5pt; mso-fareast-language: EN-SG">#=20
  </SPAN><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">shutdown=20
  -r now "Activating ramdisk LVM changes"<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p>&nbsp;</o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">After=20
  that when the system tries to boot up:<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">Kernel=20
  panic =96 not syncing: Attempted to kill =
init!<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p>&nbsp;</o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">So=20
  didn=92t have luck </SPAN></B><B><SPAN=20
  style=3D"FONT-FAMILY: Wingdings; COLOR: windowtext; FONT-SIZE: 10.5pt; =
mso-fareast-language: EN-SG">L</SPAN></B><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p>&nbsp;</o:p></SPAN></B></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><BR>volume_list=20
  =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"=20
  ]<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">The=20
  hostname should be cluster connect name or initial hostname=20
  ?<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">My=20
  /etc/hosts:<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.24.32&nbsp;&nbsp;=20
  PDC-PIC-PL-01&nbsp;&nbsp; PDC-PIC-PL-01.chcs.sg<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.25.132&nbsp;=20
  PDC-PIC-PL-01-PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  <o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.26.13&nbsp;&nbsp;=20
  PDC-PIC-PL-CL1<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.24.33&nbsp;&nbsp;=20
  PDC-PIC-PL-02&nbsp; PDC-PIC-PL-02.chcs.sg<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.25.133&nbsp;=20
  PDC-PIC-PL-02-PM<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.26.14&nbsp;&nbsp;=20
  PDC-PIC-PL-CL2<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: =
#1f497d"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: =
#1f497d"><o:p>&nbsp;</o:p></SPAN></P>
  <DIV>
  <DIV=20
  style=3D"BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; =
PADDING-BOTTOM: 0cm; PADDING-LEFT: 0cm; PADDING-RIGHT: 0cm; BORDER-TOP: =
#b5c4df 1pt solid; BORDER-RIGHT: medium none; PADDING-TOP: 3pt">
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: 'Tahoma','sans-serif'; COLOR: windowtext; =
FONT-SIZE: 10pt; mso-fareast-language: EN-SG"=20
  lang=3DEN-US>From:</SPAN></B><SPAN=20
  style=3D"FONT-FAMILY: 'Tahoma','sans-serif'; COLOR: windowtext; =
FONT-SIZE: 10pt; mso-fareast-language: EN-SG"=20
  lang=3DEN-US> Andrew Denton [mailto:andrewd@sterling.net] =
<BR><B>Sent:</B>=20
  Wednesday, 10 October, 2012 11:27 PM<BR><B>To:</B> linux=20
  clustering<BR><B>Cc:</B> Shanti Pahari<BR><B>Subject:</B> Re: =
[Linux-cluster]=20
  cannot run cluster service<o:p></o:p></SPAN></P></DIV></DIV>
  <P class=3DMsoNormal><o:p>&nbsp;</o:p></P>
  <DIV>
  <P class=3DMsoNormal>On 10/10/2012 12:06 AM, Shanti Pahari=20
  wrote:<o:p></o:p></P></DIV>
  <BLOCKQUOTE style=3D"MARGIN-TOP: 5pt; MARGIN-BOTTOM: 5pt">
    <P class=3DMsoNormal><SPAN=20
    style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">I=20
    have cluster setup with 2 node and created web cluster service on it =
but it=20
    cannot run. <o:p></o:p></SPAN></P>
    <P class=3DMsoNormal>I have not listed anything in lvm.conf =
volume_list=20
    because once I add anything in volume_list and reboot the system =
then I=20
    cannot mount and even cannot read the lv which I created for my web =
. It=20
    throws error as <o:p></o:p></P>
    <P class=3DMsoNormal>error message "not activating volume group lv =
does not=20
    pass activation filter"<o:p></o:p></P>
    <P class=3DMsoNormal>Therefore I didn=92t add anything in lvm.conf . =
Then I try=20
    to start my cluster servers for web server but the service=20
    failed.<o:p></o:p></P></BLOCKQUOTE>
  <P style=3D"MARGIN-BOTTOM: 12pt" class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><BR>I've=20
  seen this failure too when building my cluster. You either need to add =
the=20
  system's volume groups to volume_list, or tag the system's vgs with =
the=20
  @hostname so it can still activate them. =
<BR>e.g.<BR>&nbsp;&nbsp;&nbsp;=20
  volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]<BR>on=20
  one node and<BR>&nbsp;&nbsp;&nbsp; volume_list =3D [ "vg_pdcpicpl02",=20
  "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]<BR>on the other. Next it will =
complain=20
  about initrd being older than lvm.conf, so I've been running<BR># =
mkinitrd -f=20
  /boot/initrd-`uname -r`.img `uname -r`<BR>Not sure if that's the right =
command=20
  but it works for me =3D)<BR><BR>One of these days I'm going to tag the =
system's=20
  vgs properly so I can use the same lvm.conf across the nodes. I think =
it's=20
  something like<BR>lvchange --addtag PDC-PIC-PL-CL1 =
vg_pdcpicpl01/lv_root=20
  <BR>etc...<BR><BR>By the way, to display how things are tagged, you =
have to=20
  do<BR>lvs -o +tags<BR>I wish it displayed them in lvdisplay, but it=20
  doesn't.<BR><BR>-- Andrew<BR><BR><BR><o:p></o:p></SPAN></P></DIV>
  <P>
  <HR>

  <P></P>-- <BR>Linux-cluster mailing=20
  =
list<BR>Linux-cluster@redhat.com<BR>https://www.redhat.com/mailman/listin=
fo/linux-cluster</BLOCKQUOTE></BODY></HTML>

------=_NextPart_000_0098_01CDA7AE.D8613610--

From lists@alteeve.ca Thu Oct 11 14:46:58 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BIkwP0015177 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 14:46:58 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BIkrSS003232; Thu, 11 Oct 2012 14:46:53 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BIkpiC031613;
	Thu, 11 Oct 2012 14:46:52 -0400
Received: from lemass.alteeve.ca (lns2-pool-d8429402.dsl.look.ca
	[216.66.148.2])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 226EE42249F;
	Thu, 11 Oct 2012 14:46:49 -0400 (EDT)
Message-ID: <50771419.1000306@alteeve.ca>
Date: Thu, 11 Oct 2012 14:46:49 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <50736F78.3060906@redhat.com> <507630C0.2010607@alteeve.ca>
	<20121011112554.GC29887@redhat.com>
In-Reply-To: <20121011112554.GC29887@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 18:46:59 -0000

On 10/11/2012 07:25 AM, Jan Pokorn wrote:
> Hello Digimer,
>
> On 10/10/12 22:36 -0400, Digimer wrote:
>>    I started following Andrew's new pcs-based tutorial today on a fresh,
>> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
>>
>> ===
>> yum install -y pcs
>>
>> 2.5 Setup
>>
>> <snip>
>>
>> # systemctl start pcsd.service
>> # systemctl enable pcsd.service
>> ===
>>
>> This fails, and Andrew suggested using the version of pcs you annouced here.
>> Same problem though;
>>
>> ===
>> [root@an-c01n01 ~]# rpm -Uvh
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>> Retrieving http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>> Preparing...                ###########################################
>> [100%]
>>     1:pcs                    ###########################################
>> [100%]
>> [root@an-c01n01 ~]# systemctl start pcsd.service
>> Failed to issue method call: Unit pcsd.service failed to load: No such file
>> or directory. See system logs and 'systemctl status pcsd.service' for
>> details.
>>
>> [...]
>>
>> Any thoughts?
>
> this is part of pcs-gui project [1] packaging of which is probably pending.
>
> [1] https://github.com/feist/pcs-gui

Ah, so the daemon isn't needed if a user doesn't care to use the GUI?

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From andrew@beekhof.net Thu Oct 11 21:05:28 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9C15S5l019771 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 21:05:28 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9C15Ng5014516
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:05:23 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9C15LYn011619
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:05:22 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so2819075obb.33
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 18:05:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:content-transfer-encoding:x-gm-message-state;
	bh=Zopa6awRlZmfdi6HQwwLnOK1YGGtVb3FCGmKOs6DXYI=;
	b=mw3WgfnjQxzRxP9dMCl8cUHBw0Oi+Hte/Grd/fZE5nCKOvZyu3Z/TiwpYgk/pwcnvN
	XKTOJX4WlJZIrt/MOVKDuUQHq7DDw6q0M88BdNu88Skv9A/plHFfbV2QQQf+f9y0JxuC
	IOxwzbleKOfYd5mRx35f7lgWoPJT55WpzVKMgVuVIm596lgFAV0VrpY0HNJz0yLcIa+7
	3tqAWp/H4hNjViwlcHsZRDyZRmYBbT+CW7jFDa5AR2H9qMk/Rz3Evu/E5GuNm67SoTl3
	iseOfoz1rKMRXOVHgP0E4yplGQve3wXeEgFx3dzoXwHUa0D9+uQ0CihPDbjOiPm58Ysf
	JsxA==
MIME-Version: 1.0
Received: by 10.182.240.45 with SMTP id vx13mr2316671obc.21.1350003612056;
	Thu, 11 Oct 2012 18:00:12 -0700 (PDT)
Received: by 10.76.173.70 with HTTP; Thu, 11 Oct 2012 18:00:11 -0700 (PDT)
In-Reply-To: <50771419.1000306@alteeve.ca>
References: <50736F78.3060906@redhat.com> <507630C0.2010607@alteeve.ca>
	<20121011112554.GC29887@redhat.com> <50771419.1000306@alteeve.ca>
Date: Fri, 12 Oct 2012 12:00:11 +1100
Message-ID: <CAEDLWG10dC_HrvUyPVyxZzz_pneopXJovDY=DkMOzZYa36mBMg@mail.gmail.com>
From: Andrew Beekhof <andrew@beekhof.net>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlTFdNCxM4gNNRhA03wN8OGbCaEqFCCkKJh8leDkc/YS/F7ClqA6U652fdG8YkrnaUqB/u4
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9C15S5l019771
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 01:05:28 -0000

On Fri, Oct 12, 2012 at 5:46 AM, Digimer <lists@alteeve.ca> wrote:
> On 10/11/2012 07:25 AM, Jan Pokorn wrote:
>>
>> Hello Digimer,
>>
>> On 10/10/12 22:36 -0400, Digimer wrote:
>>>
>>>    I started following Andrew's new pcs-based tutorial today on a fresh,
>>> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
>>>
>>> ===
>>> yum install -y pcs
>>>
>>> 2.5 Setup
>>>
>>> <snip>
>>>
>>> # systemctl start pcsd.service
>>> # systemctl enable pcsd.service
>>> ===
>>>
>>> This fails, and Andrew suggested using the version of pcs you annouced
>>> here.
>>> Same problem though;
>>>
>>> ===
>>> [root@an-c01n01 ~]# rpm -Uvh
>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>> Retrieving
>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>> Preparing...                ###########################################
>>> [100%]
>>>     1:pcs                    ###########################################
>>> [100%]
>>> [root@an-c01n01 ~]# systemctl start pcsd.service
>>> Failed to issue method call: Unit pcsd.service failed to load: No such
>>> file
>>> or directory. See system logs and 'systemctl status pcsd.service' for
>>> details.
>>>
>>> [...]
>>>
>>> Any thoughts?
>>
>>
>> this is part of pcs-gui project [1] packaging of which is probably
>> pending.
>>
>> [1] https://github.com/feist/pcs-gui
>
>
> Ah, so the daemon isn't needed if a user doesn't care to use the GUI?

I believe it is needed if you want to do anything more than talk to
the local node.  Which includes initial cluster setup.
I talked to Chris just now, he wanted to add PAM support (instead of
using pcs_passwd) before releasing that part for upstream.

New packages including the daemon pieces (with PAM support) should
land in the next day or so.

From lists@alteeve.ca Thu Oct 11 21:26:38 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9C1Qbfa021477 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 21:26:38 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9C1QW09029920
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:26:32 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9C1QVJx013400
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:26:31 -0400
Received: from lemass.alteeve.ca (lns2-pool-d8429402.dsl.look.ca
	[216.66.148.2])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id C7A8C42249F;
	Thu, 11 Oct 2012 21:26:28 -0400 (EDT)
Message-ID: <507771C5.2080001@alteeve.ca>
Date: Thu, 11 Oct 2012 21:26:29 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <50736F78.3060906@redhat.com> <507630C0.2010607@alteeve.ca>
	<20121011112554.GC29887@redhat.com> <50771419.1000306@alteeve.ca>
	<CAEDLWG10dC_HrvUyPVyxZzz_pneopXJovDY=DkMOzZYa36mBMg@mail.gmail.com>
In-Reply-To: <CAEDLWG10dC_HrvUyPVyxZzz_pneopXJovDY=DkMOzZYa36mBMg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 01:26:38 -0000

On 10/11/2012 09:00 PM, Andrew Beekhof wrote:
> On Fri, Oct 12, 2012 at 5:46 AM, Digimer <lists@alteeve.ca> wrote:
>> On 10/11/2012 07:25 AM, Jan Pokorn wrote:
>>>
>>> Hello Digimer,
>>>
>>> On 10/10/12 22:36 -0400, Digimer wrote:
>>>>
>>>>     I started following Andrew's new pcs-based tutorial today on a fresh,
>>>> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
>>>>
>>>> ===
>>>> yum install -y pcs
>>>>
>>>> 2.5 Setup
>>>>
>>>> <snip>
>>>>
>>>> # systemctl start pcsd.service
>>>> # systemctl enable pcsd.service
>>>> ===
>>>>
>>>> This fails, and Andrew suggested using the version of pcs you annouced
>>>> here.
>>>> Same problem though;
>>>>
>>>> ===
>>>> [root@an-c01n01 ~]# rpm -Uvh
>>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>>> Retrieving
>>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>>> Preparing...                ###########################################
>>>> [100%]
>>>>      1:pcs                    ###########################################
>>>> [100%]
>>>> [root@an-c01n01 ~]# systemctl start pcsd.service
>>>> Failed to issue method call: Unit pcsd.service failed to load: No such
>>>> file
>>>> or directory. See system logs and 'systemctl status pcsd.service' for
>>>> details.
>>>>
>>>> [...]
>>>>
>>>> Any thoughts?
>>>
>>>
>>> this is part of pcs-gui project [1] packaging of which is probably
>>> pending.
>>>
>>> [1] https://github.com/feist/pcs-gui
>>
>>
>> Ah, so the daemon isn't needed if a user doesn't care to use the GUI?
>
> I believe it is needed if you want to do anything more than talk to
> the local node.  Which includes initial cluster setup.
> I talked to Chris just now, he wanted to add PAM support (instead of
> using pcs_passwd) before releasing that part for upstream.
>
> New packages including the daemon pieces (with PAM support) should
> land in the next day or so.
>

Awesome, I'll try it out once it's available.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."

From a.holway@syseleven.de Fri Oct 12 11:22:57 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CFMuTU019525 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 11:22:57 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CFMphY021270
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:22:51 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CFMj4V014340
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:22:46 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for linux-cluster@redhat.com; Fri, 12 Oct 2012 17:22:43 +0200
From: Andrew Holway <a.holway@syseleven.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Fri, 12 Oct 2012 17:22:39 +0200
Message-Id: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
To: linux clustering <linux-cluster@redhat.com>
Mime-Version: 1.0 (Apple Message framework v1278)
X-RedHat-Spam-Score: -4.746  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 15:22:57 -0000

Hello,

I am trying to set up a 4 node cluster with a shared iSCSI storage device.

I cannot start clvmd: service clvmd start just hangs.

I cannot stop cman:

node001:	Working directory: /root
node001:	Stopping cluster: 
node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
node001:	fence_tool: cannot leave due to active systems
node001:	[FAILED]

I find these errors in /var/log/cluster/dlm_controld.log 

Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying

[root@node001 clvmd]# clvmd status
clvmd failed in initialisation

Any ideas?

Thanks,

Andrew


From lists@alteeve.ca Fri Oct 12 11:28:44 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CFSirO019775 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 11:28:44 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CFSdEr008632
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:28:39 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CFSbOI017074
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:28:37 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 046A042249F;
	Fri, 12 Oct 2012 11:28:35 -0400 (EDT)
Message-ID: <50783724.5040703@alteeve.ca>
Date: Fri, 12 Oct 2012 11:28:36 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
In-Reply-To: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 15:28:44 -0000

On 10/12/2012 11:22 AM, Andrew Holway wrote:
> Hello,
>
> I am trying to set up a 4 node cluster with a shared iSCSI storage device.
>
> I cannot start clvmd: service clvmd start just hangs.
>
> I cannot stop cman:
>
> node001:	Working directory: /root
> node001:	Stopping cluster:
> node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
> node001:	fence_tool: cannot leave due to active systems
> node001:	[FAILED]
>
> I find these errors in /var/log/cluster/dlm_controld.log
>
> Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
> Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
> Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying
>
> [root@node001 clvmd]# clvmd status
> clvmd failed in initialisation
>
> Any ideas?
>
> Thanks,
>
> Andrew

Can you paste your cluster.conf please? I suspect something went wrong, 
it tried to fence and then failed to do so, so it's blocked.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From a.holway@syseleven.de Fri Oct 12 14:52:51 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CIqogh009254 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 14:52:50 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CIqigL020242
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 14:52:45 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CIqfWB030962
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 14:52:42 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits));
	Fri, 12 Oct 2012 20:52:37 +0200
Mime-Version: 1.0 (Apple Message framework v1278)
Content-Type: text/plain; charset=iso-8859-1
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <50783724.5040703@alteeve.ca>
Date: Fri, 12 Oct 2012 20:52:35 +0200
Message-Id: <48CCA736-1A1B-43F5-B94E-8C9EE28E0384@syseleven.de>
References: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
	<50783724.5040703@alteeve.ca>
To: Digimer <lists@alteeve.ca>
X-RedHat-Spam-Score: -4.746  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9CIqogh009254
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 18:52:51 -0000


On Oct 12, 2012, at 5:28 PM, Digimer wrote:

> On 10/12/2012 11:22 AM, Andrew Holway wrote:
>> Hello,
>> 
>> I am trying to set up a 4 node cluster with a shared iSCSI storage device.
>> 
>> I cannot start clvmd: service clvmd start just hangs.
>> 
>> I cannot stop cman:
>> 
>> node001:	Working directory: /root
>> node001:	Stopping cluster:
>> node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
>> node001:	fence_tool: cannot leave due to active systems
>> node001:	[FAILED]
>> 
>> I find these errors in /var/log/cluster/dlm_controld.log
>> 
>> Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
>> Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
>> Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying
>> 
>> [root@node001 clvmd]# clvmd status
>> clvmd failed in initialisation
>> 
>> Any ideas?
>> 
>> Thanks,
>> 
>> Andrew
> 
> Can you paste your cluster.conf please? I suspect something went wrong, it tried to fence and then failed to do so, so it's blocked.

:) I had two node id's the same.

Thanks

Andrew

> 
> -- 
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without access to education?



From shanti.pahari@sierra.sg Fri Oct 12 15:48:19 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJmIAW015154 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 15:48:19 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJmDrE010292
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:48:13 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CJmAeH019759
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:48:11 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 019CA25DF9CB
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GJ0RKZEOnQhT for <linux-cluster@redhat.com>;
	Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 272D325DF9C2
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
Message-ID: <423ded17.00000e6c.00000023@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00AE_01CDA8F5.87BDCFF0"
Thread-Index: Ac2oslJlfI6juIErTrusxz/czYSAsQ==
Content-Language: en-sg
X-Originating-IP: [119.56.113.125]
X-RedHat-Spam-Score: -4.044  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 19:48:20 -0000

This is a multipart message in MIME format.

------=_NextPart_000_00AE_01CDA8F5.87BDCFF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi ,

 

When I added FC external disk in RHEL 6.1 it didn't load in /dev/mapper .

After reboot also it didn't detect.

Any help ? 

Highly appreciated.

 

thanks


------=_NextPart_000_00AE_01CDA8F5.87BDCFF0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Hi =
,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>When I added FC external disk in RHEL 6.1 it =
didn&#8217;t load in /dev/mapper .<o:p></o:p></p><p =
class=3DMsoNormal>After reboot also it didn&#8217;t =
detect.<o:p></o:p></p><p class=3DMsoNormal>Any help ? <o:p></o:p></p><p =
class=3DMsoNormal>Highly appreciated.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>thanks<o:p></o:p></p></div></body></html>
------=_NextPart_000_00AE_01CDA8F5.87BDCFF0--

From lists@alteeve.ca Fri Oct 12 15:53:20 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJrKC0015585 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 15:53:20 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJrE7r011446
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:53:15 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CJrDup028879
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:53:13 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 47531422488;
	Fri, 12 Oct 2012 15:53:11 -0400 (EDT)
Message-ID: <50787528.7000602@alteeve.ca>
Date: Fri, 12 Oct 2012 15:53:12 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: Andrew Holway <a.holway@syseleven.de>
References: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
	<50783724.5040703@alteeve.ca>
	<48CCA736-1A1B-43F5-B94E-8C9EE28E0384@syseleven.de>
In-Reply-To: <48CCA736-1A1B-43F5-B94E-8C9EE28E0384@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 19:53:21 -0000

On 10/12/2012 02:52 PM, Andrew Holway wrote:
>
> On Oct 12, 2012, at 5:28 PM, Digimer wrote:
>
>> On 10/12/2012 11:22 AM, Andrew Holway wrote:
>>> Hello,
>>>
>>> I am trying to set up a 4 node cluster with a shared iSCSI storage device.
>>>
>>> I cannot start clvmd: service clvmd start just hangs.
>>>
>>> I cannot stop cman:
>>>
>>> node001:	Working directory: /root
>>> node001:	Stopping cluster:
>>> node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
>>> node001:	fence_tool: cannot leave due to active systems
>>> node001:	[FAILED]
>>>
>>> I find these errors in /var/log/cluster/dlm_controld.log
>>>
>>> Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
>>> Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
>>> Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying
>>>
>>> [root@node001 clvmd]# clvmd status
>>> clvmd failed in initialisation
>>>
>>> Any ideas?
>>>
>>> Thanks,
>>>
>>> Andrew
>>
>> Can you paste your cluster.conf please? I suspect something went wrong, it tried to fence and then failed to do so, so it's blocked.
>
> :) I had two node id's the same.
>
> Thanks
>
> Andrew

Heh, I've done that before, too. >_>

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From raju.rajsand@gmail.com Fri Oct 12 16:08:25 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CK8Pj4018018 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 16:08:25 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CK8KMM014826
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 16:08:20 -0400
Received: from mail-oa0-f46.google.com (mail-oa0-f46.google.com
	[209.85.219.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CK8J6B016245
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 16:08:20 -0400
Received: by mail-oa0-f46.google.com with SMTP id h16so3863372oag.33
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 13:08:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type:content-transfer-encoding;
	bh=DRD5LusZRYXGl6JCGpZg+E6F3miusd6gZ/KskGF3IQY=;
	b=zocjJNoe3d4vY8+usji5yAEQ8eQpXPZ6OvrM0CVho7bnGOq0vY7lLb6mSbMvy+Krlk
	A27osgXeBm+qCrdFIpTK2B9BRGo7SVoW+RTWmgAzZSiVDVbNYnKkRSTDHTeCAvpZiQMi
	9HJgw6tY7zCyjSRfBx4bs4LKV863+emwvExQ9Z4EkgULf5HPW9oywsj4LPHowHnn/7cu
	Vfyns3+HBGIpmsa1zD99M61DCb3z1i0z5+BvbmJt9OYo+wWFktjDtvhjqToC1C0T2DGe
	oP872CFNVbWOkkAmoaIgmu97BTHLFWFmw+jMME06oh8e7R6a8TOkTwKl2Y4aO1GLdPqb
	VxLA==
MIME-Version: 1.0
Received: by 10.60.14.165 with SMTP id q5mr4518137oec.28.1350072024403; Fri,
	12 Oct 2012 13:00:24 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Fri, 12 Oct 2012 13:00:24 -0700 (PDT)
In-Reply-To: <423ded17.00000e6c.00000023@sierra-A66>
References: <423ded17.00000e6c.00000023@sierra-A66>
Date: Sat, 13 Oct 2012 01:30:24 +0530
X-Google-Sender-Auth: sLT9w74fL5tvHC_gk-vuUVnXPF8
Message-ID: <CA+YdgaqU_FwwpR2=inBDYKBMkjTa3G_wuK9=t3kvJ=aqNw5puQ@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=windows-1252
X-RedHat-Spam-Score: -1.077  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_SBL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9CK8Pj4018018
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 20:08:25 -0000

Greetings,

On Sat, Oct 13, 2012 at 1:17 AM, Shanti Pahari <shanti.pahari@sierra.sg> wrote:
> When I added FC external disk in RHEL 6.1 it didnt load in /dev/mapper .
>
> After reboot also it didnt detect.
>
>
> Highly appreciated.

IMHO not appreciated.

You have been very cryptic in your answers.

Why don't you buy Redhat support?

-- 
Regards,

Rajagopal

From shanti.pahari@sierra.sg Fri Oct 12 19:38:55 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CNct09006150 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 19:38:55 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CNcnIt001349
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 19:38:50 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CNchhC024021
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 19:38:44 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 9F1E925DF9D6;
	Sat, 13 Oct 2012 07:37:52 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AW6hfn+j3SMC; Sat, 13 Oct 2012 07:37:48 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id EE4D825DF9D3;
	Sat, 13 Oct 2012 07:37:47 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <bentech4you@gmail.com>
References: <423ded17.00000e6c.00000023@sierra-A66>
	<CA+C_GOVNjiaJ4HFUDE-Rn9SHrK7FTqSKMOiHtEqB6VH0m-5JMA@mail.gmail.com>
In-Reply-To: <CA+C_GOVNjiaJ4HFUDE-Rn9SHrK7FTqSKMOiHtEqB6VH0m-5JMA@mail.gmail.com>
Date: Sat, 13 Oct 2012 07:37:47 +0800 (SGT)
Message-ID: <6f3021d4.00000e6c.00000027@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00BF_01CDA915.BA8295E0"
Thread-Index: AQEcqcI7fvq92Te0FkjibWAJzF4GfgLNSpnKmQHnBQA=
Content-Language: en-sg
X-Originating-IP: [119.56.115.152]
X-RedHat-Spam-Score: -2.421  (BAYES_00, HTML_MESSAGE, RP_MATCHES_RCVD,
	URIBL_SBL)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 23:38:55 -0000

This is a multipart message in MIME format.

------=_NextPart_000_00BF_01CDA915.BA8295E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Multipathd is running

And when I try /sbin/multipath -v0  it didn't show anything but when lsmod
|grep dm then I saw dm-multipath here.

But still cannot detect.

 

[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0

[root@PDC-PIC-PL-01 ~]# modprobe dm-multipath

[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0

[root@PDC-PIC-PL-01 ~]# lsmod |grep dm

dm_mirror              14067  0 

dm_region_hash         12136  1 dm_mirror

dm_log                 10120  2 dm_mirror,dm_region_hash

dm_round_robin          2651  6 

dm_multipath           18266  4 dm_round_robin

dm_mod                 75539  16 dm_mirror,dm_log,dm_multipath

[root@PDC-PIC-PL-01 ~]# service multipathd status

multipathd (pid  1567) is running...

[root@PDC-PIC-PL-01 ~]#

 

From: Ben .T.George [mailto:bentech4you@gmail.com] 
Sent: Saturday, 13 October, 2012 4:57 AM
To: shanti.pahari@sierra.sg
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1

 

HI

 

check multipath demon is running or not..also check dm-multipath kernel
module is loaded or not

 

 

regards,

Ben

 

On Fri, Oct 12, 2012 at 10:47 PM, Shanti Pahari <shanti.pahari@sierra.sg>
wrote:

Hi ,

 

When I added FC external disk in RHEL 6.1 it didn't load in /dev/mapper .

After reboot also it didn't detect.

Any help ? 

Highly appreciated.

 

thanks


--
Linux-cluster mailing list
Linux-cluster@redhat.com
https://www.redhat.com/mailman/listinfo/linux-cluster





 

 


------=_NextPart_000_00BF_01CDA915.BA8295E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>Multipathd is running<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>And when I try /sbin/multipath &#8211;v0&nbsp; it didn&#8217;t show =
anything but when lsmod |grep dm then I saw dm-multipath =
here.<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>But still cannot detect.<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# modprobe dm-multipath<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# lsmod |grep dm<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_mirror&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp; 14067&nbsp; 0 <o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_region_hash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
12136&nbsp; 1 dm_mirror<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10120&nbsp; 2 =
dm_mirror,dm_region_hash<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_round_robin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
2651&nbsp; 6 <o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_multipath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p; 18266&nbsp; 4 dm_round_robin<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 75539&nbsp; 16 =
dm_mirror,dm_log,dm_multipath<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# service multipathd =
status<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>multipathd (pid&nbsp; 1567) is running...<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]#<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif"'>From:</span>=
</b><span lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif"'> Ben =
.T.George [mailto:bentech4you@gmail.com] <br><b>Sent:</b> Saturday, 13 =
October, 2012 4:57 AM<br><b>To:</b> =
shanti.pahari@sierra.sg<br><b>Subject:</b> Re: [Linux-cluster] cannot =
detect SAN disk in RHEL6.1<o:p></o:p></span></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p =
class=3DMsoNormal>HI<o:p></o:p></p><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal>check multipath demon is running or not..also check =
dm-multipath kernel module is loaded or not<o:p></o:p></p></div><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal>regards,<o:p></o:p></p></div><div><p =
class=3DMsoNormal>Ben<o:p></o:p></p></div><div><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'><o:p>&nbsp;</o:p></p><div><p =
class=3DMsoNormal>On Fri, Oct 12, 2012 at 10:47 PM, Shanti Pahari &lt;<a =
href=3D"mailto:shanti.pahari@sierra.sg" =
target=3D"_blank">shanti.pahari@sierra.sg</a>&gt; =
wrote:<o:p></o:p></p><div><div><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Hi =
,<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;<o:p><=
/o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>When I =
added FC external disk in RHEL 6.1 it didn&#8217;t load in /dev/mapper =
.<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>After =
reboot also it didn&#8217;t detect.<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Any help ? =
<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Highly =
appreciated.<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;<o:p><=
/o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>thanks<o:p><=
/o:p></p></div></div><p class=3DMsoNormal><br>--<br>Linux-cluster =
mailing list<br><a =
href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br>=
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" =
target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</=
a><o:p></o:p></p></div><p class=3DMsoNormal><br><br =
clear=3Dall><o:p></o:p></p><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></div></div></body></html>
------=_NextPart_000_00BF_01CDA915.BA8295E0--

From a.holway@syseleven.de Sat Oct 13 06:40:21 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9DAeLtd004192 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 13 Oct 2012 06:40:21 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9DAeFku011072
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 06:40:16 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9DAeC3d013756
	for <Linux-cluster@redhat.com>; Sat, 13 Oct 2012 06:40:13 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for Linux-cluster@redhat.com; Sat, 13 Oct 2012 12:40:09 +0200
From: Andrew Holway <a.holway@syseleven.de>
Content-Type: text/plain; charset=us-ascii
Date: Sat, 13 Oct 2012 12:40:11 +0200
Message-Id: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
To: linux clustering <Linux-cluster@redhat.com>
Mime-Version: 1.0 (Apple Message framework v1278)
X-RedHat-Spam-Score: -4.743  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9DAeLtd004192
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Linux clustering for high availability databases
	and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 13 Oct 2012 10:40:21 -0000

Hello, 

We have been experimenting with various storage technologies in order to create moderately highly available database services.

I have the following equipment in my lab:

4x HP G8 servers with 
* Mellanox QDR InfiniBand 
* 10GE adapters
* Lots of memory and the latest, most powerful CPUS.
* Centos 6.0

Oracle ZFS appliance
* Infiniband 
* NFS (over ethernet and infiniband)
* iSCSI (over ethernet and infiniband)
* Various RDMA protocols that are not supported by oracle  on redhat.

Nimble Storage device
* iSCSI over 10G ethernet

Brocade 10G switches.

Can I have some guidance on possible setups for HA database services? I have tested and have a good understanding of all the technology components but I am a bit confused how I should be glueing them together. I need a focus :)

Thanks,

Andrew







From raju.rajsand@gmail.com Sat Oct 13 12:02:05 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9DG25tb014428 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 13 Oct 2012 12:02:05 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9DG20Ab004934
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 12:02:00 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9DG1uRu010805
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 12:01:59 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so4434449obb.33
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 09:01:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=dlB/eVdlCV6DAvL1jlt8aUN6GAqw7OnGBM0UnycYaIk=;
	b=pgvJWRCHwPNKN+s9WDLGCXfr4yQLL2TVngs1Ox3MmVOFSq7fFL1lsx9UzXEmPNJ6l+
	/zw16+mKECgOwZxzNV7VV02Yauy4W/+R1rYw560A7tybvoT8Y7q0JGyxbBq7H0RFjs6S
	dTpVQBlSW77l3G1tkkEu6eFFZ7fBegNHhp2EsITNTM1AyExLGuCBjTh1v7iIeZUoQN6Z
	DSCoD4B32GXkhBignosel2eHNDiFtpBWAD3BVr4kKUy0JTWtYivZ9OEMKoYecU8csWK1
	wCh8a9WYloSdmWsW0UDleKQ8JoIV3YXWi4LzjoZjOptOs/k0Gl45YePsYqAF18FAIqlU
	ehyg==
MIME-Version: 1.0
Received: by 10.182.38.69 with SMTP id e5mr5993245obk.79.1350144119606; Sat,
	13 Oct 2012 09:01:59 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Sat, 13 Oct 2012 09:01:59 -0700 (PDT)
In-Reply-To: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
Date: Sat, 13 Oct 2012 21:31:59 +0530
X-Google-Sender-Auth: Gc-FjAskd6IA--pb4t3BRvBQYVU
Message-ID: <CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 13 Oct 2012 16:02:05 -0000

Greetings,

On Sat, Oct 13, 2012 at 4:10 PM, Andrew Holway <a.holway@syseleven.de> wrote:
> Hello,
>
> We have been experimenting with various storage technologies in order to create moderately highly available database services.
>
> Can I have some guidance on possible setups for HA database services? I have tested and have a good understanding of all the technology components but I am a bit confused how I should be glueing them together. I need a focus :)
>
> Thanks,

Do you mean active/active Oracle RAC type?

-- 
Regards,

Rajagopal

From heiko.nardmann@itechnical.de Sun Oct 14 10:06:11 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EE6BOG021251 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 10:06:11 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EE66T0009840
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:06:06 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de
	[212.227.126.186])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EE64AE001417
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:06:05 -0400
Received: from laptop.itechnical.de (p5B16242A.dip0.t-ipconnect.de
	[91.22.36.42])
	by mrelayeu.kundenserver.de (node=mrbap4) with ESMTP (Nemesis)
	id 0MVd4p-1SrDEa0u6h-00YQ6u; Sun, 14 Oct 2012 16:06:03 +0200
Message-ID: <507AC6CA.8080602@itechnical.de>
Date: Sun, 14 Oct 2012 16:06:02 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
In-Reply-To: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:NCqDYrhJE3Zhd2kSfB7lWj/yYyWM4i1UiDecPi990N8
	86O47MQVHbS03DxPNZC2bIyLeOsbPck/7y2s/QIZ0FNLTbSn1M
	gYuQ4MnCidCAaHmYb70otAJcXrCrE+CyFw9UKJo/QqPggUhmUJ
	boUYYyYIbU3zHxThKTlR7Ac4FISrjMtod/5shF+6ecgpZ+Tp6R
	4LIPu13DdduQOfb5L3qn+6ulA3m6FNLl0BHMnkmVLxesTrIzjd
	zsYsHuGvFcEjlchkUMIZlMFD7COXIkJPwkM04NY7lFTUDUHyYq
	LQtlqCTNoTCXLLQRL3x7SSuU63B13zRrCOyfbTzMNBKORd8h1Z
	H1l2/eTXqK4fC8tjqLupxBfOHUqbEXc0XuIw6wrSV
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 14:06:11 -0000

Hi,

RedHat provides support for setting up such scenarios. I recommend
buying RHEL and contacting them.


Kind regards,

    Heiko

Am 13.10.2012 12:40, schrieb Andrew Holway:
> Hello, 
>
> We have been experimenting with various storage technologies in order to create moderately highly available database services.
>
> I have the following equipment in my lab:
>
> 4x HP G8 servers with 
> * Mellanox QDR InfiniBand 
> * 10GE adapters
> * Lots of memory and the latest, most powerful CPUS.
> * Centos 6.0
>
> Oracle ZFS appliance
> * Infiniband 
> * NFS (over ethernet and infiniband)
> * iSCSI (over ethernet and infiniband)
> * Various RDMA protocols that are not supported by oracle  on redhat.
>
> Nimble Storage device
> * iSCSI over 10G ethernet
>
> Brocade 10G switches.
>
> Can I have some guidance on possible setups for HA database services? I have tested and have a good understanding of all the technology components but I am a bit confused how I should be glueing them together. I need a focus :)
>
> Thanks,
>
> Andrew
>
>

From raju.rajsand@gmail.com Sun Oct 14 10:38:25 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EEcPuG025167 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 10:38:25 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9EEcKq0030073
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:38:20 -0400
Received: from mail-oa0-f46.google.com (mail-oa0-f46.google.com
	[209.85.219.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EEcJST009210
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:38:19 -0400
Received: by mail-oa0-f46.google.com with SMTP id h16so5008733oag.33
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 07:38:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=4bVGjHmIxV6v0BYvU8B28LVU5NuuQGhxIl8Tx2XEItk=;
	b=L6AuqmQ+IprNKnaajiX6FW1m7C2EOYQJVD5zt4rqVjl8Tkz/NXUYO3DyMb0+YhpDXO
	Vb/blQCyoiPuLcNgpachiLDp+9c9JBiFeJeQhr9MpPlosQxG0rXRneNlEUH+B823yMe7
	0bFb4vnOc+WkLvOeJMBKr12femFjpy8Gw7Vp+M7EhlQOf+R7nkfHDock6XhuyHRNejN9
	M8Vs0JlpDE9gpAADkepgJA3NiDTZiw1ZKvtkRB1td5K2Jp7pfWpq+CICOWhXBjAukhPK
	PAHzGZ98YT7q6ciT/HA8zQnc1+zRRZIGOHSNVZ/epduGsjY84wUEj8bH7r/xznPlJXyq
	rTYg==
MIME-Version: 1.0
Received: by 10.182.54.103 with SMTP id i7mr7452157obp.62.1350225499055; Sun,
	14 Oct 2012 07:38:19 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Sun, 14 Oct 2012 07:38:18 -0700 (PDT)
In-Reply-To: <507AC6CA.8080602@itechnical.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<507AC6CA.8080602@itechnical.de>
Date: Sun, 14 Oct 2012 20:08:18 +0530
X-Google-Sender-Auth: Cy9nSvBXK5jIPBKGZClgbZRisMU
Message-ID: <CA+Ydgaqu94yzEbBoNvxQMNeuiAZyFSC4oi75jyRC29_4ex+MqA@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 14:38:25 -0000

Greetings,


On Sun, Oct 14, 2012 at 7:36 PM, Heiko Nardmann
<heiko.nardmann@itechnical.de> wrote:
>
> RedHat provides support for setting up such scenarios. I recommend
> buying RHEL and contacting them.

++1

Please note that active/active file sharing is *very* different from
active/active DB server.

AFAIK, only Oracle RAC and IBM DB2 have Active/Active HA DB options:
no escape from spending money .... :)

-- 
Regards,

Rajagopal

From a.holway@syseleven.de Sun Oct 14 13:39:09 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHd8Sc016084 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 13:39:09 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHd3jL000563
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:39:03 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EHd0CJ003124
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:39:01 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for linux-cluster@redhat.com; Sun, 14 Oct 2012 19:38:58 +0200
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1278)
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
Date: Sun, 14 Oct 2012 19:38:57 +0200
Content-Transfer-Encoding: 7bit
Message-Id: <75F0F61B-117E-4EFE-B265-C61DB52C75D0@syseleven.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
To: linux clustering <linux-cluster@redhat.com>
X-RedHat-Spam-Score: -2.988  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
	databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 17:39:09 -0000

> 
> Do you mean active/active Oracle RAC type?

No, Perhaps active / passive mysql type.



> 
> -- 
> Regards,
> 
> Rajagopal
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster


From a.holway@syseleven.de Sun Oct 14 13:57:47 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHvkl3018157 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 13:57:47 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHvf0n025673
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:57:41 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EHvcAP018326
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:57:39 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for linux-cluster@redhat.com; Sun, 14 Oct 2012 19:57:36 +0200
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1278)
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
Date: Sun, 14 Oct 2012 19:57:24 +0200
Message-Id: <8114940B-2405-4A7B-A189-71B50666B67E@syseleven.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
To: linux clustering <linux-cluster@redhat.com>
X-RedHat-Spam-Score: -2.988  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9EHvkl3018157
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
	databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 17:57:47 -0000

> 
> Do you mean active/active Oracle RAC type?

We are using a lot Mysql in house. Perhaps high availability is the wrong phrase.

More Available perhaps?

> 
> -- 
> Regards,
> 
> Rajagopal
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster



From christian.masopust@siemens.com Sun Oct 14 15:37:00 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EJaxma028699 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 15:36:59 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9EJasY2001881
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 15:36:54 -0400
Received: from david.siemens.de (david.siemens.de [192.35.17.14])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EJapoi020682
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 15:36:52 -0400
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.13.6/8.13.6) with ESMTP id q9EJaoFF003677
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 21:36:51 +0200
Received: from ATVIES9916TMSX.ww300.siemens.net
	(atvies9916tmsx.ww300.siemens.net [158.226.134.166])
	by mail1.siemens.de (8.13.6/8.13.6) with ESMTP id q9EJaomn032293
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 21:36:50 +0200
Received: from ATVIES9917VMSX.ww300.siemens.net ([169.254.1.101]) by
	ATVIES9916TMSX.ww300.siemens.net ([158.226.134.166]) with mapi;
	Sun, 14 Oct 2012 21:36:50 +0200
From: "Masopust, Christian" <christian.masopust@siemens.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Sun, 14 Oct 2012 21:36:48 +0200
Thread-Topic: [Linux-cluster] Linux clustering for high availability
	databases and other services
Thread-Index: Ac2qFnsmmtB0mWFATw2+bG5NmSqE4QALJR9Q
Message-ID: <C3B6F57F6F0CE34093FF52B3FFBEFA7C0144E493B5D6@ATVIES9917VMSX.ww300.siemens.net>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<507AC6CA.8080602@itechnical.de>
In-Reply-To: <507AC6CA.8080602@itechnical.de>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9EJaxma028699
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 19:37:00 -0000


Hi Andrew,

maybe I understand you completely wrong, but...

Do you know "Galera Cluster" ?  If you are on MySQL maybe
you can give it a try?

br,
christian

> Am 13.10.2012 12:40, schrieb Andrew Holway:
> > Hello, 
> >
> > We have been experimenting with various storage 
> technologies in order to create moderately highly available 
> database services.
> >
> > I have the following equipment in my lab:
> >
> > 4x HP G8 servers with 
> > * Mellanox QDR InfiniBand 
> > * 10GE adapters
> > * Lots of memory and the latest, most powerful CPUS.
> > * Centos 6.0
> >
> > Oracle ZFS appliance
> > * Infiniband 
> > * NFS (over ethernet and infiniband)
> > * iSCSI (over ethernet and infiniband)
> > * Various RDMA protocols that are not supported by oracle  
> on redhat.
> >
> > Nimble Storage device
> > * iSCSI over 10G ethernet
> >
> > Brocade 10G switches.
> >
> > Can I have some guidance on possible setups for HA database 
> services? I have tested and have a good understanding of all 
> the technology components but I am a bit confused how I 
> should be glueing them together. I need a focus :)
> >
> > Thanks,
> >
> > Andrew
> >
> >
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
> 

From bmr@redhat.com Mon Oct 15 07:08:21 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FB8LSt018992 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 15 Oct 2012 07:08:21 -0400
Received: from bmr.usersys.redhat.com (dhcp-1-199.fab.redhat.com [10.33.1.199])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FB8DWD018669
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Mon, 15 Oct 2012 07:08:15 -0400
Message-ID: <507BEE9D.10304@redhat.com>
Date: Mon, 15 Oct 2012 12:08:13 +0100
From: "Bryn M. Reeves" <bmr@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:13.0) Gecko/20120605 Thunderbird/13.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <423ded17.00000e6c.00000023@sierra-A66>
In-Reply-To: <423ded17.00000e6c.00000023@sierra-A66>
X-Enigmail-Version: 1.4.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 15 Oct 2012 11:08:22 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/12/2012 08:47 PM, Shanti Pahari wrote:
> When I added FC external disk in RHEL 6.1 it didn't load in
> /dev/mapper .
> 
> After reboot also it didn't detect.

Check for SCSI devices being registered (/proc/scsi/scsi, lsscsi and
dmesg).

Also read: http://tinyurl.com/93rnlbn [access.redhat.com, RHEL Storage
Administration Guide).

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlB77p0ACgkQ6YSQoMYUY94sBwCdFpKSB5gdgdR27CcoE/RTTPkO
xXsAoIPFK1KA2CpHgsYHaubW5s1ocIWg
=XaKW
-----END PGP SIGNATURE-----

From epretorious@yahoo.com Mon Oct 15 16:41:06 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FKf6Ub030070 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 15 Oct 2012 16:41:06 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9FKf1Dd012361
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 16:41:01 -0400
Received: from nm24-vm3.bullet.mail.ne1.yahoo.com
	(nm24-vm3.bullet.mail.ne1.yahoo.com [98.138.91.154])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9FKf0Pm024030
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 16:41:00 -0400
Received: from [98.138.90.51] by nm24.bullet.mail.ne1.yahoo.com with NNFMP;
	15 Oct 2012 20:41:00 -0000
Received: from [98.138.89.166] by tm4.bullet.mail.ne1.yahoo.com with NNFMP;
	15 Oct 2012 20:41:00 -0000
Received: from [127.0.0.1] by omp1022.mail.ne1.yahoo.com with NNFMP;
	15 Oct 2012 20:41:00 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 300090.35892.bm@omp1022.mail.ne1.yahoo.com
Received: (qmail 35629 invoked by uid 60001); 15 Oct 2012 20:41:00 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1350333660; bh=hTwMfHFENWTJkmqUf4bpS0Ritw1pvyfJkAbRr1AaSGc=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
	b=t4Tcqo+DiIUvn9R0sqvdG2qI4Ei5Vz/ss7u/rGQ+LyQdcmNXToGcLvcroNqoiQuoyFEYF0yo8TjFYQddbieQd0gol5vyG2fLourGDP9RNrcm2f6a8sJg1cqs8lnTjqZv3Go+rdknlDgQFjgSZtF9OlUn7It8cD5NvSm3lpJb4aM=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
	b=ZMuNS94OT681vzBna8eZNbt1PSOUGPjHMl8yehegupyDNgLxp0s4hFaoy2ZJHPLnaIvtOptmTwj13vbyq6WVzy9f+QIqSG1sDJRZDVVSIXANPt9DPef5iY6w000JSDBybWIvoAoHhJfHGbOGSkUk873QHBKk/+RmzFkqclVck78=;
X-YMail-OSG: Cx4ETNsVM1nml.AazX1rIX4g.W.SconUSBJTllpqa6ZmETi
	h18p59iRt7kf1q0fd_ikCwu05ZGKfsx2pSFZGJOb80.a__nCnDCDD4dGqQsQ
	uqpDJMC3L0.45JiXwg8.M1Iq4z5j8fw1IAsvoUjfImMy0Nne8WxSp6.cfTfI
	EqDz0OIdWUeKu2Xum30XWod7oW__QobZ8n.X43zWJoUTribMLwNHHsyb1ZUN
	4AA3Qeh6tS90Gm648yGB7PmmtpeANtitDfJO.c03SwVcw2y8K5CjKH60vdev
	dxEy6hrD6nhVNhLDoPlt1I0C6xzOeSD4cHZm3U4WhbUY5cpiw0sHO9rZXru8
	WBQOS1a2Bh42jXY8PbCCvm.ddtD.GyFaJNuYXfvJdE9D7Y902F_08Gd_EMQc
	lestOuOXek.0HihJ7VaxC_RxoT52p2nJGA0ZSo2PbrBMimgMYAr3hFL9vyiC
	zaRob2UXsiWsz5SoE387n6QKT7B497U6PfK1qchaaAqqoMFTcL1ut
Received: from [74.197.253.230] by web121705.mail.ne1.yahoo.com via HTTP;
	Mon, 15 Oct 2012 13:41:00 PDT
X-Rocket-MIMEInfo: 001.001,
	SSd2ZSBiZWVuIHJlYWRpbmcgYWJvdXQgY0xWTSBhbmQgSSdtIGhhdmluZyBhIGRpZmZpY3VsdCB0aW1lIGdldHRpbmcgbXkgbWluZCB3cmFwcGVkIGFyb3VuZCBUaGUgQmlnIFBpY3R1cmUuCgpMb29raW5nIGF0IEZpZ3VyZcKgMS4yLCDigJxDTFZNIE92ZXJ2aWV3LCBvZsKgIHRoZSBSZWQgSGF0IExWTSBBZG1pbmlzdHJhdG9yIEd1aWRlIEknbSBhIGJpdCBwdXp6bGVkLiBTcGVjaWZpY2FsbHk6IEFyZSBzdG9yYWdlIGRldmljZXMgZXhwb3J0ZWQgZGlyZWN0bHkgdG8gY0xWTSBkYWVtb25zPyBPciBhcmUgTFYBMAEBAQE-
Message-ID: <1350333660.23559.YahooMailNeo@web121705.mail.ne1.yahoo.com>
Date: Mon, 15 Oct 2012 13:41:00 -0700 (PDT)
From: Eric <epretorious@yahoo.com>
To: linux clustering <linux-cluster@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-RedHat-Spam-Score: -2.38  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_NONE, RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9FKf6Ub030070
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Getting started with cLVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Eric <epretorious@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 15 Oct 2012 20:41:06 -0000

I've been reading about cLVM and I'm having a difficult time getting my mind wrapped around The Big Picture.

Looking at Figure1.2, CLVM Overview, of the Red Hat LVM Administrator Guide I'm a bit puzzled. Specifically: Are storage devices exported directly to cLVM daemons? Or are LV's exported directly to cLVM daemonds for consumption? Or will another shared-disk protocol (e.g., GNBD or iSCSI) be required for "the last mile"?

Eric Pretorious
Truckee, CA


From lists@alteeve.ca Mon Oct 15 17:37:19 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FLbJBM003383 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 15 Oct 2012 17:37:19 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9FLbElo031220
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 17:37:14 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9FLbC7n013612
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 17:37:12 -0400
Received: from lemass.alteeve.ca (lns1-pool-d8428dc1.dsl.look.ca
	[216.66.141.193])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 4F9AB42249F;
	Mon, 15 Oct 2012 17:37:09 -0400 (EDT)
Message-ID: <507C8206.6090908@alteeve.ca>
Date: Mon, 15 Oct 2012 17:37:10 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: Eric <epretorious@yahoo.com>, linux clustering <linux-cluster@redhat.com>
References: <1350333660.23559.YahooMailNeo@web121705.mail.ne1.yahoo.com>
In-Reply-To: <1350333660.23559.YahooMailNeo@web121705.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Getting started with cLVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 15 Oct 2012 21:37:20 -0000

On 10/15/2012 04:41 PM, Eric wrote:
> I've been reading about cLVM and I'm having a difficult time getting my mind wrapped around The Big Picture.
>
> Looking at Figure 1.2, CLVM Overview, of  the Red Hat LVM Administrator Guide I'm a bit puzzled. Specifically: Are storage devices exported directly to cLVM daemons? Or are LV's exported directly to cLVM daemonds for consumption? Or will another shared-disk protocol (e.g., GNBD or iSCSI) be required for "the last mile"?
>
> Eric Pretorious
> Truckee, CA

Clustered LVM, fundamentally, swaps out the normal internal locking to 
DLM (distributed lock manager), which is provided by cman under EL6 and 
corosync (v2+). Beyond this, you can think of LVM as you always have.

So, commonly, the PV(s) would be some form of shared storage; DRBD and 
SANs are the most common I think. When you pvcreate /dev/foo (foo being 
your shared storage), you can immediately 'pvscan' on the other nodes 
and see the new PV. Likewise, once you assign the PV to a VG on one 
node, 'vgscan' on all the other nodes will immediately see the 
new/expanded VG. Likewise with LV creation/resize/removes.

Beyond this, there is nothing further special about clustered LVM over 
"normal" LVM.

hth

digimer

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From cfeist@redhat.com Tue Oct 16 20:02:48 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9H02ls6029201 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 16 Oct 2012 20:02:47 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9H02fOO022775; Tue, 16 Oct 2012 20:02:42 -0400
Message-ID: <507DF5A1.3060905@redhat.com>
Date: Tue, 16 Oct 2012 19:02:41 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 00:02:48 -0000

On 10/08/12 19:27, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync configuration
> system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync 2.0 udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch" document
> that illustrates setting up a cluster using pcs.  This should be showing up
> shortly.

Just an update, I've updated the pcs (to 0.9.27) and included the pcsd daemon 
with the fedora packages.  You can grab the updated packages here:

http://people.redhat.com/cfeist/pcs/

And you should be able to used the new Clusters from Scratch optimized for the 
pcs CLI here: http://www.clusterlabs.org/doc/

Just a couple things to note (this should be shortly updated in the notes).

To run pcs on Fedora 17/18 you'll need to turn off selinux & disable the 
firewall (or at least allow traffic on port 2224).

To disable SELinux set 'SELINUX=permissive' in /etc/selinux/config and reboot
To disable the firewall run 'systemctl stop iptables.service' (to permanently 
disable run 'systemctl disable iptables.service')

The pcs_passwd command has been removed.  In it's place you can do 
authentication with the hacluster user.  Just set the hacluster user password 
(passwd hacluster) and then use that user and password to authenticate with pcs.

If you have any questions or any issues don't hesitate to contact me, we're 
still working out the bugs in the new pcsd daemon and we appreciate all the 
feedback we can get.

Thanks,
Chris

>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next release.
> You should be able to find that package in the following locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE & Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of your
> entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the pcs
> project at github (https://github.com/feist/pcs/issues) if you have any
> questions or problems.
>
> Thanks!
> Chris
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org

From andrew@beekhof.net Tue Oct 16 22:09:26 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9H29Q7x009623 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 16 Oct 2012 22:09:26 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9H29Kwm013983
	for <linux-cluster@redhat.com>; Tue, 16 Oct 2012 22:09:20 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9H29JjY023335
	for <linux-cluster@redhat.com>; Tue, 16 Oct 2012 22:09:19 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so8152017obb.33
	for <linux-cluster@redhat.com>; Tue, 16 Oct 2012 19:09:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type:x-gm-message-state;
	bh=9dbmW89KvUYKzmMUhEN/sKDwaRMxQ7lvDKO4J2jxHnM=;
	b=G+MjAgAqHwtUVX4NwP9x/+H5OGcWZK1pAVC5mnc7kYw98zJPegYy81ZJcw4oZW/5UM
	bsWszL/6dzA5nyjP4mqO2r2Z6TGj1MGASrc1Z0XC+vTAhuzJWYf16Hw5JrcMsj28l6GY
	NDbJZjklewX66UkNpYjzRHwMfFZQ/R1yPkHoXLKou6xKMEFz42CyQjFEr/we32OqLIuE
	ALhoOuI8Hz6Uj6Tb75epXtrSqYVm875TGw+tnakomraqrkx4YzkmimckcXMgxLuZi/ce
	j4TC6kXau8BLJ/FoBD5dBwpdWaAUdjRGt7FT8VhNdTBYRteVohwQOPzjWiAXLRgBSRGZ
	c9wA==
MIME-Version: 1.0
Received: by 10.60.8.71 with SMTP id p7mr14436288oea.56.1350439758951; Tue, 16
	Oct 2012 19:09:18 -0700 (PDT)
Received: by 10.76.173.70 with HTTP; Tue, 16 Oct 2012 19:09:18 -0700 (PDT)
In-Reply-To: <507DF5A1.3060905@redhat.com>
References: <50736F78.3060906@redhat.com>
	<507DF5A1.3060905@redhat.com>
Date: Wed, 17 Oct 2012 13:09:18 +1100
Message-ID: <CAEDLWG23eoSyspSa1=PakrKvVxFrr9ShXibBPE480fJAGmQMZQ@mail.gmail.com>
From: Andrew Beekhof <andrew@beekhof.net>
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmvVWxCp38JTHAGTi5SECPmsmnsIaQ6h8U/Yy5+PBQ42RomEDbAECbzpPZRf9AwCcEXpKoY
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 02:09:26 -0000

On Wed, Oct 17, 2012 at 11:02 AM, Chris Feist <cfeist@redhat.com> wrote:
> On 10/08/12 19:27, Chris Feist wrote:
>>
>> We've been making improvements to the pcs (pacemaker/corosync
>> configuration
>> system) command line tool over the past few months.
>>
>> Currently you can setup a basic cluster (including configuring corosync
>> 2.0 udpu).
>>
>> David Vossel has also created a version of the "Clusters from Scratch"
>> document
>> that illustrates setting up a cluster using pcs.  This should be showing
>> up
>> shortly.
>
>
> Just an update, I've updated the pcs (to 0.9.27) and included the pcsd
> daemon with the fedora packages.  You can grab the updated packages here:
>
> http://people.redhat.com/cfeist/pcs/
>
> And you should be able to used the new Clusters from Scratch optimized for
> the pcs CLI here: http://www.clusterlabs.org/doc/

Those docs have now been updated to match the new release.

>
> Just a couple things to note (this should be shortly updated in the notes).
>
> To run pcs on Fedora 17/18 you'll need to turn off selinux & disable the
> firewall (or at least allow traffic on port 2224).
>
> To disable SELinux set 'SELINUX=permissive' in /etc/selinux/config and
> reboot
> To disable the firewall run 'systemctl stop iptables.service' (to
> permanently disable run 'systemctl disable iptables.service')
>
> The pcs_passwd command has been removed.  In it's place you can do
> authentication with the hacluster user.  Just set the hacluster user
> password (passwd hacluster) and then use that user and password to
> authenticate with pcs.
>
> If you have any questions or any issues don't hesitate to contact me, we're
> still working out the bugs in the new pcsd daemon and we appreciate all the
> feedback we can get.
>
> Thanks,
> Chris
>
>
>>
>> You can view the source here: https://github.com/feist/pcs/
>>
>> Or download the latest tarball:
>> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>>
>> There is also a Fedora 18 package that will be included with the next
>> release.
>> You should be able to find that package in the following locations...
>>
>> RPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>
>> SRPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>>
>> In the near future we are planning on having builds for SUSE &
>> Ubuntu/Debian.
>>
>> We're also actively working on a GUI/Daemon that will allow control of
>> your
>> entire cluster from one node and/or a web browser.
>>
>> Please feel free to email me (cfeist@redhat.com) or open issues on the pcs
>> project at github (https://github.com/feist/pcs/issues) if you have any
>> questions or problems.
>>
>> Thanks!
>> Chris
>>
>> _______________________________________________
>> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
>> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>>
>> Project Home: http://www.clusterlabs.org
>> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
>> Bugs: http://bugs.clusterlabs.org
>
>
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org

From terance@socialtwist.com Wed Oct 17 09:12:28 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HDCSXX032295 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 09:12:28 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HDCNGj007455
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:12:23 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HDCMF0021230
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:12:22 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so7258026pbb.33
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 06:12:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=2iz8qv92aEOdl+ign+dGfOP/glj2/HsWBkGHVpT8UnI=;
	b=D2RQcYaHNMA6AjmS0x4aGgpwU6161YiY/6WclkFly7CbExjBlhfWt0UdlgiZ52AH5r
	hdtzs05/+fkRWoiO4bYgEDqi+HJgK08afh5NNd8cAdOxXNq2UiC6FtOwPqbm09qvLz15
	3zJvK73F8HE6Ls24RLBEAZ2GjhQvXhK5LRaTFWaLYv8jAOuQuSRTWHVyp586qwe1qVzF
	W3XsTpv0Hh2mcu7FzmI3B7UgxMpRjnjjzJ5OrF4sOq8dhe0jEE2czVLR1ZC1/65zTb5w
	RBOEW8GLneBWxu+j5YZgTOGI+CguflP/Hf3J0CrMG/g9Kc3SWEaKNaUgatrCGVE1RKKC
	JIRQ==
MIME-Version: 1.0
Received: by 10.68.125.230 with SMTP id mt6mr17121080pbb.110.1350479541737;
	Wed, 17 Oct 2012 06:12:21 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Wed, 17 Oct 2012 06:12:21 -0700 (PDT)
In-Reply-To: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
Date: Wed, 17 Oct 2012 18:42:21 +0530
Message-ID: <CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=047d7b2e44465c990304cc4105a3
X-Gm-Message-State: ALoCoQnjCcRB6AMCwXH82D835+Gm9uP/2LoY7lKYMFLQXMRKzdkOetyDcy1E7fucp140M6SnlAQP
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 13:12:28 -0000

--047d7b2e44465c990304cc4105a3
Content-Type: text/plain; charset=ISO-8859-1

Hi,

We're trying to create a cluster in which the nodes lie in 2 different
LANs. Since the nodes lie in different networks, they cannot resolve the
other node by their internal IP. So in my cluster.conf file, I've provided
their external IPs. But now when I start CMAN service, I get the following
error.

-----------------------------------

Starting cluster:
   Checking Network Manager... [  OK  ]
   Global setup... [  OK  ]
   Loading kernel modules... [  OK  ]
   Mounting configfs... [  OK  ]
   Starting cman... Cannot find node name in cluster.conf
Unable to get the configuration
Cannot find node name in cluster.conf
cman_tool: corosync daemon didn't start
[FAILED]

-------------------------------------

My cluster.conf file is as below

-------------------------------------

<?xml version="1.0"?>
<!--
This is an example of a cluster.conf file to run qpidd HA under rgmanager.

NOTE: fencing is not shown, you must configure fencing appropriately for
your cluster.
-->

<cluster name="test-cluster" config_version="18">
  <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
       for quorum. -->
  <clusternodes>
    <clusternode name="*external-ip-1*" nodeid="1"/>
    <clusternode name="*external-ip-2*" nodeid="2"/>
  </clusternodes>
  <cman two_node="1" expected_votes="1" transport="udpu">
  </cman>
  <!-- Resouce Manager configuration. -->
  <rm>
    <!--
        There is a failoverdomain for each node containing just that node.
        This lets us stipulate that the qpidd service should always run on
each node.
    -->
    <failoverdomains>
      <failoverdomain name="east-domain" restricted="1">
        <failoverdomainnode name="*external-ip-1*"/>
      </failoverdomain>
      <failoverdomain name="west-domain" restricted="1">
        <failoverdomainnode name="*external-ip-2*"/>
      </failoverdomain>
    </failoverdomains>

    <resources>
      <!-- This script starts a qpidd broker acting as a backup. -->
      <script file="/usr/local/etc/init.d/qpidd" name="qpidd"/>

      <!-- This script promotes the qpidd broker on this node to primary.
-->
      <script file="/usr/local/etc/init.d/qpidd-primary"
name="qpidd-primary"/>
    </resources>

    <!-- There is a qpidd service on each node, it should be restarted if
it fails. -->
    <service name="east-qpidd-service" domain="east-domain"
recovery="restart">
      <script ref="qpidd"/>
    </service>
    <service name="west-qpidd-service" domain="west-domain"
recovery="restart">
      <script ref="qpidd"/>
    </service>

    <!-- There should always be a single qpidd-primary service, it can run
on any node. -->
    <service name="qpidd-primary-service" autostart="1" exclusive="0"
recovery="relocate">
      <script ref="qpidd-primary"/>
    </service>
  </rm>
</cluster>
------------------------------------------------

Thanks,
Terance

--047d7b2e44465c990304cc4105a3
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><div class=3D"gmail_quote"><div><br></div><div>We&#39;re trying to c=
reate a cluster in which the nodes lie in 2 different LANs. Since the nodes=
 lie in different networks, they cannot resolve the other node by their int=
ernal IP. So in my cluster.conf file, I&#39;ve provided their external IPs.=
 But now when I start CMAN service, I get the following error.</div>

<div><br></div><div>-----------------------------------</div><div><br></div=
><div><div>Starting cluster:</div><div>=A0 =A0Checking Network Manager... [=
 =A0OK =A0]</div><div>=A0 =A0Global setup... [ =A0OK =A0]</div><div>=A0 =A0=
Loading kernel modules... [ =A0OK =A0]</div>

<div>=A0 =A0Mounting configfs... [ =A0OK =A0]</div><div>=A0 =A0Starting cma=
n... Cannot find node name in cluster.conf</div><div>Unable to get the conf=
iguration</div><div>Cannot find node name in cluster.conf</div><div>cman_to=
ol: corosync daemon didn&#39;t start</div>

<div>[FAILED]</div></div><div><br></div><div>------------------------------=
-------</div><div><br></div><div>My cluster.conf file is as below</div><div=
><br></div><div>-------------------------------------</div><div><br></div>

<div><div>&lt;?xml version=3D&quot;1.0&quot;?&gt;</div><div>&lt;!--</div><d=
iv>This is an example of a cluster.conf file to run qpidd HA under rgmanage=
r.</div><div><br></div><div>NOTE: fencing is not shown, you must configure =
fencing appropriately for your cluster.</div>

<div>--&gt;</div><div><br></div><div>&lt;cluster name=3D&quot;test-cluster&=
quot; config_version=3D&quot;18&quot;&gt;</div><div>=A0 &lt;!-- The cluster=
 has 2 nodes. Each has a unique nodid and one vote</div><div>=A0 =A0 =A0 =
=A0for quorum. --&gt;</div>

<div>=A0 &lt;clusternodes&gt;</div><div>=A0 =A0 &lt;clusternode name=3D&quo=
t;<i>external-ip-1</i>&quot; nodeid=3D&quot;1&quot;/&gt;</div><div>=A0 =A0 =
&lt;clusternode name=3D&quot;<i>external-ip-2</i>&quot; nodeid=3D&quot;2&qu=
ot;/&gt;</div>

<div>=A0 &lt;/clusternodes&gt;</div><div>=A0 &lt;cman two_node=3D&quot;1&qu=
ot; expected_votes=3D&quot;1&quot; transport=3D&quot;udpu&quot;&gt;</div><d=
iv>=A0 &lt;/cman&gt;</div><div>=A0 &lt;!-- Resouce Manager configuration. -=
-&gt;</div>

<div>=A0 &lt;rm&gt;</div><div>=A0 =A0 &lt;!--</div><div>=A0 =A0 =A0 =A0 The=
re is a failoverdomain for each node containing just that node.</div><div>=
=A0 =A0 =A0 =A0 This lets us stipulate that the qpidd service should always=
 run on each node.</div>

<div>=A0 =A0 --&gt;</div><div>=A0 =A0 &lt;failoverdomains&gt;</div><div>=A0=
 =A0 =A0 &lt;failoverdomain name=3D&quot;east-domain&quot; restricted=3D&qu=
ot;1&quot;&gt;</div><div>=A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quo=
t;<i>external-ip-1</i>&quot;/&gt;</div>

<div>=A0 =A0 =A0 &lt;/failoverdomain&gt;</div><div>=A0 =A0 =A0 &lt;failover=
domain name=3D&quot;west-domain&quot; restricted=3D&quot;1&quot;&gt;</div><=
div>=A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quot;<i>external-ip-2</i=
>&quot;/&gt;</div><div>

=A0 =A0 =A0 &lt;/failoverdomain&gt;</div><div>=A0 =A0 &lt;/failoverdomains&=
gt;</div><div><br></div><div>=A0 =A0 &lt;resources&gt;</div><div>=A0 =A0 =
=A0 &lt;!-- This script starts a qpidd broker acting as a backup. --&gt;</d=
iv><div>=A0 =A0 =A0 &lt;script file=3D&quot;/usr/local/etc/init.d/qpidd&quo=
t; name=3D&quot;qpidd&quot;/&gt;</div>

<div><br></div><div>=A0 =A0 =A0 &lt;!-- This script promotes the qpidd brok=
er on this node to primary. --&gt;</div><div>=A0 =A0 =A0 &lt;script file=3D=
&quot;/usr/local/etc/init.d/qpidd-primary&quot; name=3D&quot;qpidd-primary&=
quot;/&gt;</div>

<div>=A0 =A0 &lt;/resources&gt;</div><div><br></div><div>=A0 =A0 &lt;!-- Th=
ere is a qpidd service on each node, it should be restarted if it fails. --=
&gt;</div><div>=A0 =A0 &lt;service name=3D&quot;east-qpidd-service&quot; do=
main=3D&quot;east-domain&quot; recovery=3D&quot;restart&quot;&gt;</div>

<div>=A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;</div><div>=A0 =A0 =
&lt;/service&gt;</div><div>=A0 =A0 &lt;service name=3D&quot;west-qpidd-serv=
ice&quot; domain=3D&quot;west-domain&quot; recovery=3D&quot;restart&quot;&g=
t;</div><div>=A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;</div>

<div>=A0 =A0 &lt;/service&gt;</div><div><br></div><div>=A0 =A0 &lt;!-- Ther=
e should always be a single qpidd-primary service, it can run on any node. =
--&gt;</div><div>=A0 =A0 &lt;service name=3D&quot;qpidd-primary-service&quo=
t; autostart=3D&quot;1&quot; exclusive=3D&quot;0&quot; recovery=3D&quot;rel=
ocate&quot;&gt;</div>

<div>=A0 =A0 =A0 &lt;script ref=3D&quot;qpidd-primary&quot;/&gt;</div><div>=
=A0 =A0 &lt;/service&gt;</div><div>=A0 &lt;/rm&gt;</div><div>&lt;/cluster&g=
t;</div></div><div>------------------------------------------------</div><d=
iv><br></div>

<div>Thanks,</div><div>Terance</div>
</div><br>

--047d7b2e44465c990304cc4105a3--

From lists@alteeve.ca Wed Oct 17 09:42:16 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HDgFHX003959 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 09:42:16 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HDgA6w000490
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:42:10 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HDg5q1030587
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:42:08 -0400
Received: from lemass.alteeve.ca (74-115-197-226.eng.wind.ca [74.115.197.226])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 24A1B422488;
	Wed, 17 Oct 2012 09:41:59 -0400 (EDT)
Message-ID: <507EB5A4.4020502@alteeve.ca>
Date: Wed, 17 Oct 2012 09:41:56 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
In-Reply-To: <CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 13:42:16 -0000

On 10/17/2012 09:12 AM, Terance Dias wrote:
> Hi,
> 
> We're trying to create a cluster in which the nodes lie in 2 different
> LANs. Since the nodes lie in different networks, they cannot resolve the
> other node by their internal IP. So in my cluster.conf file, I've provided
> their external IPs. But now when I start CMAN service, I get the following
> error.
> 
> NOTE: fencing is not shown, you must configure fencing appropriately for
> your cluster.

You do need fencing. Without *working* fencing, the first time something
goes wrong, your cluster will hang (by design).

> <cluster name="test-cluster" config_version="18">
>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>        for quorum. -->
>   <clusternodes>
>     <clusternode name="*external-ip-1*" nodeid="1"/>
>     <clusternode name="*external-ip-2*" nodeid="2"/>

You need to use names and these names need to resolve to an IP.
Whichever interface that IP matches will be used for cluster
communications. The ideal is to use `uname -n` from each node, though
this is more convention that a requirement.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?

From heiko.nardmann@itechnical.de Wed Oct 17 10:03:13 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HE3DT0007276 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 10:03:13 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HE37kD029203
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:03:07 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de [212.227.17.10])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HE35F0018851
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:03:06 -0400
Received: from laptop.itechnical.de
	(business-178-015-194-126.static.arcor-ip.net [178.15.194.126])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0MMpWJ-1TGUOE1JFv-008Zpe; Wed, 17 Oct 2012 16:03:05 +0200
Message-ID: <507EBA98.7040106@itechnical.de>
Date: Wed, 17 Oct 2012 16:03:04 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
In-Reply-To: <507EB5A4.4020502@alteeve.ca>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:asMqFemljGjITtdPaDnpM6D7IIymHZgAHuO7jPiIpTe
	3x2SkKk8tZv86UZhRDY55Ou9Pr2qtfWcriIza8SjmYzX7SMUxC
	CVqtAKYYuChmGNPaiP+3gI5jYf2bXe64L/cK2XLKblmRVwhp1t
	wB7loFN85KUczSQGi2T7wUiOPZnP1oXgloRVgFvHAnFKU9mKA5
	Ap6Y4W5I8JS+OulEE/ZTKeQZblPG+bVetUwP+Pd0gKqE0lOU20
	J0ZtcVubS2F+/tghkHlDLu9bm3ylgV0rbY3HQvWfB4xN0OIxfe
	Po6RcZS+fQENPuSYEDV9TP+g2qtFzCHli5djQytykjV4sDKadr
	C90RuKuoulSTRk8azZqTnvwtDZI9rYq7fnL4oJqsb
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 14:03:13 -0000

Sometimes I wonder whether an ML bot grepping for 'fencing' and
responding with something like 'Check fencing' might make sense ... ;-)

    Heiko

Am 17.10.2012 15:41, schrieb Digimer:
> On 10/17/2012 09:12 AM, Terance Dias wrote:
>> Hi,
>>
>> We're trying to create a cluster in which the nodes lie in 2 different
>> LANs. Since the nodes lie in different networks, they cannot resolve the
>> other node by their internal IP. So in my cluster.conf file, I've provided
>> their external IPs. But now when I start CMAN service, I get the following
>> error.
>>
>> NOTE: fencing is not shown, you must configure fencing appropriately for
>> your cluster.
> You do need fencing. Without *working* fencing, the first time something
> goes wrong, your cluster will hang (by design).
>
>> <cluster name="test-cluster" config_version="18">
>>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>>        for quorum. -->
>>   <clusternodes>
>>     <clusternode name="*external-ip-1*" nodeid="1"/>
>>     <clusternode name="*external-ip-2*" nodeid="2"/>
> You need to use names and these names need to resolve to an IP.
> Whichever interface that IP matches will be used for cluster
> communications. The ideal is to use `uname -n` from each node, though
> this is more convention that a requirement.
>

From lists@alteeve.ca Wed Oct 17 10:06:31 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HE6Vbj008068 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 10:06:31 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HE6POe030978
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:06:26 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HE6OWj008782
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:06:24 -0400
Received: from lemass.alteeve.ca (74-115-197-226.eng.wind.ca [74.115.197.226])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id D6B99422461;
	Wed, 17 Oct 2012 10:06:21 -0400 (EDT)
Message-ID: <507EBB5D.4020509@alteeve.ca>
Date: Wed, 17 Oct 2012 10:06:21 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca> <507EBA98.7040106@itechnical.de>
In-Reply-To: <507EBA98.7040106@itechnical.de>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 14:06:31 -0000

But but but, I'd have nothing useful left to add! :(

digimer

On 10/17/2012 10:03 AM, Heiko Nardmann wrote:
> Sometimes I wonder whether an ML bot grepping for 'fencing' and
> responding with something like 'Check fencing' might make sense ... ;-)
> 
>     Heiko
> 
> Am 17.10.2012 15:41, schrieb Digimer:
>> On 10/17/2012 09:12 AM, Terance Dias wrote:
>>> Hi,
>>>
>>> We're trying to create a cluster in which the nodes lie in 2 different
>>> LANs. Since the nodes lie in different networks, they cannot resolve the
>>> other node by their internal IP. So in my cluster.conf file, I've provided
>>> their external IPs. But now when I start CMAN service, I get the following
>>> error.
>>>
>>> NOTE: fencing is not shown, you must configure fencing appropriately for
>>> your cluster.
>> You do need fencing. Without *working* fencing, the first time something
>> goes wrong, your cluster will hang (by design).
>>
>>> <cluster name="test-cluster" config_version="18">
>>>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>>>        for quorum. -->
>>>   <clusternodes>
>>>     <clusternode name="*external-ip-1*" nodeid="1"/>
>>>     <clusternode name="*external-ip-2*" nodeid="2"/>
>> You need to use names and these names need to resolve to an IP.
>> Whichever interface that IP matches will be used for cluster
>> communications. The ideal is to use `uname -n` from each node, though
>> this is more convention that a requirement.
>>
> 


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?

From terance@socialtwist.com Wed Oct 17 14:45:40 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HIjekI010146 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 14:45:40 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HIjZUS030164
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 14:45:35 -0400
Received: from mail-pa0-f46.google.com (mail-pa0-f46.google.com
	[209.85.220.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HIjXvF003363
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 14:45:33 -0400
Received: by mail-pa0-f46.google.com with SMTP id hz1so7550227pad.33
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 11:45:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type:x-gm-message-state;
	bh=EU8uUHw6vwjCxxxpLgsGikyNeoxDCiKBBgAjIqMiPxM=;
	b=acVdLG1mdXpfR3RDw4dFXbF7r048UzU/0c0EO+4EkvHXVNBouTqKrkzEujgz4Tc64g
	Ub5JEsssrq4ANcgtBir53cUiFOz5NiL9dC+LRVWZuZsu0YwbG+LPmoy+TmYaq7v0a/hO
	kCozftcP+x+ML5ukDZmb+l5ts0v/cAvwsAlqasL2BHCJfFBUEzYfroOkX/z1srU69QeR
	U87bH5ABtDMuQDlDV2zviDGmBNV1ZweUfZk0x+zj15b34oiUxH6ZS+6ipBmPbT4KQfsq
	0v3LAaQ2SQ/hPlnTviaXt4RhNwr8W2MViFEDoq5YmyrL7ut60kuVskNOh2Hh4o1ndmJ/
	zPWA==
MIME-Version: 1.0
Received: by 10.68.201.6 with SMTP id jw6mr11877413pbc.149.1350499533355; Wed,
	17 Oct 2012 11:45:33 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Wed, 17 Oct 2012 11:45:33 -0700 (PDT)
In-Reply-To: <507EB5A4.4020502@alteeve.ca>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
Date: Thu, 18 Oct 2012 00:15:33 +0530
Message-ID: <CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=047d7b15a97ff47af704cc45ac21
X-Gm-Message-State: ALoCoQnEthLNNgj84aLZm/IZnjFox8GuVu53d/oAjAUaAcufodbOGtLyqOIujd1pDJSPTOAN/Pj1
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 18:45:41 -0000

--047d7b15a97ff47af704cc45ac21
Content-Type: text/plain; charset=ISO-8859-1

I tried using public IP as well as names like 'ec2-node-1.amazonaws.com'
which is resolved to an IP by DNS lookup. In both cases I get the same
error I mentioned earlier.
If I give the internal IP of the node where I'm trying to run the CMAN
service, the service starts, but I still cannot get it to resolve the other
node since the other node is in a different network.

On Wed, Oct 17, 2012 at 7:11 PM, Digimer <lists@alteeve.ca> wrote:

> On 10/17/2012 09:12 AM, Terance Dias wrote:
> > Hi,
> >
> > We're trying to create a cluster in which the nodes lie in 2 different
> > LANs. Since the nodes lie in different networks, they cannot resolve the
> > other node by their internal IP. So in my cluster.conf file, I've
> provided
> > their external IPs. But now when I start CMAN service, I get the
> following
> > error.
> >
> > NOTE: fencing is not shown, you must configure fencing appropriately for
> > your cluster.
>
> You do need fencing. Without *working* fencing, the first time something
> goes wrong, your cluster will hang (by design).
>
> > <cluster name="test-cluster" config_version="18">
> >   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
> >        for quorum. -->
> >   <clusternodes>
> >     <clusternode name="*external-ip-1*" nodeid="1"/>
> >     <clusternode name="*external-ip-2*" nodeid="2"/>
>
> You need to use names and these names need to resolve to an IP.
> Whichever interface that IP matches will be used for cluster
> communications. The ideal is to use `uname -n` from each node, though
> this is more convention that a requirement.
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
>

--047d7b15a97ff47af704cc45ac21
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I tried using public IP as well as names like &#39;<a href=3D"http://ec2-no=
de-1.amazonaws.com">ec2-node-1.amazonaws.com</a>&#39; which is resolved to =
an IP by DNS lookup. In both cases I get the same error I mentioned earlier=
. <br>
If I give the internal IP of the node where I&#39;m trying to run the CMAN =
service, the service starts, but I still cannot get it to resolve the other=
 node since the other node is in a different network.<br><br><div class=3D"=
gmail_quote">
On Wed, Oct 17, 2012 at 7:11 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"m=
ailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex">
<div class=3D"im">On 10/17/2012 09:12 AM, Terance Dias wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; We&#39;re trying to create a cluster in which the nodes lie in 2 diffe=
rent<br>
&gt; LANs. Since the nodes lie in different networks, they cannot resolve t=
he<br>
&gt; other node by their internal IP. So in my cluster.conf file, I&#39;ve =
provided<br>
&gt; their external IPs. But now when I start CMAN service, I get the follo=
wing<br>
&gt; error.<br>
&gt;<br>
</div><div class=3D"im">&gt; NOTE: fencing is not shown, you must configure=
 fencing appropriately for<br>
&gt; your cluster.<br>
<br>
</div>You do need fencing. Without *working* fencing, the first time someth=
ing<br>
goes wrong, your cluster will hang (by design).<br>
<div class=3D"im"><br>
&gt; &lt;cluster name=3D&quot;test-cluster&quot; config_version=3D&quot;18&=
quot;&gt;<br>
&gt; =A0 &lt;!-- The cluster has 2 nodes. Each has a unique nodid and one v=
ote<br>
&gt; =A0 =A0 =A0 =A0for quorum. --&gt;<br>
&gt; =A0 &lt;clusternodes&gt;<br>
</div>&gt; =A0 =A0 &lt;clusternode name=3D&quot;*external-ip-1*&quot; nodei=
d=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 &lt;clusternode name=3D&quot;*external-ip-2*&quot; nodeid=3D&q=
uot;2&quot;/&gt;<br>
<br>
You need to use names and these names need to resolve to an IP.<br>
Whichever interface that IP matches will be used for cluster<br>
communications. The ideal is to use `uname -n` from each node, though<br>
this is more convention that a requirement.<br>
<span class=3D"HOEnZb"><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></blockquote></div><br>

--047d7b15a97ff47af704cc45ac21--

From cfeist@redhat.com Wed Oct 17 15:22:15 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HJMFce013681 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 15:22:15 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HJM93R010663; Wed, 17 Oct 2012 15:22:09 -0400
Message-ID: <507F0561.3030006@redhat.com>
Date: Wed, 17 Oct 2012 14:22:09 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
References: <50736F78.3060906@redhat.com> <507DF5A1.3060905@redhat.com>
	<A08579D19748D444B15E83044CC3E433025A4E88@MLRSM11.MLR.BWL.NET>
In-Reply-To: <A08579D19748D444B15E83044CC3E433025A4E88@MLRSM11.MLR.BWL.NET>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>,
	=?ISO-8859-1?Q?=22Gr=FCninger=2C_Andreas_=28LGL_Extern=29=22?=
	<Andreas.Grueninger@lgl.bwl.de>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 19:22:16 -0000

On 10/17/12 03:22, Grninger, Andreas (LGL Extern) wrote:
> Please see here:
>
> https://github.com/feist/pcs/issues

I'm definitely planning on supporting the --prefix option (and possibly options 
to specify the location for each binary).  I should have something shortly if 
you would like to test it out.

Thanks,
Chris

>
> Andreas
>
> -----Ursprngliche Nachricht-----
> Von: Chris Feist [mailto:cfeist@redhat.com]
> Gesendet: Mittwoch, 17. Oktober 2012 02:03
> An: The Pacemaker cluster resource manager
> Cc: linux clustering
> Betreff: Re: [Pacemaker] Announce: pcs-0.9.26
>
> On 10/08/12 19:27, Chris Feist wrote:
>> We've been making improvements to the pcs (pacemaker/corosync
>> configuration
>> system) command line tool over the past few months.
>>
>> Currently you can setup a basic cluster (including configuring corosync 2.0 udpu).
>>
>> David Vossel has also created a version of the "Clusters from Scratch"
>> document that illustrates setting up a cluster using pcs.  This should
>> be showing up shortly.
>
> Just an update, I've updated the pcs (to 0.9.27) and included the pcsd daemon with the fedora packages.  You can grab the updated packages here:
>
> http://people.redhat.com/cfeist/pcs/
>
> And you should be able to used the new Clusters from Scratch optimized for the pcs CLI here: http://www.clusterlabs.org/doc/
>
> Just a couple things to note (this should be shortly updated in the notes).
>
> To run pcs on Fedora 17/18 you'll need to turn off selinux & disable the firewall (or at least allow traffic on port 2224).
>
> To disable SELinux set 'SELINUX=permissive' in /etc/selinux/config and reboot To disable the firewall run 'systemctl stop iptables.service' (to permanently disable run 'systemctl disable iptables.service')
>
> The pcs_passwd command has been removed.  In it's place you can do authentication with the hacluster user.  Just set the hacluster user password (passwd hacluster) and then use that user and password to authenticate with pcs.
>
> If you have any questions or any issues don't hesitate to contact me, we're still working out the bugs in the new pcsd daemon and we appreciate all the feedback we can get.
>
> Thanks,
> Chris
>
>>
>> You can view the source here: https://github.com/feist/pcs/
>>
>> Or download the latest tarball:
>> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>>
>> There is also a Fedora 18 package that will be included with the next release.
>> You should be able to find that package in the following locations...
>>
>> RPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>
>> SRPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>>
>> In the near future we are planning on having builds for SUSE & Ubuntu/Debian.
>>
>> We're also actively working on a GUI/Daemon that will allow control of
>> your entire cluster from one node and/or a web browser.
>>
>> Please feel free to email me (cfeist@redhat.com) or open issues on the
>> pcs project at github (https://github.com/feist/pcs/issues) if you
>> have any questions or problems.
>>
>> Thanks!
>> Chris
>>
>> _______________________________________________
>> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
>> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>>
>> Project Home: http://www.clusterlabs.org Getting started:
>> http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
>> Bugs: http://bugs.clusterlabs.org
>
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org
>

From sam@dotsec.com Wed Oct 17 17:11:19 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HLBJgw024835 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 17:11:19 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HLBDWH031627
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:11:14 -0400
Received: from mail.dotsec.com (mail.dotsec.com [59.167.210.116])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HLBCUT012460
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:11:13 -0400
Received: from localhost (imappy.electron.dotsec.com [127.0.0.1])
	by imappy.blackhole.dotsec.com (Postfix) with ESMTP id C2CAD42CE4B
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 07:11:10 +1000 (EST)
X-Virus-Scanned: amavisd-new at dotsec.com
Received: from mail.dotsec.com ([127.0.0.1])
	by localhost (imappy-centos.blackhole.dotsec.com [127.0.0.1])
	(amavisd-new, port 10024)
	with ESMTP id AYoCXVLj+2or for <linux-cluster@redhat.com>;
	Thu, 18 Oct 2012 07:11:04 +1000 (EST)
Message-ID: <507F1EE8.40102@dotsec.com>
Date: Thu, 18 Oct 2012 07:11:04 +1000
From: Sam Wilson <sam@dotsec.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
In-Reply-To: <CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
X-Enigmail-Version: 1.4.5
OpenPGP: id=211F97F7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -2.27  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 21:11:19 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

I might be totally missing something but unless you specify otherwise
doesn't cman require layer 2 connectivity between nodes?

Cheers,

Sam

- -- 
 ______________________________________________________

Mr Sam Wilson,
Information Security Specialist,
DotSec - Dot com Security.
Email: sam@dotsec.com
Telephone: +61 7 3221 2442
Postal correspondence:
  PO Box 10286, Adelaide St., Brisbane, 4000
Head office (no post):
  Suite 201, 303 Adelaide Street,  Brisbane, Australia

______________________________________________________
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.18 (GNU/Linux)

iF4EAREIAAYFAlB/HuIACgkQFdt86iEfl/ed4AD+LIHCF2ljuZ+j6h/fcyk94V6W
Y0H9M2CRcbfFcYR+Qz0BAKwuAmP4eW7Qev0m1Q/em69ClXWW/1v5aC82DQ0Ju2HB
=kaHg
-----END PGP SIGNATURE-----

From lists@alteeve.ca Wed Oct 17 17:13:49 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HLDnFm024967 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 17:13:49 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HLDiuY029330
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:13:44 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HLDgUr015500
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:13:43 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 6D563422488;
	Wed, 17 Oct 2012 17:13:40 -0400 (EDT)
Message-ID: <507F1F85.5020804@alteeve.ca>
Date: Wed, 17 Oct 2012 17:13:41 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com>
In-Reply-To: <507F1EE8.40102@dotsec.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 21:13:49 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/17/2012 05:11 PM, Sam Wilson wrote:
> I might be totally missing something but unless you specify
> otherwise doesn't cman require layer 2 connectivity between nodes?
> 
> Cheers,
> 
> Sam
> 

It normally uses multicast, but you can use unicast with newer
corosync (I've not tried this). I am not sure if two nodes in separate
subnets works, I've also never tried this. I have to think it would be
a bad idea, given the need to fast/stable networking.

- -- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://www.enigmail.net/

iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
51i6iTjsbqlEPeICmCgW
=qzFE
-----END PGP SIGNATURE-----

From terance@socialtwist.com Thu Oct 18 02:44:38 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9I6icT6011398 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 02:44:38 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9I6iXOB024170
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 02:44:33 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9I6iUX6014031
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 02:44:31 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so8185039pbb.33
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 23:44:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=aayGs6ti5+oQW2ko1uHU8ZfCbHnv4VBsuW8ScPU/1NM=;
	b=UrwIeAjPdbBAHj11pbGz4vFJrj+zEHm2gl0K30CrIjg2s5VgN/Q8Kz2PY0l4EpPxHY
	Cjh439qhwkowjK6v6AKau+CC7BdUNL9zoWTKGNhczh3cYEpt4oIYazAQVXVTzaq6McCZ
	VThQN9nHce5EELTW+hkWcbgQ5FJ4n1o4VEvSTFgKncuSMCvSpOHNiPeW/R+8TYXzfuL5
	BDaRJipACCr0Ke5stGyxXIFglbBZH2umiUEv2PD34e7XgVJETqktlH2q+zF6h5UWViXI
	6wKfVG0zgTlLSSoT3P/S9tUkudLJrfBw6bOqIZ65S77NMhDprUlE6cFWAC9ra4Bzla7b
	j4AQ==
MIME-Version: 1.0
Received: by 10.66.81.231 with SMTP id d7mr56773513pay.50.1350542670594; Wed,
	17 Oct 2012 23:44:30 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Wed, 17 Oct 2012 23:44:30 -0700 (PDT)
In-Reply-To: <507F1F85.5020804@alteeve.ca>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
Date: Thu, 18 Oct 2012 12:14:30 +0530
Message-ID: <CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=f46d042ef5b922849304cc4fb897
X-Gm-Message-State: ALoCoQmjvof8bdIOe5JVlE07DFxCZSEL18VFs2spb3HExdIUanTHyd7asoVOnE6KtJ4H8IZycFt7
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 06:44:38 -0000

--f46d042ef5b922849304cc4fb897
Content-Type: text/plain; charset=ISO-8859-1

Sorry I did not give much context of what I'm trying to do.

I'm trying to set up a cluster of nodes running apache qpid as mentioned in
the documentation
here<http://qpid.apache.org/books/trunk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passive_Cluster.html>
The documentation says that cluster mechanism uses cman and rgmanager but
does not directly depend on openais or corosync and does not use
multicasting. It also says "Replication to a *disaster recovery* site can
be handled as simply another node in the cluster, it does not require a
separate replication mechanism" . I think by "disaster recovery site" it
means a different network. I'm very new to clustering so I just wanted to
know if it is possible to use cman and rgmanager with cluster nodes in
different networks.

Thanks,
Terance.

On Thu, Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 10/17/2012 05:11 PM, Sam Wilson wrote:
> > I might be totally missing something but unless you specify
> > otherwise doesn't cman require layer 2 connectivity between nodes?
> >
> > Cheers,
> >
> > Sam
> >
>
> It normally uses multicast, but you can use unicast with newer
> corosync (I've not tried this). I am not sure if two nodes in separate
> subnets works, I've also never tried this. I have to think it would be
> a bad idea, given the need to fast/stable networking.
>
> - --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://www.enigmail.net/
>
> iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
> o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
> WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
> 1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
> eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
> WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
> S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
> xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
> uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
> aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
> PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
> 51i6iTjsbqlEPeICmCgW
> =qzFE
> -----END PGP SIGNATURE-----
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--f46d042ef5b922849304cc4fb897
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry I did not give much context of what I&#39;m trying to do.<div><br></d=
iv><div>I&#39;m trying to set up a cluster of nodes running apache qpid as =
mentioned in the documentation=A0<a href=3D"http://qpid.apache.org/books/tr=
unk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Pa=
ssive_Cluster.html">here</a></div>
<div>The documentation says that cluster mechanism uses cman and rgmanager =
but does not directly depend on openais or corosync and does not use multic=
asting. It also says &quot;Replication to a <em class=3D"firstterm">disaste=
r recovery</em> site can be handled as
	    simply another node in the cluster, it does not require a separate rep=
lication
	    mechanism&quot; . I think by &quot;disaster recovery site&quot; it mea=
ns a different network. I&#39;m very new to clustering so I just wanted to =
know if it is possible to use cman and rgmanager with cluster nodes in diff=
erent networks.</div>
<div><br></div><div>Thanks,</div><div>Terance.</div><div><br><div class=3D"=
gmail_quote">On Thu, Oct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt=
;<a href=3D"mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>=
&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">-----BEGIN PGP SIGNED MESSAGE-----<br>
Hash: SHA1<br>
<div class=3D"im"><br>
On 10/17/2012 05:11 PM, Sam Wilson wrote:<br>
&gt; I might be totally missing something but unless you specify<br>
&gt; otherwise doesn&#39;t cman require layer 2 connectivity between nodes?=
<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Sam<br>
&gt;<br>
<br>
</div>It normally uses multicast, but you can use unicast with newer<br>
corosync (I&#39;ve not tried this). I am not sure if two nodes in separate<=
br>
subnets works, I&#39;ve also never tried this. I have to think it would be<=
br>
a bad idea, given the need to fast/stable networking.<br>
<br>
- --<br>
<div class=3D"im">Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div>-----BEGIN PGP SIGNATURE-----<br>
Version: GnuPG v1.4.12 (GNU/Linux)<br>
Comment: Using GnuPG with Mozilla - <a href=3D"http://www.enigmail.net/" ta=
rget=3D"_blank">http://www.enigmail.net/</a><br>
<br>
iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>
51i6iTjsbqlEPeICmCgW<br>
=3DqzFE<br>
<div class=3D"HOEnZb"><div class=3D"h5">-----END PGP SIGNATURE-----<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</div></div></blockquote></div><br></div>

--f46d042ef5b922849304cc4fb897--

From binanalhalabi@yahoo.com Thu Oct 18 07:37:07 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IBb7xa024498 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 07:37:07 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IBb2Kh006741
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 07:37:02 -0400
Received: from nm26-vm3.bullet.mail.ne1.yahoo.com
	(nm26-vm3.bullet.mail.ne1.yahoo.com [98.138.91.156])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9IBb0eh013099
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 07:37:00 -0400
Received: from [98.138.226.176] by nm26.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 11:36:59 -0000
Received: from [98.138.88.239] by tm11.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 11:36:59 -0000
Received: from [127.0.0.1] by omp1039.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 11:36:59 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 886841.33877.bm@omp1039.mail.ne1.yahoo.com
Received: (qmail 44675 invoked by uid 60001); 18 Oct 2012 11:36:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1350560219; bh=A0KxI+993fSGerlflMEjiP6r0L3+b9M5XKZvG3MOiTk=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=gHj5zcUuh4YdVlWug5SoqaNbDUt/1VIIDBLwJBonWJn5hS/3+IS9fz8y075AGVrLk+OgsqEqZrHeXeLnK3DfyglNVF9rIuio1EVmJ4pQQFbBpUZykX/u9QIUQpixCIoKjNRLdZUIXGKVKzV3S4bEMFG2jRooZWXn6outtNwnrh0=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=elB2uUhvQLBn/n4QyJjfqh+po3HA+oLp+8tECaVIvVWFGSOYnSbVeHsGGnFBamCSBtbMC3E6viiBr/bEcv2qFmnw7AqlA9hAYHJ38qgFPki0fthP9btbIomxeAhertJ0e5aqrZUgj+e4B+aNCY2ssQNq6L/HaGzZE8T5PQZEkMw=;
X-YMail-OSG: 0HOIGGsVM1k3lIBGC7yXR2TB7vwep.oy0huYj013MmUQ0Pd
	TK4u184bfdLqVtAqtu4E_7fBJzS1oMsGh7O4ARRed3LefMc3WSmSLghYPW4I
	2lRWrJisDH7zXOUr4ZnBy0cnlPgdupDq2H9f_b.jCI7qfWYelUUB_S2.vFP8
	sGiDrshe52rJCYwF4xyH5Qcs8336SaET9p_JQrKRK3rTvpb8VM3Zji7rbg5D
	FMMrsMgpD9wzA3WSYq_pkLcSm8mI9o7smFaByIZnMcjVQfpuLagwvSv5tuA.
	i5Z0xxsKUgsUWmEFpzgaHZL2wTW148q18wfOPNIUjIxZJ5VXMeoI9AuNOTEp
	ZzPB773tYBEHZM.PJQXgoQS_VdR0_mf5VeApn97FLmN3TWGVziPZcFsh4Crv
	Wj8SBvfwItasCPcAs.F4qNbEjzs_WcibZBjINBX14UxHhUm5RvbLP4jo7bw4
	5oGPT7l_FZxglQxreDE_584X9WeEeGuCumUQ.vIFLrqL56dQGQE764WFE.2L
	Ty8.M.f9tiM_WShkELhgAJoS1mBztOuBiHcu9dXFxWQ3IaId4wnmykp9HIXA
	k6DWgeNX0Eh.mB97mzReshpOZ1xgOc9.lrrNz4Uwfg_roV4x2jgLU1YpE__e
	GHnMJcXVhvE71SyI9pY1UQCAUf3pbpfXYddvCeRCOvIiKPKdPfWvpu64JnlY
	HLnCx1ChA.luuhDf_h7i8j2tmONA_DkHUbXI2XgV38l6ZmbLqoANb8o5ZsNT
	Gd5p0eNn7hw--
Received: from [92.244.19.236] by web122604.mail.ne1.yahoo.com via HTTP;
	Thu, 18 Oct 2012 04:36:59 PDT
X-Rocket-MIMEInfo: 001.001,
	SGVsbG8sCllvdSBjYW4gYnVpbGQgYSBjbHVzdGVyIHdpdGggbm9kZXMgb24gZGlmZmVyZW50IExBTnMgYnV0IHlvdXIgcmVzb3VyY2UgbWFuYWdlciBtdXN0IHN1cHBvcnQgVmlydHVhbCBJUCBhZGRyZXNzZXMuCkFzIGkgc2VlIGluIHlvdXIgbGluayB0aGlzIGlzIHN1cHBvcnRlZCBpbiB0aGUgcmVzb3VyY2UgbWFuYWdlci4KCi8vIEJpbmFuCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogRnLDpW46IFRlcmFuY2UgRGlhcyA8dGVyYW5jZUBzb2NpYWx0d2lzdC5jb20.ClRpbGw6IGxpbnV4IGMBMAEBAQE-
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
Message-ID: <1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 04:36:59 -0700 (PDT)
From: Binan AL Halabi <binanalhalabi@yahoo.com>
To: linux clustering <linux-cluster@redhat.com>
In-Reply-To: <CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="-159098491-733212626-1350560219=:38099"
X-RedHat-Spam-Score: -2.379  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE,
	RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Binan AL Halabi <binanalhalabi@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 11:37:07 -0000

---159098491-733212626-1350560219=:38099
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,=0AYou can build a cluster with nodes on different LANs but your reso=
urce manager must support Virtual IP addresses.=0AAs i see in your link thi=
s is supported in the resource manager.=0A=0A// Binan=0A=0A________________=
________________=0A Fr=E5n: Terance Dias <terance@socialtwist.com>=0ATill: =
linux clustering <linux-cluster@redhat.com> =0ASkickat: torsdag, 18 oktober=
 2012 8:44=0A=C4mne: Re: [Linux-cluster] CMAN nodes in different LANs=0A =
=0A=0ASorry I did not give much context of what I'm trying to do.=0A=0AI'm =
trying to set up a cluster of nodes running apache qpid as mentioned in the=
 documentation=A0here=0AThe documentation says that cluster mechanism uses =
cman and rgmanager but does not directly depend on openais or corosync and =
does not use multicasting. It also says "Replication to a disaster recovery=
 site can be handled as simply another node in the cluster, it does not req=
uire a separate replication mechanism" . I think by "disaster recovery site=
" it means a different network. I'm very new to clustering so I just wanted=
 to know if it is possible to use cman and rgmanager with cluster nodes in =
different networks.=0A=0AThanks,=0ATerance.=0A=0A=0AOn Thu, Oct 18, 2012 at=
 2:43 AM, Digimer <lists@alteeve.ca> wrote:=0A=0A-----BEGIN PGP SIGNED MESS=
AGE-----=0A>Hash: SHA1=0A>=0A>=0A>On 10/17/2012 05:11 PM, Sam Wilson wrote:=
=0A>> I might be totally missing something but unless you specify=0A>> othe=
rwise doesn't cman require layer 2 connectivity between nodes?=0A>>=0A>> Ch=
eers,=0A>>=0A>> Sam=0A>>=0A>=0A>It normally uses multicast, but you can use=
 unicast with newer=0A>corosync (I've not tried this). I am not sure if two=
 nodes in separate=0A>subnets works, I've also never tried this. I have to =
think it would be=0A>a bad idea, given the need to fast/stable networking.=
=0A>=0A>- --=0A>=0A>Digimer=0A>Papers and Projects: https://alteeve.ca/w/=
=0A>What if the cure for cancer is trapped in the mind of a person without=
=0A>access to education?=0A>-----BEGIN PGP SIGNATURE-----=0A>Version: GnuPG=
 v1.4.12 (GNU/Linux)=0A>Comment: Using GnuPG with Mozilla - http://www.enig=
mail.net/=0A>=0A>iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsv=
N1hUTZ=0A>o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl=
=0A>WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L=0A>1D6=
MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg=0A>eEbFKBWCjh=
x5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp=0A>WYgsDyP9S6FQQc6+1=
OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK=0A>S2y1F6am1th0Wj79z4o7Wwhh=
evbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP=0A>xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjq=
TCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK=0A>uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB=
316/Y8TTDAyrbk7eQLUribGqra=0A>aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPF=
NCa/cPkMJTfKO7O19BP=0A>PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp=
+9EOac9VRm7n=0A>51i6iTjsbqlEPeICmCgW=0A>=3DqzFE=0A>=0A>-----END PGP SIGNATU=
RE-----=0A>=0A>--=0A>Linux-cluster mailing list=0A>Linux-cluster@redhat.com=
=0A>https://www.redhat.com/mailman/listinfo/linux-cluster=0A>=0A=0A-- =0ALi=
nux-cluster mailing list=0ALinux-cluster@redhat.com=0Ahttps://www.redhat.co=
m/mailman/listinfo/linux-cluster
---159098491-733212626-1350560219=:38099
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:ti=
mes new roman, new york, times, serif;font-size:10pt"><div><span>Hello,</sp=
an></div><div style=3D"color: rgb(0, 0, 0); font-size: 13.3333px; font-fami=
ly: times new roman,new york,times,serif; background-color: transparent; fo=
nt-style: normal;"><span>You can build a cluster with nodes on different LA=
Ns but your resource manager must support Virtual IP addresses.</span></div=
><div style=3D"color: rgb(0, 0, 0); font-size: 13.3333px; font-family: time=
s new roman,new york,times,serif; background-color: transparent; font-style=
: normal;"><span>As i see in your link this is supported in the resource ma=
nager.</span></div><div style=3D"color: rgb(0, 0, 0); font-size: 13.3333px;=
 font-family: times new roman,new york,times,serif; background-color: trans=
parent; font-style: normal;"><span><br></span></div><div><span></span></div=
>// Binan  <div style=3D"font-family: times new roman, new york, times, ser=
if;
 font-size: 10pt;"> <div style=3D"font-family: times new roman, new york, t=
imes, serif; font-size: 12pt;"> <div dir=3D"ltr"> <font size=3D"2" face=3D"=
Arial"> <hr size=3D"1">  <b><span style=3D"font-weight:bold;">Fr=E5n:</span=
></b> Terance Dias &lt;terance@socialtwist.com&gt;<br> <b><span style=3D"fo=
nt-weight: bold;">Till:</span></b> linux clustering &lt;linux-cluster@redha=
t.com&gt; <br> <b><span style=3D"font-weight: bold;">Skickat:</span></b> to=
rsdag, 18 oktober 2012 8:44<br> <b><span style=3D"font-weight: bold;">=C4mn=
e:</span></b> Re: [Linux-cluster] CMAN nodes in different LANs<br> </font> =
</div> <br>=0A<div id=3D"yiv639325006">Sorry I did not give much context of=
 what I'm trying to do.<div><br></div><div>I'm trying to set up a cluster o=
f nodes running apache qpid as mentioned in the documentation&nbsp;<a rel=
=3D"nofollow" target=3D"_blank" href=3D"http://qpid.apache.org/books/trunk/=
AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passiv=
e_Cluster.html">here</a></div>=0A<div>The documentation says that cluster m=
echanism uses cman and rgmanager but does not directly depend on openais or=
 corosync and does not use multicasting. It also says "Replication to a <i>=
disaster recovery</i> site can be handled as=0A=09    simply another node i=
n the cluster, it does not require a separate replication=0A=09    mechanis=
m" . I think by "disaster recovery site" it means a different network. I'm =
very new to clustering so I just wanted to know if it is possible to use cm=
an and rgmanager with cluster nodes in different networks.</div>=0A<div><br=
></div><div>Thanks,</div><div>Terance.</div><div><br><div class=3D"yiv63932=
5006gmail_quote">On Thu, Oct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr"=
>&lt;<a rel=3D"nofollow" ymailto=3D"mailto:lists@alteeve.ca" target=3D"_bla=
nk" href=3D"mailto:lists@alteeve.ca">lists@alteeve.ca</a>&gt;</span> wrote:=
<br>=0A<blockquote class=3D"yiv639325006gmail_quote" style=3D"margin:0 0 0 =
.8ex;border-left:1px #ccc solid;padding-left:1ex;">-----BEGIN PGP SIGNED ME=
SSAGE-----<br>=0AHash: SHA1<br>=0A<div class=3D"yiv639325006im"><br>=0AOn 1=
0/17/2012 05:11 PM, Sam Wilson wrote:<br>=0A&gt; I might be totally missing=
 something but unless you specify<br>=0A&gt; otherwise doesn't cman require=
 layer 2 connectivity between nodes?<br>=0A&gt;<br>=0A&gt; Cheers,<br>=0A&g=
t;<br>=0A&gt; Sam<br>=0A&gt;<br>=0A<br>=0A</div>It normally uses multicast,=
 but you can use unicast with newer<br>=0Acorosync (I've not tried this). I=
 am not sure if two nodes in separate<br>=0Asubnets works, I've also never =
tried this. I have to think it would be<br>=0Aa bad idea, given the need to=
 fast/stable networking.<br>=0A<br>=0A- --<br>=0A<div class=3D"yiv639325006=
im">Digimer<br>=0APapers and Projects: <a rel=3D"nofollow" target=3D"_blank=
" href=3D"https://alteeve.ca/w/">https://alteeve.ca/w/</a><br>=0AWhat if th=
e cure for cancer is trapped in the mind of a person without<br>=0Aaccess t=
o education?<br>=0A</div>-----BEGIN PGP SIGNATURE-----<br>=0AVersion: GnuPG=
 v1.4.12 (GNU/Linux)<br>=0AComment: Using GnuPG with Mozilla - http://www.e=
nigmail.net/<br>=0A<br>=0AiQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQ=
DOSA2DVsvN1hUTZ<br>=0Ao9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUX=
phX41QfM7Fl<br>=0AWQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWd=
LLPfT9L<br>=0A1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7=
HJg<br>=0AeEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<=
br>=0AWYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>=
=0AS2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>=0Ax=
MYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>=0AuaLYb=
gma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>=0AaRSHz5b+R=
BlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>=0APShZxE7HvsphT=
vAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>=0A51i6iTjsbqlEPeICm=
CgW<br>=0A=3DqzFE<br>=0A<div class=3D"yiv639325006HOEnZb"><div class=3D"yiv=
639325006h5">-----END PGP SIGNATURE-----<br>=0A<br>=0A--<br>=0ALinux-cluste=
r mailing list<br>=0A<a rel=3D"nofollow" ymailto=3D"mailto:Linux-cluster@re=
dhat.com" target=3D"_blank" href=3D"mailto:Linux-cluster@redhat.com">Linux-=
cluster@redhat.com</a><br>=0A<a rel=3D"nofollow" target=3D"_blank" href=3D"=
https://www.redhat.com/mailman/listinfo/linux-cluster">https://www.redhat.c=
om/mailman/listinfo/linux-cluster</a><br>=0A</div></div></blockquote></div>=
<br></div>=0A</div><br>-- <br>Linux-cluster mailing list<br><a ymailto=3D"m=
ailto:Linux-cluster@redhat.com" href=3D"mailto:Linux-cluster@redhat.com">Li=
nux-cluster@redhat.com</a><br><a href=3D"https://www.redhat.com/mailman/lis=
tinfo/linux-cluster" target=3D"_blank">https://www.redhat.com/mailman/listi=
nfo/linux-cluster</a><br><br> </div> </div>  </div></body></html>
---159098491-733212626-1350560219=:38099--

From terance@socialtwist.com Thu Oct 18 08:28:27 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9ICSRo8032457 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 08:28:27 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9ICSMcI016218
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 08:28:22 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9ICSLNY032619
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 08:28:21 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so8448115pbb.33
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 05:28:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=2yPlxwk+Jr/3iJh3FyG0qCU6/Yd00NXwQlRkjJQDPKk=;
	b=JzbitRZ2td4T32wn9ad5fShKir5SF4L1RWyiKgv9QgcZm9iULByh3vkqDnxy459X/3
	u80bDnYBkHxBM/a4EyLl5SEj6/NPVRA7mThHuWfPvO0kU2P5S/obQp2ma4Us3AOjHtpl
	zTGcVufwLTN1kHAGFI5N1Sp517D/GsHZ/wdi8Gc091UtWcYLjPEnv7iT0E42e4B+ND0B
	mgGXZT0L8NR80iyw7ODhGwgKtgOWYyoFofgv/a3l2IhxCggYkX01oCbjhQ7FkY8moXHk
	rNqvBMIVya+9vIjq+czm0mUg3xWqWL1w043IStskXDwEWcnaBw0L9i2MJyB5QeL0Ofx6
	7SJA==
MIME-Version: 1.0
Received: by 10.68.195.195 with SMTP id ig3mr66303732pbc.108.1350562804657;
	Thu, 18 Oct 2012 05:20:04 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Thu, 18 Oct 2012 05:20:04 -0700 (PDT)
In-Reply-To: <1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
	<1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 17:50:04 +0530
Message-ID: <CAK76X7TYvv0YxcaLxCeUUtPJ8gawoNsE7Dnx6Nk3J8dYLQvuLA@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: Binan AL Halabi <binanalhalabi@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b10d18737efd304cc54683b
X-Gm-Message-State: ALoCoQlLImDVkxcN+hPQizrrxF1LnPMJ/3jJvmd8HyyAfdzR+XNRFeUZfn6N8sx/0W7XunFv/pfr
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 12:28:27 -0000

--047d7b10d18737efd304cc54683b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I cannot use Virtual IP addresses since my 2 networks are in different
geographical locations and therefore the IP cannot be relocated. Is it
possible to build this cluster without virtual IP addresses?

Thanks,
Terance.

On Thu, Oct 18, 2012 at 5:06 PM, Binan AL Halabi <binanalhalabi@yahoo.com>w=
rote:

> Hello,
> You can build a cluster with nodes on different LANs but your resource
> manager must support Virtual IP addresses.
> As i see in your link this is supported in the resource manager.
>
> // Binan
>   ------------------------------
> *Fr=E5n:* Terance Dias <terance@socialtwist.com>
> *Till:* linux clustering <linux-cluster@redhat.com>
> *Skickat:* torsdag, 18 oktober 2012 8:44
> *=C4mne:* Re: [Linux-cluster] CMAN nodes in different LANs
>
> Sorry I did not give much context of what I'm trying to do.
>
> I'm trying to set up a cluster of nodes running apache qpid as mentioned
> in the documentation here<http://qpid.apache.org/books/trunk/AMQP-Messagi=
ng-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passive_Cluster.ht=
ml>
> The documentation says that cluster mechanism uses cman and rgmanager but
> does not directly depend on openais or corosync and does not use
> multicasting. It also says "Replication to a *disaster recovery* site can
> be handled as simply another node in the cluster, it does not require a
> separate replication mechanism" . I think by "disaster recovery site" it
> means a different network. I'm very new to clustering so I just wanted to
> know if it is possible to use cman and rgmanager with cluster nodes in
> different networks.
>
> Thanks,
> Terance.
>
> On Thu, Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 10/17/2012 05:11 PM, Sam Wilson wrote:
> > I might be totally missing something but unless you specify
> > otherwise doesn't cman require layer 2 connectivity between nodes?
> >
> > Cheers,
> >
> > Sam
> >
>
> It normally uses multicast, but you can use unicast with newer
> corosync (I've not tried this). I am not sure if two nodes in separate
> subnets works, I've also never tried this. I have to think it would be
> a bad idea, given the need to fast/stable networking.
>
> - --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://www.enigmail.net/
>
> iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
> o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
> WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
> 1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
> eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
> WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
> S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
> xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
> uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
> aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
> PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
> 51i6iTjsbqlEPeICmCgW
> =3DqzFE
> -----END PGP SIGNATURE-----
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--047d7b10d18737efd304cc54683b
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I cannot use Virtual IP addresses since my 2 networks are in different geog=
raphical locations and therefore the IP cannot be relocated. Is it possible=
 to build this cluster without virtual IP addresses?<div><br></div><div>
Thanks,</div><div>Terance.<br><div><br><div class=3D"gmail_quote">On Thu, O=
ct 18, 2012 at 5:06 PM, Binan AL Halabi <span dir=3D"ltr">&lt;<a href=3D"ma=
ilto:binanalhalabi@yahoo.com" target=3D"_blank">binanalhalabi@yahoo.com</a>=
&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div style=3D"font-size:10pt;font-famil=
y:times new roman,new york,times,serif"><div><span>Hello,</span></div><div =
style=3D"font-style:normal;font-size:13.3333px;background-color:transparent=
;font-family:times new roman,new york,times,serif">
<span>You can build a cluster with nodes on different LANs but your resourc=
e manager must support Virtual IP addresses.</span></div><div style=3D"font=
-style:normal;font-size:13.3333px;background-color:transparent;font-family:=
times new roman,new york,times,serif">
<span>As i see in your link this is supported in the resource manager.</spa=
n></div><div style=3D"font-style:normal;font-size:13.3333px;background-colo=
r:transparent;font-family:times new roman,new york,times,serif"><span><br>
</span></div><div><span></span></div>// Binan  <div style=3D"font-family:ti=
mes new roman,new york,times,serif;font-size:10pt"> <div style=3D"font-fami=
ly:times new roman,new york,times,serif;font-size:12pt"> <div dir=3D"ltr"> =
<font face=3D"Arial"> <hr size=3D"1">
  <b><span style=3D"font-weight:bold">Fr=E5n:</span></b> Terance Dias &lt;<=
a href=3D"mailto:terance@socialtwist.com" target=3D"_blank">terance@socialt=
wist.com</a>&gt;<br> <b><span style=3D"font-weight:bold">Till:</span></b> l=
inux clustering &lt;<a href=3D"mailto:linux-cluster@redhat.com" target=3D"_=
blank">linux-cluster@redhat.com</a>&gt; <br>
 <b><span style=3D"font-weight:bold">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 8:44<br> <b><span style=3D"font-weight:bold">=C4mne:</span></b> Re: =
[Linux-cluster] CMAN nodes in different LANs<br> </font> </div><div><div cl=
ass=3D"h5">
 <br>
<div>Sorry I did not give much context of what I&#39;m trying to do.<div><b=
r></div><div>I&#39;m trying to set up a cluster of nodes running apache qpi=
d as mentioned in the documentation=A0<a rel=3D"nofollow" href=3D"http://qp=
id.apache.org/books/trunk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messagin=
g_User_Guide-Active_Passive_Cluster.html" target=3D"_blank">here</a></div>

<div>The documentation says that cluster mechanism uses cman and rgmanager =
but does not directly depend on openais or corosync and does not use multic=
asting. It also says &quot;Replication to a <i>disaster recovery</i> site c=
an be handled as
	    simply another node in the cluster, it does not require a separate rep=
lication
	    mechanism&quot; . I think by &quot;disaster recovery site&quot; it mea=
ns a different network. I&#39;m very new to clustering so I just wanted to =
know if it is possible to use cman and rgmanager with cluster nodes in diff=
erent networks.</div>

<div><br></div><div>Thanks,</div><div>Terance.</div><div><br><div>On Thu, O=
ct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt;<a rel=3D"nofollow" h=
ref=3D"mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;<=
/span> wrote:<br>

<blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
eft:1ex">-----BEGIN PGP SIGNED MESSAGE-----<br>
Hash: SHA1<br>
<div><br>
On 10/17/2012 05:11 PM, Sam Wilson wrote:<br>
&gt; I might be totally missing something but unless you specify<br>
&gt; otherwise doesn&#39;t cman require layer 2 connectivity between nodes?=
<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Sam<br>
&gt;<br>
<br>
</div>It normally uses multicast, but you can use unicast with newer<br>
corosync (I&#39;ve not tried this). I am not sure if two nodes in separate<=
br>
subnets works, I&#39;ve also never tried this. I have to think it would be<=
br>
a bad idea, given the need to fast/stable networking.<br>
<br>
- --<br>
<div>Digimer<br>
Papers and Projects: <a rel=3D"nofollow" href=3D"https://alteeve.ca/w/" tar=
get=3D"_blank">https://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div>-----BEGIN PGP SIGNATURE-----<br>
Version: GnuPG v1.4.12 (GNU/Linux)<br>
Comment: Using GnuPG with Mozilla - <a href=3D"http://www.enigmail.net/" ta=
rget=3D"_blank">http://www.enigmail.net/</a><br>
<br>
iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>
51i6iTjsbqlEPeICmCgW<br>
=3DqzFE<br>
<div><div>-----END PGP SIGNATURE-----<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a rel=3D"nofollow" href=3D"mailto:Linux-cluster@redhat.com" target=3D"_bla=
nk">Linux-cluster@redhat.com</a><br>
<a rel=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-c=
luster" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-clu=
ster</a><br>
</div></div></blockquote></div><br></div>
</div><br>-- <br>Linux-cluster mailing list<br><a href=3D"mailto:Linux-clus=
ter@redhat.com" target=3D"_blank">Linux-cluster@redhat.com</a><br><a href=
=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D"_blank=
">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
<br> </div></div></div> </div>  </div></div><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br></div></div>

--047d7b10d18737efd304cc54683b--

From binanalhalabi@yahoo.com Thu Oct 18 09:33:16 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IDXFwh010736 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 09:33:15 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9IDXAu4015942
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:33:10 -0400
Received: from nm10-vm2.bullet.mail.ne1.yahoo.com
	(nm10-vm2.bullet.mail.ne1.yahoo.com [98.138.90.158])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9IDX7nF029164
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:33:08 -0400
Received: from [98.138.226.177] by nm10.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 13:30:13 -0000
Received: from [98.138.89.192] by tm12.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 13:30:13 -0000
Received: from [127.0.0.1] by omp1050.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 13:30:13 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 338121.60942.bm@omp1050.mail.ne1.yahoo.com
Received: (qmail 47576 invoked by uid 60001); 18 Oct 2012 13:30:13 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1350567013; bh=X6muORFZJuiZCB+3LDd3FVKl/9S5N1cVIw5rvJo/8uk=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=iqkrnTFaim9W60dhV8Nc5g5MAfYtLJPCdkh+VrxOuvgw1QguVWIEyjcnF1XNkoBB6H9Q+t+5zfU1tehNhqSGfh2pV4SJcCGF7QHWaWKTodR83V64gxMV1fMwPfPEFdd9X7uatqAOfpamAOPvaeqWuhHcxcrwNf1rQutYbNAPGDw=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=gGXu0p5EZqmeYyfQvd7LhIgyz5im/GGLjgviC++jAWr2wsykJcYxDzR+Q5LEZ9B8tCxg7dgDJdTOpY581XFNGg5v4HN3RpwFdgSx/LZPJ5d9N3tShur1Yzb/7An/3DMhqupCEUqF9pgwECP6Tg04+/TiUJOJa5Yj9eKe1V2FA7Q=;
X-YMail-OSG: 1pemPNcVM1nA.ikxW7oKCGG01X2G_QMjr8N8ImUvxnCOHwT
	MbX4oTSiKl.j7oUeWV8ikLTIX7hztB033QR6C2_uxQAGDG4pCWPD9E8CGrbz
	GsCSRzU33CBoYTaUOvY1u4Qf0YLyl4xj7mVF6eB.xw.j4gEtS82kKqXh5Vgw
	RSpa1YeV8Cy_UOI230J5C0ifZS4Q8s57hoSbfXw.ACs__313MGfO2U6CXryN
	IIbMs_TJ7Hc7g8mnvJttBr6VvfHdC2TMEu13UBzyE0m514cxAZwhfbuCqVxv
	5FkuljADUzzsrCFvAS.GuW8U8EZKclQjxssBy5PlJI6fUkdoONeRwjLZmW60
	MzzJAUAhDdhteMTC.cyrP0T.ZW8_Co72tCOqy.vFe06cRizFOOBal9NCBUNL
	mqx4dVS0oZKdvMKat4_LlUa7MbBLJazjiCatK3ADoYPttuvFHU0SmW0a2ppX
	iNvaI5XBzUgDNBnm4d_avK9bm9Qp9W1xwtzDzTEx6GV06JXnWD4Yp79MG8_f
	EZw6WcPLH5GY6uhQVjEjSNHv.Au_xTgnYftfzgTCm2nRWprhBv4l7.esg5HS
	8qoy1rao6yv_kF3B9cdrDb_Xyu6b1LPJIL3hAtdWcXulP0N2TtYhQDc52ZdG
	KFjJY0_n2A.cCqnywN3JvBdvsmOU7UJA0_gyas.zLt9N0xiE3VNYwGhNanwL
	e1pazP4xvMmIhOS8juJpbjx11IPcZvtMSTOL5r610vCY3DFXKUYQs9Z0.RbQ
	H9_BAm5pe4g--
Received: from [92.244.19.236] by web122605.mail.ne1.yahoo.com via HTTP;
	Thu, 18 Oct 2012 06:30:13 PDT
X-Rocket-MIMEInfo: 001.001,
	CgpIaSwKCkluIHRoaXMgY2FzZSBpdCBtdXN0IGJlIGFwcGxpY2F0aW9uLWxldmVsIGxvYWRiYWxhbmNpbmcuIElzIEl0PyAKSSB0aGluayBzbyBiZWNhdXNlIGkgc2VlIGluIHlvdXIgbGluayB0aGVyZSBpYSBhIGxpc3Qgb2YgYnJva2VycyBhbmQgdGhleSBhcmUgc3BlY2lmaWVkIGJ5IFVSTCBzbyB0aGlzIGlzIGFwcGxpY2F0aW9uIGxldmVsIGxvYWRiYWxhbmNpbmcuCmFuZCB5b3UgY2FuIGRvIGl0LgoKVGhlIGZ1bGwgZm9ybWF0IG9mIHRoZSBicm9rZXIgVVJMIGlzIGdpdmVuIGJ5IHRoaXMgZ3JhbW1hcjoBMAEBAQE-
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
	<1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
	<CAK76X7TYvv0YxcaLxCeUUtPJ8gawoNsE7Dnx6Nk3J8dYLQvuLA@mail.gmail.com>
	<1350566725.99107.YahooMailNeo@web122603.mail.ne1.yahoo.com>
Message-ID: <1350567013.23919.YahooMailNeo@web122605.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 06:30:13 -0700 (PDT)
From: Binan AL Halabi <binanalhalabi@yahoo.com>
To: "linux-cluster@redhat.com" <linux-cluster@redhat.com>
In-Reply-To: <1350566725.99107.YahooMailNeo@web122603.mail.ne1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="1778881473-2121884111-1350567013=:23919"
X-RedHat-Spam-Score: -2.379  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE,
	RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] VB:  CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Binan AL Halabi <binanalhalabi@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 13:33:16 -0000

--1778881473-2121884111-1350567013=:23919
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0AHi,=0A=0AIn this case it must be application-level loadbalancing. Is =
It? =0AI think so because i see in your link there ia a list of brokers and=
 they are specified by URL so this is application level loadbalancing.=0Aan=
d you can do it.=0A=0AThe full format of the broker URL is given by this gr=
ammar: =0Aurl =3D ["amqp:"][ user ["/" password] "@" ] addr ("," addr)*=0Aa=
ddr =3D tcp_addr / rmda_addr / ssl_addr / ...=0Atcp_addr =3D ["tcp:"] host =
[":" port]=0Ardma_addr =3D "rdma:" host [":" port]=0Assl_addr =3D "ssl:" ho=
st [":" port]' The URL can be virtual IP (simple case) or URL as above (Thi=
s what you want).=0A=0A=0A// Binan=0A=0A=0A________________________________=
=0A Fr=E5n: Terance Dias <terance@socialtwist.com>=0ATill: Binan AL Halabi =
<binanalhalabi@yahoo.com>; linux clustering <linux-cluster@redhat.com> =0AS=
kickat: torsdag, 18 oktober 2012 14:20=0A=C4mne: Re: [Linux-cluster] CMAN n=
odes in different LANs=0A =0A=0AI cannot use Virtual IP addresses since my =
2 networks are in different geographical locations and therefore the IP can=
not be relocated. Is it possible to build this cluster without virtual IP a=
ddresses?=0A=0AThanks,=0ATerance.=0A=0A=0A=0AOn Thu, Oct 18, 2012 at 5:06 P=
M, Binan AL Halabi <binanalhalabi@yahoo.com> wrote:=0A=0AHello,=0A>You can =
build a cluster with nodes on different LANs but your resource manager must=
 support Virtual IP addresses.=0A>As i see in your link this is supported i=
n the resource manager.=0A>=0A>// Binan =0A>=0A>___________________________=
_____=0A> Fr=E5n: Terance Dias <terance@socialtwist.com>=0A>Till: linux clu=
stering <linux-cluster@redhat.com> =0A>Skickat: torsdag, 18 oktober 2012 8:=
44=0A>=C4mne: Re: [Linux-cluster] CMAN nodes in different LANs=0A> =0A>=0A>=
=0A>Sorry I did not give much context of what I'm trying to do.=0A>=0A>=0A>=
I'm trying to set up a cluster of nodes running apache qpid as mentioned in=
 the documentation=A0here=0A>The documentation says that cluster mechanism =
uses cman and rgmanager but does not directly depend on openais or corosync=
 and does not use multicasting. It also says "Replication to a disaster rec=
overy site can be handled as simply another node in the cluster, it does no=
t require a separate replication mechanism" . I think by "disaster recovery=
 site" it means a different network. I'm very new to clustering so I just w=
anted to know if it is possible to use cman and rgmanager with cluster node=
s in different networks.=0A>=0A>=0A>Thanks,=0A>Terance.=0A>=0A>=0A>On Thu, =
Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:=0A>=0A>-----BEGI=
N PGP SIGNED MESSAGE-----=0A>>Hash: SHA1=0A>>=0A>>=0A>>On 10/17/2012 05:11 =
PM, Sam Wilson wrote:=0A>>> I might be totally missing something but unless=
 you specify=0A>>> otherwise doesn't cman require layer 2 connectivity betw=
een nodes?=0A>>>=0A>>> Cheers,=0A>>>=0A>>> Sam=0A>>>=0A>>=0A>>It normally u=
ses multicast, but you can use unicast with newer=0A>>corosync (I've not tr=
ied this). I am not sure if two nodes in separate=0A>>subnets works, I've a=
lso never tried this. I have to think it would be=0A>>a bad idea, given the=
 need to fast/stable networking.=0A>>=0A>>- --=0A>>=0A>>Digimer=0A>>Papers =
and Projects: https://alteeve.ca/w/=0A>>What if the cure for cancer is trap=
ped in the mind of a person without=0A>>access to education?=0A>>-----BEGIN=
 PGP SIGNATURE-----=0A>>Version: GnuPG v1.4.12 (GNU/Linux)=0A>>Comment: Usi=
ng GnuPG with Mozilla - http://www.enigmail.net/=0A>>=0A>>iQIcBAEBAgAGBQJQf=
x+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ=0A>>o9u+JSSMv8cigW2VabayZcx=
s/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl=0A>>WQQ/P1ChkDk1FRdNPVIIwNOYPApIA=
8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L=0A>>1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7Cwob=
fqVIhNcmyw8iw4nxlBpnDswds7HJg=0A>>eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKln=
Mo6JqpJatlorMP5FxkLsgRp=0A>>WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2s=
h0ZRdXlIvM3kckCmK=0A>>S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTR=
Ug7oTfnIKJP=0A>>xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyh=
O1VdK=0A>>uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra=
=0A>>aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP=0A>>P=
ShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n=0A>>51i6iTj=
sbqlEPeICmCgW=0A>>=3DqzFE=0A>>=0A>>-----END PGP SIGNATURE-----=0A>>=0A>>--=
=0A>>Linux-cluster mailing list=0A>>Linux-cluster@redhat.com=0A>>https://ww=
w.redhat.com/mailman/listinfo/linux-cluster=0A>>=0A>=0A>-- =0A>Linux-cluste=
r mailing list=0A>Linux-cluster@redhat.com=0A>https://www.redhat.com/mailma=
n/listinfo/linux-cluster=0A>=0A>=0A>--=0A>Linux-cluster mailing list=0A>Lin=
ux-cluster@redhat.com=0A>https://www.redhat.com/mailman/listinfo/linux-clus=
ter=0A>
--1778881473-2121884111-1350567013=:23919
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:ti=
mes new roman, new york, times, serif;font-size:10pt"><br>=0A<div style=3D"=
font-family: times new roman, new york, times, serif; font-size: 10pt;"><di=
v style=3D"font-family: times new roman, new york, times, serif; font-size:=
 12pt;"><div id=3D"yiv1985237836"><div><div style=3D"color:#000;background-=
color:#fff;font-family:times new roman, new york, times, serif;font-size:10=
pt;">Hi,<br><br>In this case it must be application-level loadbalancing. Is=
 It? <br>I think so because i see in your link there ia a list of brokers a=
nd they are specified by URL so this is application level loadbalancing.<br=
>and you can do it.<br><br> =0A=09=09  The full format of the broker URL is=
 given by this grammar:=0A=09=09  <pre class=3D"yiv1985237836programlisting=
">url =3D ["amqp:"][ user ["/" password] "@" ] addr ("," addr)*=0Aaddr =3D =
tcp_addr / rmda_addr / ssl_addr / ...=0Atcp_addr =3D ["tcp:"] host [":" por=
t]=0Ardma_addr =3D "rdma:" host [":" port]=0Assl_addr =3D "ssl:" host [":" =
port]'=0A=09=09  </pre>The URL can be virtual IP (simple case) or URL as ab=
ove (This what you want).<br><div><span><br></span></div><div>// Binan<br><=
/div>  <div style=3D"font-family:times new roman, new york, times, serif;fo=
nt-size:10pt;"> <div style=3D"font-family:times new roman, new york, times,=
 serif;font-size:12pt;"> <div dir=3D"ltr"> <font size=3D"2" face=3D"Arial">=
 <hr size=3D"1">  <b><span style=3D"font-weight:bold;">Fr=E5n:</span></b> T=
erance Dias &lt;terance@socialtwist.com&gt;<br> <b><span style=3D"font-weig=
ht:bold;">Till:</span></b> Binan AL Halabi &lt;binanalhalabi@yahoo.com&gt;;=
 linux clustering &lt;linux-cluster@redhat.com&gt; <br> <b><span style=3D"f=
ont-weight:bold;">Skickat:</span></b> torsdag, 18 oktober 2012 14:20<br> <b=
><span style=3D"font-weight:bold;">=C4mne:</span></b> Re: [Linux-cluster] C=
MAN nodes in different LANs<br> </font> </div> <br>=0A<div id=3D"yiv1985237=
836">I cannot use Virtual IP addresses since my 2 networks are in different=
 geographical locations and therefore the IP cannot be relocated. Is it pos=
sible to build this cluster without virtual IP addresses?<div><br></div><di=
v>=0AThanks,</div><div>Terance.<br><div><br><div class=3D"yiv1985237836gmai=
l_quote">On Thu, Oct 18, 2012 at 5:06 PM, Binan AL Halabi <span dir=3D"ltr"=
>&lt;<a rel=3D"nofollow" ymailto=3D"mailto:binanalhalabi@yahoo.com" target=
=3D"_blank" href=3D"mailto:binanalhalabi@yahoo.com">binanalhalabi@yahoo.com=
</a>&gt;</span> wrote:<br>=0A<blockquote class=3D"yiv1985237836gmail_quote"=
 style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"><=
div><div style=3D"font-size:10pt;font-family:times new roman, new york, tim=
es, serif;"><div><span>Hello,</span></div><div style=3D"font-style:normal;f=
ont-size:13.3333px;background-color:transparent;font-family:times new roman=
, new york, times, serif;">=0A<span>You can build a cluster with nodes on d=
ifferent LANs but your resource manager must support Virtual IP addresses.<=
/span></div><div style=3D"font-style:normal;font-size:13.3333px;background-=
color:transparent;font-family:times new roman, new york, times, serif;">=0A=
<span>As i see in your link this is supported in the resource manager.</spa=
n></div><div style=3D"font-style:normal;font-size:13.3333px;background-colo=
r:transparent;font-family:times new roman, new york, times, serif;"><span><=
br>=0A</span></div><div><span></span></div>// Binan  <div style=3D"font-fam=
ily:times new roman, new york, times, serif;font-size:10pt;"> <div style=3D=
"font-family:times new roman, new york, times, serif;font-size:12pt;"> <div=
 dir=3D"ltr"> <font face=3D"Arial"> <hr size=3D"1">=0A  <b><span style=3D"f=
ont-weight:bold;">Fr=E5n:</span></b> Terance Dias &lt;<a rel=3D"nofollow" y=
mailto=3D"mailto:terance@socialtwist.com" target=3D"_blank" href=3D"mailto:=
terance@socialtwist.com">terance@socialtwist.com</a>&gt;<br> <b><span style=
=3D"font-weight:bold;">Till:</span></b> linux clustering &lt;<a rel=3D"nofo=
llow" ymailto=3D"mailto:linux-cluster@redhat.com" target=3D"_blank" href=3D=
"mailto:linux-cluster@redhat.com">linux-cluster@redhat.com</a>&gt; <br>=0A =
<b><span style=3D"font-weight:bold;">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 8:44<br> <b><span style=3D"font-weight:bold;">=C4mne:</span></b> Re:=
 [Linux-cluster] CMAN nodes in different LANs<br> </font> </div><div><div c=
lass=3D"yiv1985237836h5">=0A <br>=0A<div>Sorry I did not give much context =
of what I'm trying to do.<div><br></div><div>I'm trying to set up a cluster=
 of nodes running apache qpid as mentioned in the documentation&nbsp;<a rel=
=3D"nofollow" target=3D"_blank" href=3D"http://qpid.apache.org/books/trunk/=
AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passiv=
e_Cluster.html">here</a></div>=0A=0A<div>The documentation says that cluste=
r mechanism uses cman and rgmanager but does not directly depend on openais=
 or corosync and does not use multicasting. It also says "Replication to a =
<i>disaster recovery</i> site can be handled as=0A=09    simply another nod=
e in the cluster, it does not require a separate replication=0A=09    mecha=
nism" . I think by "disaster recovery site" it means a different network. I=
'm very new to clustering so I just wanted to know if it is possible to use=
 cman and rgmanager with cluster nodes in different networks.</div>=0A=0A<d=
iv><br></div><div>Thanks,</div><div>Terance.</div><div><br><div>On Thu, Oct=
 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt;<a rel=3D"nofollow" yma=
ilto=3D"mailto:lists@alteeve.ca" target=3D"_blank" href=3D"mailto:lists@alt=
eeve.ca">lists@alteeve.ca</a>&gt;</span> wrote:<br>=0A=0A<blockquote style=
=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">-----BE=
GIN PGP SIGNED MESSAGE-----<br>=0AHash: SHA1<br>=0A<div><br>=0AOn 10/17/201=
2 05:11 PM, Sam Wilson wrote:<br>=0A&gt; I might be totally missing somethi=
ng but unless you specify<br>=0A&gt; otherwise doesn't cman require layer 2=
 connectivity between nodes?<br>=0A&gt;<br>=0A&gt; Cheers,<br>=0A&gt;<br>=
=0A&gt; Sam<br>=0A&gt;<br>=0A<br>=0A</div>It normally uses multicast, but y=
ou can use unicast with newer<br>=0Acorosync (I've not tried this). I am no=
t sure if two nodes in separate<br>=0Asubnets works, I've also never tried =
this. I have to think it would be<br>=0Aa bad idea, given the need to fast/=
stable networking.<br>=0A<br>=0A- --<br>=0A<div>Digimer<br>=0APapers and Pr=
ojects: <a rel=3D"nofollow" target=3D"_blank" href=3D"https://alteeve.ca/w/=
">https://alteeve.ca/w/</a><br>=0AWhat if the cure for cancer is trapped in=
 the mind of a person without<br>=0Aaccess to education?<br>=0A</div>-----B=
EGIN PGP SIGNATURE-----<br>=0AVersion: GnuPG v1.4.12 (GNU/Linux)<br>=0AComm=
ent: Using GnuPG with Mozilla - http://www.enigmail.net/<br>=0A<br>=0AiQIcB=
AEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>=0Ao9u+JSSMv=
8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>=0AWQQ/P1ChkDk1F=
RdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>=0A1D6MRy8P+dOU8n+sA=
yvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>=0AeEbFKBWCjhx5i1O4lFUI7=
TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>=0AWYgsDyP9S6FQQc6+1OZwKk9E7=
cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>=0AS2y1F6am1th0Wj79z4o7Wwhhevbhm=
1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>=0AxMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTC=
ggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>=0AuaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZ=
B316/Y8TTDAyrbk7eQLUribGqra<br>=0AaRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7=
BaPFNCa/cPkMJTfKO7O19BP<br>=0APShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59=
MUwCkTp+9EOac9VRm7n<br>=0A51i6iTjsbqlEPeICmCgW<br>=0A=3DqzFE<br>=0A<div><di=
v>-----END PGP SIGNATURE-----<br>=0A<br>=0A--<br>=0ALinux-cluster mailing l=
ist<br>=0A<a rel=3D"nofollow" ymailto=3D"mailto:Linux-cluster@redhat.com" t=
arget=3D"_blank" href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@red=
hat.com</a><br>=0A<a rel=3D"nofollow" target=3D"_blank" href=3D"https://www=
.redhat.com/mailman/listinfo/linux-cluster">https://www.redhat.com/mailman/=
listinfo/linux-cluster</a><br>=0A</div></div></blockquote></div><br></div>=
=0A</div><br>-- <br>Linux-cluster mailing list<br><a rel=3D"nofollow" ymail=
to=3D"mailto:Linux-cluster@redhat.com" target=3D"_blank" href=3D"mailto:Lin=
ux-cluster@redhat.com">Linux-cluster@redhat.com</a><br><a rel=3D"nofollow" =
target=3D"_blank" href=3D"https://www.redhat.com/mailman/listinfo/linux-clu=
ster">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>=0A<br> =
</div></div></div> </div>  </div></div><br>--<br>=0ALinux-cluster mailing l=
ist<br>=0A<a rel=3D"nofollow" ymailto=3D"mailto:Linux-cluster@redhat.com" t=
arget=3D"_blank" href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@red=
hat.com</a><br>=0A<a rel=3D"nofollow" target=3D"_blank" href=3D"https://www=
.redhat.com/mailman/listinfo/linux-cluster">https://www.redhat.com/mailman/=
listinfo/linux-cluster</a><br></blockquote></div><br></div></div>=0A</div><=
br><br> </div> </div>  </div></div></div><br><br> </div> </div>  </div></bo=
dy></html>
--1778881473-2121884111-1350567013=:23919--

From terance@socialtwist.com Thu Oct 18 09:58:16 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IDwFml014374 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 09:58:16 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9IDwAwd001209
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:58:10 -0400
Received: from mail-pa0-f46.google.com (mail-pa0-f46.google.com
	[209.85.220.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9IDw96t011757
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:58:09 -0400
Received: by mail-pa0-f46.google.com with SMTP id hz1so8473386pad.33
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 06:58:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=exc1C4HtqDTeVHsckdDdnBBdqKS6uUxx4IgfGR3193s=;
	b=TfdDjswdk1zHiu0ffTpxsSZ6TJ1JQvp5ev4lBn2gO9J3MQ1TBLzYdczKzNXQ0mDzGQ
	GYj6oImE1r8vB/qnHasNrImMj9Ez/6bkk6X1JAPMz3FTGYg1iYJMShqPbc2WUwUytOm2
	rSXUIBqabAu6dHcHR57cp1WsEtIbEjA2xoyIJrGVa/4q2t9c229EJDV8IbTBa/GuRqvV
	cK2WlZHeSzIsdym26AMBvHqh6S9Q2xK+uS+licqrz5wRojXlMcCzwqg5TdYL/12MhQlR
	TfXs0iXu8Sfa8vzVXsvfUYi19BIZmdvZNAH0/7FEWia4iCHk2zceO76UbA70yEtaQnZz
	VDQQ==
MIME-Version: 1.0
Received: by 10.68.201.6 with SMTP id jw6mr19299962pbc.149.1350568689028; Thu,
	18 Oct 2012 06:58:09 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Thu, 18 Oct 2012 06:58:08 -0700 (PDT)
In-Reply-To: <1350567013.23919.YahooMailNeo@web122605.mail.ne1.yahoo.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
	<1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
	<CAK76X7TYvv0YxcaLxCeUUtPJ8gawoNsE7Dnx6Nk3J8dYLQvuLA@mail.gmail.com>
	<1350566725.99107.YahooMailNeo@web122603.mail.ne1.yahoo.com>
	<1350567013.23919.YahooMailNeo@web122605.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 19:28:08 +0530
Message-ID: <CAK76X7QvkD33fBS8jKh4Yam7qsMnXZW4WKywp4FzRu5nEZvyxw@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b15a97ff4502204cc55c6df
X-Gm-Message-State: ALoCoQnsobgIZusBNeeOmD/uHVtNWqoA8LSBRJqOmPF5bc+i4F7JptWLBR6D/CHlN9Eii7a7eJ+8
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] VB: CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 13:58:16 -0000

--047d7b15a97ff4502204cc55c6df
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, that is correct. We want to give address of both nodes in the URL and
allow failover to the other node in case the first node fails. So if the
primary node fails, the rgmanager will promote the secondary node to
primary and the application will failover to the new primary node.
Also, our nodes are in Amazon EC2 where it is not possible to have virtual
IP addresses.

Thanks,
Terance.

On Thu, Oct 18, 2012 at 7:00 PM, Binan AL Halabi <binanalhalabi@yahoo.com>w=
rote:

>
> Hi,
>
> In this case it must be application-level loadbalancing. Is It?
> I think so because i see in your link there ia a list of brokers and they
> are specified by URL so this is application level loadbalancing.
> and you can do it.
>
> The full format of the broker URL is given by this grammar:
>
> url =3D ["amqp:"][ user ["/" password] "@" ] addr ("," addr)*
> addr =3D tcp_addr / rmda_addr / ssl_addr / ...
> tcp_addr =3D ["tcp:"] host [":" port]
> rdma_addr =3D "rdma:" host [":" port]
> ssl_addr =3D "ssl:" host [":" port]'
> 	=09
>
> The URL can be virtual IP (simple case) or URL as above (This what you
> want).
>
> // Binan
>   ------------------------------
> *Fr=E5n:* Terance Dias <terance@socialtwist.com>
> *Till:* Binan AL Halabi <binanalhalabi@yahoo.com>; linux clustering <
> linux-cluster@redhat.com>
> *Skickat:* torsdag, 18 oktober 2012 14:20
> *=C4mne:* Re: [Linux-cluster] CMAN nodes in different LANs
>
> I cannot use Virtual IP addresses since my 2 networks are in different
> geographical locations and therefore the IP cannot be relocated. Is it
> possible to build this cluster without virtual IP addresses?
>
> Thanks,
> Terance.
>
> On Thu, Oct 18, 2012 at 5:06 PM, Binan AL Halabi <binanalhalabi@yahoo.com=
>wrote:
>
> Hello,
> You can build a cluster with nodes on different LANs but your resource
> manager must support Virtual IP addresses.
> As i see in your link this is supported in the resource manager.
>
> // Binan
>   ------------------------------
> *Fr=E5n:* Terance Dias <terance@socialtwist.com>
> *Till:* linux clustering <linux-cluster@redhat.com>
> *Skickat:* torsdag, 18 oktober 2012 8:44
> *=C4mne:* Re: [Linux-cluster] CMAN nodes in different LANs
>
> Sorry I did not give much context of what I'm trying to do.
>
> I'm trying to set up a cluster of nodes running apache qpid as mentioned
> in the documentation here<http://qpid.apache.org/books/trunk/AMQP-Messagi=
ng-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passive_Cluster.ht=
ml>
> The documentation says that cluster mechanism uses cman and rgmanager but
> does not directly depend on openais or corosync and does not use
> multicasting. It also says "Replication to a *disaster recovery* site can
> be handled as simply another node in the cluster, it does not require a
> separate replication mechanism" . I think by "disaster recovery site" it
> means a different network. I'm very new to clustering so I just wanted to
> know if it is possible to use cman and rgmanager with cluster nodes in
> different networks.
>
> Thanks,
> Terance.
>
> On Thu, Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 10/17/2012 05:11 PM, Sam Wilson wrote:
> > I might be totally missing something but unless you specify
> > otherwise doesn't cman require layer 2 connectivity between nodes?
> >
> > Cheers,
> >
> > Sam
> >
>
> It normally uses multicast, but you can use unicast with newer
> corosync (I've not tried this). I am not sure if two nodes in separate
> subnets works, I've also never tried this. I have to think it would be
> a bad idea, given the need to fast/stable networking.
>
> - --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://www.enigmail.net/
>
> iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
> o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
> WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
> 1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
> eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
> WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
> S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
> xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
> uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
> aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
> PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
> 51i6iTjsbqlEPeICmCgW
> =3DqzFE
> -----END PGP SIGNATURE-----
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
>
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--047d7b15a97ff4502204cc55c6df
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<span style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;font-size:1=
3px;background-color:rgb(255,255,255)">Yes, that is correct. We want to giv=
e address of both nodes in the URL and allow failover to the other node in =
case the first node fails. So if the primary node fails, the rgmanager will=
 promote the secondary node to primary and the application will failover to=
 the new primary node.</span><div style=3D"color:rgb(34,34,34);font-family:=
arial,sans-serif;font-size:13px;background-color:rgb(255,255,255)">
Also, our nodes are in Amazon EC2 where it is not possible to have virtual =
IP addresses.<br><div><br></div><div>Thanks,</div><div>Terance.</div></div>=
<br><div class=3D"gmail_quote">On Thu, Oct 18, 2012 at 7:00 PM, Binan AL Ha=
labi <span dir=3D"ltr">&lt;<a href=3D"mailto:binanalhalabi@yahoo.com" targe=
t=3D"_blank">binanalhalabi@yahoo.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div style=3D"font-size:10pt;font-famil=
y:times new roman,new york,times,serif"><br>
<div style=3D"font-family:times new roman,new york,times,serif;font-size:10=
pt"><div style=3D"font-family:times new roman,new york,times,serif;font-siz=
e:12pt"><div><div><div style=3D"font-size:10pt;font-family:times new roman,=
new york,times,serif">
Hi,<br><br>In this case it must be application-level loadbalancing. Is It? =
<br>I think so because i see in your link there ia a list of brokers and th=
ey are specified by URL so this is application level loadbalancing.<br>
and you can do it.<br><br>=20
		  The full format of the broker URL is given by this grammar:
		  <pre>url =3D [&quot;amqp:&quot;][ user [&quot;/&quot; password] &quot;@=
&quot; ] addr (&quot;,&quot; addr)*
addr =3D tcp_addr / rmda_addr / ssl_addr / ...
tcp_addr =3D [&quot;tcp:&quot;] host [&quot;:&quot; port]
rdma_addr =3D &quot;rdma:&quot; host [&quot;:&quot; port]
ssl_addr =3D &quot;ssl:&quot; host [&quot;:&quot; port]&#39;
		  </pre>The URL can be virtual IP (simple case) or URL as above (This wha=
t you want).<br><div><span><br></span></div><div>// Binan<br></div>  <div s=
tyle=3D"font-family:times new roman,new york,times,serif;font-size:10pt">
 <div style=3D"font-family:times new roman,new york,times,serif;font-size:1=
2pt"> <div dir=3D"ltr"> <font face=3D"Arial"> <hr size=3D"1">  <b><span sty=
le=3D"font-weight:bold">Fr=E5n:</span></b> Terance Dias &lt;<a href=3D"mail=
to:terance@socialtwist.com" target=3D"_blank">terance@socialtwist.com</a>&g=
t;<br>
 <b><span style=3D"font-weight:bold">Till:</span></b> Binan AL Halabi &lt;<=
a href=3D"mailto:binanalhalabi@yahoo.com" target=3D"_blank">binanalhalabi@y=
ahoo.com</a>&gt;; linux clustering &lt;<a href=3D"mailto:linux-cluster@redh=
at.com" target=3D"_blank">linux-cluster@redhat.com</a>&gt; <br>
 <b><span style=3D"font-weight:bold">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 14:20<br> <b><span style=3D"font-weight:bold">=C4mne:</span></b> Re:=
 [Linux-cluster] CMAN nodes in different LANs<br> </font> </div> <br>
<div>I cannot use Virtual IP addresses since my 2 networks are in different=
 geographical locations and therefore the IP cannot be relocated. Is it pos=
sible to build this cluster without virtual IP addresses?<div><br></div>
<div>
Thanks,</div><div>Terance.<br><div><br><div>On Thu, Oct 18, 2012 at 5:06 PM=
, Binan AL Halabi <span dir=3D"ltr">&lt;<a rel=3D"nofollow" href=3D"mailto:=
binanalhalabi@yahoo.com" target=3D"_blank">binanalhalabi@yahoo.com</a>&gt;<=
/span> wrote:<br>

<blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
eft:1ex"><div><div style=3D"font-size:10pt;font-family:times new roman,new =
york,times,serif"><div><span>Hello,</span></div><div style=3D"font-style:no=
rmal;font-size:13.3333px;background-color:transparent;font-family:times new=
 roman,new york,times,serif">

<span>You can build a cluster with nodes on different LANs but your resourc=
e manager must support Virtual IP addresses.</span></div><div style=3D"font=
-style:normal;font-size:13.3333px;background-color:transparent;font-family:=
times new roman,new york,times,serif">

<span>As i see in your link this is supported in the resource manager.</spa=
n></div><div style=3D"font-style:normal;font-size:13.3333px;background-colo=
r:transparent;font-family:times new roman,new york,times,serif"><span><br>

</span></div><div><span></span></div>// Binan  <div style=3D"font-family:ti=
mes new roman,new york,times,serif;font-size:10pt"> <div style=3D"font-fami=
ly:times new roman,new york,times,serif;font-size:12pt"> <div dir=3D"ltr"> =
<font face=3D"Arial"> <hr size=3D"1">

  <b><span style=3D"font-weight:bold">Fr=E5n:</span></b> Terance Dias &lt;<=
a rel=3D"nofollow" href=3D"mailto:terance@socialtwist.com" target=3D"_blank=
">terance@socialtwist.com</a>&gt;<br> <b><span style=3D"font-weight:bold">T=
ill:</span></b> linux clustering &lt;<a rel=3D"nofollow" href=3D"mailto:lin=
ux-cluster@redhat.com" target=3D"_blank">linux-cluster@redhat.com</a>&gt; <=
br>

 <b><span style=3D"font-weight:bold">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 8:44<br> <b><span style=3D"font-weight:bold">=C4mne:</span></b> Re: =
[Linux-cluster] CMAN nodes in different LANs<br> </font> </div><div><div>
 <br>
<div>Sorry I did not give much context of what I&#39;m trying to do.<div><b=
r></div><div>I&#39;m trying to set up a cluster of nodes running apache qpi=
d as mentioned in the documentation=A0<a rel=3D"nofollow" href=3D"http://qp=
id.apache.org/books/trunk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messagin=
g_User_Guide-Active_Passive_Cluster.html" target=3D"_blank">here</a></div>


<div>The documentation says that cluster mechanism uses cman and rgmanager =
but does not directly depend on openais or corosync and does not use multic=
asting. It also says &quot;Replication to a <i>disaster recovery</i> site c=
an be handled as
	    simply another node in the cluster, it does not require a separate rep=
lication
	    mechanism&quot; . I think by &quot;disaster recovery site&quot; it mea=
ns a different network. I&#39;m very new to clustering so I just wanted to =
know if it is possible to use cman and rgmanager with cluster nodes in diff=
erent networks.</div>


<div><br></div><div>Thanks,</div><div>Terance.</div><div><br><div>On Thu, O=
ct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt;<a rel=3D"nofollow" h=
ref=3D"mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;<=
/span> wrote:<br>


<blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
eft:1ex">-----BEGIN PGP SIGNED MESSAGE-----<br>
Hash: SHA1<br>
<div><br>
On 10/17/2012 05:11 PM, Sam Wilson wrote:<br>
&gt; I might be totally missing something but unless you specify<br>
&gt; otherwise doesn&#39;t cman require layer 2 connectivity between nodes?=
<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Sam<br>
&gt;<br>
<br>
</div>It normally uses multicast, but you can use unicast with newer<br>
corosync (I&#39;ve not tried this). I am not sure if two nodes in separate<=
br>
subnets works, I&#39;ve also never tried this. I have to think it would be<=
br>
a bad idea, given the need to fast/stable networking.<br>
<br>
- --<br>
<div>Digimer<br>
Papers and Projects: <a rel=3D"nofollow" href=3D"https://alteeve.ca/w/" tar=
get=3D"_blank">https://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div>-----BEGIN PGP SIGNATURE-----<br>
Version: GnuPG v1.4.12 (GNU/Linux)<br>
Comment: Using GnuPG with Mozilla - <a href=3D"http://www.enigmail.net/" ta=
rget=3D"_blank">http://www.enigmail.net/</a><br>
<br>
iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>
51i6iTjsbqlEPeICmCgW<br>
=3DqzFE<br>
<div><div>-----END PGP SIGNATURE-----<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a rel=3D"nofollow" href=3D"mailto:Linux-cluster@redhat.com" target=3D"_bla=
nk">Linux-cluster@redhat.com</a><br>
<a rel=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-c=
luster" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-clu=
ster</a><br>
</div></div></blockquote></div><br></div><span class=3D"HOEnZb"><font color=
=3D"#888888">
</font></span></div><span class=3D"HOEnZb"><font color=3D"#888888"><br>-- <=
br>Linux-cluster mailing list<br><a rel=3D"nofollow" href=3D"mailto:Linux-c=
luster@redhat.com" target=3D"_blank">Linux-cluster@redhat.com</a><br><a rel=
=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster=
" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</=
a><br>

<br> </font></span></div></div></div><span class=3D"HOEnZb"><font color=3D"=
#888888"> </font></span></div><span class=3D"HOEnZb"><font color=3D"#888888=
">  </font></span></div></div><span class=3D"HOEnZb"><font color=3D"#888888=
"><br>--<br>

Linux-cluster mailing list<br>
<a rel=3D"nofollow" href=3D"mailto:Linux-cluster@redhat.com" target=3D"_bla=
nk">Linux-cluster@redhat.com</a><br>
<a rel=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-c=
luster" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-clu=
ster</a><br></font></span></blockquote></div><br></div></div>
</div><br><br> </div> </div>  </div></div></div><br><br> </div> </div>  </d=
iv></div><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br>

--047d7b15a97ff4502204cc55c6df--

From fdinitto@redhat.com Mon Oct 22 03:33:30 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9M7XUHH026871 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 22 Oct 2012 03:33:30 -0400
Received: from [10.36.116.29] (ovpn-116-29.ams2.redhat.com [10.36.116.29])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9M7XNCd028370
	for <linux-cluster@redhat.com>; Mon, 22 Oct 2012 03:33:24 -0400
Message-ID: <5084F6C1.8010406@redhat.com>
Date: Mon, 22 Oct 2012 09:33:21 +0200
From: "Fabio M. Di Nitto" <fdinitto@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux i686;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
In-Reply-To: <CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
X-Enigmail-Version: 1.4.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 22 Oct 2012 07:33:30 -0000

On 10/17/2012 03:12 PM, Terance Dias wrote:
> Hi,
> 
> We're trying to create a cluster in which the nodes lie in 2 different
> LANs. Since the nodes lie in different networks, they cannot resolve the
> other node by their internal IP. So in my cluster.conf file, I've
> provided their external IPs. But now when I start CMAN service, I get
> the following error.
> 

First of all, we never tested nodes on different LANs, so you might have
issues there that we are not aware of (beside that, latency between
nodes *MUST* be < 2ms).

As for the IP/name that should work, but I recall fixing something
related not too long ago.

What version of cman did you install and which distribution/OS?

Fabio

> -----------------------------------
> 
> Starting cluster:
>    Checking Network Manager... [  OK  ]
>    Global setup... [  OK  ]
>    Loading kernel modules... [  OK  ]
>    Mounting configfs... [  OK  ]
>    Starting cman... Cannot find node name in cluster.conf
> Unable to get the configuration
> Cannot find node name in cluster.conf
> cman_tool: corosync daemon didn't start
> [FAILED]
> 
> -------------------------------------
> 
> My cluster.conf file is as below
> 
> -------------------------------------
> 
> <?xml version="1.0"?>
> <!--
> This is an example of a cluster.conf file to run qpidd HA under rgmanager.
> 
> NOTE: fencing is not shown, you must configure fencing appropriately for
> your cluster.
> -->
> 
> <cluster name="test-cluster" config_version="18">
>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>        for quorum. -->
>   <clusternodes>
>     <clusternode name="/external-ip-1/" nodeid="1"/>
>     <clusternode name="/external-ip-2/" nodeid="2"/>
>   </clusternodes>
>   <cman two_node="1" expected_votes="1" transport="udpu">
>   </cman>
>   <!-- Resouce Manager configuration. -->
>   <rm>
>     <!--
>         There is a failoverdomain for each node containing just that node.
>         This lets us stipulate that the qpidd service should always run
> on each node.
>     -->
>     <failoverdomains>
>       <failoverdomain name="east-domain" restricted="1">
>         <failoverdomainnode name="/external-ip-1/"/>
>       </failoverdomain>
>       <failoverdomain name="west-domain" restricted="1">
>         <failoverdomainnode name="/external-ip-2/"/>
>       </failoverdomain>
>     </failoverdomains>
> 
>     <resources>
>       <!-- This script starts a qpidd broker acting as a backup. -->
>       <script file="/usr/local/etc/init.d/qpidd" name="qpidd"/>
> 
>       <!-- This script promotes the qpidd broker on this node to
> primary. -->
>       <script file="/usr/local/etc/init.d/qpidd-primary"
> name="qpidd-primary"/>
>     </resources>
> 
>     <!-- There is a qpidd service on each node, it should be restarted
> if it fails. -->
>     <service name="east-qpidd-service" domain="east-domain"
> recovery="restart">
>       <script ref="qpidd"/>
>     </service>
>     <service name="west-qpidd-service" domain="west-domain"
> recovery="restart">
>       <script ref="qpidd"/>
>     </service>
> 
>     <!-- There should always be a single qpidd-primary service, it can
> run on any node. -->
>     <service name="qpidd-primary-service" autostart="1" exclusive="0"
> recovery="relocate">
>       <script ref="qpidd-primary"/>
>     </service>
>   </rm>
> </cluster>
> ------------------------------------------------
> 
> Thanks,
> Terance
> 
> 
> 

From Tom_Dryden@BUDCO.com Tue Oct 23 16:35:34 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9NKZYnj001511 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 23 Oct 2012 16:35:34 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9NKZTeA015385
	for <linux-cluster@redhat.com>; Tue, 23 Oct 2012 16:35:29 -0400
Received: from mail1.budco.com (MAIL1.BUDCO.COM [198.178.223.235])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9NKZR7t031042
	for <linux-cluster@redhat.com>; Tue, 23 Oct 2012 16:35:27 -0400
Received: from BPMC-G0-EX1.budcotdc.net (bpmc-g2.budco.com [198.180.209.212])
	by mail1.budco.com (MOS 4.1.8-GA) with ESMTP id AIE15113;
	Tue, 23 Oct 2012 16:35:25 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CDB15D.D15B6BAC"
Date: Tue, 23 Oct 2012 16:34:36 -0400
Message-ID: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Set time on cluster
Thread-Index: Ac2xXBwl6Bd4B1UBS5i6AP0tE+6A/g==
From: "Dryden, Tom" <Tom_Dryden@BUDCO.com>
To: <linux-cluster@redhat.com>
X-Junkmail-Status: score=10/49, host=mail1.budco.com
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A020204.5086FF8E.0114,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22, dmn=2009-09-10 00:05:08,
	mode=single engine
X-Junkmail-IWF: false
X-Mirapoint-RAPID-Raw: score=unknown(0),
	refid=str=0001.0A020204.5086FF8E.0114,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22,
	dmn=2009-09-10 00:05:08
X-Mirapoint-Loop-Id: 5365a049b2f23175e9cae694a5de26e1
X-RedHat-Spam-Score: -2.635  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD,SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Set time on cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 23 Oct 2012 20:35:35 -0000

This is a multi-part message in MIME format.

------_=_NextPart_001_01CDB15D.D15B6BAC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

Hello All

I had a problem when time adjusted that caused node evictions.   The
sequence of events are in the log clip below.=20

 The events were,=20

1. ntpd restarted

2. ntpd adjusted time  +155 sec

3. openais thinks it has lost communication and begins to evict nodes.

=20

My question is how do I adjust the time without causing the cluster to
get confused?

=20

Thanks for your assistance.=20

Tom

=20

=20

LOG CLIP:

Oct 22 16:05:02 bpas-j5 ntpd[27399]: Listening on interface bond0:9,
172.26.5.21#123 Enabled

Oct 22 16:05:02 bpas-j5 ntpd[27399]: kernel time sync status 0040

Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency initialized 40.201 PPM
from /var/lib/ntp/drift

Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to 169.229.70.201,
stratum 3

Oct 22 16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s

Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync enabled 0001

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] The token was lost in the
OPERATIONAL state.

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Receive multicast socket
recv buffer size (288000 bytes).

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Transmit multicast socket
send buffer size (262142 bytes).

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
from 2.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
from 0.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Creating commit token
because I am the rep.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving state aru 33 high
seq received 33

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id
for ring 1f48

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering COMMIT state.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering RECOVERY state.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member
172.26.5.11:

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] previous ring seq 8004
rep 172.26.5.11

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] aru 33 high delivered 33
received flag 1

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Did not need to originate
any messages in recovery.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Sending initial ORF token

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] CLM CONFIGURATION CHANGE

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] New Configuration:

Oct 22 16:10:55 bpas-j5 kernel: dlm: closing connection to node 2

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.5.11)

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] Members Left:

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.6.11)

=20


------_=_NextPart_001_01CDB15D.D15B6BAC
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Hello =
All<o:p></o:p></p><p class=3DMsoNormal>I had a problem when time =
adjusted that caused node evictions.&nbsp;&nbsp; The sequence of events =
are in the log clip below. <o:p></o:p></p><p class=3DMsoNormal>&nbsp;The =
events were, <o:p></o:p></p><p class=3DMsoNormal>1. ntpd =
restarted<o:p></o:p></p><p class=3DMsoNormal>2. ntpd adjusted time&nbsp; =
+155 sec<o:p></o:p></p><p class=3DMsoNormal>3. openais thinks it has =
lost communication and begins to evict nodes.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>My question =
is how do I adjust the time without causing the cluster to get =
confused?<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Thanks for your assistance. <o:p></o:p></p><p =
class=3DMsoNormal>Tom<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>LOG =
CLIP:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:05:02 bpas-j5 =
ntpd[27399]: Listening on interface bond0:9, 172.26.5.21#123 =
Enabled<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:05:02 bpas-j5 =
ntpd[27399]: kernel time sync status 0040<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency =
initialized 40.201 PPM from /var/lib/ntp/drift<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to =
169.229.70.201, stratum 3<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync =
enabled 0001<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 =
openais[7238]: [TOTEM] The token was lost in the OPERATIONAL =
state.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 =
openais[7238]: [TOTEM] Receive multicast socket recv buffer size (288000 =
bytes).<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 =
openais[7238]: [TOTEM] Transmit multicast socket send buffer size =
(262142 bytes).<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 =
bpas-j5 openais[7238]: [TOTEM] entering GATHER state from =
2.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] entering GATHER state from 0.<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] =
Creating commit token because I am the rep.<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving =
state aru 33 high seq received 33<o:p></o:p></p><p class=3DMsoNormal>Oct =
22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id for =
ring 1f48<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] entering COMMIT state.<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] =
entering RECOVERY state.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member =
172.26.5.11:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] previous ring seq 8004 rep =
172.26.5.11<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] aru 33 high delivered 33 received flag =
1<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] Did not need to originate any messages in =
recovery.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] Sending initial ORF token<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; ] =
CLM CONFIGURATION CHANGE<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; ] New =
Configuration:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 =
bpas-j5 kernel: dlm: closing connection to node 2<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; =
]&nbsp; r(0) ip(172.26.5.11)<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; ] Members =
Left:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [CLM&nbsp; ]&nbsp; r(0) ip(172.26.6.11)<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></body></html>
------_=_NextPart_001_01CDB15D.D15B6BAC--

From jfriesse@redhat.com Wed Oct 24 03:24:28 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9O7OSfp014242 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 03:24:28 -0400
Received: from daemon.usersys.redhat.com (dhcp-1-240.brq.redhat.com
	[10.34.1.240])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9O7OMGq020317; Wed, 24 Oct 2012 03:24:22 -0400
Message-ID: <508797A6.7090307@redhat.com>
Date: Wed, 24 Oct 2012 09:24:22 +0200
From: Jan Friesse <jfriesse@redhat.com>
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64;
	rv:16.0) Gecko/20121015 Firefox/16.0 SeaMonkey/2.13.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
In-Reply-To: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-loop: linux-cluster@redhat.com
Cc: "Dryden, Tom" <Tom_Dryden@BUDCO.com>
Subject: Re: [Linux-cluster] Set time on cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 07:24:28 -0000

We have support for monotonic timer since 0.80.6-33 (so RHEL >= 5.8).
This should solve problems you are describing. What version are you
using? If it's older then 0.80.6-33, try upgrade.

Regards,
  Honza

Dryden, Tom napsal(a):
>  
> 
> Hello All
> 
> I had a problem when time adjusted that caused node evictions.   The
> sequence of events are in the log clip below. 
> 
>  The events were, 
> 
> 1. ntpd restarted
> 
> 2. ntpd adjusted time  +155 sec
> 
> 3. openais thinks it has lost communication and begins to evict nodes.
> 
>  
> 
> My question is how do I adjust the time without causing the cluster to
> get confused?
> 
>  
> 
> Thanks for your assistance. 
> 
> Tom
> 
>  
> 
>  
> 
> LOG CLIP:
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: Listening on interface bond0:9,
> 172.26.5.21#123 Enabled
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: kernel time sync status 0040
> 
> Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency initialized 40.201 PPM
> from /var/lib/ntp/drift
> 
> Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to 169.229.70.201,
> stratum 3
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync enabled 0001
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] The token was lost in the
> OPERATIONAL state.
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Receive multicast socket
> recv buffer size (288000 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Transmit multicast socket
> send buffer size (262142 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
> from 2.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
> from 0.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Creating commit token
> because I am the rep.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving state aru 33 high
> seq received 33
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id
> for ring 1f48
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering COMMIT state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering RECOVERY state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member
> 172.26.5.11:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] previous ring seq 8004
> rep 172.26.5.11
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] aru 33 high delivered 33
> received flag 1
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Did not need to originate
> any messages in recovery.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Sending initial ORF token
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] CLM CONFIGURATION CHANGE
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] New Configuration:
> 
> Oct 22 16:10:55 bpas-j5 kernel: dlm: closing connection to node 2
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.5.11)
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] Members Left:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.6.11)
> 
>  
> 
> 
> 
> 

From Tom_Dryden@BUDCO.com Wed Oct 24 10:06:13 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OE6CPq005721 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 10:06:13 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OE665W008937; Wed, 24 Oct 2012 10:06:07 -0400
Received: from mail1.budco.com (MAIL1.BUDCO.COM [198.178.223.235])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OE649X006741;
	Wed, 24 Oct 2012 10:06:04 -0400
Received: from BPMC-G0-EX1.budcotdc.net (bpmc-g2.budco.com [198.180.209.212])
	by mail1.budco.com (MOS 4.1.8-GA) with ESMTP id AIE22297;
	Wed, 24 Oct 2012 10:06:03 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Date: Wed, 24 Oct 2012 10:05:04 -0400
Message-ID: <1E7F581BEF7B8444A6D29997EECCC66C024ECF24@BPMC-G0-EX1.budcotdc.net>
In-Reply-To: <508797A6.7090307@redhat.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Linux-cluster] Set time on cluster
Thread-Index: Ac2xuJt6u/zfeJa1SBmLDTSPVV1UCQAN9fkw
References: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
	<508797A6.7090307@redhat.com>
From: "Dryden, Tom" <Tom_Dryden@BUDCO.com>
To: "Jan Friesse" <jfriesse@redhat.com>,
	"linux clustering" <linux-cluster@redhat.com>
X-Junkmail-Status: score=10/49, host=mail1.budco.com
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A02020B.5087F5CC.0003,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22, dmn=2009-09-10 00:05:08,
	mode=single engine
X-Junkmail-IWF: false
X-Mirapoint-RAPID-Raw: score=unknown(0),
	refid=str=0001.0A02020B.5087F5CC.0003,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22,
	dmn=2009-09-10 00:05:08
X-Mirapoint-Loop-Id: 75a379d42cb11772cce6de55eb86b9b4
X-RedHat-Spam-Score: -2.638  (BAYES_00,RP_MATCHES_RCVD,SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9OE6CPq005721
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Set time on cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 14:06:13 -0000

Thank you, we will look into upgrading.



-----Original Message-----
From: Jan Friesse [mailto:jfriesse@redhat.com] 
Sent: Wednesday, October 24, 2012 3:24 AM
To: linux clustering
Cc: Dryden, Tom
Subject: Re: [Linux-cluster] Set time on cluster

We have support for monotonic timer since 0.80.6-33 (so RHEL >= 5.8).
This should solve problems you are describing. What version are you
using? If it's older then 0.80.6-33, try upgrade.

Regards,
  Honza

Dryden, Tom napsal(a):
>  
> 
> Hello All
> 
> I had a problem when time adjusted that caused node evictions.   The
> sequence of events are in the log clip below. 
> 
>  The events were,
> 
> 1. ntpd restarted
> 
> 2. ntpd adjusted time  +155 sec
> 
> 3. openais thinks it has lost communication and begins to evict nodes.
> 
>  
> 
> My question is how do I adjust the time without causing the cluster to

> get confused?
> 
>  
> 
> Thanks for your assistance. 
> 
> Tom
> 
>  
> 
>  
> 
> LOG CLIP:
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: Listening on interface bond0:9,
> 172.26.5.21#123 Enabled
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: kernel time sync status 0040
> 
> Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency initialized 40.201 PPM 
> from /var/lib/ntp/drift
> 
> Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to 169.229.70.201, 
> stratum 3
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync enabled 0001
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] The token was lost in 
> the OPERATIONAL state.
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Receive multicast 
> socket recv buffer size (288000 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Transmit multicast 
> socket send buffer size (262142 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] entering GATHER state 
> from 2.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering GATHER state 
> from 0.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Creating commit token 
> because I am the rep.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving state aru 33 
> high seq received 33
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id

> for ring 1f48
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering COMMIT state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering RECOVERY
state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member
> 172.26.5.11:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] previous ring seq 8004 
> rep 172.26.5.11
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] aru 33 high delivered 
> 33 received flag 1
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Did not need to 
> originate any messages in recovery.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Sending initial ORF 
> token
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] CLM CONFIGURATION 
> CHANGE
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] New Configuration:
> 
> Oct 22 16:10:55 bpas-j5 kernel: dlm: closing connection to node 2
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.5.11)
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] Members Left:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.6.11)
> 
>  
> 
> 
> 
> 


From a.holway@syseleven.de Wed Oct 24 10:39:03 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OEd3Ob030388 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 10:39:03 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OEcvYi024555
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 10:38:58 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OEcsQK019211
	for <Linux-cluster@redhat.com>; Wed, 24 Oct 2012 10:38:55 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from ws148.sys11.net ([176.74.56.148])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for Linux-cluster@redhat.com; Wed, 24 Oct 2012 16:38:52 +0200
From: Andrew Holway <a.holway@syseleven.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Wed, 24 Oct 2012 16:38:46 +0200
Message-Id: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
To: linux clustering <Linux-cluster@redhat.com>
Mime-Version: 1.0 (Apple Message framework v1278)
X-RedHat-Spam-Score: -3.338  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 14:39:03 -0000

Hello,

Ive been doing some testing.
I have an iSCSI device that I have set up with CLVM. 
I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
I have 12 KVM machines per physical machine with a total of 48 VMs.
Each KVM is mounted on a LV.
The performance is not very good.
I am not a fish.

Could CLVM be the bottleneck? Especially with so many LV's?
I though I would ask before I set up 48 physical luns on the iSCSI device :)

Thanks,

Andrew




From heiko.nardmann@itechnical.de Wed Oct 24 11:01:20 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OF1JUI000349 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 11:01:19 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9OF1B2q007716
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:01:11 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de [212.227.17.10])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OF12U7029590
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:01:10 -0400
Received: from linux-imsd.site (business-178-015-194-126.static.arcor-ip.net
	[178.15.194.126])
	by mrelayeu.kundenserver.de (node=mrbap3) with ESMTP (Nemesis)
	id 0Lgoo2-1T6seJ27B0-00oHXP; Wed, 24 Oct 2012 17:01:01 +0200
Message-ID: <508802AF.1050504@itechnical.de>
Date: Wed, 24 Oct 2012 17:01:03 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: Andrew Holway <a.holway@syseleven.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
In-Reply-To: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:L/r/IA8yM3mkrfApWJrZUHYpxY9fNrB1eh57I7goWH6
	XQ6pWWiEsGOAgrU1qwdv+FHmolf/NCpQ6oVfGuqOXRsVvAxQB4
	Q/6rpvhweXf/h6hDAo0tcXANlm1mggkZG/5/yyTye2U8Hf9san
	/mN2xHfsztbpNLYL8NLHmVdMxZxridn1SSeTBxKKcG9v/80lyu
	GuUE+M7tx0N6omG8Y5aAiRTE0V1AehUcvKYphJSv0Li08wOuKe
	gk8Z7EKhl5EcSuooV9cOZ47QZKmK5HFo/SEEZEYu1vkP557lS7
	klo3zMRWAvQlgRC2WJxkOaEEFU3ebgxheBHGF4uo0V3Kl0toRL
	9v9VXlZ1eCxXfhnXJK03/0gS7+S+Cw+uVnq7KLl4l
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 15:01:20 -0000

Am 24.10.2012 16:38, schrieb Andrew Holway:
> Hello,
>
> Ive been doing some testing.
> I have an iSCSI device that I have set up with CLVM. 
> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
> I have 12 KVM machines per physical machine with a total of 48 VMs.
> Each KVM is mounted on a LV.
> The performance is not very good.
> I am not a fish.
>
> Could CLVM be the bottleneck? Especially with so many LV's?
> I though I would ask before I set up 48 physical luns on the iSCSI device :)
>
> Thanks,
>
> Andrew
>
>
>
>
Looks like you should open a ticket with RedHat and give them/us some
more infos (including expected perf. vs. experienced perf., cluster
configuration) ...

Kind regards,

    Heiko

From a.holway@syseleven.de Wed Oct 24 11:27:42 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OFRgfL004976 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 11:27:42 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9OFRbao015361
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:27:37 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OFRYTj012298
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:27:35 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from ws148.sys11.net ([176.74.56.148])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits));
	Wed, 24 Oct 2012 17:27:32 +0200
Mime-Version: 1.0 (Apple Message framework v1278)
Content-Type: text/plain; charset=iso-8859-1
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <508802AF.1050504@itechnical.de>
Date: Wed, 24 Oct 2012 17:27:27 +0200
Message-Id: <0EEAC8C7-D4D5-4570-9613-78EA46BDE048@syseleven.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
	<508802AF.1050504@itechnical.de>
To: Heiko Nardmann <heiko.nardmann@itechnical.de>
X-RedHat-Spam-Score: -3.338  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9OFRgfL004976
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 15:27:42 -0000


On Oct 24, 2012, at 5:01 PM, Heiko Nardmann wrote:

> Am 24.10.2012 16:38, schrieb Andrew Holway:
>> Hello,
>> 
>> Ive been doing some testing.
>> I have an iSCSI device that I have set up with CLVM. 
>> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
>> I have 12 KVM machines per physical machine with a total of 48 VMs.
>> Each KVM is mounted on a LV.
>> The performance is not very good.
>> I am not a fish.
>> 
>> Could CLVM be the bottleneck? Especially with so many LV's?
>> I though I would ask before I set up 48 physical luns on the iSCSI device :)
>> 
>> Thanks,
>> 
>> Andrew
>> 
>> 
>> 
>> 
> Looks like you should open a ticket with RedHat and give them/us some
> more infos (including expected perf. vs. experienced perf., cluster
> configuration) ...

That would be tricky! We don't have Redhat subscription!

In any case, Im just interested if it *could* be a problem. I will have to test this with no CLVM before I can open a ticket somewhere.

Ta,

Andrew

> 
> Kind regards,
> 
>    Heiko
> 



From lmb@suse.de Thu Oct 25 07:27:06 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9PBR6NY002292 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 25 Oct 2012 07:27:06 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9PBR1KJ022561
	for <linux-cluster@redhat.com>; Thu, 25 Oct 2012 07:27:01 -0400
Received: from mx.in-addr.de (gate.in-addr.de [212.8.193.158])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9PBQqf4031634
	for <linux-cluster@redhat.com>; Thu, 25 Oct 2012 07:27:00 -0400
Received: by mx.in-addr.de (mx.in-addr.de, from userid 10)
	id 0EBFE16E90; Thu, 25 Oct 2012 13:26:50 +0200 (CEST)
Received: by hermes.in-addr.de (Postfix, from userid 500)
	id 71D7DE1390; Thu, 25 Oct 2012 13:25:37 +0200 (CEST)
Date: Thu, 25 Oct 2012 13:25:37 +0200
From: Lars Marowsky-Bree <lmb@suse.de>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <20121025112537.GI22929@suse.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
X-Ctuhulu: HASTUR
User-Agent: Mutt/1.5.21 (2011-07-01)
X-RedHat-Spam-Score: -0.9  (BAYES_00,FRT_OFFER2)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 25 Oct 2012 11:27:06 -0000

On 2012-10-24T16:38:46, Andrew Holway <a.holway@syseleven.de> wrote:

> Hello,
> 
> Ive been doing some testing.
> I have an iSCSI device that I have set up with CLVM. 
> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
> I have 12 KVM machines per physical machine with a total of 48 VMs.
> Each KVM is mounted on a LV.
> The performance is not very good.
> I am not a fish.
> 
> Could CLVM be the bottleneck? Especially with so many LV's?

cLVM2 pretty much gets out of the way, except for the
adminstrative/management tasks like adding/deleting/resizing LVs. It has
almost no measurable impact on the IO latency/throughput of the LVs.

It is more likely you're looking at a bandwidth/latency problem on the
iSCSI side. Is the connection clogged? Server side overloaded? Network?

Regards,
    Lars

-- 
Architect Storage/HA
SUSE LINUX Products GmbH, GF: Jeff Hawn, Jennifer Guild, Felix Imendrffer, HRB 21284 (AG Nrnberg)
"Experience is the name everyone gives to their mistakes." -- Oscar Wilde

From swhiteho@redhat.com Thu Oct 25 08:22:18 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9PCMILW026066 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 25 Oct 2012 08:22:18 -0400
Received: from [10.11.10.69] (vpn-10-69.rdu.redhat.com [10.11.10.69])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9PCMBdJ013459; Thu, 25 Oct 2012 08:22:12 -0400
From: Steven Whitehouse <swhiteho@redhat.com>
To: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <0EEAC8C7-D4D5-4570-9613-78EA46BDE048@syseleven.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
	<508802AF.1050504@itechnical.de>
	<0EEAC8C7-D4D5-4570-9613-78EA46BDE048@syseleven.de>
Content-Type: text/plain; charset="UTF-8"
Organization: Red Hat UK Ltd
Date: Thu, 25 Oct 2012 13:21:22 +0100
Message-ID: <1351167682.2710.35.camel@menhir>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 25 Oct 2012 12:22:19 -0000

Hi,

On Wed, 2012-10-24 at 17:27 +0200, Andrew Holway wrote:
> On Oct 24, 2012, at 5:01 PM, Heiko Nardmann wrote:
> 
> > Am 24.10.2012 16:38, schrieb Andrew Holway:
> >> Hello,
> >> 
> >> Ive been doing some testing.
> >> I have an iSCSI device that I have set up with CLVM. 
> >> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
> >> I have 12 KVM machines per physical machine with a total of 48 VMs.
> >> Each KVM is mounted on a LV.
> >> The performance is not very good.
> >> I am not a fish.
> >> 
> >> Could CLVM be the bottleneck? Especially with so many LV's?
> >> I though I would ask before I set up 48 physical luns on the iSCSI device :)
> >> 
> >> Thanks,
> >> 
> >> Andrew
> >> 
> >> 
> >> 
> >> 
> > Looks like you should open a ticket with RedHat and give them/us some
> > more infos (including expected perf. vs. experienced perf., cluster
> > configuration) ...
> 
> That would be tricky! We don't have Redhat subscription!
> 
> In any case, Im just interested if it *could* be a problem. I will have to test this with no CLVM before I can open a ticket somewhere.
> 
> Ta,
> 
> Andrew
> 

What is it that is not working at the speed that you think it should?
Are you looking at disk throughput, or time taken to scan the LVs or
something else? Does the throughput improve if you use the iSCSI LUN
directly?

I think we'd need more information before this can be solved. Also I'd
suggest asking on the LVM list as there may be more people there who can
help.

Unless this is specifically about the cluster bit of CLVM (and the
cluster bit is only in use when configuration changes are made, or when
things are scanned at boot time) then that may be a better bet for
finding a solution,

Steve.



From terance@socialtwist.com Mon Oct 29 01:24:45 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9T5OjV4024613 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 29 Oct 2012 01:24:45 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9T5OeGw018409
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 01:24:40 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9T5OKP3021653
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 01:24:39 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so4045812pbb.33
	for <linux-cluster@redhat.com>; Sun, 28 Oct 2012 22:24:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=7vdbMjbNsxGXIe6Xwq3fHls4z/XBiRHYbwQJ9UtXQbo=;
	b=YBxBOriMSoY4yBabgrvpv0h8X8OOS9HeMGGyBdr3lbUCZCy5ahlCIJrPEioljcP4Ze
	pj1wZoOzFCq4ifCcq7EV8Ng2qJlmpMSX2v5rL5Sm8N4HYnroO15JDgvhdj6Gn1xeaOGi
	65yY4Zs2JjXBhWoZrSxGZVuPL2tw/sokbfld/OzN7hGPMqfqqqPIuB6ATP2x3dDqumhl
	8eWcUeX+ZXQQF7SMyn8p5AoTcJzMtXILtXOp9d8dbb8+yShSzWzbal76z2zgfFbDlu54
	oet5tOGlVpP/pt04B9cQjWoT4gs2Xsm6F23CEDn5XVkD5NYBx6oUM2dIiyjeh9YmoDFj
	bRBA==
MIME-Version: 1.0
Received: by 10.68.125.230 with SMTP id mt6mr89918204pbb.110.1351488278996;
	Sun, 28 Oct 2012 22:24:38 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Sun, 28 Oct 2012 22:24:38 -0700 (PDT)
In-Reply-To: <5084F6C1.8010406@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<5084F6C1.8010406@redhat.com>
Date: Mon, 29 Oct 2012 10:54:38 +0530
Message-ID: <CAK76X7ThtrV9XZoH2rQkzaSV0wEHKEuiFuE278igOtw6RcO_Eg@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b2e4446c9a89e04cd2be274
X-Gm-Message-State: ALoCoQkIKM0U8jFvn9bBKo63w6KJySbZNWXR2dZ094uuHZ4KR5ykkgH91lhc8P7hJxu2ArkoEDuz
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 29 Oct 2012 05:24:46 -0000

--047d7b2e4446c9a89e04cd2be274
Content-Type: text/plain; charset=ISO-8859-1

Thanks for your reply Fabio. I think the problem may be at our end. Our
infrastructure is on Amazon EC2 and it turns out that the interfaces file
of a EC2 node does not have reference to its public IP address.

On Mon, Oct 22, 2012 at 1:03 PM, Fabio M. Di Nitto <fdinitto@redhat.com>wrote:

> On 10/17/2012 03:12 PM, Terance Dias wrote:
> > Hi,
> >
> > We're trying to create a cluster in which the nodes lie in 2 different
> > LANs. Since the nodes lie in different networks, they cannot resolve the
> > other node by their internal IP. So in my cluster.conf file, I've
> > provided their external IPs. But now when I start CMAN service, I get
> > the following error.
> >
>
> First of all, we never tested nodes on different LANs, so you might have
> issues there that we are not aware of (beside that, latency between
> nodes *MUST* be < 2ms).
>
> As for the IP/name that should work, but I recall fixing something
> related not too long ago.
>
> What version of cman did you install and which distribution/OS?
>
> Fabio
>
> > -----------------------------------
> >
> > Starting cluster:
> >    Checking Network Manager... [  OK  ]
> >    Global setup... [  OK  ]
> >    Loading kernel modules... [  OK  ]
> >    Mounting configfs... [  OK  ]
> >    Starting cman... Cannot find node name in cluster.conf
> > Unable to get the configuration
> > Cannot find node name in cluster.conf
> > cman_tool: corosync daemon didn't start
> > [FAILED]
> >
> > -------------------------------------
> >
> > My cluster.conf file is as below
> >
> > -------------------------------------
> >
> > <?xml version="1.0"?>
> > <!--
> > This is an example of a cluster.conf file to run qpidd HA under
> rgmanager.
> >
> > NOTE: fencing is not shown, you must configure fencing appropriately for
> > your cluster.
> > -->
> >
> > <cluster name="test-cluster" config_version="18">
> >   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
> >        for quorum. -->
> >   <clusternodes>
> >     <clusternode name="/external-ip-1/" nodeid="1"/>
> >     <clusternode name="/external-ip-2/" nodeid="2"/>
> >   </clusternodes>
> >   <cman two_node="1" expected_votes="1" transport="udpu">
> >   </cman>
> >   <!-- Resouce Manager configuration. -->
> >   <rm>
> >     <!--
> >         There is a failoverdomain for each node containing just that
> node.
> >         This lets us stipulate that the qpidd service should always run
> > on each node.
> >     -->
> >     <failoverdomains>
> >       <failoverdomain name="east-domain" restricted="1">
> >         <failoverdomainnode name="/external-ip-1/"/>
> >       </failoverdomain>
> >       <failoverdomain name="west-domain" restricted="1">
> >         <failoverdomainnode name="/external-ip-2/"/>
> >       </failoverdomain>
> >     </failoverdomains>
> >
> >     <resources>
> >       <!-- This script starts a qpidd broker acting as a backup. -->
> >       <script file="/usr/local/etc/init.d/qpidd" name="qpidd"/>
> >
> >       <!-- This script promotes the qpidd broker on this node to
> > primary. -->
> >       <script file="/usr/local/etc/init.d/qpidd-primary"
> > name="qpidd-primary"/>
> >     </resources>
> >
> >     <!-- There is a qpidd service on each node, it should be restarted
> > if it fails. -->
> >     <service name="east-qpidd-service" domain="east-domain"
> > recovery="restart">
> >       <script ref="qpidd"/>
> >     </service>
> >     <service name="west-qpidd-service" domain="west-domain"
> > recovery="restart">
> >       <script ref="qpidd"/>
> >     </service>
> >
> >     <!-- There should always be a single qpidd-primary service, it can
> > run on any node. -->
> >     <service name="qpidd-primary-service" autostart="1" exclusive="0"
> > recovery="relocate">
> >       <script ref="qpidd-primary"/>
> >     </service>
> >   </rm>
> > </cluster>
> > ------------------------------------------------
> >
> > Thanks,
> > Terance
> >
> >
> >
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--047d7b2e4446c9a89e04cd2be274
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for your reply Fabio. I think the problem may be at our end. Our inf=
rastructure is on Amazon EC2 and it turns out that the interfaces file of a=
 EC2 node does not have reference to its public IP address.<br><br><div cla=
ss=3D"gmail_quote">
On Mon, Oct 22, 2012 at 1:03 PM, Fabio M. Di Nitto <span dir=3D"ltr">&lt;<a=
 href=3D"mailto:fdinitto@redhat.com" target=3D"_blank">fdinitto@redhat.com<=
/a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:=
0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<div class=3D"im">On 10/17/2012 03:12 PM, Terance Dias wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; We&#39;re trying to create a cluster in which the nodes lie in 2 diffe=
rent<br>
&gt; LANs. Since the nodes lie in different networks, they cannot resolve t=
he<br>
&gt; other node by their internal IP. So in my cluster.conf file, I&#39;ve<=
br>
&gt; provided their external IPs. But now when I start CMAN service, I get<=
br>
&gt; the following error.<br>
&gt;<br>
<br>
</div>First of all, we never tested nodes on different LANs, so you might h=
ave<br>
issues there that we are not aware of (beside that, latency between<br>
nodes *MUST* be &lt; 2ms).<br>
<br>
As for the IP/name that should work, but I recall fixing something<br>
related not too long ago.<br>
<br>
What version of cman did you install and which distribution/OS?<br>
<br>
Fabio<br>
<div class=3D"im"><br>
&gt; -----------------------------------<br>
&gt;<br>
&gt; Starting cluster:<br>
&gt; =A0 =A0Checking Network Manager... [ =A0OK =A0]<br>
&gt; =A0 =A0Global setup... [ =A0OK =A0]<br>
&gt; =A0 =A0Loading kernel modules... [ =A0OK =A0]<br>
&gt; =A0 =A0Mounting configfs... [ =A0OK =A0]<br>
&gt; =A0 =A0Starting cman... Cannot find node name in cluster.conf<br>
&gt; Unable to get the configuration<br>
&gt; Cannot find node name in cluster.conf<br>
&gt; cman_tool: corosync daemon didn&#39;t start<br>
&gt; [FAILED]<br>
&gt;<br>
&gt; -------------------------------------<br>
&gt;<br>
&gt; My cluster.conf file is as below<br>
&gt;<br>
&gt; -------------------------------------<br>
&gt;<br>
&gt; &lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&gt; &lt;!--<br>
&gt; This is an example of a cluster.conf file to run qpidd HA under rgmana=
ger.<br>
&gt;<br>
&gt; NOTE: fencing is not shown, you must configure fencing appropriately f=
or<br>
&gt; your cluster.<br>
&gt; --&gt;<br>
&gt;<br>
&gt; &lt;cluster name=3D&quot;test-cluster&quot; config_version=3D&quot;18&=
quot;&gt;<br>
&gt; =A0 &lt;!-- The cluster has 2 nodes. Each has a unique nodid and one v=
ote<br>
&gt; =A0 =A0 =A0 =A0for quorum. --&gt;<br>
&gt; =A0 &lt;clusternodes&gt;<br>
</div>&gt; =A0 =A0 &lt;clusternode name=3D&quot;/external-ip-1/&quot; nodei=
d=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 &lt;clusternode name=3D&quot;/external-ip-2/&quot; nodeid=3D&q=
uot;2&quot;/&gt;<br>
<div class=3D"im">&gt; =A0 &lt;/clusternodes&gt;<br>
&gt; =A0 &lt;cman two_node=3D&quot;1&quot; expected_votes=3D&quot;1&quot; t=
ransport=3D&quot;udpu&quot;&gt;<br>
&gt; =A0 &lt;/cman&gt;<br>
&gt; =A0 &lt;!-- Resouce Manager configuration. --&gt;<br>
&gt; =A0 &lt;rm&gt;<br>
&gt; =A0 =A0 &lt;!--<br>
&gt; =A0 =A0 =A0 =A0 There is a failoverdomain for each node containing jus=
t that node.<br>
&gt; =A0 =A0 =A0 =A0 This lets us stipulate that the qpidd service should a=
lways run<br>
&gt; on each node.<br>
&gt; =A0 =A0 --&gt;<br>
&gt; =A0 =A0 &lt;failoverdomains&gt;<br>
&gt; =A0 =A0 =A0 &lt;failoverdomain name=3D&quot;east-domain&quot; restrict=
ed=3D&quot;1&quot;&gt;<br>
</div>&gt; =A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quot;/external-ip=
-1/&quot;/&gt;<br>
<div class=3D"im">&gt; =A0 =A0 =A0 &lt;/failoverdomain&gt;<br>
&gt; =A0 =A0 =A0 &lt;failoverdomain name=3D&quot;west-domain&quot; restrict=
ed=3D&quot;1&quot;&gt;<br>
</div>&gt; =A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quot;/external-ip=
-2/&quot;/&gt;<br>
<div class=3D"HOEnZb"><div class=3D"h5">&gt; =A0 =A0 =A0 &lt;/failoverdomai=
n&gt;<br>
&gt; =A0 =A0 &lt;/failoverdomains&gt;<br>
&gt;<br>
&gt; =A0 =A0 &lt;resources&gt;<br>
&gt; =A0 =A0 =A0 &lt;!-- This script starts a qpidd broker acting as a back=
up. --&gt;<br>
&gt; =A0 =A0 =A0 &lt;script file=3D&quot;/usr/local/etc/init.d/qpidd&quot; =
name=3D&quot;qpidd&quot;/&gt;<br>
&gt;<br>
&gt; =A0 =A0 =A0 &lt;!-- This script promotes the qpidd broker on this node=
 to<br>
&gt; primary. --&gt;<br>
&gt; =A0 =A0 =A0 &lt;script file=3D&quot;/usr/local/etc/init.d/qpidd-primar=
y&quot;<br>
&gt; name=3D&quot;qpidd-primary&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/resources&gt;<br>
&gt;<br>
&gt; =A0 =A0 &lt;!-- There is a qpidd service on each node, it should be re=
started<br>
&gt; if it fails. --&gt;<br>
&gt; =A0 =A0 &lt;service name=3D&quot;east-qpidd-service&quot; domain=3D&qu=
ot;east-domain&quot;<br>
&gt; recovery=3D&quot;restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 =A0 &lt;service name=3D&quot;west-qpidd-service&quot; domain=3D&qu=
ot;west-domain&quot;<br>
&gt; recovery=3D&quot;restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; =A0 =A0 &lt;!-- There should always be a single qpidd-primary service,=
 it can<br>
&gt; run on any node. --&gt;<br>
&gt; =A0 =A0 &lt;service name=3D&quot;qpidd-primary-service&quot; autostart=
=3D&quot;1&quot; exclusive=3D&quot;0&quot;<br>
&gt; recovery=3D&quot;relocate&quot;&gt;<br>
&gt; =A0 =A0 =A0 &lt;script ref=3D&quot;qpidd-primary&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 &lt;/rm&gt;<br>
&gt; &lt;/cluster&gt;<br>
&gt; ------------------------------------------------<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Terance<br>
&gt;<br>
&gt;<br>
&gt;<br>
<br>
</div></div><div class=3D"HOEnZb"><div class=3D"h5">--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</div></div></blockquote></div><br>

--047d7b2e4446c9a89e04cd2be274--

From engineerzuhairraza@gmail.com Mon Oct 29 07:23:37 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9TBNbDt005375 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 29 Oct 2012 07:23:37 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9TBNWO5030277
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 07:23:32 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9TBNUjY014839
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 07:23:30 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so4229418pbb.33
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 04:23:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:from:date:message-id:subject:to:content-type;
	bh=GHN27XDSVvVpv3JkQGBsnVa008UMJERdsTJC/1nN+eY=;
	b=Cpx8MU+T15KNlsOmcxlRbLz9zzPrzaRp2DJk1yphaCnTqZjwNilN2plcb5ZCkuAd8z
	0ScCUgmx6h8XyCnX1jGWWc7jh0Os1z+OXe5uUtodEJzBcQVq/KFyw2J8teAYQKaUE9j1
	KOxpEZnzTcnRirmrCsCKqR9BAmTHy9Fo5g6GH63JL3IaBViCjFzVyfhC1cpicS6tFJde
	oEpQyeX7TCoCbEygi1jzNPs7cyFfwc6vyrGua7ZE1uvPhU0TlVaVhgKLKYsSxuXwwb4z
	ky97aMxasRUAyXMSpOJQ8H9A5GVX0w+TZ5vdLQB300avNX9fwKvdgTRtK3sCy2sadIhx
	YmPw==
Received: by 10.68.189.138 with SMTP id gi10mr91177728pbc.165.1351509810455;
	Mon, 29 Oct 2012 04:23:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.41.10 with HTTP; Mon, 29 Oct 2012 04:23:09 -0700 (PDT)
From: Zohair Raza <engineerzuhairraza@gmail.com>
Date: Mon, 29 Oct 2012 15:23:09 +0400
Message-ID: <CAF_PTevnYn_Ck4Wda2TMF=uaULFW4vDZufykPSLY90g=hfP6yg@mail.gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=e89a8fb2091e29a3fa04cd30e63d
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Problem in fencing, gfs2 freezes
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 29 Oct 2012 11:23:37 -0000

--e89a8fb2091e29a3fa04cd30e63d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have setup a Primary/Primary cluster with GFS2.

All works good if I shut down any node regularly, but when I unplug power
of any node, GFS freezes and I can not access the device.

Tried to use http://people.redhat.com/lhh/obliterate

this is what I see in logs

Oct 29 08:05:41 node1 kernel: d-con res0: PingAck did not arrive in time.
Oct 29 08:05:41 node1 kernel: d-con res0: peer( Primary -> Unknown ) conn(
Connected -> NetworkFailure ) pdsk( UpToDate -> DUnknown ) susp( 0 -> 1 )
Oct 29 08:05:41 node1 kernel: d-con res0: asender terminated
Oct 29 08:05:41 node1 kernel: d-con res0: Terminating asender thread
Oct 29 08:05:41 node1 kernel: d-con res0: Connection closed
Oct 29 08:05:41 node1 kernel: d-con res0: conn( NetworkFailure ->
Unconnected )
Oct 29 08:05:41 node1 kernel: d-con res0: receiver terminated
Oct 29 08:05:41 node1 kernel: d-con res0: Restarting receiver thread
Oct 29 08:05:41 node1 kernel: d-con res0: receiver (re)started
Oct 29 08:05:41 node1 kernel: d-con res0: conn( Unconnected -> WFConnection
)
Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
fence-peer res0
Oct 29 08:05:41 node1 fence_node[1912]: fence node2 failed
Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
fence-peer res0 exit code 1 (0x100)
Oct 29 08:05:41 node1 kernel: d-con res0: fence-peer helper broken,
returned 1
Oct 29 08:05:48 node1 corosync[1346]:   [TOTEM ] A processor failed,
forming new configuration.
Oct 29 08:05:53 node1 corosync[1346]:   [QUORUM] Members[1]: 1
Oct 29 08:05:53 node1 corosync[1346]:   [TOTEM ] A processor joined or left
the membership and a new membership was formed.
Oct 29 08:05:53 node1 corosync[1346]:   [CPG   ] chosen downlist: sender
r(0) ip(192.168.23.128) ; members(old:2 left:1)
Oct 29 08:05:53 node1 corosync[1346]:   [MAIN  ] Completed service
synchronization, ready to provide service.
Oct 29 08:05:53 node1 kernel: dlm: closing connection to node 2
Oct 29 08:05:53 node1 fenced[1401]: fencing node node2
Oct 29 08:05:53 node1 kernel: GFS2: fsid=cluster-setup:res0.0: jid=1:
Trying to acquire journal lock...
Oct 29 08:05:53 node1 fenced[1401]: fence node2 dev 0.0 agent
fence_ack_manual result: error from agent
Oct 29 08:05:53 node1 fenced[1401]: fence node2 failed
Oct 29 08:05:56 node1 fenced[1401]: fencing node node2
Oct 29 08:05:56 node1 fenced[1401]: fence node2 dev 0.0 agent
fence_ack_manual result: error from agent
Oct 29 08:05:56 node1 fenced[1401]: fence node2 failed
Oct 29 08:05:59 node1 fenced[1401]: fencing node node2
Oct 29 08:05:59 node1 fenced[1401]: fence node2 dev 0.0 agent
fence_ack_manual result: error from agent
Oct 29 08:05:59 node1 fenced[1401]: fence node2 failed

Regards,
Zohair Raza

--e89a8fb2091e29a3fa04cd30e63d
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div style=3D"color:rgb(34,34,34);font-family:arial,sans-s=
erif;font-size:13px;background-color:rgb(255,255,255)">Hi,=A0</div><div sty=
le=3D"color:rgb(34,34,34);font-family:arial,sans-serif;font-size:13px;backg=
round-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)">I have setup a Primary/Prim=
ary cluster with GFS2.</div><div style=3D"color:rgb(34,34,34);font-family:a=
rial,sans-serif;font-size:13px;background-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)">All works good if I shut do=
wn any node regularly, but when I unplug power of any node, GFS freezes and=
 I can not access the device.=A0</div>

<div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;font-size:13=
px;background-color:rgb(255,255,255)"><br></div><div style=3D"color:rgb(34,=
34,34);font-family:arial,sans-serif;font-size:13px;background-color:rgb(255=
,255,255)">

Tried to use=A0<a href=3D"http://people.redhat.com/lhh/obliterate" target=
=3D"_blank" style=3D"color:rgb(17,85,204)">http://people.redhat.com/lhh/obl=
iterate</a>=A0</div><div style=3D"color:rgb(34,34,34);font-family:arial,san=
s-serif;font-size:13px;background-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)">this is what I see in logs=
=A0</div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fon=
t-size:13px;background-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)"><div>Oct 29 08:05:41 node1 =
kernel: d-con res0: PingAck did not arrive in time.</div><div>Oct 29 08:05:=
41 node1 kernel: d-con res0: peer( Primary -&gt; Unknown ) conn( Connected =
-&gt; NetworkFailure ) pdsk( UpToDate -&gt; DUnknown ) susp( 0 -&gt; 1 )</d=
iv>

<div>Oct 29 08:05:41 node1 kernel: d-con res0: asender terminated</div><div=
>Oct 29 08:05:41 node1 kernel: d-con res0: Terminating asender thread</div>=
<div>Oct 29 08:05:41 node1 kernel: d-con res0: Connection closed</div>
<div>
Oct 29 08:05:41 node1 kernel: d-con res0: conn( NetworkFailure -&gt; Unconn=
ected )</div><div>Oct 29 08:05:41 node1 kernel: d-con res0: receiver termin=
ated</div><div>Oct 29 08:05:41 node1 kernel: d-con res0: Restarting receive=
r thread</div>

<div>Oct 29 08:05:41 node1 kernel: d-con res0: receiver (re)started</div><d=
iv>Oct 29 08:05:41 node1 kernel: d-con res0: conn( Unconnected -&gt; WFConn=
ection )</div><div>Oct 29 08:05:41 node1 kernel: d-con res0: helper command=
: /sbin/drbdadm fence-peer res0</div>

<div>Oct 29 08:05:41 node1 fence_node[1912]: fence node2 failed</div><div>O=
ct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm fenc=
e-peer res0 exit code 1 (0x100)</div><div>Oct 29 08:05:41 node1 kernel: d-c=
on res0: fence-peer helper broken, returned 1</div>

<div>Oct 29 08:05:48 node1 corosync[1346]: =A0 [TOTEM ] A processor failed,=
 forming new configuration.</div><div>Oct 29 08:05:53 node1 corosync[1346]:=
 =A0 [QUORUM] Members[1]: 1</div><div>Oct 29 08:05:53 node1 corosync[1346]:=
 =A0 [TOTEM ] A processor joined or left the membership and a new membershi=
p was formed.</div>

<div>Oct 29 08:05:53 node1 corosync[1346]: =A0 [CPG =A0 ] chosen downlist: =
sender r(0) ip(192.168.23.128) ; members(old:2 left:1)</div><div>Oct 29 08:=
05:53 node1 corosync[1346]: =A0 [MAIN =A0] Completed service synchronizatio=
n, ready to provide service.</div>

<div>Oct 29 08:05:53 node1 kernel: dlm: closing connection to node 2</div><=
div>Oct 29 08:05:53 node1 fenced[1401]: fencing node node2</div><div>Oct 29=
 08:05:53 node1 kernel: GFS2: fsid=3Dcluster-setup:res0.0: jid=3D1: Trying =
to acquire journal lock...</div>

<div>Oct 29 08:05:53 node1 fenced[1401]: fence node2 dev 0.0 agent fence_ac=
k_manual result: error from agent</div><div>Oct 29 08:05:53 node1 fenced[14=
01]: fence node2 failed</div><div>Oct 29 08:05:56 node1 fenced[1401]: fenci=
ng node node2</div>

<div>Oct 29 08:05:56 node1 fenced[1401]: fence node2 dev 0.0 agent fence_ac=
k_manual result: error from agent</div><div>Oct 29 08:05:56 node1 fenced[14=
01]: fence node2 failed</div><div>Oct 29 08:05:59 node1 fenced[1401]: fenci=
ng node node2</div>

<div>Oct 29 08:05:59 node1 fenced[1401]: fence node2 dev 0.0 agent fence_ac=
k_manual result: error from agent</div><div>Oct 29 08:05:59 node1 fenced[14=
01]: fence node2 failed</div><div><br></div></div><div dir=3D"ltr">Regards,=
<br>

Zohair Raza=A0</div><br>
</div>

--e89a8fb2091e29a3fa04cd30e63d--

From lists@alteeve.ca Mon Oct 29 13:28:33 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9THSXHN001273 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 29 Oct 2012 13:28:33 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9THSSt0004981
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 13:28:28 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9THSQs9008805
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 13:28:27 -0400
Received: from lemass.alteeve.ca (mf70536d0.tmodns.net [208.54.5.247])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id DA01D422461;
	Mon, 29 Oct 2012 13:28:23 -0400 (EDT)
Message-ID: <508EBCB5.2060107@alteeve.ca>
Date: Mon, 29 Oct 2012 10:28:21 -0700
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121016 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAF_PTevnYn_Ck4Wda2TMF=uaULFW4vDZufykPSLY90g=hfP6yg@mail.gmail.com>
In-Reply-To: <CAF_PTevnYn_Ck4Wda2TMF=uaULFW4vDZufykPSLY90g=hfP6yg@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Problem in fencing, gfs2 freezes
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 29 Oct 2012 17:28:33 -0000

Please see the answer given on the DRBD Users list to this question.

digimer

On 10/29/2012 04:23 AM, Zohair Raza wrote:
> Hi, 
> 
> I have setup a Primary/Primary cluster with GFS2.
> 
> All works good if I shut down any node regularly, but when I unplug
> power of any node, GFS freezes and I can not access the device. 
> 
> Tried to use http://people.redhat.com/lhh/obliterate 
> 
> this is what I see in logs 
> 
> Oct 29 08:05:41 node1 kernel: d-con res0: PingAck did not arrive in time.
> Oct 29 08:05:41 node1 kernel: d-con res0: peer( Primary -> Unknown )
> conn( Connected -> NetworkFailure ) pdsk( UpToDate -> DUnknown ) susp( 0
> -> 1 )
> Oct 29 08:05:41 node1 kernel: d-con res0: asender terminated
> Oct 29 08:05:41 node1 kernel: d-con res0: Terminating asender thread
> Oct 29 08:05:41 node1 kernel: d-con res0: Connection closed
> Oct 29 08:05:41 node1 kernel: d-con res0: conn( NetworkFailure ->
> Unconnected )
> Oct 29 08:05:41 node1 kernel: d-con res0: receiver terminated
> Oct 29 08:05:41 node1 kernel: d-con res0: Restarting receiver thread
> Oct 29 08:05:41 node1 kernel: d-con res0: receiver (re)started
> Oct 29 08:05:41 node1 kernel: d-con res0: conn( Unconnected ->
> WFConnection )
> Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
> fence-peer res0
> Oct 29 08:05:41 node1 fence_node[1912]: fence node2 failed
> Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
> fence-peer res0 exit code 1 (0x100)
> Oct 29 08:05:41 node1 kernel: d-con res0: fence-peer helper broken,
> returned 1
> Oct 29 08:05:48 node1 corosync[1346]:   [TOTEM ] A processor failed,
> forming new configuration.
> Oct 29 08:05:53 node1 corosync[1346]:   [QUORUM] Members[1]: 1
> Oct 29 08:05:53 node1 corosync[1346]:   [TOTEM ] A processor joined or
> left the membership and a new membership was formed.
> Oct 29 08:05:53 node1 corosync[1346]:   [CPG   ] chosen downlist: sender
> r(0) ip(192.168.23.128) ; members(old:2 left:1)
> Oct 29 08:05:53 node1 corosync[1346]:   [MAIN  ] Completed service
> synchronization, ready to provide service.
> Oct 29 08:05:53 node1 kernel: dlm: closing connection to node 2
> Oct 29 08:05:53 node1 fenced[1401]: fencing node node2
> Oct 29 08:05:53 node1 kernel: GFS2: fsid=cluster-setup:res0.0: jid=1:
> Trying to acquire journal lock...
> Oct 29 08:05:53 node1 fenced[1401]: fence node2 dev 0.0 agent
> fence_ack_manual result: error from agent
> Oct 29 08:05:53 node1 fenced[1401]: fence node2 failed
> Oct 29 08:05:56 node1 fenced[1401]: fencing node node2
> Oct 29 08:05:56 node1 fenced[1401]: fence node2 dev 0.0 agent
> fence_ack_manual result: error from agent
> Oct 29 08:05:56 node1 fenced[1401]: fence node2 failed
> Oct 29 08:05:59 node1 fenced[1401]: fencing node node2
> Oct 29 08:05:59 node1 fenced[1401]: fence node2 dev 0.0 agent
> fence_ack_manual result: error from agent
> Oct 29 08:05:59 node1 fenced[1401]: fence node2 failed
> 
> Regards,
> Zohair Raza 
> 
> 
> 


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?

From parvez.h.shaikh@gmail.com Tue Oct 30 04:54:30 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9U8sUnI000537 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 04:54:30 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9U8sP2N032712
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 04:54:25 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9U8sN94010756
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 04:54:23 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so13958bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 01:54:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=nHUuz+BCV91S9CzzAmXgWlccdg6ChrcYBkTSmlnh4QY=;
	b=Dc+oVxPbC17nzBdMrfom9uTZrw72GkZg/QRgzOJefZIKkVvkUN6QKea+HGVak04T/F
	3DQMG8m50eSz8zzw1uSP/8kNO108IED06qiFYb66lxb3jek3/ZnRr2480mN2Y+R8ZO0f
	aWDpuGfU9ZFJQPDGUIpy+hEt8ZhKN6dUC4gMgRH4vJT2YKC+wRkfYpz46vvXbHCOOSsJ
	oNUjqGJpwldJ4vVVld8n+H0KU5FkoVkgJ+yV1psGRUmpb1UgKXSmcO0Nv6tQQgmb8Idf
	hH1rJk6zgdYjjNgk5zRNquSvA3kCvKoXXLcf0Myr7mAD2N/VMPvtsaEexGgMvTlnbF99
	QJYg==
MIME-Version: 1.0
Received: by 10.204.11.133 with SMTP id t5mr10243555bkt.14.1351587262910; Tue,
	30 Oct 2012 01:54:22 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 01:54:22 -0700 (PDT)
Date: Tue, 30 Oct 2012 14:24:22 +0530
Message-ID: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=00151758b404b04f4104cd42ee65
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Not restarting "max_restart" times before
	relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 08:54:30 -0000

--00151758b404b04f4104cd42ee65
Content-Type: text/plain; charset=ISO-8859-1

Hi experts,

I have defined a service as follows in cluster.conf -

                <service autostart="0" domain="mydomain" exclusive="0"
max_restarts="5" name="mgmt" recovery="restart">
                        <script ref="myHaAgent"/>
                        <ip ref="192.168.51.51"/>
                </service>

I mentioned max_restarts=5 hoping that if cluster fails to start service 5
times, then it will relocate to another cluster node in failover domain.

To check this, I turned down NIC hosting service's floating IP and got
following logs -

Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
detected
Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
"192.168.51.51" returned 1 (generic error)
Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
service:mgmt
*Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
recovering*
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed service
service:mgmt
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip "192.168.51.51"
returned 1 (generic error)
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
service:mgmt; return value: 1
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
service:mgmt
*Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
recovering
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
service service:mgmt*
Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
stopped
Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
stopped

But from the log it appears that cluster tried to restart service only ONCE
before relocating.

I was expecting cluster to retry starting this service five times on the
same node before relocating

Can anybody correct my understanding?

Thanks,
Parvez

--00151758b404b04f4104cd42ee65
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi experts,<br><br>I have defined a service as follows in cluster.conf -<br=
><br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;service autostart=3D=
&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot; max_r=
estarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;restart&qu=
ot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
<br>I mentioned max_restarts=3D5 hoping that if cluster fails to start serv=
ice 5 times, then it will relocate to another cluster node in failover doma=
in.<br>
<br>To check this, I turned down NIC hosting service&#39;s floating IP and =
got following logs -<br><br>Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;wa=
rning&gt; Link for eth1: Not detected<br>Oct 30 14:11:49 XXXX clurgmgrd: [1=
0753]: &lt;warning&gt; No link on eth1...<br>
Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on eth1...=
<br>Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip &quo=
t;192.168.51.51&quot; returned 1 (generic error)<br>Oct 30 14:11:49 XXXX cl=
urgmgrd[10753]: &lt;notice&gt; Stopping service service:mgmt<br>
<b>Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:mg=
mt is recovering</b><br>Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&g=
t; Recovering failed service service:mgmt<br>Oct 30 14:12:00 XXXX clurgmgrd=
[10753]: &lt;notice&gt; start on ip &quot;192.168.51.51&quot; returned 1 (g=
eneric error)<br>
Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to start=
 service:mgmt; return value: 1<br>Oct 30 14:12:00 XXXX clurgmgrd[10753]: &l=
t;notice&gt; Stopping service service:mgmt<br><b>Oct 30 14:12:00 XXXX clurg=
mgrd[10753]: &lt;notice&gt; Service service:mgmt is recovering<br>
Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating fail=
ed service service:mgmt</b><br>Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;n=
otice&gt; Service service:mgmt is stopped<br>Oct 30 14:12:01 XXXX clurgmgrd=
[10753]: &lt;notice&gt; Service service:mgmt is stopped<br>
<br>But from the log it appears that cluster tried to restart service only =
ONCE before relocating.<br><br>I was expecting cluster to retry starting th=
is service five times on the same node before relocating<br><br>Can anybody=
 correct my understanding?<br>
<br>Thanks,<br>Parvez<br>

--00151758b404b04f4104cd42ee65--

From parvez.h.shaikh@gmail.com Tue Oct 30 06:35:03 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UAZ3eS030077 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 06:35:03 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UAYwAK023442
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 06:34:58 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9UAYveZ019574
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 06:34:58 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so65752bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 03:34:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=1PO7/Q6eWK02tC/Iyeujt3Olh8O9bFKAe2rq84ficwo=;
	b=X6fMgx2BpPQjyEA3+s8gh7TQ5D4SFqKO7s5Vxaa+xVV3Tsm8sSB/EhfenLNvnocNUW
	Ln1pMvADhw+gcNc+CzBwb57ZbXmMP2ETszVV50xVGMFXBrk66SKBv9A3j2lY94WPQ03x
	AmCOSdIvUVf7B2KCHlYMt1Spk7EGnYWOVQczh4PG511Hx76ZdnInbuHXN/3V/6moukws
	6a53sHttJmmlBVawOb+TXdhe4hNsPP+QRYKG5I5SpVxiD/X6VpYB0UE7ZJR8f2cBhZ8y
	jChrn5IC6ee9VVAsk5Tphbp9x1BxWikimKVIM6qkRNCtrFb+UeHWHUgTWKyHbXqpx8du
	UlhQ==
MIME-Version: 1.0
Received: by 10.204.7.136 with SMTP id d8mr9955876bkd.85.1351593297119; Tue,
	30 Oct 2012 03:34:57 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 03:34:57 -0700 (PDT)
Date: Tue, 30 Oct 2012 16:04:57 +0530
Message-ID: <CAKrd532rEidJa3CSgK0XisuQO8kaknAhFS1PovKgf8iB593KOQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=00151758a7685b0a9c04cd445653
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Monitoring Frequency - can it be changed?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 10:35:04 -0000

--00151758a7685b0a9c04cd445653
Content-Type: text/plain; charset=ISO-8859-1

Hi experts,

Can we change frequency at which resources are monitored by Cluster?

I observed 30 seconds as monitoring frequency.

Thanks,
Parvez

--00151758a7685b0a9c04cd445653
Content-Type: text/html; charset=ISO-8859-1

Hi experts,<br><br>Can we change frequency at which resources are monitored by Cluster?<br><br>I observed 30 seconds as monitoring frequency. <br><br>Thanks,<br>Parvez<br>

--00151758a7685b0a9c04cd445653--

From lists@alteeve.ca Tue Oct 30 11:56:08 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UFu8GE030093 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 11:56:08 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UFu3eZ024219
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 11:56:03 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9UFu1gT007244
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 11:56:01 -0400
Received: from lemass.alteeve.ca (md20436d0.tmodns.net [208.54.4.210])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 13BC142249F;
	Tue, 30 Oct 2012 11:55:57 -0400 (EDT)
Message-ID: <508FF88B.9000901@alteeve.ca>
Date: Tue, 30 Oct 2012 08:55:55 -0700
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121016 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
In-Reply-To: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 15:56:09 -0000

On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
> Hi experts,
> 
> I have defined a service as follows in cluster.conf -
> 
>                 <service autostart="0" domain="mydomain" exclusive="0"
> max_restarts="5" name="mgmt" recovery="restart">
>                         <script ref="myHaAgent"/>
>                         <ip ref="192.168.51.51"/>
>                 </service>
> 
> I mentioned max_restarts=5 hoping that if cluster fails to start service
> 5 times, then it will relocate to another cluster node in failover domain.
> 
> To check this, I turned down NIC hosting service's floating IP and got
> following logs -
> 
> Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
> detected
> Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
> "192.168.51.51" returned 1 (generic error)
> Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
> service:mgmt
> *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> recovering*
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
> service service:mgmt
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
> "192.168.51.51" returned 1 (generic error)
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
> service:mgmt; return value: 1
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
> service:mgmt
> *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> recovering
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
> service service:mgmt*
> Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> stopped
> Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> stopped
> 
> But from the log it appears that cluster tried to restart service only
> ONCE before relocating.
> 
> I was expecting cluster to retry starting this service five times on the
> same node before relocating
> 
> Can anybody correct my understanding?
> 
> Thanks,
> Parvez

What version? Please paste your full cluster.conf.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?

From rossnick-lists@cybercat.ca Tue Oct 30 15:13:46 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UJDk0B030939 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 15:13:46 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UJDfJY019487
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 15:13:41 -0400
Received: from cybercat.ca (mail.cybercat.ca [207.96.251.195])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9UJDd54000637
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 15:13:40 -0400
Received: from [70.29.219.205] (account rossnick HELO [192.168.2.34])
	by cybercat.ca (CommuniGate Pro SMTP 5.2.19)
	with ESMTPSA id 131094257 for linux-cluster@redhat.com;
	Tue, 30 Oct 2012 15:13:38 -0400
Message-ID: <509026E4.2070005@cybercat.ca>
Date: Tue, 30 Oct 2012 15:13:40 -0400
From: Nicolas Ross <rossnick-lists@cybercat.ca>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -2.559  (BAYES_00, RP_MATCHES_RCVD, SPF_HELO_PASS,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Question about KVM and cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 19:13:47 -0000

We have 2 distinct clusters in 2 different server rooms for HA perposes. 
So services in culster A have a replica in cluster B. Files from 
services are rsync periodicly on the other server room.

At about every week or so, we switch the running production services 
from one room to another. This is working perfectly for now.

Now, I need to add a KVM virtual machine to the mix. I will then create 
a VM on cluster A, with it's data residing on the fiberchannel raid 
arrays via lvm. The VM will (I hope so) migrate from one machine to 
another within the same cluster when there's a failure or other. But 
what about migrate it to another server room ? Is this possible ? Is 
there a way to replicate at the block-level a lvm volume ? What are my 
other options ?

My other option would be to have a 2 VMs, 1 in each room, and rsync data 
inside the VMs, but I would like to avoir this.

Best regards.

From parvez.h.shaikh@gmail.com Wed Oct 31 00:25:53 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V4L36W030093 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 00:21:04 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V4Kw9a023105
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:20:58 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V4Ku1r021848
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:20:56 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so458389bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 21:20:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type;
	bh=vsKGkYzlbZ1QKwHpkKuuVEaHuvH6TOLOJPo/Ak2HKII=;
	b=npRHiWEdkN16omVib2dzL2Rv8Lsz/aLP/Cv+8eqUAgXkG/mTbvr3QUhh3gUJGgKhj0
	+sQQauDSFqHXEm18VG7ItEIYF8oCTtSazoE7dVESh8cfH/HnKfJkSkcQmS2ZQ/wtd1LW
	K3DhKljAXHQG8p4ltOweCHMSsqSNqN83nVcw5+bMyu+9fE3VQxO3n8RolK9nEaG7K+Ch
	NUH3MApjWyJO1fGsYiAcHoYa7ZatIs5U33qg32jrDSugk44W1evPnCL32NLCM962g7ev
	s157Z8O9xdEsc5scFItEbu8z/6PsPhJpjWzfJ4Wdi+6CJRnTjh3LoXowCYFDYecoRXZ+
	2zDA==
MIME-Version: 1.0
Received: by 10.204.147.153 with SMTP id l25mr10650402bkv.109.1351657255713;
	Tue, 30 Oct 2012 21:20:55 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 21:20:55 -0700 (PDT)
In-Reply-To: <508FF88B.9000901@alteeve.ca>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
Date: Wed, 31 Oct 2012 09:50:55 +0530
Message-ID: <CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=0015174c40d695bc5e04cd533a25
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 04:25:54 -0000

--0015174c40d695bc5e04cd533a25
Content-Type: text/plain; charset=ISO-8859-1

Hi Digimer,

cman_tool version gives following -

6.2.0 config 22

Cluster.conf -

<?xml version="1.0"?>
<cluster alias="PARVEZ" config_version="22" name="PARVEZ">
        <clusternodes>
                <clusternode name="myblade2" nodeid="2" votes="1">
                        <fence>
                                <method name="1">
                                        <device blade="2"
missing_as_off="1" name="BladeCenterFencing-1"/>
                                </method>
                        </fence>
                </clusternode>
                <clusternode name="myblade1" nodeid="1" votes="1">
                        <fence>
                                <method name="1">
                                        <device blade="1"
missing_as_off="1" name="BladeCenterFencing-1"/>
                                </method>
                        </fence>
                </clusternode>
        </clusternodes>
        <cman expected_votes="1" two_node="1"/>
        <fencedevices>
                <fencedevice agent="fence_bladecenter" ipaddr="
mm-1.mydomain.com" login="XXXX" name="BladeCenterFencing-1" passwd="XXXXX"
shell_timeout="10"/>
        </fencedevices>
        <rm>
                <resources>
                        <script file="/localhome/my/my_ha"
name="myHaAgent"/>
                        <ip address="192.168.51.51" monitor_link="1"/>
                </resources>
                <failoverdomains>
                        <failoverdomain name="mydomain" nofailback="1"
ordered="1" restricted="1">
                                <failoverdomainnode name="myblade2"
priority="2"/>
                                <failoverdomainnode name="myblade1"
priority="1"/>
                        </failoverdomain>
                </failoverdomains>
                <service autostart="0" domain="mydomain" exclusive="0"
max_restarts="5" name="mgmt" recovery="restart">
                        <script ref="myHaAgent"/>
                        <ip ref="192.168.51.51"/>
                </service>
        </rm>
        <fence_daemon clean_start="1" post_fail_delay="0"
post_join_delay="0"/>
</cluster>

Thanks,
Parvez

On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca> wrote:

> On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
> > Hi experts,
> >
> > I have defined a service as follows in cluster.conf -
> >
> >                 <service autostart="0" domain="mydomain" exclusive="0"
> > max_restarts="5" name="mgmt" recovery="restart">
> >                         <script ref="myHaAgent"/>
> >                         <ip ref="192.168.51.51"/>
> >                 </service>
> >
> > I mentioned max_restarts=5 hoping that if cluster fails to start service
> > 5 times, then it will relocate to another cluster node in failover
> domain.
> >
> > To check this, I turned down NIC hosting service's floating IP and got
> > following logs -
> >
> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
> > detected
> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
> > "192.168.51.51" returned 1 (generic error)
> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
> > service:mgmt
> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > recovering*
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
> > service service:mgmt
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
> > "192.168.51.51" returned 1 (generic error)
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
> > service:mgmt; return value: 1
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
> > service:mgmt
> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > recovering
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
> > service service:mgmt*
> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > stopped
> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > stopped
> >
> > But from the log it appears that cluster tried to restart service only
> > ONCE before relocating.
> >
> > I was expecting cluster to retry starting this service five times on the
> > same node before relocating
> >
> > Can anybody correct my understanding?
> >
> > Thanks,
> > Parvez
>
> What version? Please paste your full cluster.conf.
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
>

--0015174c40d695bc5e04cd533a25
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Digimer,<br><br>cman_tool version gives following -<br><br>6.2.0 config =
22<br><br>Cluster.conf -<br><br>&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>=
&lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot; name=
=3D&quot;PARVEZ&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myblade2&quot; nodeid=3D&qu=
ot;2&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &l=
t;method name=3D&quot;1&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;2&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myb=
lade1&quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<=
br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 &lt;method name=3D&quot;1&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;1&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cman =
expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0 &lt;fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 &lt;fencedevice agent=3D&quot;fence_bladecenter&quot; ipaddr=3D&q=
uot;<a href=3D"http://mm-1.mydomain.com">mm-1.mydomain.com</a>&quot; login=
=3D&quot;XXXX&quot; name=3D&quot;BladeCenterFencing-1&quot; passwd=3D&quot;=
XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;/fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;resources&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript file=3D&quot;/localhome/my/my_ha&quot; name=3D&quot;myHaAgent&quot;/&=
gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 &lt;ip address=3D&quot;192.168.51.51&quot; monitor_link=3D&quot;1&quot;=
/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/resources&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomains&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failove=
rdomain name=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot; ordered=3D&q=
uot;1&quot; restricted=3D&quot;1&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode name=3D&quot;myblade2&quot; prior=
ity=3D&quot;2&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode nam=
e=3D&quot;myblade1&quot; priority=3D&quot;1&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/=
failoverdomain&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fa=
iloverdomains&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;serv=
ice autostart=3D&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&qu=
ot;0&quot; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D=
&quot;restart&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;/rm&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;fence_daemon=
 clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&quot; post_join_dela=
y=3D&quot;0&quot;/&gt;<br>
&lt;/cluster&gt;<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote"=
>On Tue, Oct 30, 2012 at 9:25 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"=
mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> =
wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex"><div class=3D"im">On 10/3=
0/2012 01:54 AM, Parvez Shaikh wrote:<br>
&gt; Hi experts,<br>
&gt;<br>
&gt; I have defined a service as follows in cluster.conf -<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; I mentioned max_restarts=3D5 hoping that if cluster fails to start ser=
vice<br>
&gt; 5 times, then it will relocate to another cluster node in failover dom=
ain.<br>
&gt;<br>
&gt; To check this, I turned down NIC hosting service&#39;s floating IP and=
 got<br>
&gt; following logs -<br>
&gt;<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; Link for eth1=
: Not<br>
&gt; detected<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
&gt; recovering*<br>
<div class=3D"im">&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt=
; Recovering failed<br>
&gt; service service:mgmt<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; start on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to =
start<br>
&gt; service:mgmt; return value: 1<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
<div class=3D"im">&gt; recovering<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating=
 failed<br>
</div>&gt; service service:mgmt*<br>
<div class=3D"im">&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt=
; Service service:mgmt is<br>
&gt; stopped<br>
&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:=
mgmt is<br>
&gt; stopped<br>
&gt;<br>
&gt; But from the log it appears that cluster tried to restart service only=
<br>
&gt; ONCE before relocating.<br>
&gt;<br>
&gt; I was expecting cluster to retry starting this service five times on t=
he<br>
&gt; same node before relocating<br>
&gt;<br>
&gt; Can anybody correct my understanding?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
<br>
</div>What version? Please paste your full cluster.conf.<br>
<span class=3D"HOEnZb"><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></blockquote></div><br>

--0015174c40d695bc5e04cd533a25--

From lists@alteeve.ca Wed Oct 31 00:44:56 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V4iuaJ032028 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 00:44:56 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V4ipar029559
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:44:51 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V4inhH006591
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:44:49 -0400
Received: from lemass.alteeve.ca (lns1-pool-d8428f69.dsl.look.ca
	[216.66.143.105])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id D6BD3422488;
	Wed, 31 Oct 2012 00:44:44 -0400 (EDT)
Message-ID: <5090ACBD.40703@alteeve.ca>
Date: Tue, 30 Oct 2012 21:44:45 -0700
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121016 Thunderbird/16.0.1
MIME-Version: 1.0
To: Parvez Shaikh <parvez.h.shaikh@gmail.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
In-Reply-To: <CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 04:44:56 -0000

What does 'rpm -q cman' return?

This looks very odd;
<fencedevice agent="fence_bladecenter"
> ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>"

Please remove this for now;

 <fence_daemon clean_start="1" post_fail_delay="0"
> post_join_delay="0"/>

In general, you don't want to assume a clean start. It's asking for
trouble. The default delays are also sane. You can always come back to
this later after this issue is resolved, if you wish.

On 10/30/2012 09:20 PM, Parvez Shaikh wrote:
> Hi Digimer,
> 
> cman_tool version gives following -
> 
> 6.2.0 config 22
> 
> Cluster.conf -
> 
> <?xml version="1.0"?>
> <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
>         <clusternodes>
>                 <clusternode name="myblade2" nodeid="2" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="2"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>                 <clusternode name="myblade1" nodeid="1" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="1"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>         </clusternodes>
>         <cman expected_votes="1" two_node="1"/>
>         <fencedevices>
>                 <fencedevice agent="fence_bladecenter"
> ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>" login="XXXX"
> name="BladeCenterFencing-1" passwd="XXXXX" shell_timeout="10"/>
>         </fencedevices>
>         <rm>
>                 <resources>
>                         <script file="/localhome/my/my_ha"
> name="myHaAgent"/>
>                         <ip address="192.168.51.51" monitor_link="1"/>
>                 </resources>
>                 <failoverdomains>
>                         <failoverdomain name="mydomain" nofailback="1"
> ordered="1" restricted="1">
>                                 <failoverdomainnode name="myblade2"
> priority="2"/>
>                                 <failoverdomainnode name="myblade1"
> priority="1"/>
>                         </failoverdomain>
>                 </failoverdomains>
>                 <service autostart="0" domain="mydomain" exclusive="0"
> max_restarts="5" name="mgmt" recovery="restart">
>                         <script ref="myHaAgent"/>
>                         <ip ref="192.168.51.51"/>
>                 </service>
>         </rm>
>         <fence_daemon clean_start="1" post_fail_delay="0"
> post_join_delay="0"/>
> </cluster>
> 
> Thanks,
> Parvez
> 
> On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca
> <mailto:lists@alteeve.ca>> wrote:
> 
>     On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
>     > Hi experts,
>     >
>     > I have defined a service as follows in cluster.conf -
>     >
>     >                 <service autostart="0" domain="mydomain" exclusive="0"
>     > max_restarts="5" name="mgmt" recovery="restart">
>     >                         <script ref="myHaAgent"/>
>     >                         <ip ref="192.168.51.51"/>
>     >                 </service>
>     >
>     > I mentioned max_restarts=5 hoping that if cluster fails to start
>     service
>     > 5 times, then it will relocate to another cluster node in failover
>     domain.
>     >
>     > To check this, I turned down NIC hosting service's floating IP and got
>     > following logs -
>     >
>     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
>     > detected
>     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
>     > "192.168.51.51" returned 1 (generic error)
>     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
>     > service:mgmt
>     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > recovering*
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
>     > service service:mgmt
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
>     > "192.168.51.51" returned 1 (generic error)
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
>     > service:mgmt; return value: 1
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
>     > service:mgmt
>     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > recovering
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating
>     failed
>     > service service:mgmt*
>     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > stopped
>     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > stopped
>     >
>     > But from the log it appears that cluster tried to restart service only
>     > ONCE before relocating.
>     >
>     > I was expecting cluster to retry starting this service five times
>     on the
>     > same node before relocating
>     >
>     > Can anybody correct my understanding?
>     >
>     > Thanks,
>     > Parvez
> 
>     What version? Please paste your full cluster.conf.
> 
>     --
>     Digimer
>     Papers and Projects: https://alteeve.ca/w/
>     What if the cure for cancer is trapped in the mind of a person without
>     access to education?
> 
> 


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?

From parvez.h.shaikh@gmail.com Wed Oct 31 00:48:26 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V4mQvT000432 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 00:48:26 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V4mLUo030012
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:48:21 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V4mI2H007082
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:48:19 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so461778bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 21:48:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type;
	bh=Hp+vhDQ7TlacVgXukrETTyZFbJ+loFSP+KFffZHTz4A=;
	b=dhzLaJ0i8zflRs414892Ysyy/BFMNjqdOC0VFvCeLTIDBCGh3UnURv/v+WQPApVIBu
	SfeZQxjIDuySqPZKYvlVm6WKIGdRsWeDdKfun03u1ChPhah0jMVPG0pRKfIGwVIZJoo3
	tzHpQPbh3PCyTFIpV6+JkTRXXPdKHqSzj3lcrIJm66bXyg3LrbntBcVLW3p7mBlpoGz5
	o8ndLTgCYtUALGhTN2IPPxTKjAgGeEzeFkJDMk0fhJQaT6fgYcqiadmhIlgkKtROrJOW
	L3EatYm/sfKBmgA4N2VNLk1pg3tAim5ZXxni2BVgRVrHkp4mMUThxGiK0ELpjbI5TPP3
	A5TA==
MIME-Version: 1.0
Received: by 10.204.7.136 with SMTP id d8mr10735937bkd.85.1351658898178; Tue,
	30 Oct 2012 21:48:18 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 21:48:18 -0700 (PDT)
In-Reply-To: <5090ACBD.40703@alteeve.ca>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
	<5090ACBD.40703@alteeve.ca>
Date: Wed, 31 Oct 2012 10:18:18 +0530
Message-ID: <CAKrd533uuWLKoh67gqOtbv_zt7K_1qQxqx8X8wRfTw6OB07KbQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=00151758a7687bc36b04cd539cdd
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 04:48:27 -0000

--00151758a7687bc36b04cd539cdd
Content-Type: text/plain; charset=ISO-8859-1

Digimer,

Out put of rpm -q cman

cman-2.0.115-34.el5

There is no http mentioned in fencedevice, I think email client is
inserting it.


Thanks,
Parvez

On Wed, Oct 31, 2012 at 10:14 AM, Digimer <lists@alteeve.ca> wrote:

> What does 'rpm -q cman' return?
>
> This looks very odd;
> <fencedevice agent="fence_bladecenter"
> > ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>"
>
> Please remove this for now;
>
>  <fence_daemon clean_start="1" post_fail_delay="0"
> > post_join_delay="0"/>
>
> In general, you don't want to assume a clean start. It's asking for
> trouble. The default delays are also sane. You can always come back to
> this later after this issue is resolved, if you wish.
>
> On 10/30/2012 09:20 PM, Parvez Shaikh wrote:
> > Hi Digimer,
> >
> > cman_tool version gives following -
> >
> > 6.2.0 config 22
> >
> > Cluster.conf -
> >
> > <?xml version="1.0"?>
> > <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
> >         <clusternodes>
> >                 <clusternode name="myblade2" nodeid="2" votes="1">
> >                         <fence>
> >                                 <method name="1">
> >                                         <device blade="2"
> > missing_as_off="1" name="BladeCenterFencing-1"/>
> >                                 </method>
> >                         </fence>
> >                 </clusternode>
> >                 <clusternode name="myblade1" nodeid="1" votes="1">
> >                         <fence>
> >                                 <method name="1">
> >                                         <device blade="1"
> > missing_as_off="1" name="BladeCenterFencing-1"/>
> >                                 </method>
> >                         </fence>
> >                 </clusternode>
> >         </clusternodes>
> >         <cman expected_votes="1" two_node="1"/>
> >         <fencedevices>
> >                 <fencedevice agent="fence_bladecenter"
> > ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>" login="XXXX"
> > name="BladeCenterFencing-1" passwd="XXXXX" shell_timeout="10"/>
> >         </fencedevices>
> >         <rm>
> >                 <resources>
> >                         <script file="/localhome/my/my_ha"
> > name="myHaAgent"/>
> >                         <ip address="192.168.51.51" monitor_link="1"/>
> >                 </resources>
> >                 <failoverdomains>
> >                         <failoverdomain name="mydomain" nofailback="1"
> > ordered="1" restricted="1">
> >                                 <failoverdomainnode name="myblade2"
> > priority="2"/>
> >                                 <failoverdomainnode name="myblade1"
> > priority="1"/>
> >                         </failoverdomain>
> >                 </failoverdomains>
> >                 <service autostart="0" domain="mydomain" exclusive="0"
> > max_restarts="5" name="mgmt" recovery="restart">
> >                         <script ref="myHaAgent"/>
> >                         <ip ref="192.168.51.51"/>
> >                 </service>
> >         </rm>
> >         <fence_daemon clean_start="1" post_fail_delay="0"
> > post_join_delay="0"/>
> > </cluster>
> >
> > Thanks,
> > Parvez
> >
> > On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca
> > <mailto:lists@alteeve.ca>> wrote:
> >
> >     On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
> >     > Hi experts,
> >     >
> >     > I have defined a service as follows in cluster.conf -
> >     >
> >     >                 <service autostart="0" domain="mydomain"
> exclusive="0"
> >     > max_restarts="5" name="mgmt" recovery="restart">
> >     >                         <script ref="myHaAgent"/>
> >     >                         <ip ref="192.168.51.51"/>
> >     >                 </service>
> >     >
> >     > I mentioned max_restarts=5 hoping that if cluster fails to start
> >     service
> >     > 5 times, then it will relocate to another cluster node in failover
> >     domain.
> >     >
> >     > To check this, I turned down NIC hosting service's floating IP and
> got
> >     > following logs -
> >     >
> >     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1:
> Not
> >     > detected
> >     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on
> eth1...
> >     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on
> eth1...
> >     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
> >     > "192.168.51.51" returned 1 (generic error)
> >     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
> >     > service:mgmt
> >     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > recovering*
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
> >     > service service:mgmt
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
> >     > "192.168.51.51" returned 1 (generic error)
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to
> start
> >     > service:mgmt; return value: 1
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
> >     > service:mgmt
> >     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > recovering
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating
> >     failed
> >     > service service:mgmt*
> >     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > stopped
> >     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > stopped
> >     >
> >     > But from the log it appears that cluster tried to restart service
> only
> >     > ONCE before relocating.
> >     >
> >     > I was expecting cluster to retry starting this service five times
> >     on the
> >     > same node before relocating
> >     >
> >     > Can anybody correct my understanding?
> >     >
> >     > Thanks,
> >     > Parvez
> >
> >     What version? Please paste your full cluster.conf.
> >
> >     --
> >     Digimer
> >     Papers and Projects: https://alteeve.ca/w/
> >     What if the cure for cancer is trapped in the mind of a person
> without
> >     access to education?
> >
> >
>
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
>

--00151758a7687bc36b04cd539cdd
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Digimer,<br><br>Out put of rpm -q cman<br><br>cman-2.0.115-34.el5<br><br>Th=
ere is no http mentioned in fencedevice, I think email client is inserting =
it.<br><br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote">On Wed, =
Oct 31, 2012 at 10:14 AM, Digimer <span dir=3D"ltr">&lt;<a href=3D"mailto:l=
ists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> wrote:<b=
r>
<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex">What does &#39;rpm -q cma=
n&#39; return?<br>
<br>
This looks very odd;<br>
&lt;fencedevice agent=3D&quot;fence_bladecenter&quot;<br>
&gt; ipaddr=3D&quot;<a href=3D"http://mm-1.mydomain.com" target=3D"_blank">=
mm-1.mydomain.com</a> &lt;<a href=3D"http://mm-1.mydomain.com" target=3D"_b=
lank">http://mm-1.mydomain.com</a>&gt;&quot;<br>
<br>
Please remove this for now;<br>
<div class=3D"im"><br>
=A0&lt;fence_daemon clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&q=
uot;<br>
&gt; post_join_delay=3D&quot;0&quot;/&gt;<br>
<br>
</div>In general, you don&#39;t want to assume a clean start. It&#39;s aski=
ng for<br>
trouble. The default delays are also sane. You can always come back to<br>
this later after this issue is resolved, if you wish.<br>
<div><div class=3D"h5"><br>
On 10/30/2012 09:20 PM, Parvez Shaikh wrote:<br>
&gt; Hi Digimer,<br>
&gt;<br>
&gt; cman_tool version gives following -<br>
&gt;<br>
&gt; 6.2.0 config 22<br>
&gt;<br>
&gt; Cluster.conf -<br>
&gt;<br>
&gt; &lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&gt; &lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot;=
 name=3D&quot;PARVEZ&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;clusternodes&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;clusternode name=3D&quot;myblade2&=
quot; nodeid=3D&quot;2&quot; votes=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;me=
thod name=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 &lt;device blade=3D&quot;2&quot;<br>
&gt; missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;=
/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/m=
ethod&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/clusternode&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;clusternode name=3D&quot;myblade1&=
quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;me=
thod name=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 &lt;device blade=3D&quot;1&quot;<br>
&gt; missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;=
/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/m=
ethod&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/clusternode&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;/clusternodes&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;cman expected_votes=3D&quot;1&quot; two_node=3D&qu=
ot;1&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;fencedevices&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fencedevice agent=3D&quot;fence_bl=
adecenter&quot;<br>
</div></div>&gt; ipaddr=3D&quot;<a href=3D"http://mm-1.mydomain.com" target=
=3D"_blank">mm-1.mydomain.com</a> &lt;<a href=3D"http://mm-1.mydomain.com" =
target=3D"_blank">http://mm-1.mydomain.com</a>&gt;&quot; login=3D&quot;XXXX=
&quot;<br>

<div class=3D"HOEnZb"><div class=3D"h5">&gt; name=3D&quot;BladeCenterFencin=
g-1&quot; passwd=3D&quot;XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br=
>
&gt; =A0 =A0 =A0 =A0 &lt;/fencedevices&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;rm&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;resources&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script file=3D&quo=
t;/localhome/my/my_ha&quot;<br>
&gt; name=3D&quot;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip address=3D&quot=
;192.168.51.51&quot; monitor_link=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/resources&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;failoverdomains&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;failoverdomain nam=
e=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot;<br>
&gt; ordered=3D&quot;1&quot; restricted=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fa=
iloverdomainnode name=3D&quot;myblade2&quot;<br>
&gt; priority=3D&quot;2&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fa=
iloverdomainnode name=3D&quot;myblade1&quot;<br>
&gt; priority=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/failoverdomain&gt=
;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/failoverdomains&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;/rm&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;fence_daemon clean_start=3D&quot;1&quot; post_fail=
_delay=3D&quot;0&quot;<br>
&gt; post_join_delay=3D&quot;0&quot;/&gt;<br>
&gt; &lt;/cluster&gt;<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
&gt;<br>
&gt; On Tue, Oct 30, 2012 at 9:25 PM, Digimer &lt;<a href=3D"mailto:lists@a=
lteeve.ca">lists@alteeve.ca</a><br>
</div></div><div class=3D"HOEnZb"><div class=3D"h5">&gt; &lt;mailto:<a href=
=3D"mailto:lists@alteeve.ca">lists@alteeve.ca</a>&gt;&gt; wrote:<br>
&gt;<br>
&gt; =A0 =A0 On 10/30/2012 01:54 AM, Parvez Shaikh wrote:<br>
&gt; =A0 =A0 &gt; Hi experts,<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; I have defined a service as follows in cluster.conf -<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&=
quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; =A0 =A0 &gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; reco=
very=3D&quot;restart&quot;&gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;scrip=
t ref=3D&quot;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip re=
f=3D&quot;192.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; I mentioned max_restarts=3D5 hoping that if cluster fails=
 to start<br>
&gt; =A0 =A0 service<br>
&gt; =A0 =A0 &gt; 5 times, then it will relocate to another cluster node in=
 failover<br>
&gt; =A0 =A0 domain.<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; To check this, I turned down NIC hosting service&#39;s fl=
oating IP and got<br>
&gt; =A0 =A0 &gt; following logs -<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; =
Link for eth1: Not<br>
&gt; =A0 =A0 &gt; detected<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; =
No link on eth1...<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; =
No link on eth1...<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; sta=
tus on ip<br>
&gt; =A0 =A0 &gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Sto=
pping service<br>
&gt; =A0 =A0 &gt; service:mgmt<br>
&gt; =A0 =A0 &gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Se=
rvice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; recovering*<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Rec=
overing failed<br>
&gt; =A0 =A0 &gt; service service:mgmt<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; sta=
rt on ip<br>
&gt; =A0 =A0 &gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #6=
8: Failed to start<br>
&gt; =A0 =A0 &gt; service:mgmt; return value: 1<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Sto=
pping service<br>
&gt; =A0 =A0 &gt; service:mgmt<br>
&gt; =A0 =A0 &gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Se=
rvice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; recovering<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #7=
1: Relocating<br>
&gt; =A0 =A0 failed<br>
&gt; =A0 =A0 &gt; service service:mgmt*<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Ser=
vice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; stopped<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Ser=
vice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; stopped<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; But from the log it appears that cluster tried to restart=
 service only<br>
&gt; =A0 =A0 &gt; ONCE before relocating.<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; I was expecting cluster to retry starting this service fi=
ve times<br>
&gt; =A0 =A0 on the<br>
&gt; =A0 =A0 &gt; same node before relocating<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; Can anybody correct my understanding?<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; Thanks,<br>
&gt; =A0 =A0 &gt; Parvez<br>
&gt;<br>
&gt; =A0 =A0 What version? Please paste your full cluster.conf.<br>
&gt;<br>
&gt; =A0 =A0 --<br>
&gt; =A0 =A0 Digimer<br>
&gt; =A0 =A0 Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=
=3D"_blank">https://alteeve.ca/w/</a><br>
&gt; =A0 =A0 What if the cure for cancer is trapped in the mind of a person=
 without<br>
&gt; =A0 =A0 access to education?<br>
&gt;<br>
&gt;<br>
<br>
<br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div></div></blockquote></div><br>

--00151758a7687bc36b04cd539cdd--

From emi2fast@gmail.com Wed Oct 31 05:23:32 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V9NW1v013075 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 05:23:32 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V9NRiU008394
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 05:23:27 -0400
Received: from mail-ia0-f174.google.com (mail-ia0-f174.google.com
	[209.85.210.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V9NKaE002881
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 05:23:20 -0400
Received: by mail-ia0-f174.google.com with SMTP id y32so1001465iag.33
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 02:23:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=AYz/GkmetEi8Qds7QYWQxygQXk9yj477AboqXrkwFbc=;
	b=wPZmmFeddIhRY15PoCI51yrY3xRhNyC2+Sv54qIJg4QtA+3+QwRLbH1JEAkQP4LZn4
	hkDLCyghmWLyPdkfteoO+Z0iuvtCJVjo/hFoC3yVyTB/idthKE60Z4LfaH98Uqg1fLol
	cj40pzSKqUDiUnBxTlIon3+Ua/0UtdrgDf+woUoQU819+kBiTqPOQJ8pKxj14NQ68+Di
	w+dSCCdeU9jAURg/8IGsniWir1iWHOLNHuRHfbvWU6ykWDVcwic0ogFMM7pUXvjF5Lqc
	NtVpoft2JK9pmroQMc8wCZS7T9AdBWwYlEdY/seaQiakO9+wclvc3amInQnOBGuNAgxX
	KdLw==
MIME-Version: 1.0
Received: by 10.50.184.232 with SMTP id ex8mr714058igc.30.1351675400155; Wed,
	31 Oct 2012 02:23:20 -0700 (PDT)
Received: by 10.50.15.226 with HTTP; Wed, 31 Oct 2012 02:23:20 -0700 (PDT)
In-Reply-To: <CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
Date: Wed, 31 Oct 2012 10:23:20 +0100
Message-ID: <CAE7pJ3A3PZZBQ-KQEG5Yz_tQknzLF6U1Ds3M+2k6WFmQH3mW4A@mail.gmail.com>
From: emmanuel segura <emi2fast@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=14dae9340ef113f24804cd577478
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 09:23:32 -0000

--14dae9340ef113f24804cd577478
Content-Type: text/plain; charset=ISO-8859-1

Hello

Maybe you missing recovery="restart" in your services

2012/10/31 Parvez Shaikh <parvez.h.shaikh@gmail.com>

> Hi Digimer,
>
> cman_tool version gives following -
>
> 6.2.0 config 22
>
> Cluster.conf -
>
> <?xml version="1.0"?>
> <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
>         <clusternodes>
>                 <clusternode name="myblade2" nodeid="2" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="2"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>                 <clusternode name="myblade1" nodeid="1" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="1"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>         </clusternodes>
>         <cman expected_votes="1" two_node="1"/>
>         <fencedevices>
>                 <fencedevice agent="fence_bladecenter" ipaddr="
> mm-1.mydomain.com" login="XXXX" name="BladeCenterFencing-1"
> passwd="XXXXX" shell_timeout="10"/>
>         </fencedevices>
>         <rm>
>                 <resources>
>                         <script file="/localhome/my/my_ha"
> name="myHaAgent"/>
>                         <ip address="192.168.51.51" monitor_link="1"/>
>                 </resources>
>                 <failoverdomains>
>                         <failoverdomain name="mydomain" nofailback="1"
> ordered="1" restricted="1">
>                                 <failoverdomainnode name="myblade2"
> priority="2"/>
>                                 <failoverdomainnode name="myblade1"
> priority="1"/>
>                         </failoverdomain>
>                 </failoverdomains>
>                 <service autostart="0" domain="mydomain" exclusive="0"
> max_restarts="5" name="mgmt" recovery="restart">
>                         <script ref="myHaAgent"/>
>                         <ip ref="192.168.51.51"/>
>                 </service>
>         </rm>
>         <fence_daemon clean_start="1" post_fail_delay="0"
> post_join_delay="0"/>
> </cluster>
>
> Thanks,
> Parvez
>
> On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca> wrote:
>
>> On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
>> > Hi experts,
>> >
>> > I have defined a service as follows in cluster.conf -
>> >
>> >                 <service autostart="0" domain="mydomain" exclusive="0"
>> > max_restarts="5" name="mgmt" recovery="restart">
>> >                         <script ref="myHaAgent"/>
>> >                         <ip ref="192.168.51.51"/>
>> >                 </service>
>> >
>> > I mentioned max_restarts=5 hoping that if cluster fails to start service
>> > 5 times, then it will relocate to another cluster node in failover
>> domain.
>> >
>> > To check this, I turned down NIC hosting service's floating IP and got
>> > following logs -
>> >
>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
>> > detected
>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
>> > "192.168.51.51" returned 1 (generic error)
>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
>> > service:mgmt
>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > recovering*
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
>> > service service:mgmt
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
>> > "192.168.51.51" returned 1 (generic error)
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
>> > service:mgmt; return value: 1
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
>> > service:mgmt
>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > recovering
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
>> > service service:mgmt*
>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > stopped
>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > stopped
>> >
>> > But from the log it appears that cluster tried to restart service only
>> > ONCE before relocating.
>> >
>> > I was expecting cluster to retry starting this service five times on the
>> > same node before relocating
>> >
>> > Can anybody correct my understanding?
>> >
>> > Thanks,
>> > Parvez
>>
>> What version? Please paste your full cluster.conf.
>>
>> --
>> Digimer
>> Papers and Projects: https://alteeve.ca/w/
>> What if the cure for cancer is trapped in the mind of a person without
>> access to education?
>>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>



-- 
esta es mi vida e me la vivo hasta que dios quiera

--14dae9340ef113f24804cd577478
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello<br><br>Maybe you missing recovery=3D&quot;restart&quot; in your servi=
ces<br><br><div class=3D"gmail_quote">2012/10/31 Parvez Shaikh <span dir=3D=
"ltr">&lt;<a href=3D"mailto:parvez.h.shaikh@gmail.com" target=3D"_blank">pa=
rvez.h.shaikh@gmail.com</a>&gt;</span><br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Hi Digimer,<br><br>cman_tool version gives f=
ollowing -<br><br>6.2.0 config 22<br><br>Cluster.conf -<br><br>&lt;?xml ver=
sion=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot; name=
=3D&quot;PARVEZ&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myblade2&quot; nodeid=3D&qu=
ot;2&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &l=
t;method name=3D&quot;1&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;2&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myb=
lade1&quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<=
br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 &lt;method name=3D&quot;1&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;1&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cman =
expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0 &lt;fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 &lt;fencedevice agent=3D&quot;fence_bladecenter&quot; ipaddr=3D&q=
uot;<a href=3D"http://mm-1.mydomain.com" target=3D"_blank">mm-1.mydomain.co=
m</a>&quot; login=3D&quot;XXXX&quot; name=3D&quot;BladeCenterFencing-1&quot=
; passwd=3D&quot;XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br>

=A0=A0=A0=A0=A0=A0=A0 &lt;/fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;resources&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript file=3D&quot;/localhome/my/my_ha&quot; name=3D&quot;myHaAgent&quot;/&=
gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 &lt;ip address=3D&quot;192.168.51.51&quot; monitor_link=3D&quot;1&quot;=
/&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/resources&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomains&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failove=
rdomain name=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot; ordered=3D&q=
uot;1&quot; restricted=3D&quot;1&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode name=3D&quot;myblade2&quot; prior=
ity=3D&quot;2&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode nam=
e=3D&quot;myblade1&quot; priority=3D&quot;1&quot;/&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/=
failoverdomain&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fa=
iloverdomains&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;serv=
ice autostart=3D&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&qu=
ot;0&quot; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D=
&quot;restart&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;/rm&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;fence_daemon=
 clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&quot; post_join_dela=
y=3D&quot;0&quot;/&gt;<br>

&lt;/cluster&gt;<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote"=
>On Tue, Oct 30, 2012 at 9:25 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"=
mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> =
wrote:<br>

<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex"><div>On 10/30/2012 01:54 =
AM, Parvez Shaikh wrote:<br>
&gt; Hi experts,<br>
&gt;<br>
&gt; I have defined a service as follows in cluster.conf -<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; I mentioned max_restarts=3D5 hoping that if cluster fails to start ser=
vice<br>
&gt; 5 times, then it will relocate to another cluster node in failover dom=
ain.<br>
&gt;<br>
&gt; To check this, I turned down NIC hosting service&#39;s floating IP and=
 got<br>
&gt; following logs -<br>
&gt;<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; Link for eth1=
: Not<br>
&gt; detected<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
&gt; recovering*<br>
<div>&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Recovering =
failed<br>
&gt; service service:mgmt<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; start on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to =
start<br>
&gt; service:mgmt; return value: 1<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
<div>&gt; recovering<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating=
 failed<br>
</div>&gt; service service:mgmt*<br>
<div>&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service ser=
vice:mgmt is<br>
&gt; stopped<br>
&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:=
mgmt is<br>
&gt; stopped<br>
&gt;<br>
&gt; But from the log it appears that cluster tried to restart service only=
<br>
&gt; ONCE before relocating.<br>
&gt;<br>
&gt; I was expecting cluster to retry starting this service five times on t=
he<br>
&gt; same node before relocating<br>
&gt;<br>
&gt; Can anybody correct my understanding?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
<br>
</div>What version? Please paste your full cluster.conf.<span class=3D"HOEn=
Zb"><font color=3D"#888888"><br>
<span><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></font></span></blockquote></div><br>
<br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br><br clear=3D"all"><br>-- <br>esta es mi vida e me la vivo=
 hasta que dios quiera<br>


--14dae9340ef113f24804cd577478--

From parvez.h.shaikh@gmail.com Wed Oct 31 13:35:13 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9VHZDdr023434 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 13:35:13 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9VHZ8eO006141
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 13:35:08 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9VHZ5PJ010579
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 13:35:06 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so809331bkc.33
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 10:35:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=2+L0/VPOf4wi90KE3udhZVss2XklZ3C+nOTN0hxfz3o=;
	b=iG6DgkKT0fbKIGxv7M0MAsh7VkTFjXMg3ftPK3U6bwR2g7nWzxt9d+6Ic1ii4Z4xae
	Bv/fmrk2YwcdBHP99QGJg4V8eAeijLuXoPhU4RLvE4l7h6VDD3Fw+ahFSY13VrZknJch
	kVBWQUyxI9E4n52/uTG0YwKZ130311JPZ3jIK+idEDt6DTkeJiJcYkd6yMbyopifEIMR
	QCdGkiFefY/jWK3jnmPeYzlvyCMIRlmh7J/k0u8LEJMoGe4zVTvV4ZzrggUcNfpqnODA
	UW3bQktPFf5tGT3cStSofq+68MKGdm5+8aBnhd81IS0NjFCZ62On2kjf/9AAL0Seo5Jp
	m8/w==
MIME-Version: 1.0
Received: by 10.204.11.133 with SMTP id t5mr11770346bkt.14.1351704905384; Wed,
	31 Oct 2012 10:35:05 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Wed, 31 Oct 2012 10:35:05 -0700 (PDT)
In-Reply-To: <CAE7pJ3A3PZZBQ-KQEG5Yz_tQknzLF6U1Ds3M+2k6WFmQH3mW4A@mail.gmail.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
	<CAE7pJ3A3PZZBQ-KQEG5Yz_tQknzLF6U1Ds3M+2k6WFmQH3mW4A@mail.gmail.com>
Date: Wed, 31 Oct 2012 23:05:05 +0530
Message-ID: <CAKrd530dBW=972kBwD_36vRG_fkKjveZQEVhWHYEUcMCvmRjeA@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=00151758b404ba038d04cd5e52e9
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 17:35:13 -0000

--00151758b404ba038d04cd5e52e9
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am using recovery=restart as evident from earlier attached cluster.conf

Thanks,
Parvez

On Wed, Oct 31, 2012 at 2:53 PM, emmanuel segura <emi2fast@gmail.com> wrote:

> Hello
>
> Maybe you missing recovery="restart" in your services
>
> 2012/10/31 Parvez Shaikh <parvez.h.shaikh@gmail.com>
>
>> Hi Digimer,
>>
>> cman_tool version gives following -
>>
>> 6.2.0 config 22
>>
>> Cluster.conf -
>>
>> <?xml version="1.0"?>
>> <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
>>         <clusternodes>
>>                 <clusternode name="myblade2" nodeid="2" votes="1">
>>                         <fence>
>>                                 <method name="1">
>>                                         <device blade="2"
>> missing_as_off="1" name="BladeCenterFencing-1"/>
>>                                 </method>
>>                         </fence>
>>                 </clusternode>
>>                 <clusternode name="myblade1" nodeid="1" votes="1">
>>                         <fence>
>>                                 <method name="1">
>>                                         <device blade="1"
>> missing_as_off="1" name="BladeCenterFencing-1"/>
>>                                 </method>
>>                         </fence>
>>                 </clusternode>
>>         </clusternodes>
>>         <cman expected_votes="1" two_node="1"/>
>>         <fencedevices>
>>                 <fencedevice agent="fence_bladecenter" ipaddr="
>> mm-1.mydomain.com" login="XXXX" name="BladeCenterFencing-1"
>> passwd="XXXXX" shell_timeout="10"/>
>>         </fencedevices>
>>         <rm>
>>                 <resources>
>>                         <script file="/localhome/my/my_ha"
>> name="myHaAgent"/>
>>                         <ip address="192.168.51.51" monitor_link="1"/>
>>                 </resources>
>>                 <failoverdomains>
>>                         <failoverdomain name="mydomain" nofailback="1"
>> ordered="1" restricted="1">
>>                                 <failoverdomainnode name="myblade2"
>> priority="2"/>
>>                                 <failoverdomainnode name="myblade1"
>> priority="1"/>
>>                         </failoverdomain>
>>                 </failoverdomains>
>>                 <service autostart="0" domain="mydomain" exclusive="0"
>> max_restarts="5" name="mgmt" recovery="restart">
>>                         <script ref="myHaAgent"/>
>>                         <ip ref="192.168.51.51"/>
>>                 </service>
>>         </rm>
>>         <fence_daemon clean_start="1" post_fail_delay="0"
>> post_join_delay="0"/>
>> </cluster>
>>
>> Thanks,
>> Parvez
>>
>> On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca> wrote:
>>
>>> On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
>>> > Hi experts,
>>> >
>>> > I have defined a service as follows in cluster.conf -
>>> >
>>> >                 <service autostart="0" domain="mydomain" exclusive="0"
>>> > max_restarts="5" name="mgmt" recovery="restart">
>>> >                         <script ref="myHaAgent"/>
>>> >                         <ip ref="192.168.51.51"/>
>>> >                 </service>
>>> >
>>> > I mentioned max_restarts=5 hoping that if cluster fails to start
>>> service
>>> > 5 times, then it will relocate to another cluster node in failover
>>> domain.
>>> >
>>> > To check this, I turned down NIC hosting service's floating IP and got
>>> > following logs -
>>> >
>>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
>>> > detected
>>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
>>> > "192.168.51.51" returned 1 (generic error)
>>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
>>> > service:mgmt
>>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt
>>> is
>>> > recovering*
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
>>> > service service:mgmt
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
>>> > "192.168.51.51" returned 1 (generic error)
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
>>> > service:mgmt; return value: 1
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
>>> > service:mgmt
>>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt
>>> is
>>> > recovering
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
>>> > service service:mgmt*
>>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>>> > stopped
>>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>>> > stopped
>>> >
>>> > But from the log it appears that cluster tried to restart service only
>>> > ONCE before relocating.
>>> >
>>> > I was expecting cluster to retry starting this service five times on
>>> the
>>> > same node before relocating
>>> >
>>> > Can anybody correct my understanding?
>>> >
>>> > Thanks,
>>> > Parvez
>>>
>>> What version? Please paste your full cluster.conf.
>>>
>>> --
>>> Digimer
>>> Papers and Projects: https://alteeve.ca/w/
>>> What if the cure for cancer is trapped in the mind of a person without
>>> access to education?
>>>
>>
>>
>> --
>> Linux-cluster mailing list
>> Linux-cluster@redhat.com
>> https://www.redhat.com/mailman/listinfo/linux-cluster
>>
>
>
>
> --
> esta es mi vida e me la vivo hasta que dios quiera
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--00151758b404ba038d04cd5e52e9
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><br>I am using recovery=3Drestart as evident from earlier attached c=
luster.conf<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote">On W=
ed, Oct 31, 2012 at 2:53 PM, emmanuel segura <span dir=3D"ltr">&lt;<a href=
=3D"mailto:emi2fast@gmail.com" target=3D"_blank">emi2fast@gmail.com</a>&gt;=
</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Hello<br><br>Maybe you missing recovery=3D&q=
uot;restart&quot; in your services<br><br><div class=3D"gmail_quote">2012/1=
0/31 Parvez Shaikh <span dir=3D"ltr">&lt;<a href=3D"mailto:parvez.h.shaikh@=
gmail.com" target=3D"_blank">parvez.h.shaikh@gmail.com</a>&gt;</span><br>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div class=3D"h5">Hi Digimer,<br><br>cm=
an_tool version gives following -<br><br>6.2.0 config 22<br><br>Cluster.con=
f -<br>
<br>&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot; name=
=3D&quot;PARVEZ&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myblade2&quot; nodeid=3D&qu=
ot;2&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &l=
t;method name=3D&quot;1&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;2&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myb=
lade1&quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<=
br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 &lt;method name=3D&quot;1&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;1&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cman =
expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0 &lt;fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 &lt;fencedevice agent=3D&quot;fence_bladecenter&quot; ipaddr=3D&q=
uot;<a href=3D"http://mm-1.mydomain.com" target=3D"_blank">mm-1.mydomain.co=
m</a>&quot; login=3D&quot;XXXX&quot; name=3D&quot;BladeCenterFencing-1&quot=
; passwd=3D&quot;XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br>


=A0=A0=A0=A0=A0=A0=A0 &lt;/fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;resources&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript file=3D&quot;/localhome/my/my_ha&quot; name=3D&quot;myHaAgent&quot;/&=
gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 &lt;ip address=3D&quot;192.168.51.51&quot; monitor_link=3D&quot;1&quot;=
/&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/resources&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomains&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failove=
rdomain name=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot; ordered=3D&q=
uot;1&quot; restricted=3D&quot;1&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode name=3D&quot;myblade2&quot; prior=
ity=3D&quot;2&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode nam=
e=3D&quot;myblade1&quot; priority=3D&quot;1&quot;/&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/=
failoverdomain&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fa=
iloverdomains&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;serv=
ice autostart=3D&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&qu=
ot;0&quot; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D=
&quot;restart&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;/rm&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;fence_daemon=
 clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&quot; post_join_dela=
y=3D&quot;0&quot;/&gt;<br>


&lt;/cluster&gt;<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote"=
>On Tue, Oct 30, 2012 at 9:25 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"=
mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> =
wrote:<br>


<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex"><div>On 10/30/2012 01:54 =
AM, Parvez Shaikh wrote:<br>
&gt; Hi experts,<br>
&gt;<br>
&gt; I have defined a service as follows in cluster.conf -<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; I mentioned max_restarts=3D5 hoping that if cluster fails to start ser=
vice<br>
&gt; 5 times, then it will relocate to another cluster node in failover dom=
ain.<br>
&gt;<br>
&gt; To check this, I turned down NIC hosting service&#39;s floating IP and=
 got<br>
&gt; following logs -<br>
&gt;<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; Link for eth1=
: Not<br>
&gt; detected<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
&gt; recovering*<br>
<div>&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Recovering =
failed<br>
&gt; service service:mgmt<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; start on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to =
start<br>
&gt; service:mgmt; return value: 1<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
<div>&gt; recovering<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating=
 failed<br>
</div>&gt; service service:mgmt*<br>
<div>&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service ser=
vice:mgmt is<br>
&gt; stopped<br>
&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:=
mgmt is<br>
&gt; stopped<br>
&gt;<br>
&gt; But from the log it appears that cluster tried to restart service only=
<br>
&gt; ONCE before relocating.<br>
&gt;<br>
&gt; I was expecting cluster to retry starting this service five times on t=
he<br>
&gt; same node before relocating<br>
&gt;<br>
&gt; Can anybody correct my understanding?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
<br>
</div>What version? Please paste your full cluster.conf.<span><font color=
=3D"#888888"><br>
<span><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></font></span></blockquote></div><br>
<br></div></div><span class=3D"HOEnZb"><font color=3D"#888888">--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com" target=3D"_blank">Linux-cluster=
@redhat.com</a><br>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></fon=
t></span></blockquote></div><span class=3D"HOEnZb"><font color=3D"#888888">=
<br>
<br clear=3D"all"><br>-- <br>esta es mi vida e me la vivo hasta que dios qu=
iera<br>

</font></span><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br>

--00151758b404ba038d04cd5e52e9--

From jamespedia@gmail.com Wed Oct 31 15:07:12 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9VJ7CCs023388 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 15:07:12 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9VJ77XJ026885
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 15:07:07 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9VJ75t7013579
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 15:07:05 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so2013972obb.33
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 12:07:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=V8N/dZzfn7pslpqQmkcgnEAy7dlRebyBuR8uZKPL56k=;
	b=r8KsC9Z9kElxCD77U4DlVESswmBocRMn2odVtyEIbJpm4EFOqx2I28j1iSlN3jMxZP
	HNUXZGoKj3L2eYOhlIA6fE7vwyCx8quLqzHH6t8yLoPcSNmWKvxuHBcIrr7DfAWWkoum
	aWfq3dKYFJDNtzGWpEO/aWhXLvc4r13EQ/uqdWd9gqBWZsK7bdNkzIu8Ik0l3j+h0lcY
	x4xiW6DE3RZtzSRs2l+gHdllePnogZenuIfDBM2zI8z+XYmbqu6SSgN6HMT9ipYCzc5u
	SynMjOXtyQDh2nnxNUAVxB6qtyL1Tvl9eUZHCefn25ZgjeSOFMYAp2Sisfn9/+oPE9wa
	C4+Q==
MIME-Version: 1.0
Received: by 10.182.64.34 with SMTP id l2mr31572553obs.28.1351710425116; Wed,
	31 Oct 2012 12:07:05 -0700 (PDT)
Received: by 10.182.36.202 with HTTP; Wed, 31 Oct 2012 12:07:04 -0700 (PDT)
Date: Wed, 31 Oct 2012 14:07:04 -0500
Message-ID: <CAAxr-=8Yj6n53UF=TLbjfUdv6Sbx50MYbwA-AbG__Tdo9ZgBCA@mail.gmail.com>
From: james pedia <jamespedia@gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=14dae93a1909ba6f9704cd5f9b2e
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] gfs2_tool unfreeze hang
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 19:07:12 -0000

--14dae93a1909ba6f9704cd5f9b2e
Content-Type: text/plain; charset=ISO-8859-1

Noticed this thread for the same issue at:

https://www.redhat.com/archives/linux-cluster/2012-September/msg00084.html:

I think I hit the same issue:

(CentOS6.3)
# uname -r
2.6.32-279.el6.x86_64

gfs2-utils-3.0.12.1-32.el6_3.1.x86_64 is in use here.


# gfs2_tool freeze /var/www/html
# ls -l /var/www/html/
total 8
-rw-r--r-- 1 root root 10 Oct 30 23:47 a
-rw-r--r-- 1 root root 41 Oct 30 20:44 index.html
# cp /var/www/html/a /var/www/html/b
(HANG HERE)

Then try this:
# gfs2_tool unfreeze /var/www/html
(HANG AS WELL)

The whole cluster has to be reset to recover from this.

'dmsetup suspend' and 'dmsetup resume' are working fine.

Are these commands basically doing the same thing ('dmsetup suspend' vs
'gfs2_tool freeze')?

Is there a way to see if GFS2 file system is currently being suspended or
frozen?

Thanks,

--14dae93a1909ba6f9704cd5f9b2e
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Noticed this thread for the same issue at:<div><br></div><div><a href=3D"ht=
tps://www.redhat.com/archives/linux-cluster/2012-September/msg00084.html">h=
ttps://www.redhat.com/archives/linux-cluster/2012-September/msg00084.html</=
a>:<div>
<br></div><div>I think I hit the same issue:</div><div><br></div><div>(Cent=
OS6.3)</div><div><div># uname -r</div><div>2.6.32-279.el6.x86_64</div></div=
><div><br></div><div>gfs2-utils-3.0.12.1-32.el6_3.1.x86_64 is in use here.<=
/div>
<div><br></div><div><br></div><div><div># gfs2_tool freeze /var/www/html</d=
iv></div><div><div># ls -l /var/www/html/</div><div>total 8</div><div>-rw-r=
--r-- 1 root root 10 Oct 30 23:47 a</div><div>-rw-r--r-- 1 root root 41 Oct=
 30 20:44 index.html</div>
</div><div><div># cp /var/www/html/a /var/www/html/b</div></div><div>(HANG =
HERE)</div><div><br></div><div>Then try this:</div><div><div># gfs2_tool un=
freeze /var/www/html</div></div><div>(HANG AS WELL)</div><div><br></div>
<div>The whole cluster has to be reset to recover from this.=A0</div><div><=
br></div><div>&#39;dmsetup suspend&#39; and &#39;dmsetup resume&#39; are wo=
rking fine.=A0</div><div><br></div><div>Are these commands basically doing =
the same thing (&#39;dmsetup suspend&#39; vs &#39;gfs2_tool freeze&#39;)?=
=A0</div>
<div><br></div><div>Is there a way to see if GFS2 file system is currently =
being suspended or frozen?</div><div><br></div><div>Thanks,</div></div>

--14dae93a1909ba6f9704cd5f9b2e--

From hitesh1907nayyar@gmail.com Sun Sep 30 23:16:38 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913Gcb9019088 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Sep 2012 23:16:38 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913GX99014007
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:16:33 -0400
Received: from mail-vc0-f174.google.com (mail-vc0-f174.google.com
	[209.85.220.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q913GWX2017181
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:16:32 -0400
Received: by vcbfo13 with SMTP id fo13so6052528vcb.33
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 20:16:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=XH5v2ItQmEf1M8erx+UfuzEpAY20hXcDzcQcAV4n/Co=;
	b=0kfm72jZww9MeRNOMHY28BFmhS8THASAqtGHZPpY0CQI8JHFmWAh5doqY9ts2bzqvW
	yom8xI5q68oyX4JVAFXl1E+2U6Ie0cM8DhKcetKEAS4t066POzaAzn70eikdbVoNRRoS
	8EbWn2paPTkMNUd9kjmgJJlTedff+QGXZLMNU3knPKOeGe6OZuMob8llOmUlaHBqsVo6
	7FNVsnqSz0iijrZOfyltT1DAF5yClJ1vFlb0qftvKGjG9lRfA8gXtLoEQF2b6DhuU2xl
	uL5PsiEAa7iplacvklaJ7+664sUYOlMOEZ/hE/tJHQY099TXSqfDWEDmsqrBAQ+Zht51
	P+Cg==
MIME-Version: 1.0
Received: by 10.58.23.202 with SMTP id o10mr7700089vef.57.1349061392031; Sun,
	30 Sep 2012 20:16:32 -0700 (PDT)
Received: by 10.220.135.9 with HTTP; Sun, 30 Sep 2012 20:16:31 -0700 (PDT)
Date: Mon, 1 Oct 2012 08:46:31 +0530
Message-ID: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
From: hitesh nayyar <hitesh1907nayyar@gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=047d7b3398590d5f2504caf6d51e
X-RedHat-Spam-Score: -1.592  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, LOCALPART_IN_SUBJECT,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 03:16:39 -0000

--047d7b3398590d5f2504caf6d51e
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Hi,

I am facing issuing in setting up Linux cluster. Here is the issue that i
am facing.

I have 2 Linux desktop and have following ip's and name:

hitesh12-192.168.1.23
saanvi12-192.168.1.30

i enabled ricci service and have setup passwod as well.Enabled luci service
as well.

When cluster using GUI by activating luci GUI i see error logs in my
/var/log/messages from hitesh12 -192.168.1.23


Sep 30 22:31:57 localhost dlm_controld[2945]: dlm_controld 3.0.12 started
Sep 30 22:32:18 localhost gfs_controld[3010]: gfs_controld 3.0.12 started
Sep 30 22:33:39 localhost kernel: dlm: Using TCP for communications
Sep 30 22:33:41 localhost fenced[2930]: fencing node saanvi12
Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none
result: error no method
*Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 failed
Sep 30 22:33:47 localhost fenced[2930]: fencing node saanvi12
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none
result: error no method
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 failed
Sep 30 22:33:52 localhost fenced[2930]: fencing node saanvi12*

With the above error the result in by issuing clustat -i 1 command is :

*Cluster Status for dhoni @ Sun Sep 30 23:04:08 2012
Member Status: Quorate

Member Name ID Status
------ ---- ---- ------
hitesh12 1 Online, Local
saanvi12 2 Offline*


I have disabled by firewall on both my linux servers and is able to telnet
each other.


Can somebdy please help me out as how can i remove my fence error ?

--047d7b3398590d5f2504caf6d51e
Content-Type: text/html; charset=ISO-8859-1

Hi,<br><br>Hi,<br>
<br>
I am facing issuing in setting up Linux cluster. Here is the issue that i am facing.<br>
<br>
I have 2 Linux desktop and have following ip&#39;s and name:<br>
<br>
hitesh12-192.168.1.23<br>
saanvi12-192.168.1.30<br>
<br>
i enabled ricci service and have setup passwod as well.Enabled luci service as well.<br>
<br>
When cluster using GUI by activating  luci GUI i see error logs in my /var/log/messages from hitesh12 -192.168.1.23<br>
<br>
<br>
Sep 30 22:31:57 localhost dlm_controld[2945]: dlm_controld 3.0.12 started<br>
Sep 30 22:32:18 localhost gfs_controld[3010]: gfs_controld 3.0.12 started<br>
Sep 30 22:33:39 localhost kernel: dlm: Using TCP for communications<br>
Sep 30 22:33:41 localhost fenced[2930]: fencing node saanvi12<br>
Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none result: error no method<br>
<b>Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 failed<br>
Sep 30 22:33:47 localhost fenced[2930]: fencing node saanvi12<br>
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 dev 0.0 agent none result: error no method<br>
Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 failed<br>
Sep 30 22:33:52 localhost fenced[2930]: fencing node saanvi12</b><br>
<br>
With the above error the result in by issuing clustat -i 1 command is :<br>
<br>
<b>Cluster Status for dhoni @ Sun Sep 30 23:04:08 2012<br>
Member Status: Quorate<br>
<br>
 Member Name                                                     ID   Status<br>
 ------ ----                                                     ---- ------<br>
 hitesh12                                                            1 Online, Local<br>
 saanvi12                                                            2 Offline</b><br>
<br>
<br>
I have disabled by firewall on both my linux servers and is able to telnet each other.<br>
<br>
<br>
Can somebdy please help me out as how can i remove my fence error ?<br>

--047d7b3398590d5f2504caf6d51e--


From lists@alteeve.ca Sun Sep 30 23:22:23 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913MNO1019230 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Sep 2012 23:22:23 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q913MHDb031715
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:22:18 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q913MGqh006998
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:22:16 -0400
Received: from lemass.alteeve.ca (unknown [208.67.150.233])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id A9A37421042;
	Sun, 30 Sep 2012 23:22:13 -0400 (EDT)
Message-ID: <50690C66.2070603@alteeve.ca>
Date: Sun, 30 Sep 2012 23:22:14 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
In-Reply-To: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 03:22:23 -0000

Did you setup fencing? Can you send your cluster.conf file please?

digimer

On 09/30/2012 11:16 PM, hitesh nayyar wrote:
> Hi,
>
> Hi,
>
> I am facing issuing in setting up Linux cluster. Here is the issue that
> i am facing.
>
> I have 2 Linux desktop and have following ip's and name:
>
> hitesh12-192.168.1.23
> saanvi12-192.168.1.30
>
> i enabled ricci service and have setup passwod as well.Enabled luci
> service as well.
>
> When cluster using GUI by activating luci GUI i see error logs in my
> /var/log/messages from hitesh12 -192.168.1.23
>
>
> Sep 30 22:31:57 localhost dlm_controld[2945]: dlm_controld 3.0.12 started
> Sep 30 22:32:18 localhost gfs_controld[3010]: gfs_controld 3.0.12 started
> Sep 30 22:33:39 localhost kernel: dlm: Using TCP for communications
> Sep 30 22:33:41 localhost fenced[2930]: fencing node saanvi12
> Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 dev 0.0 agent
> none result: error no method
> *Sep 30 22:33:44 localhost fenced[2930]: fence saanvi12 failed
> Sep 30 22:33:47 localhost fenced[2930]: fencing node saanvi12
> Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 dev 0.0 agent
> none result: error no method
> Sep 30 22:33:49 localhost fenced[2930]: fence saanvi12 failed
> Sep 30 22:33:52 localhost fenced[2930]: fencing node saanvi12*
>
> With the above error the result in by issuing clustat -i 1 command is :
>
> *Cluster Status for dhoni @ Sun Sep 30 23:04:08 2012
> Member Status: Quorate
>
> Member Name ID Status
> ------ ---- ---- ------
> hitesh12 1 Online, Local
> saanvi12 2 Offline*
>
>
> I have disabled by firewall on both my linux servers and is able to
> telnet each other.
>
>
> Can somebdy please help me out as how can i remove my fence error ?
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From raju.rajsand@gmail.com Sun Sep 30 23:43:46 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q913hkbx021085 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Sep 2012 23:43:46 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q913hfYX027159
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:43:41 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q913heqW027173
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 23:43:40 -0400
Received: by obbuo13 with SMTP id uo13so5297547obb.33
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 20:43:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=Xs83tmRBaANIUAlTD43IODVtz4mQ5RRy0V1D2IP5e9A=;
	b=C8nB4rMT9V7LUgynzs+eZIYGK0FZo+VAlhbBO/2/zRRRKGP22Eflo4SEwFmyeVZXSM
	o1whInUOV6LX5V1RD5tcqKtwzDQwfhrBISMb7MGpPofl39avm6B/PBPME5vMbGQkYJBd
	IbRyW+b+0Y7e4sexnGtjcjhkuSMc+LCWcVNuPvLE6kQ8zbsnN08RaFYm5ocVgKuq/iEg
	8qgdxsEJje8ZlAi0luo1oBitQt/F415v6TCoxdFQWpt5ru47KyXi9morQnEe3tnsJhM4
	Hsv/HN33tPtNYdrYfc84Ho5YszUIz7uXSjYe6Upssj3XXCwrH49d9m+q9DPqE5Gd2iKW
	uivA==
MIME-Version: 1.0
Received: by 10.60.170.76 with SMTP id ak12mr10984387oec.22.1349063019865;
	Sun, 30 Sep 2012 20:43:39 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Sun, 30 Sep 2012 20:43:39 -0700 (PDT)
In-Reply-To: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
Date: Mon, 1 Oct 2012 09:13:39 +0530
X-Google-Sender-Auth: 13K2TBkWRrXF9Rhi0IAFP4fb3yM
Message-ID: <CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 03:43:46 -0000

Greetings,

On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
<hitesh1907nayyar@gmail.com> wrote:
>
> I have 2 Linux desktop and have following ip's and name:
>

>From what I can gather, This seems to be a desktop class machines.
Hence they may not have IPMI/ILO etc.

I am 99.99% certain that fencing has not been configured.

I also doubt if it has external storage.

(I can identify as I tried my experiments with clusters first time
with such desktop class machines)

The only solution for this is Power Fencing.

-- 
Regards,

Rajagopal


From hitesh1907nayyar@gmail.com Mon Oct  1 00:53:55 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q914rtL2027172 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 00:53:55 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q914rn5d011430
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 00:53:49 -0400
Received: from mail-vc0-f174.google.com (mail-vc0-f174.google.com
	[209.85.220.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q914rmw9022353
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 00:53:48 -0400
Received: by vcbfo13 with SMTP id fo13so6105696vcb.33
	for <linux-cluster@redhat.com>; Sun, 30 Sep 2012 21:53:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=HLtd79qXwlmV0Z1wncyDRzG85/5B3MepIf3Z9t+c8uM=;
	b=tHOhtcfPPqZPlaJGExAmY/c2nWdMibFC6aVdXVa2ZRr0IjLXpDA3PxfE81IPuC/9Q9
	Gc078T2496bI6o50wZCFVQT9ohu+KfAfsL4TyDwMs7T1TCxKJwHZA/26DtfUo8Yfv0CV
	5q+0EW8sK37MG0DhUH2XO9eJf5+uYe7G9mulp2FTMmHCcJgUZGwZWz6YN1d64mFvTjqZ
	iE74PDIhvHuY2+GI34VcfxqLHVVnNih0wKYQq+sI0dqFijNwVCcnWvU8LUWmPtrGL9vj
	baoGW1eQatZ4EmOwKY3eBB238PSE4q0bgLcdkHc4gtxNGHvbIErYPMwOHcbzGJjD79Bx
	9gmA==
MIME-Version: 1.0
Received: by 10.220.150.14 with SMTP id w14mr7733216vcv.13.1349067228223; Sun,
	30 Sep 2012 21:53:48 -0700 (PDT)
Received: by 10.220.135.9 with HTTP; Sun, 30 Sep 2012 21:53:48 -0700 (PDT)
In-Reply-To: <CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
Date: Mon, 1 Oct 2012 10:23:48 +0530
Message-ID: <CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
From: hitesh nayyar <hitesh1907nayyar@gmail.com>
To: linux clustering <linux-cluster@redhat.com>, lists@alteeve.ca,
	raju.rajsand@gmail.com
Content-Type: multipart/alternative; boundary=f46d043c81ccea983704caf8307c
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 04:53:55 -0000

--f46d043c81ccea983704caf8307c
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am not aware of fencing.Yes you are correct i have not configured
anything related to fencing.

Can you please let me know as how can i proceed...Do i have to purchase
some sort of hardware?

How can i implement Power Fencing?

I am using virtual box machines on my desktop in which linux are installed
and have been connected through swtich.


[root@hitesh12 ~]# cat /etc/cluster/cluster.conf
<?xml version="1.0"?>
<cluster config_version="1" name="dhoni">
        <clusternodes>
                <clusternode name="hitesh12" nodeid="1"/>
                <clusternode name="saanvi12" nodeid="2"/>
        </clusternodes>
        <cman expected_votes="1" two_node="1"/>
        <fencedevices/>
        <rm/>
</cluster>






On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan <
raju.rajsand@gmail.com> wrote:

> Greetings,
>
> On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
> <hitesh1907nayyar@gmail.com> wrote:
> >
> > I have 2 Linux desktop and have following ip's and name:
> >
>
> >From what I can gather, This seems to be a desktop class machines.
> Hence they may not have IPMI/ILO etc.
>
> I am 99.99% certain that fencing has not been configured.
>
> I also doubt if it has external storage.
>
> (I can identify as I tried my experiments with clusters first time
> with such desktop class machines)
>
> The only solution for this is Power Fencing.
>
> --
> Regards,
>
> Rajagopal
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--f46d043c81ccea983704caf8307c
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,<br><br>I am not aware of fencing.Yes you are correct i have not conf=
igured anything related to fencing.<br><br>Can you please let me know as ho=
w can i proceed...Do i have to purchase some sort of hardware?<br><br>How c=
an i implement Power Fencing?<br>
<br>I am using virtual box machines on my desktop in which linux are instal=
led and have been connected through swtich.<br><br><br>[root@hitesh12 ~]# c=
at /etc/cluster/cluster.conf<br>&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster config_version=3D&quot;1&quot; name=3D&quot;dhoni&quot;&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;hitesh12&quot; nodeid=3D&qu=
ot;1&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;cluste=
rnode name=3D&quot;saanvi12&quot; nodeid=3D&quot;2&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cm=
an expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0 &lt;fencedevices/&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm/&gt;<=
br>&lt;/cluster&gt;<br><br><br><br><br><br><br><div class=3D"gmail_quote">
On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan <span dir=3D"ltr">&lt=
;<a href=3D"mailto:raju.rajsand@gmail.com" target=3D"_blank">raju.rajsand@g=
mail.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Greetings,<br>
<div><br>
On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar<br>
&lt;<a href=3D"mailto:hitesh1907nayyar@gmail.com" target=3D"_blank">hitesh1=
907nayyar@gmail.com</a>&gt; wrote:<br>
&gt;<br>
&gt; I have 2 Linux desktop and have following ip&#39;s and name:<br>
&gt;<br>
<br>
</div>&gt;From what I can gather, This seems to be a desktop class machines=
.<br>
Hence they may not have IPMI/ILO etc.<br>
<br>
I am 99.99% certain that fencing has not been configured.<br>
<br>
I also doubt if it has external storage.<br>
<br>
(I can identify as I tried my experiments with clusters first time<br>
with such desktop class machines)<br>
<br>
The only solution for this is Power Fencing.<br>
<span><font color=3D"#888888"><br>
--<br>
Regards,<br>
<br>
Rajagopal<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com" target=3D"_blank">Linux-cluster=
@redhat.com</a><br>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</font></span></blockquote></div><br>

--f46d043c81ccea983704caf8307c--


From lists@alteeve.ca Mon Oct  1 01:14:10 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q915EA6I028411 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 01:14:10 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q915E5hB015277
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:14:05 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q915E3V8027002
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:14:04 -0400
Received: from lemass.alteeve.ca (unknown [216.66.185.229])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 54A0C421042;
	Mon,  1 Oct 2012 01:14:01 -0400 (EDT)
Message-ID: <5069269A.2050405@alteeve.ca>
Date: Mon, 01 Oct 2012 01:14:02 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: hitesh nayyar <hitesh1907nayyar@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
In-Reply-To: <CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 05:14:10 -0000

First up, give this section a read. It will explain what fencing does 
and why you're seeing what you are;

https://alteeve.ca/w/2-Node_Red_Hat_KVM_Cluster_Tutorial#Concept.3B_Fencing

As for being virtualbox guests, you're in a bit of a spot as there 
doesn't seem to be a native agent. Google shows this though;

https://forums.virtualbox.org/viewtopic.php?f=7&t=35372

If you can switch to KVM or Xen, then you can use the fence_virsh or 
fence_xvm agents.

cheers

On 10/01/2012 12:53 AM, hitesh nayyar wrote:
> Hello,
>
> I am not aware of fencing.Yes you are correct i have not configured
> anything related to fencing.
>
> Can you please let me know as how can i proceed...Do i have to purchase
> some sort of hardware?
>
> How can i implement Power Fencing?
>
> I am using virtual box machines on my desktop in which linux are
> installed and have been connected through swtich.
>
>
> [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
> <?xml version="1.0"?>
> <cluster config_version="1" name="dhoni">
>          <clusternodes>
>                  <clusternode name="hitesh12" nodeid="1"/>
>                  <clusternode name="saanvi12" nodeid="2"/>
>          </clusternodes>
>          <cman expected_votes="1" two_node="1"/>
>          <fencedevices/>
>          <rm/>
> </cluster>
>
>
>
>
>
>
> On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan
> <raju.rajsand@gmail.com <mailto:raju.rajsand@gmail.com>> wrote:
>
>     Greetings,
>
>     On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
>     <hitesh1907nayyar@gmail.com <mailto:hitesh1907nayyar@gmail.com>> wrote:
>      >
>      > I have 2 Linux desktop and have following ip's and name:
>      >
>
>      >From what I can gather, This seems to be a desktop class machines.
>     Hence they may not have IPMI/ILO etc.
>
>     I am 99.99% certain that fencing has not been configured.
>
>     I also doubt if it has external storage.
>
>     (I can identify as I tried my experiments with clusters first time
>     with such desktop class machines)
>
>     The only solution for this is Power Fencing.
>
>     --
>     Regards,
>
>     Rajagopal
>
>     --
>     Linux-cluster mailing list
>     Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>     https://www.redhat.com/mailman/listinfo/linux-cluster
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From lists@alteeve.ca Mon Oct  1 01:49:45 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q915nj5g030920 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 01:49:45 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q915ndJk012076
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:49:39 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q915ncfk032442
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 01:49:38 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b9e5.dsl.look.ca
	[216.66.185.229])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id BEB7F422461;
	Mon,  1 Oct 2012 01:49:35 -0400 (EDT)
Message-ID: <50692EF0.2000505@alteeve.ca>
Date: Mon, 01 Oct 2012 01:49:36 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: hitesh nayyar <hitesh1907nayyar@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
In-Reply-To: <CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 05:49:45 -0000

Please keep replies on the mailing list. These question helps other in 
the future by being seachable in the archives.

Xen and KVM are types of hypervisors, like virtualbox is, but they run 
on Linux hosts. To use them, you would need to install linux on the bare 
machine. This in turn requires a CPU that supports virtualization (which 
most CPUs made in the last few years do support).

If you can install CentOS 6, you can use KVM which is what I recommend.

digimer

On 10/01/2012 01:26 AM, hitesh nayyar wrote:
> One more thing...till now i have used this setup:
>
> have Windows vista OS ---> Virtual Box---->Red Hat installed.
>
> If i download Xen or KVM can i use the same setup instead of Virtual Box?
>
> Windows vista OS ---->Xen or KVM ---->Red Hat installed
>
> BR//
> Hitesh
>
> On Mon, Oct 1, 2012 at 10:48 AM, hitesh nayyar
> <hitesh1907nayyar@gmail.com <mailto:hitesh1907nayyar@gmail.com>> wrote:
>
>     Hello Again,
>
>     Can you please let me know what refers to KVM or Xen? I have never
>     used this
>
>     Thanks
>
>
>     On Mon, Oct 1, 2012 at 10:44 AM, Digimer <lists@alteeve.ca
>     <mailto:lists@alteeve.ca>> wrote:
>
>         First up, give this section a read. It will explain what fencing
>         does and why you're seeing what you are;
>
>         https://alteeve.ca/w/2-Node___Red_Hat_KVM_Cluster_Tutorial#__Concept.3B_Fencing
>         <https://alteeve.ca/w/2-Node_Red_Hat_KVM_Cluster_Tutorial#Concept.3B_Fencing>
>
>         As for being virtualbox guests, you're in a bit of a spot as
>         there doesn't seem to be a native agent. Google shows this though;
>
>         https://forums.virtualbox.org/__viewtopic.php?f=7&t=35372
>         <https://forums.virtualbox.org/viewtopic.php?f=7&t=35372>
>
>         If you can switch to KVM or Xen, then you can use the
>         fence_virsh or fence_xvm agents.
>
>         cheers
>
>
>         On 10/01/2012 12:53 AM, hitesh nayyar wrote:
>
>             Hello,
>
>             I am not aware of fencing.Yes you are correct i have not
>             configured
>             anything related to fencing.
>
>             Can you please let me know as how can i proceed...Do i have
>             to purchase
>             some sort of hardware?
>
>             How can i implement Power Fencing?
>
>             I am using virtual box machines on my desktop in which linux are
>             installed and have been connected through swtich.
>
>
>             [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
>             <?xml version="1.0"?>
>             <cluster config_version="1" name="dhoni">
>                       <clusternodes>
>                               <clusternode name="hitesh12" nodeid="1"/>
>                               <clusternode name="saanvi12" nodeid="2"/>
>                       </clusternodes>
>                       <cman expected_votes="1" two_node="1"/>
>                       <fencedevices/>
>                       <rm/>
>             </cluster>
>
>
>
>
>
>
>             On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan
>             <raju.rajsand@gmail.com <mailto:raju.rajsand@gmail.com>
>             <mailto:raju.rajsand@gmail.com
>             <mailto:raju.rajsand@gmail.com>__>> wrote:
>
>                  Greetings,
>
>                  On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
>                  <hitesh1907nayyar@gmail.com
>             <mailto:hitesh1907nayyar@gmail.com>
>             <mailto:hitesh1907nayyar@__gmail.com
>             <mailto:hitesh1907nayyar@gmail.com>>> wrote:
>                   >
>                   > I have 2 Linux desktop and have following ip's and name:
>                   >
>
>                   >From what I can gather, This seems to be a desktop
>             class machines.
>                  Hence they may not have IPMI/ILO etc.
>
>                  I am 99.99% certain that fencing has not been configured.
>
>                  I also doubt if it has external storage.
>
>                  (I can identify as I tried my experiments with clusters
>             first time
>                  with such desktop class machines)
>
>                  The only solution for this is Power Fencing.
>
>                  --
>                  Regards,
>
>                  Rajagopal
>
>                  --
>                  Linux-cluster mailing list
>             Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>             <mailto:Linux-cluster@redhat.__com
>             <mailto:Linux-cluster@redhat.com>>
>             https://www.redhat.com/__mailman/listinfo/linux-cluster
>             <https://www.redhat.com/mailman/listinfo/linux-cluster>
>
>
>
>
>         --
>         Digimer
>         Papers and Projects: https://alteeve.ca
>         "Hydrogen is just a colourless, odorless gas which, if left
>         alone in sufficient quantities for long periods of time, begins
>         to think about itself."
>
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From lists@alteeve.ca Mon Oct  1 02:19:48 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q916Jlo4000516 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 02:19:48 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q916Jgr3014505
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 02:19:42 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q916Jel2020905
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 02:19:40 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b9e5.dsl.look.ca
	[216.66.185.229])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 673FC422461;
	Mon,  1 Oct 2012 02:19:38 -0400 (EDT)
Message-ID: <506935FB.8060606@alteeve.ca>
Date: Mon, 01 Oct 2012 02:19:39 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: hitesh nayyar <hitesh1907nayyar@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
In-Reply-To: <CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 06:19:48 -0000

You don't seem to be reading what I am typing. Please go back over the 
various replies and read again what I said. Follow the links and read 
what they say.

And please don't reply only to me. Click "Reply All" and include the 
mailing list.

digimer

On 10/01/2012 02:11 AM, hitesh nayyar wrote:
> Hi,
>
> I have a constraint of using Linux on bare machine for my 2 desktop.
>
> Is there not any way i can get use the agent  or perform clustering on
> Virtual box or VM ware software.....
>
> On Mon, Oct 1, 2012 at 11:19 AM, Digimer <lists@alteeve.ca
> <mailto:lists@alteeve.ca>> wrote:
>
>     Please keep replies on the mailing list. These question helps other
>     in the future by being seachable in the archives.
>
>     Xen and KVM are types of hypervisors, like virtualbox is, but they
>     run on Linux hosts. To use them, you would need to install linux on
>     the bare machine. This in turn requires a CPU that supports
>     virtualization (which most CPUs made in the last few years do support).
>
>     If you can install CentOS 6, you can use KVM which is what I recommend.
>
>     digimer
>
>
>     On 10/01/2012 01:26 AM, hitesh nayyar wrote:
>
>         One more thing...till now i have used this setup:
>
>         have Windows vista OS ---> Virtual Box---->Red Hat installed.
>
>         If i download Xen or KVM can i use the same setup instead of
>         Virtual Box?
>
>         Windows vista OS ---->Xen or KVM ---->Red Hat installed
>
>         BR//
>         Hitesh
>
>         On Mon, Oct 1, 2012 at 10:48 AM, hitesh nayyar
>         <hitesh1907nayyar@gmail.com <mailto:hitesh1907nayyar@gmail.com>
>         <mailto:hitesh1907nayyar@__gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>>> wrote:
>
>              Hello Again,
>
>              Can you please let me know what refers to KVM or Xen? I
>         have never
>              used this
>
>              Thanks
>
>
>              On Mon, Oct 1, 2012 at 10:44 AM, Digimer <lists@alteeve.ca
>         <mailto:lists@alteeve.ca>
>              <mailto:lists@alteeve.ca <mailto:lists@alteeve.ca>>> wrote:
>
>                  First up, give this section a read. It will explain
>         what fencing
>                  does and why you're seeing what you are;
>
>         https://alteeve.ca/w/2-Node_____Red_Hat_KVM_Cluster_Tutorial#____Concept.3B_Fencing
>         <https://alteeve.ca/w/2-Node___Red_Hat_KVM_Cluster_Tutorial#__Concept.3B_Fencing>
>
>
>         <https://alteeve.ca/w/2-Node___Red_Hat_KVM_Cluster_Tutorial#__Concept.3B_Fencing
>         <https://alteeve.ca/w/2-Node_Red_Hat_KVM_Cluster_Tutorial#Concept.3B_Fencing>>
>
>                  As for being virtualbox guests, you're in a bit of a
>         spot as
>                  there doesn't seem to be a native agent. Google shows
>         this though;
>
>         https://forums.virtualbox.org/____viewtopic.php?f=7&t=35372
>         <https://forums.virtualbox.org/__viewtopic.php?f=7&t=35372>
>
>
>         <https://forums.virtualbox.__org/viewtopic.php?f=7&t=35372
>         <https://forums.virtualbox.org/viewtopic.php?f=7&t=35372>>
>
>                  If you can switch to KVM or Xen, then you can use the
>                  fence_virsh or fence_xvm agents.
>
>                  cheers
>
>
>                  On 10/01/2012 12:53 AM, hitesh nayyar wrote:
>
>                      Hello,
>
>                      I am not aware of fencing.Yes you are correct i
>         have not
>                      configured
>                      anything related to fencing.
>
>                      Can you please let me know as how can i
>         proceed...Do i have
>                      to purchase
>                      some sort of hardware?
>
>                      How can i implement Power Fencing?
>
>                      I am using virtual box machines on my desktop in
>         which linux are
>                      installed and have been connected through swtich.
>
>
>                      [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
>                      <?xml version="1.0"?>
>                      <cluster config_version="1" name="dhoni">
>                                <clusternodes>
>                                        <clusternode name="hitesh12"
>         nodeid="1"/>
>                                        <clusternode name="saanvi12"
>         nodeid="2"/>
>                                </clusternodes>
>                                <cman expected_votes="1" two_node="1"/>
>                                <fencedevices/>
>                                <rm/>
>                      </cluster>
>
>
>
>
>
>
>                      On Mon, Oct 1, 2012 at 9:13 AM, Rajagopal Swaminathan
>                      <raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com> <mailto:raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com>__>
>                      <mailto:raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com>
>
>                      <mailto:raju.rajsand@gmail.com
>         <mailto:raju.rajsand@gmail.com>__>__>> wrote:
>
>                           Greetings,
>
>                           On Mon, Oct 1, 2012 at 8:46 AM, hitesh nayyar
>                           <hitesh1907nayyar@gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>
>                      <mailto:hitesh1907nayyar@__gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>>
>                      <mailto:hitesh1907nayyar@
>         <mailto:hitesh1907nayyar@>__gma__il.com <http://gmail.com>
>
>                      <mailto:hitesh1907nayyar@__gmail.com
>         <mailto:hitesh1907nayyar@gmail.com>>>> wrote:
>                            >
>                            > I have 2 Linux desktop and have following
>         ip's and name:
>                            >
>
>                            >From what I can gather, This seems to be a
>         desktop
>                      class machines.
>                           Hence they may not have IPMI/ILO etc.
>
>                           I am 99.99% certain that fencing has not been
>         configured.
>
>                           I also doubt if it has external storage.
>
>                           (I can identify as I tried my experiments with
>         clusters
>                      first time
>                           with such desktop class machines)
>
>                           The only solution for this is Power Fencing.
>
>                           --
>                           Regards,
>
>                           Rajagopal
>
>                           --
>                           Linux-cluster mailing list
>         Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>         <mailto:Linux-cluster@redhat.__com
>         <mailto:Linux-cluster@redhat.com>>
>                      <mailto:Linux-cluster@redhat.
>         <mailto:Linux-cluster@redhat.>____com
>                      <mailto:Linux-cluster@redhat.__com
>         <mailto:Linux-cluster@redhat.com>>>
>         https://www.redhat.com/____mailman/listinfo/linux-cluster
>         <https://www.redhat.com/__mailman/listinfo/linux-cluster>
>
>
>         <https://www.redhat.com/__mailman/listinfo/linux-cluster
>         <https://www.redhat.com/mailman/listinfo/linux-cluster>__>
>
>
>
>
>                  --
>                  Digimer
>                  Papers and Projects: https://alteeve.ca
>                  "Hydrogen is just a colourless, odorless gas which, if left
>                  alone in sufficient quantities for long periods of
>         time, begins
>                  to think about itself."
>
>
>
>
>
>     --
>     Digimer
>     Papers and Projects: https://alteeve.ca
>     "Hydrogen is just a colourless, odorless gas which, if left alone in
>     sufficient quantities for long periods of time, begins to think
>     about itself."
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From tserong@suse.com Mon Oct  1 08:23:15 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91CNF7r014476 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 08:23:15 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91CNAn3019948
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 08:23:10 -0400
Received: from mx2.suse.de (cantor2.suse.de [195.135.220.15])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q91CN4qn009379
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 08:23:05 -0400
Received: from relay2.suse.de (unknown [195.135.220.254])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mx2.suse.de (Postfix) with ESMTP id 4B29AA0FF5
	for <linux-cluster@redhat.com>; Mon,  1 Oct 2012 14:23:04 +0200 (CEST)
Message-ID: <50698B21.4020802@suse.com>
Date: Mon, 01 Oct 2012 22:22:57 +1000
From: Tim Serong <tserong@suse.com>
User-Agent: Mozilla/5.0 (X11; Linux i686;
	rv:15.0) Gecko/20120825 Thunderbird/15.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
X-Enigmail-Version: 1.4.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] CFP: Cloud Infrastructure,
 Distributed Storage and High Availability at LCA 2013
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 12:23:15 -0000

I'm pleased to announce that we will be holding a one day Cloud
Infrastructure, Distributed Storage and High Availability mini
conference[1] on Monday 28 January 2013 as part of linux.conf.au 2013 in
Canberra, Australia[2].

This miniconf is about building reliable infrastructure, from two-node
HA failover pairs to multi-thousand-core cloud systems.  You might like
to think of it as a sequel to the LCA 2012 High Availability and
Distributed Storage miniconf[3].

Do any of the following describe you?

* You're building cloud infrastructure for others to use
  (openstack, cloudstack, eucalyptus, ...)
* Your data needs to be reliably available everywhere
  (ceph, glusterfs, drbd, ...)
* Your system absolutely must be up all the time
  (pacemaker, corosync, ...)

If so, this is the miniconf for you!  Please consider submitting a
presentation at:

  http://tinyurl.com/cidsha-lca2013

We're expecting most talk slots to be 25 minutes (including questions
and changeover), but there will be openings for shorter lightning talks
and maybe a couple of longer talks.  CFP closes on Sunday November 4,
2012.  Notifications of acceptance will be emailed out after this date.

Note that there is also an OpenStack-specific miniconf[4] running on
Tuesday 29 January.  We're hoping this will give us a pretty awesome
two-day LCA 2013 CloudFest.  As a rough rule of thumb, more generic or
infrastructure-related talks should go to Cloud, Distributed Storage &
HA, while deeper OpenStack-specific talks should probably go to the
OpenStack miniconf.  If in doubt, or if you have any other questions,
please contact me directly at tserong@suse.com.

Thanks!

Tim

[1] http://lca2013.linux.org.au/schedule/30073/view_talk
[2] http://lca2013.linux.org.au/
[3]
http://lca2012.linux.org.au/wiki/index.php/Miniconfs/HighAvailabilityAndDistributedStorage
(also videos at http://www.youtube.com/playlist?list=PLE70D0FFF98BC9579)
[4] http://lca2013.linux.org.au/schedule/30100/view_talk?day=tuesday
--
Tim Serong
Senior Clustering Engineer
SUSE
tserong@suse.com


From raju.rajsand@gmail.com Mon Oct  1 12:45:35 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91GjZS9016871 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 1 Oct 2012 12:45:35 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q91GjU4e025461
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 12:45:30 -0400
Received: from mail-oa0-f46.google.com (mail-oa0-f46.google.com
	[209.85.219.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q91GjT5g008219
	for <linux-cluster@redhat.com>; Mon, 1 Oct 2012 12:45:29 -0400
Received: by oagh16 with SMTP id h16so6094439oag.33
	for <linux-cluster@redhat.com>; Mon, 01 Oct 2012 09:45:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=4VSUdXzmU3pf1Qedh2tzWjcuNB1g0qkmAFBNRaE2Sbk=;
	b=MDQ1NWRendAVbubMrRk+WxVLWz7xHVOTwMuAceyLaZ2AEnPMOavTTDCmFJjVWrmsX2
	vCbjt5PbAxuf40XElXlBqVroEyjb0t0YtQXeoowNwbK3J/nW9CMEEajSbixrePNIa4Hv
	+EsqrgYuCA5KnabsTorOc0/T2QPDEqXiC9JoAj1TpXu7YioDh+9utpf6gMrXuoSDEHi8
	hYjLLVjyp7sK1mtJLgKbbYW48PxljTJdJNrDQslwMDxLdvfvi3Hbm6BU6mc4kxfubtcU
	oVk3Y1lhsrnjnU2lUUs6J+jAcs2SwvXqSqBG7ddQxSZIyvTTGKopMJf6yOtjDH/NCy2b
	Bugw==
MIME-Version: 1.0
Received: by 10.60.172.235 with SMTP id bf11mr11826626oec.30.1349109928887;
	Mon, 01 Oct 2012 09:45:28 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Mon, 1 Oct 2012 09:45:28 -0700 (PDT)
In-Reply-To: <506935FB.8060606@alteeve.ca>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
Date: Mon, 1 Oct 2012 22:15:28 +0530
X-Google-Sender-Auth: BaFxypzxkkdmioQbpa5WokTRrRw
Message-ID: <CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 01 Oct 2012 16:45:35 -0000

Greetings,


Hitesh,

Please follow list guidlines.


On Mon, Oct 1, 2012 at 11:49 AM, Digimer <lists@alteeve.ca> wrote:
> You don't seem to be reading what I am typing. Please go back over the
> various replies and read again what I said. Follow the links and read what
> they say.
>
> And please don't reply only to me. Click "Reply All" and include the mailing
> list.
>
>>
>> I have a constraint of using Linux on bare machine for my 2 desktop.

>>                      Can you please let me know as how can i
>>         proceed...Do i have
>>                      to purchase
>>                      some sort of hardware?

Yes. You will need to buy power fencing device -- basically a power
strip with a ethernet port

I would strongly suggest you have two network port on each system.

What you want to do with a cluster?

>>
>>         One more thing...till now i have used this setup:
>>
>>         have Windows vista OS ---> Virtual Box---->Red Hat installed.
>>

You have to be kidding. You are using vista on bare metal for your HA?

>>         If i download Xen or KVM can i use the same setup instead of
>>         Virtual Box?
>>
>>         Windows vista OS ---->Xen or KVM ---->Red Hat installed

http://www.youtube.com/watch?v=oKI-tD0L18A



>>                      [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
>>                      <?xml version="1.0"?>
>>                      <cluster config_version="1" name="dhoni">

There needs to be two_node directive somewher there. Read up.

Better yet get help of some local technical person who knows what is HA.

It is a lot more than simple desktop install.

Or you need to invest quite a bit of time in learning and money in
getting some extra hardware (fence devices, switches, NIC, External
storage -- if required). And dont commit for or do that on production
without knowing what you are getting into.

If you can post more descriptively the objective of using cluster,
perhaps you will get more specific information.

Digimer's _*excellent*_ tutorial covers more or less all that you need
to know about clusters.

I wish I had that when I started playing around with that way back in 2007.

-- 
Regards,

Rajagopal


From parvez.h.shaikh@gmail.com Tue Oct  2 04:00:41 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9280f81001704 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 04:00:41 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9280Zme021339
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 04:00:35 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9280Xxc017200
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 04:00:33 -0400
Received: by bkcjk13 with SMTP id jk13so5177190bkc.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 01:00:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=ee/dID7fNkCubGgp4WR/W9C2BUYZU5KslIZlPsBcmDs=;
	b=tHKZ+1354VmxzdIyqpM3u4KZbUx7/m8rDo3LbfVKyNpYUK/VwAC8CsgcE6sCKSXL9D
	zg5USlVguoUkKAvU2wcW4KAT686JlfEpwpcPb/DLCqJBpO6NC6XzYLKAeeR3j/IM1N8m
	8lrHy2bVqq8F4DKErdDwf4Fl0uhI5UnOtPnG+ZdgWanz6IrQJulf+9gM4pzVLxjUu4op
	Fq2bsp7uxqGY2fjkkXR/pLPoPwlQz42UJ0kTQ1acjVnuuyl5gj1zpY4voj9MYJ0zK/6c
	L/fL7qOGsy4U0a2wG2vxjvr+njNNmXa9jqAWhFJkCha1EUPo4KCJVDyal7rysWS6PNO/
	bncw==
MIME-Version: 1.0
Received: by 10.204.156.81 with SMTP id v17mr2204889bkw.49.1349164832800; Tue,
	02 Oct 2012 01:00:32 -0700 (PDT)
Received: by 10.204.4.198 with HTTP; Tue, 2 Oct 2012 01:00:32 -0700 (PDT)
In-Reply-To: <CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
Date: Tue, 2 Oct 2012 13:30:32 +0530
Message-ID: <CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=0015175cb6849a3fe604cb0eeae6
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 08:00:41 -0000

--0015175cb6849a3fe604cb0eeae6
Content-Type: text/plain; charset=ISO-8859-1

What kind of cluster is this - an academic project or production quality
solution?

If its former - go for manual fencing. You wont need fence device but
failover wont be automatic

If its later - yes you'll need fence device

On Mon, Oct 1, 2012 at 10:15 PM, Rajagopal Swaminathan <
raju.rajsand@gmail.com> wrote:

> Greetings,
>
>
> Hitesh,
>
> Please follow list guidlines.
>
>
> On Mon, Oct 1, 2012 at 11:49 AM, Digimer <lists@alteeve.ca> wrote:
> > You don't seem to be reading what I am typing. Please go back over the
> > various replies and read again what I said. Follow the links and read
> what
> > they say.
> >
> > And please don't reply only to me. Click "Reply All" and include the
> mailing
> > list.
> >
> >>
> >> I have a constraint of using Linux on bare machine for my 2 desktop.
>
> >>                      Can you please let me know as how can i
> >>         proceed...Do i have
> >>                      to purchase
> >>                      some sort of hardware?
>
> Yes. You will need to buy power fencing device -- basically a power
> strip with a ethernet port
>
> I would strongly suggest you have two network port on each system.
>
> What you want to do with a cluster?
>
> >>
> >>         One more thing...till now i have used this setup:
> >>
> >>         have Windows vista OS ---> Virtual Box---->Red Hat installed.
> >>
>
> You have to be kidding. You are using vista on bare metal for your HA?
>
> >>         If i download Xen or KVM can i use the same setup instead of
> >>         Virtual Box?
> >>
> >>         Windows vista OS ---->Xen or KVM ---->Red Hat installed
>
> http://www.youtube.com/watch?v=oKI-tD0L18A
>
>
>
> >>                      [root@hitesh12 ~]# cat /etc/cluster/cluster.conf
> >>                      <?xml version="1.0"?>
> >>                      <cluster config_version="1" name="dhoni">
>
> There needs to be two_node directive somewher there. Read up.
>
> Better yet get help of some local technical person who knows what is HA.
>
> It is a lot more than simple desktop install.
>
> Or you need to invest quite a bit of time in learning and money in
> getting some extra hardware (fence devices, switches, NIC, External
> storage -- if required). And dont commit for or do that on production
> without knowing what you are getting into.
>
> If you can post more descriptively the objective of using cluster,
> perhaps you will get more specific information.
>
> Digimer's _*excellent*_ tutorial covers more or less all that you need
> to know about clusters.
>
> I wish I had that when I started playing around with that way back in 2007.
>
> --
> Regards,
>
> Rajagopal
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--0015175cb6849a3fe604cb0eeae6
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

What kind of cluster is this - an academic project or production quality so=
lution?<br><br>If its former - go for manual fencing. You wont need fence d=
evice but failover wont be automatic<br><br>If its later - yes you&#39;ll n=
eed fence device<br>
<br><div class=3D"gmail_quote">On Mon, Oct 1, 2012 at 10:15 PM, Rajagopal S=
waminathan <span dir=3D"ltr">&lt;<a href=3D"mailto:raju.rajsand@gmail.com" =
target=3D"_blank">raju.rajsand@gmail.com</a>&gt;</span> wrote:<br><blockquo=
te class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc so=
lid;padding-left:1ex">
Greetings,<br>
<br>
<br>
Hitesh,<br>
<br>
Please follow list guidlines.<br>
<div class=3D"im"><br>
<br>
On Mon, Oct 1, 2012 at 11:49 AM, Digimer &lt;<a href=3D"mailto:lists@alteev=
e.ca">lists@alteeve.ca</a>&gt; wrote:<br>
&gt; You don&#39;t seem to be reading what I am typing. Please go back over=
 the<br>
&gt; various replies and read again what I said. Follow the links and read =
what<br>
&gt; they say.<br>
&gt;<br>
&gt; And please don&#39;t reply only to me. Click &quot;Reply All&quot; and=
 include the mailing<br>
&gt; list.<br>
&gt;<br>
&gt;&gt;<br>
</div><div class=3D"im">&gt;&gt; I have a constraint of using Linux on bare=
 machine for my 2 desktop.<br>
<br>
</div><div class=3D"im">&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0Can you please let me know as how can i<br>
&gt;&gt; =A0 =A0 =A0 =A0 proceed...Do i have<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0to purchase<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0some sort of hardware?<=
br>
<br>
</div>Yes. You will need to buy power fencing device -- basically a power<b=
r>
strip with a ethernet port<br>
<br>
I would strongly suggest you have two network port on each system.<br>
<br>
What you want to do with a cluster?<br>
<div class=3D"im"><br>
&gt;&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 One more thing...till now i have used this setup:<=
br>
&gt;&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 have Windows vista OS ---&gt; Virtual Box----&gt;R=
ed Hat installed.<br>
&gt;&gt;<br>
<br>
</div>You have to be kidding. You are using vista on bare metal for your HA=
?<br>
<div class=3D"im"><br>
&gt;&gt; =A0 =A0 =A0 =A0 If i download Xen or KVM can i use the same setup =
instead of<br>
&gt;&gt; =A0 =A0 =A0 =A0 Virtual Box?<br>
&gt;&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 Windows vista OS ----&gt;Xen or KVM ----&gt;Red Ha=
t installed<br>
<br>
</div><a href=3D"http://www.youtube.com/watch?v=3DoKI-tD0L18A" target=3D"_b=
lank">http://www.youtube.com/watch?v=3DoKI-tD0L18A</a><br>
<div class=3D"im"><br>
<br>
<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[root@hitesh12 ~]# cat =
/etc/cluster/cluster.conf<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;?xml version=3D&quo=
t;1.0&quot;?&gt;<br>
&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;cluster config_vers=
ion=3D&quot;1&quot; name=3D&quot;dhoni&quot;&gt;<br>
<br>
</div>There needs to be two_node directive somewher there. Read up.<br>
<br>
Better yet get help of some local technical person who knows what is HA.<br=
>
<br>
It is a lot more than simple desktop install.<br>
<br>
Or you need to invest quite a bit of time in learning and money in<br>
getting some extra hardware (fence devices, switches, NIC, External<br>
storage -- if required). And dont commit for or do that on production<br>
without knowing what you are getting into.<br>
<br>
If you can post more descriptively the objective of using cluster,<br>
perhaps you will get more specific information.<br>
<br>
Digimer&#39;s _*excellent*_ tutorial covers more or less all that you need<=
br>
to know about clusters.<br>
<br>
I wish I had that when I started playing around with that way back in 2007.=
<br>
<div class=3D"im"><br>
--<br>
Regards,<br>
<br>
Rajagopal<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
</div><a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" tar=
get=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br=
>
</blockquote></div><br>

--0015175cb6849a3fe604cb0eeae6--


From lists@alteeve.ca Tue Oct  2 09:38:37 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92DcbsU015631 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 09:38:37 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q92DcVSH026699
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:38:32 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92DcUa5026782
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:38:30 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b005.dsl.look.ca
	[216.66.176.5])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id E366A422461;
	Tue,  2 Oct 2012 09:38:27 -0400 (EDT)
Message-ID: <506AEE54.7070209@alteeve.ca>
Date: Tue, 02 Oct 2012 09:38:28 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
In-Reply-To: <CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 13:38:37 -0000

On 10/02/2012 04:00 AM, Parvez Shaikh wrote:
> What kind of cluster is this - an academic project or production quality
> solution?
>
> If its former - go for manual fencing. You wont need fence device but
> failover wont be automatic

*Please* don't do this. Manual fencing support was dropped for a reason. 
It's *far* too easy to mess things up when an admin uses it before 
identifying a problem.

> If its later - yes you'll need fence device

This is the only sane option; Academic or production. Fencing is an 
integral part of the cluster and you do yourself no favour by not 
learning it in an academic setup.

-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odourless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From parvez.h.shaikh@gmail.com Tue Oct  2 09:43:48 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92Dhm4L016685 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 09:43:48 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q92DhgfX008275
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:43:42 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92DheXM003231
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 09:43:41 -0400
Received: by bkcjk13 with SMTP id jk13so5384197bkc.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 06:43:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type;
	bh=LqM9w+DMD74LFuvAa92+BtCoflkHKaN5mD2hBT8ZiFg=;
	b=OcxQjU3RzmOSyTkj/ZLu8JyFdztRbMpKklX5BpgBJ+Fy1W3T5HxkhvsBdtfk+vnXTc
	lfDEMtUCS/9D4hqB9QqpZ6Z6Pg/vwVuqVOKhqP0aG9FWhmsqm29yh/p4HAq/7zI+DMza
	T/26Q5MrlukigQAdoCo6hPnncIIxUjWNrIyU3imL9DCRBVyRB14L5OkwmhtK4JqBaGEN
	lC97p49bB/7++8w+L2OWEeKhRsnvpQiUxzfRlW+ppLPMSSYZ2A+JfbymRcfwXBOm3Zx9
	+BXRzUsoyBUOkc5hhms6b3/f0uU5J20qPw5xH1CGdOcZRZhk0jQqMTPWgMwE57Cqbi1I
	7Yag==
MIME-Version: 1.0
Received: by 10.205.123.147 with SMTP id gk19mr363267bkc.90.1349185420410;
	Tue, 02 Oct 2012 06:43:40 -0700 (PDT)
Received: by 10.204.4.198 with HTTP; Tue, 2 Oct 2012 06:43:40 -0700 (PDT)
In-Reply-To: <506AEE54.7070209@alteeve.ca>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
	<506AEE54.7070209@alteeve.ca>
Date: Tue, 2 Oct 2012 19:13:40 +0530
Message-ID: <CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=000e0ce03f0eb83f2004cb13b5bf
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 13:43:48 -0000

--000e0ce03f0eb83f2004cb13b5bf
Content-Type: text/plain; charset=ISO-8859-1

Hi Digimer,

Could you please give me reference/case studies of problem about why manual
fencing was dropped and how automated fencing is fixing those?

Thanks,
Parvez

On Tue, Oct 2, 2012 at 7:08 PM, Digimer <lists@alteeve.ca> wrote:

> On 10/02/2012 04:00 AM, Parvez Shaikh wrote:
>
>> What kind of cluster is this - an academic project or production quality
>> solution?
>>
>> If its former - go for manual fencing. You wont need fence device but
>> failover wont be automatic
>>
>
> *Please* don't do this. Manual fencing support was dropped for a reason.
> It's *far* too easy to mess things up when an admin uses it before
> identifying a problem.
>
>
>  If its later - yes you'll need fence device
>>
>
> This is the only sane option; Academic or production. Fencing is an
> integral part of the cluster and you do yourself no favour by not learning
> it in an academic setup.
>
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca
> "Hydrogen is just a colourless, odourless gas which, if left alone in
> sufficient quantities for long periods of time, begins to think about
> itself."
>

--000e0ce03f0eb83f2004cb13b5bf
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Digimer,<br><br>Could you please give me reference/case studies of probl=
em about why manual fencing was dropped and how automated fencing is fixing=
 those?<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote">On Tue, =
Oct 2, 2012 at 7:08 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"mailto:lis=
ts@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div class=3D"im">On 10/02/2012 04:00 AM, Pa=
rvez Shaikh wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
What kind of cluster is this - an academic project or production quality<br=
>
solution?<br>
<br>
If its former - go for manual fencing. You wont need fence device but<br>
failover wont be automatic<br>
</blockquote>
<br></div>
*Please* don&#39;t do this. Manual fencing support was dropped for a reason=
. It&#39;s *far* too easy to mess things up when an admin uses it before id=
entifying a problem.<div class=3D"im"><br>
<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">
If its later - yes you&#39;ll need fence device<br>
</blockquote>
<br></div>
This is the only sane option; Academic or production. Fencing is an integra=
l part of the cluster and you do yourself no favour by not learning it in a=
n academic setup.<div class=3D"im"><br>
<br>
-- <br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca" target=3D"_blank">https=
://alteeve.ca</a><br></div>
&quot;Hydrogen is just a colourless, odourless gas which, if left alone in =
sufficient quantities for long periods of time, begins to think about itsel=
f.&quot;<br>
</blockquote></div><br>

--000e0ce03f0eb83f2004cb13b5bf--


From lists@alteeve.ca Tue Oct  2 10:03:14 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92E3EwB019443 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 10:03:14 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q92E38V3017364
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 10:03:09 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92E37n2009493
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 10:03:07 -0400
Received: from lemass.alteeve.ca (lns4-pool-d842b005.dsl.look.ca
	[216.66.176.5])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 2E0D3422488;
	Tue,  2 Oct 2012 10:03:05 -0400 (EDT)
Message-ID: <506AF41A.5000906@alteeve.ca>
Date: Tue, 02 Oct 2012 10:03:06 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: Parvez Shaikh <parvez.h.shaikh@gmail.com>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
	<506AEE54.7070209@alteeve.ca>
	<CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
In-Reply-To: <CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 14:03:14 -0000

This talks about how manual fencing isn't actual fencing;

https://fedorahosted.org/cluster/wiki/Fence

There was a page where it was said that manual fencing was in no way 
supported, but I can't find it at the moment.

The reason it is not safe is that an admin is likely to issue it in a 
panic while trying to get a hung cluster back online. If this happens 
without first ensuring the peer node(s) is fenced, you can walk into a 
split-brain.

digimer

On 10/02/2012 09:43 AM, Parvez Shaikh wrote:
> Hi Digimer,
>
> Could you please give me reference/case studies of problem about why
> manual fencing was dropped and how automated fencing is fixing those?
>
> Thanks,
> Parvez
>
> On Tue, Oct 2, 2012 at 7:08 PM, Digimer <lists@alteeve.ca
> <mailto:lists@alteeve.ca>> wrote:
>
>     On 10/02/2012 04:00 AM, Parvez Shaikh wrote:
>
>         What kind of cluster is this - an academic project or production
>         quality
>         solution?
>
>         If its former - go for manual fencing. You wont need fence
>         device but
>         failover wont be automatic
>
>
>     *Please* don't do this. Manual fencing support was dropped for a
>     reason. It's *far* too easy to mess things up when an admin uses it
>     before identifying a problem.
>
>
>         If its later - yes you'll need fence device
>
>
>     This is the only sane option; Academic or production. Fencing is an
>     integral part of the cluster and you do yourself no favour by not
>     learning it in an academic setup.
>
>
>     --
>     Digimer
>     Papers and Projects: https://alteeve.ca
>     "Hydrogen is just a colourless, odourless gas which, if left alone
>     in sufficient quantities for long periods of time, begins to think
>     about itself."
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From raju.rajsand@gmail.com Tue Oct  2 12:08:16 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92G8GnP006293 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 2 Oct 2012 12:08:16 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q92G8Bet032316
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 12:08:11 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q92G89EL027603
	for <linux-cluster@redhat.com>; Tue, 2 Oct 2012 12:08:10 -0400
Received: by obbuo13 with SMTP id uo13so7249171obb.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 09:08:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=kY/v/QKULWSeSJ2bibixxKcbYYnfh116xcOUAIvpH7Q=;
	b=UiOAyMVK8pGUXy2DOH+t4JBbZhSIjYpNO/SuvMIHb3tB2Ptfexrb5SL2zHIoOC2Vd8
	gYoRXCJXPdDzYqSWTX1zVuaihWY/yekEMdfyCA1dHZJgJTPOcnUex2ItvXD70CUNywng
	I3ZUKV/P2ebflHJjV6tBjd3oHBcf6znymLAJw9JM2UYFw5yFqxETiJvStSYf8GuGt17u
	PLEorCahZwH+LDlQveeafYTLMpJVcg8YCBkx5DGaHVG+biBIxUB4Pqg/mT4zPvfTe1Om
	du80YWy0FO1HSf6hadFQCc6vH72gJXnMDTD3S4NqMeCjcZqjJtdVMzaLnWkW6uOrI9wc
	Ufdg==
MIME-Version: 1.0
Received: by 10.60.14.165 with SMTP id q5mr3979239oec.28.1349194089718; Tue,
	02 Oct 2012 09:08:09 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Tue, 2 Oct 2012 09:08:09 -0700 (PDT)
In-Reply-To: <506AF41A.5000906@alteeve.ca>
References: <CAMyy8gSn76Vemu_bY81Xq9t4Wfz_fxZOvmLBekdYg8y_hgtanw@mail.gmail.com>
	<CA+YdgapzScFo1qP8Mk5=WW5OCzWuQmkduS0+QgpVv5D0RZvZiA@mail.gmail.com>
	<CAMyy8gSr3BzTAq8n6QR+tOKL=LJSbNGihOYRoJde_iAXiAeH7A@mail.gmail.com>
	<5069269A.2050405@alteeve.ca>
	<CAMyy8gR39h5NFMNxBSR7jsCXH-4dr7cWEO3vL48G7P+P5RsPRg@mail.gmail.com>
	<CAMyy8gQ46cxbrqsv_KeJ3GSikAiAk7WZCEnNEmtZS_W9CRHyRg@mail.gmail.com>
	<50692EF0.2000505@alteeve.ca>
	<CAMyy8gQgAZzPFiu2NkfwiQTc77wu=oX7LAAzsT0F+4yPpKWGnw@mail.gmail.com>
	<506935FB.8060606@alteeve.ca>
	<CA+Ydgaraaw8bhi9=4ugPiy24FLq=UvJwERTL6wPk_M3=WnbyHg@mail.gmail.com>
	<CAKrd530Y5MeCrYSFbzeCDjKQVRD6ihT3NcqCb1_Z=oSo7ZfmzQ@mail.gmail.com>
	<506AEE54.7070209@alteeve.ca>
	<CAKrd5301McvOBqWbeue95izhMcGEVK18=sGm_eUgzfmtxKBGvg@mail.gmail.com>
	<506AF41A.5000906@alteeve.ca>
Date: Tue, 2 Oct 2012 21:38:09 +0530
X-Google-Sender-Auth: NVp034V4MWJFGmakOPbuCe76wdU
Message-ID: <CA+YdgaqWTJ7HHobz=k4SGJ-fK_T02meU4AXh4GvpCQq5eC5CoQ@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] linux-cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 02 Oct 2012 16:08:16 -0000

Greetings,

On Tue, Oct 2, 2012 at 7:33 PM, Digimer <lists@alteeve.ca> wrote:
>
> The reason it is not safe is that an admin is likely to issue it in a panic
> while trying to get a hung cluster back online. If this happens without
>

+1
+1
+1

> first ensuring the peer node(s) is fenced, you can walk into a split-brain.

My first attempts without fencing landed me in the nightmare of "been
there done that" of cleaning up the mess of split brain or more aptly,
"the fluid brain which hit the fan"

To rephrase the old adage "To err is human, but to really, completely
mess it up, it takes a cluster with split brain". It might be probably
easier to use magnet to write bits on the disk than to clean up *that*
mess.

Not to talk about downtime and the fury of users.

No baby, A HA cluster ain't worth its name without fencing.

And mine was in an academic environment.

-- 
Regards,

Rajagopal


From parvez.h.shaikh@gmail.com Wed Oct  3 01:23:25 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q935NPuI017851 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 3 Oct 2012 01:23:25 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q935NKNe027795
	for <linux-cluster@redhat.com>; Wed, 3 Oct 2012 01:23:20 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q935NHQv009154
	for <linux-cluster@redhat.com>; Wed, 3 Oct 2012 01:23:18 -0400
Received: by bkcjk13 with SMTP id jk13so5738562bkc.33
	for <linux-cluster@redhat.com>; Tue, 02 Oct 2012 22:23:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=SPYEdN/XxalBfTOg2ZYSADYVaiNIBMyf/5a0wmS03y0=;
	b=k4pVutRIDMBovAVAAoA2DrWH8WvMhQhZhgQi8eARZoJdBiaAOFjeIZa/uwf82qxyKB
	H2insPzFQy1mLvkFtUiQMxpls0qGVub5kNXUVpSp7cLGV/iJPu0lgJTXE1hI4rB66M6T
	ZxwOxjMpOlOe/Qu4wgUOd8vv5e0nSF0ScniSvYl7E6cSXUMxZpD918+qBhPrgZlT4xNx
	6fiYGtEnbKucANXMJS4w7BRb5429hLt5l5ge0eNlZ4epVAxv+AGt4EruLvgYOzH2Rra8
	dY3U+JWUKJgA0zQIpokPBO07n/y2M1Uz9C3Stn5gWXu+gb1+VFzAMmYbfYbAp9fyli0t
	KkXQ==
MIME-Version: 1.0
Received: by 10.205.137.7 with SMTP id im7mr166510bkc.25.1349241797213; Tue,
	02 Oct 2012 22:23:17 -0700 (PDT)
Received: by 10.204.4.198 with HTTP; Tue, 2 Oct 2012 22:23:17 -0700 (PDT)
In-Reply-To: <CADFPcS3xSoq0UnxAwZPTtrgxvURt15-W-5i3nBjMo90qDkgfPg@mail.gmail.com>
References: <CADFPcS28S1nNMFBtVZ8bONBn=jWtF17CuBBcd4bbSVSViovKhg@mail.gmail.com>
	<CADFPcS0qL-m7_aHGVzH+baMHXp6io=YsbWSkcjs0JPrCt0sa1g@mail.gmail.com>
	<1347383423.10128.555.camel@aeapen.blr.redhat.com>
	<CADFPcS1tAJS+GTA5+dfvFuLuD+8GJnsHrm8FE3tQD+Zrfn_8Jw@mail.gmail.com>
	<1347445264.32050.398.camel@aeapen.blr.redhat.com>
	<CADFPcS3QiReQ96ZV6a1+0hNSOYc=ouzX1YiW-YkropJFa0YADg@mail.gmail.com>
	<CADFPcS3xSoq0UnxAwZPTtrgxvURt15-W-5i3nBjMo90qDkgfPg@mail.gmail.com>
Date: Wed, 3 Oct 2012 10:53:17 +0530
Message-ID: <CAKrd533gB9t4-nzf+5sU=mfqNFtX8Q=nWT83zuEzzqKbLJrCbg@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Renchu Mathew <renchumv@gmail.com>,
	linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=000e0ce03dc209fd4b04cb20d604
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Hi
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 03 Oct 2012 05:23:25 -0000

--000e0ce03dc209fd4b04cb20d604
Content-Type: text/plain; charset=ISO-8859-1

A curious observation, there is a sudden surge of sending emails on private
addresses rather than sending over a mailing list.

Please send your doubts / questions on mailing list "
linux-cluster@redhat.com" instead of addressing personally.

Regarding configuration for manual fencing - I don't have it with me, it
was available with RHEL 5.5. Check it out in system-config-cluster tool if
you can add manual fencing.

Thanks,
Parvez

On Wed, Oct 3, 2012 at 10:46 AM, Renchu Mathew <renchumv@gmail.com> wrote:

>  Hi Purvez,
>
> I am trying to setup a test cluster environmet. But I haven't doen
> fencing. Please find below error messages. Some time after the nodes
> restarted, the other node is going down. can you please send me
> theconfiguration for manual fencing?
>
>
>>  > Please find attached my cluster setup. It is not stable
>> > and /var/log/messages shows the below errors.
>> >
>> >
>> > Sep 11 08:49:10 node1 corosync[1814]:   [QUORUM] Members[2]: 1 2
>> > Sep 11 08:49:10 node1 corosync[1814]:   [QUORUM] Members[2]: 1 2
>> > Sep 11 08:49:10 node1 corosync[1814]:   [CPG   ] chosen downlist:
>> > sender r(0) ip(192.168.1.251) ; members(old:2 left:1)
>> > Sep 11 08:49:10 node1 corosync[1814]:   [MAIN  ] Completed service
>> > synchronization, ready to provide service.
>> > Sep 11 08:49:11 node1 corosync[1814]: cman killed by node 2 because we
>> > were killed by cman_tool or other application
>> > Sep 11 08:49:11 node1 fenced[1875]: telling cman to remove nodeid 2
>> > from cluster
>> > Sep 11 08:49:11 node1 fenced[1875]: cluster is down, exiting
>> > Sep 11 08:49:11 node1 gfs_controld[1950]: cluster is down, exiting
>> > Sep 11 08:49:11 node1 gfs_controld[1950]: daemon cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 gfs_controld[1950]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cluster is down, exiting
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: daemon cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 fenced[1875]: daemon cpg_dispatch error 2
>> > Sep 11 08:49:11 node1 rgmanager[2409]: #67: Shutting down uncleanly
>> > Sep 11 08:49:11 node1 rgmanager[17059]: [clusterfs] unmounting /Data
>> > Sep 11 08:49:11 node1 rgmanager[17068]: [clusterfs] Sending SIGTERM to
>> > processes on /Data
>> > Sep 11 08:49:16 node1 rgmanager[17104]: [clusterfs] unmounting /Data
>> > Sep 11 08:49:16 node1 rgmanager[17113]: [clusterfs] Sending SIGKILL to
>> > processes on /Data
>> > Sep 11 08:49:19 node1 kernel: dlm: closing connection to node 2
>> > Sep 11 08:49:19 node1 kernel: dlm: closing connection to node 1
>> > Sep 11 08:49:19 node1 kernel: dlm: gfs2: no userland control daemon,
>> > stopping lockspace
>> > Sep 11 08:49:22 node1 rgmanager[17149]: [clusterfs] unmounting /Data
>> > Sep 11 08:49:22 node1 rgmanager[17158]: [clusterfs] Sending SIGKILL to
>> > processes on /Data
>> >
>> >
>> >
>> > Also when I try to restart the cman service, below error comes.
>> > Starting cluster:
>> >    Checking if cluster has been disabled at boot...        [  OK  ]
>> >    Checking Network Manager...                             [  OK  ]
>> >    Global setup...                                         [  OK  ]
>> >    Loading kernel modules...                               [  OK  ]
>> >    Mounting configfs...                                    [  OK  ]
>> >    Starting cman...                                        [  OK  ]
>> >    Waiting for quorum...                                   [  OK  ]
>> >    Starting fenced...                                      [  OK  ]
>> >    Starting dlm_controld...                                [  OK  ]
>> >    Starting gfs_controld...                                [  OK  ]
>> >    Unfencing self... fence_node: cannot connect to cman
>> >                                                            [FAILED]
>> > Stopping cluster:
>> >    Leaving fence domain...                                 [  OK  ]
>> >    Stopping gfs_controld...                                [  OK  ]
>> >    Stopping dlm_controld...                                [  OK  ]
>> >    Stopping fenced...                                      [  OK  ]
>> >    Stopping cman...                                        [  OK  ]
>> >    Unloading kernel modules...                             [  OK  ]
>> >    Unmounting configfs...                                  [  OK  ]
>> >
>> > Thanks again.
>> > Renchu Mathew
>> > On Tue, Sep 11, 2012 at 9:10 PM, Arun Eapen CISSP, RHCA
>> > <arun@redhat.com> wrote:
>> >
>> >
>> >
>> >         Put the fenced in debug mode and copy the error messages, for
>> >         me to
>> >         debug
>> >
>> >         On Tue, 2012-09-11 at 11:52 +0400, Renchu Mathew wrote:
>> >         > Hi Arun,
>> >         >
>> >         > I have done the RH436 course in conducted by you at Redhat
>> >         b'lore. How
>> >         > r u?
>> >         >
>> >         > I have configured a 2 node failover cluster setup (almost
>> >         same like
>> >         > our RH436 lab setup in b'lore) It is almost ok except
>> >         fencing. If I
>> >         > pull the active node network cable it is not switching to
>> >         the other
>> >         > automatically. It is getting hung. Then I have to do this
>> >         manually. Is
>> >         > there any script for creating the dummy fencing in RHCS
>> >         which will
>> >         > restart or shutdown the other node. Please find attached my
>> >         > cluster.conf file. is there anyway we can power fence using
>> >         APC UPS.
>> >         >
>> >         > Could you please help me if you get some time.
>> >         >
>> >         > Thanks and regards
>> >         > Renchu Mathew
>> >         >
>> >         >
>> >         >
>> >
>> >
>> >
>> >         --
>> >         Arun Eapen
>> >         CISSP, RHC{A,DS,E,I,SS,VA,X}
>> >         Senior Technical Consultant & Certification Poobah
>> >         Red Hat India Pvt. Ltd.,
>> >         No - 4/1, Bannergatta Road,
>> >         IBC Knowledge Park,
>> >         11th floor, Tower D,
>> >         Bangalore - 560029, INDIA.
>> >
>> >
>> >
>>
>>
>> --
>> Arun Eapen
>> CISSP, RHC{A,DS,E,I,SS,VA,X}
>> Senior Technical Consultant & Certification Poobah
>> Red Hat India Pvt. Ltd.,
>> No - 4/1, Bannergatta Road,
>> IBC Knowledge Park,
>> 11th floor, Tower D,
>> Bangalore - 560029, INDIA.
>>
>
>
>

--000e0ce03dc209fd4b04cb20d604
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

A curious observation, there is a sudden surge of sending emails on private=
 addresses rather than sending over a mailing list.<br><br>Please send your=
 doubts / questions on mailing list &quot;<span class=3D"gI"><a href=3D"mai=
lto:linux-cluster@redhat.com">linux-cluster@redhat.com</a>&quot; instead of=
 addressing personally.<br>
<br>Regarding configuration for manual fencing - I don&#39;t have it with m=
e, it was available with RHEL 5.5. Check it out in system-config-cluster to=
ol if you can add manual fencing.<br><br>Thanks,<br>Parvez<br></span><br>
<div class=3D"gmail_quote">On Wed, Oct 3, 2012 at 10:46 AM, Renchu Mathew <=
span dir=3D"ltr">&lt;<a href=3D"mailto:renchumv@gmail.com" target=3D"_blank=
">renchumv@gmail.com</a>&gt;</span> wrote:<br><blockquote class=3D"gmail_qu=
ote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-left:1px solid rgb(204,204,20=
4);padding-left:1ex">
<div dir=3D"ltr"><div class=3D"gmail_quote">
<div dir=3D"ltr">
<div class=3D"gmail_quote">
<div>Hi Purvez,</div>
<div>=A0</div>
<div>I am trying to setup a test cluster environmet. But I haven&#39;t doen=
 fencing. Please find below error messages. Some time after the nodes resta=
rted, the other node is going down. can you please send me theconfiguration=
 for manual fencing?</div>


<div>=A0</div>
<blockquote style=3D"border-left:1px solid rgb(204,204,204);margin:0px 0px =
0px 0.8ex;padding-left:1ex" class=3D"gmail_quote">
<div>
<div>&gt; Please find attached my cluster setup. It is not stable<br>&gt; a=
nd /var/log/messages shows the below errors.<br>&gt;<br>&gt;<br>&gt; Sep 11=
 08:49:10 node1 corosync[1814]: =A0 [QUORUM] Members[2]: 1 2<br>&gt; Sep 11=
 08:49:10 node1 corosync[1814]: =A0 [QUORUM] Members[2]: 1 2<br>

&gt; Sep 11 08:49:10 node1 corosync[1814]: =A0 [CPG =A0 ] chosen downlist:<=
br>&gt; sender r(0) ip(192.168.1.251) ; members(old:2 left:1)<br>&gt; Sep 1=
1 08:49:10 node1 corosync[1814]: =A0 [MAIN =A0] Completed service<br>&gt; s=
ynchronization, ready to provide service.<br>

&gt; Sep 11 08:49:11 node1 corosync[1814]: cman killed by node 2 because we=
<br>&gt; were killed by cman_tool or other application<br>&gt; Sep 11 08:49=
:11 node1 fenced[1875]: telling cman to remove nodeid 2<br>&gt; from cluste=
r<br>

&gt; Sep 11 08:49:11 node1 fenced[1875]: cluster is down, exiting<br>&gt; S=
ep 11 08:49:11 node1 gfs_controld[1950]: cluster is down, exiting<br>&gt; S=
ep 11 08:49:11 node1 gfs_controld[1950]: daemon cpg_dispatch error 2<br>

&gt; Sep 11 08:49:11 node1 gfs_controld[1950]: cpg_dispatch error 2<br>&gt;=
 Sep 11 08:49:11 node1 dlm_controld[1889]: cluster is down, exiting<br>&gt;=
 Sep 11 08:49:11 node1 dlm_controld[1889]: daemon cpg_dispatch error 2<br>

&gt; Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2<br>&gt;=
 Sep 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2<br>&gt; Sep=
 11 08:49:11 node1 dlm_controld[1889]: cpg_dispatch error 2<br>&gt; Sep 11 =
08:49:11 node1 fenced[1875]: daemon cpg_dispatch error 2<br>

&gt; Sep 11 08:49:11 node1 rgmanager[2409]: #67: Shutting down uncleanly<br=
>&gt; Sep 11 08:49:11 node1 rgmanager[17059]: [clusterfs] unmounting /Data<=
br>&gt; Sep 11 08:49:11 node1 rgmanager[17068]: [clusterfs] Sending SIGTERM=
 to<br>

&gt; processes on /Data<br>&gt; Sep 11 08:49:16 node1 rgmanager[17104]: [cl=
usterfs] unmounting /Data<br>&gt; Sep 11 08:49:16 node1 rgmanager[17113]: [=
clusterfs] Sending SIGKILL to<br>&gt; processes on /Data<br>&gt; Sep 11 08:=
49:19 node1 kernel: dlm: closing connection to node 2<br>

&gt; Sep 11 08:49:19 node1 kernel: dlm: closing connection to node 1<br>&gt=
; Sep 11 08:49:19 node1 kernel: dlm: gfs2: no userland control daemon,<br>&=
gt; stopping lockspace<br>&gt; Sep 11 08:49:22 node1 rgmanager[17149]: [clu=
sterfs] unmounting /Data<br>

&gt; Sep 11 08:49:22 node1 rgmanager[17158]: [clusterfs] Sending SIGKILL to=
<br>&gt; processes on /Data<br>&gt;<br>&gt;<br>&gt;<br>&gt; Also when I try=
 to restart the cman service, below error comes.<br>&gt; Starting cluster:<=
br>

&gt; =A0 =A0Checking if cluster has been disabled at boot... =A0 =A0 =A0 =
=A0[ =A0OK =A0]<br>&gt; =A0 =A0Checking Network Manager... =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Global =
setup... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 [ =A0OK =A0]<br>

&gt; =A0 =A0Loading kernel modules... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Mounting configfs... =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =
=A0OK =A0]<br>&gt; =A0 =A0Starting cman... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>

&gt; =A0 =A0Waiting for quorum... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Starting fenced... =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
[ =A0OK =A0]<br>&gt; =A0 =A0Starting dlm_controld... =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>

&gt; =A0 =A0Starting gfs_controld... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>&gt; =A0 =A0Unfencing self... fe=
nce_node: cannot connect to cman<br>&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0[FAILED]<br>&gt; Stopping cluster:<br>

&gt; =A0 =A0Leaving fence domain... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>&gt; =A0 =A0Stopping gfs_controld.=
.. =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =
=A0]<br>&gt; =A0 =A0Stopping dlm_controld... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>

&gt; =A0 =A0Stopping fenced... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>&gt; =A0 =A0Stopping cman...=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0[ =A0OK =A0]<br>&gt; =A0 =A0Unloading kernel modules... =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 [ =A0OK =A0]<br>

&gt; =A0 =A0Unmounting configfs... =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0[ =A0OK =A0]<br>&gt;<br>&gt; Thanks again.<br>&g=
t; Renchu Mathew<br>&gt; On Tue, Sep 11, 2012 at 9:10 PM, Arun Eapen CISSP,=
 RHCA<br>&gt; &lt;<a href=3D"mailto:arun@redhat.com" target=3D"_blank">arun=
@redhat.com</a>&gt; wrote:<br>

&gt;<br>&gt;<br>&gt;<br>&gt; =A0 =A0 =A0 =A0 Put the fenced in debug mode a=
nd copy the error messages, for<br>&gt; =A0 =A0 =A0 =A0 me to<br>&gt; =A0 =
=A0 =A0 =A0 debug<br>&gt;<br>&gt; =A0 =A0 =A0 =A0 On Tue, 2012-09-11 at 11:=
52 +0400, Renchu Mathew wrote:<br>

&gt; =A0 =A0 =A0 =A0 &gt; Hi Arun,<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0=
 =A0 =A0 =A0 &gt; I have done the RH436 course in conducted by you at Redha=
t<br>&gt; =A0 =A0 =A0 =A0 b&#39;lore. How<br>&gt; =A0 =A0 =A0 =A0 &gt; r u?=
<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0 =A0 =A0 =A0 &gt; I have configure=
d a 2 node failover cluster setup (almost<br>

&gt; =A0 =A0 =A0 =A0 same like<br>&gt; =A0 =A0 =A0 =A0 &gt; our RH436 lab s=
etup in b&#39;lore) It is almost ok except<br>&gt; =A0 =A0 =A0 =A0 fencing.=
 If I<br>&gt; =A0 =A0 =A0 =A0 &gt; pull the active node network cable it is=
 not switching to<br>&gt; =A0 =A0 =A0 =A0 the other<br>

&gt; =A0 =A0 =A0 =A0 &gt; automatically. It is getting hung. Then I have to=
 do this<br>&gt; =A0 =A0 =A0 =A0 manually. Is<br>&gt; =A0 =A0 =A0 =A0 &gt; =
there any script for creating the dummy fencing in RHCS<br>&gt; =A0 =A0 =A0=
 =A0 which will<br>&gt; =A0 =A0 =A0 =A0 &gt; restart or shutdown the other =
node. Please find attached my<br>

&gt; =A0 =A0 =A0 =A0 &gt; cluster.conf file. is there anyway we can power f=
ence using<br>&gt; =A0 =A0 =A0 =A0 APC UPS.<br>&gt; =A0 =A0 =A0 =A0 &gt;<br=
>&gt; =A0 =A0 =A0 =A0 &gt; Could you please help me if you get some time.<b=
r>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0 =A0 =A0 =A0 &gt; Thanks and regards=
<br>

&gt; =A0 =A0 =A0 =A0 &gt; Renchu Mathew<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt=
; =A0 =A0 =A0 =A0 &gt;<br>&gt; =A0 =A0 =A0 =A0 &gt;<br>&gt;<br>&gt;<br>&gt;=
<br>&gt; =A0 =A0 =A0 =A0 --<br>&gt; =A0 =A0 =A0 =A0 Arun Eapen<br>&gt; =A0 =
=A0 =A0 =A0 CISSP, RHC{A,DS,E,I,SS,VA,X}<br>&gt; =A0 =A0 =A0 =A0 Senior Tec=
hnical Consultant &amp; Certification Poobah<br>

&gt; =A0 =A0 =A0 =A0 Red Hat India Pvt. Ltd.,<br>&gt; =A0 =A0 =A0 =A0 No - =
4/1, Bannergatta Road,<br>&gt; =A0 =A0 =A0 =A0 IBC Knowledge Park,<br>&gt; =
=A0 =A0 =A0 =A0 11th floor, Tower D,<br>&gt; =A0 =A0 =A0 =A0 Bangalore - 56=
0029, INDIA.<br>&gt;<br>&gt;<br>&gt;<br>

<br><span class=3D"HOEnZb"><font color=3D"#888888"><span><font color=3D"#88=
8888"><br>--<br>Arun Eapen<br>CISSP, RHC{A,DS,E,I,SS,VA,X}<br>Senior Techni=
cal Consultant &amp; Certification Poobah<br>Red Hat India Pvt. Ltd.,<br>No=
 - 4/1, Bannergatta Road,<br>
IBC Knowledge Park,<br>
11th floor, Tower D,<br>Bangalore - 560029, INDIA.<br></font></span></font>=
</span></div></div></blockquote></div><br></div></div><br></div>
</blockquote></div><br>

--000e0ce03dc209fd4b04cb20d604--


From lists@verwilst.be Thu Oct  4 09:47:40 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q94Dld4M024159 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 4 Oct 2012 09:47:40 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q94DlY5l010608
	for <linux-cluster@redhat.com>; Thu, 4 Oct 2012 09:47:34 -0400
Received: from mail.intux.be (mail.intux.be [109.68.162.134])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q94DlW0s020685
	for <Linux-cluster@redhat.com>; Thu, 4 Oct 2012 09:47:33 -0400
Received: from webmail.intux.be (web.intux [10.254.128.29])
	by mail.intux.be (Postfix) with ESMTPSA id 747BB5F759
	for <Linux-cluster@redhat.com>; Thu,  4 Oct 2012 15:47:31 +0200 (CEST)
Received: from dD5769628.access.telenet.be ([213.118.150.40])
	by webmail.intux.be
	with HTTP (HTTP/1.1 POST); Thu, 04 Oct 2012 15:47:31 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Thu, 04 Oct 2012 15:47:31 +0200
From: Bart Verwilst <lists@verwilst.be>
To: <Linux-cluster@redhat.com>
Message-ID: <2c3f847bbba16467723fe057dbded285@verwilst.be>
X-Sender: lists@verwilst.be
User-Agent: Intux Webmail/0.8.1
X-RedHat-Spam-Score: -1.9  (BAYES_00)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Failover network device with rgmanager
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 04 Oct 2012 13:47:40 -0000

Hi,

I would like to make rgmanager manage a network interface i configured 
under sysconfig ( ifcfg-ethX ). It should be brought up by the active 
node as a resource, and ifdown'ed by the standby node. ( It's actually a 
GRE tunnel interface ). Is there a straightforward way on how to do this 
with CentOS 6.2 cman/rgmanager?

Thanks in advance!

Kind regards,

Bart Verwilst


From lhh@redhat.com Thu Oct  4 11:57:16 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q94FvGXm010267 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 4 Oct 2012 11:57:16 -0400
Received: from zealand.bos.redhat.com (dhcp-186-68.bos.redhat.com
	[10.16.186.68])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q94FvAFl031400; Thu, 4 Oct 2012 11:57:10 -0400
Message-ID: <506DB1C4.2080609@redhat.com>
Date: Thu, 04 Oct 2012 11:56:52 -0400
From: Lon Hohberger <lhh@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120827 Thunderbird/15.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <2c3f847bbba16467723fe057dbded285@verwilst.be>
In-Reply-To: <2c3f847bbba16467723fe057dbded285@verwilst.be>
X-Enigmail-Version: 1.4.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Failover network device with rgmanager
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 04 Oct 2012 15:57:16 -0000

On 10/04/2012 09:47 AM, Bart Verwilst wrote:
> Hi,
> 
> I would like to make rgmanager manage a network interface i configured
> under sysconfig ( ifcfg-ethX ). It should be brought up by the active
> node as a resource, and ifdown'ed by the standby node. ( It's actually a
> GRE tunnel interface ). Is there a straightforward way on how to do this
> with CentOS 6.2 cman/rgmanager?
> 

'script' resource, like:

#!/bin/sh

case $1 in
start)
	ifup ethX
	exit $?
	;;
stop)
	ifdown ethX
	exit $?
	;;
status)
        ...
	;;
esac

exit 1

-- Lon


From heiko.nardmann@itechnical.de Thu Oct  4 12:22:59 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q94GMx6N013366 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 4 Oct 2012 12:22:59 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q94GMsYo024474
	for <linux-cluster@redhat.com>; Thu, 4 Oct 2012 12:22:54 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de [212.227.17.8])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q94GMq05005640
	for <linux-cluster@redhat.com>; Thu, 4 Oct 2012 12:22:52 -0400
Received: from laptop.itechnical.de (tmo-009-237.customers.d1-online.com
	[80.187.9.237])
	by mrelayeu.kundenserver.de (node=mreu3) with ESMTP (Nemesis)
	id 0LZYSm-1TgjtH3KQe-00lUCJ; Thu, 04 Oct 2012 18:22:52 +0200
Message-ID: <506DB7D9.3080909@itechnical.de>
Date: Thu, 04 Oct 2012 18:22:49 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120825 Thunderbird/15.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <2c3f847bbba16467723fe057dbded285@verwilst.be>
	<506DB1C4.2080609@redhat.com>
In-Reply-To: <506DB1C4.2080609@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:ej5LpI7QIZoPgJOziii65j8a1LGNTE6hvSdlaRi1cFG
	/tFi4YAWTMhai0RdJMnWdEO2hfKFWyJ4zSGiGw7flsrRKQKhX3
	bYBZS0kn3Z7SAtej/g65ec723hjQH4BVBHf7/YlTekcHYzdtZK
	MYhw8mSe8OMw+E9yIkAEiu2Je2lTEu6Rnnm/dX4it8l35mSpG1
	9I06XqKTTeTNGhgfOYExCZxwh/FB5SGaBJ34FVm6vCpfHV7VxU
	Ey7jL5e/3V4gsu4cBG9ZbTgsNdJECLXy1SwAyBmzGrR/BQFEWP
	ekzqd4FVFsQ+1IHu1Uj5LcCAlnORpjDLrwDfwOPEO/J4UBQcAQ
	W7cm39H9VatXsqxayNtcgnnPfzB5Z2gKaSWlDxTzc
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Failover network device with rgmanager
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 04 Oct 2012 16:22:59 -0000

Isn't that a standard ip resource inside cluster.conf?

Kind regards,

    Heiko

Am 04.10.2012 17:56, schrieb Lon Hohberger:
> On 10/04/2012 09:47 AM, Bart Verwilst wrote:
>> Hi,
>>
>> I would like to make rgmanager manage a network interface i configured
>> under sysconfig ( ifcfg-ethX ). It should be brought up by the active
>> node as a resource, and ifdown'ed by the standby node. ( It's actually a
>> GRE tunnel interface ). Is there a straightforward way on how to do this
>> with CentOS 6.2 cman/rgmanager?
>>
> 'script' resource, like:
>
> #!/bin/sh
>
> case $1 in
> start)
> 	ifup ethX
> 	exit $?
> 	;;
> stop)
> 	ifdown ethX
> 	exit $?
> 	;;
> status)
>         ...
> 	;;
> esac
>
> exit 1
>
> -- Lon


From mgrac@redhat.com Fri Oct  5 07:19:10 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q95BJAOC027166; Fri, 5 Oct 2012 07:19:10 -0400
Received: from [10.36.6.121] (vpn1-6-121.ams2.redhat.com [10.36.6.121])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q95BJ3lj019759; Fri, 5 Oct 2012 07:19:03 -0400
Message-ID: <506EC226.1010900@redhat.com>
Date: Fri, 05 Oct 2012 13:19:02 +0200
From: Marek Grac <mgrac@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120827 Thunderbird/15.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>, cluster-devel@redhat.com
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] fence-agents-3.1.10 stable release
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 05 Oct 2012 11:19:10 -0000

Welcome to the fence-agents 3.1.10 release.

This release includes these updates:
* Faster fencing in fence_vmware_soap
* Action metadata is supported also on older fence agents
* support for using sudo in fence_virsh

The new source tarball can be downloaded here:

https://fedorahosted.org/releases/f/e/fence-agents/fence-agents-3.1.10.tar.xz 


To report bugs or issues:

https://bugzilla.redhat.com/

Would you like to meet the cluster team or members of its community?

    Join us on IRC (irc.freenode.net #linux-cluster) and share your
    experience  with other sysadministrators or power users.

Thanks/congratulations to all people that contributed to achieve this
great milestone.

m,


From mmorgan@dca.net Fri Oct  5 16:22:44 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q95KMix9018259 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 5 Oct 2012 16:22:44 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q95KMdvH021119
	for <linux-cluster@redhat.com>; Fri, 5 Oct 2012 16:22:39 -0400
Received: from staff.dca.net (staff.dca.net [207.245.84.197])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q95KMH9Z019118
	for <linux-cluster@redhat.com>; Fri, 5 Oct 2012 16:22:17 -0400
Received: by staff.dca.net (Postfix, from userid 514)
	id C92982C6A32; Fri,  5 Oct 2012 16:22:16 -0400 (EDT)
Date: Fri, 5 Oct 2012 16:22:16 -0400
From: Michael Morgan <mmorgan@dca.net>
To: linux-cluster@redhat.com
Message-ID: <20121005202216.GK17352@staff.dca.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.4.2.2i
Organization: DCANet, a division of Consult Dynamics Inc.
X-RedHat-Spam-Score: -1.863  (BAYES_05,RP_MATCHES_RCVD,SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] GFS2 showing the wrong directory contents on one
	node?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 05 Oct 2012 20:22:44 -0000

Hello,

 I have a 6 node CentOS 5.8 cluster with 4 nodes mounting a GFS2 filesystem.
Everything had been running nicely for about 2 years but over the past few
months I've had a strange occurence happen twice. One of the two web server
nodes will suddenly start listing the wrong directory contents, both nodes have
been affected at different times. This only seems to affect one or two
directories but it's hard to be certain since there are a large numer of them.
There are no errors logged anywhere on the cluster. Unmounting GFS2 on this
node usually causes a hang and eventual fence. The node will come back online
without issue and begin functioning normally again.

 Just a few minutes ago it started happening again. I currently have services
stopped but have not gone through the unmount/reboot process yet. Before I do
that I figured I'd check the list to see if anyone has come across this before.
Is there any GFS2/cluster information I should be dumping to track down the
cause? Any insight would be appreciated. Thanks.

-Mike


From shanti.pahari@sierra.sg Sun Oct  7 21:58:05 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q981w4Fa009645 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 7 Oct 2012 21:58:05 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q981vwOO012902
	for <linux-cluster@redhat.com>; Sun, 7 Oct 2012 21:57:59 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q981vtP6019042
	for <linux-cluster@redhat.com>; Sun, 7 Oct 2012 21:57:56 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 5A3BC25DD882
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 09:57:05 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id B8Nnfg+hvDzi for <linux-cluster@redhat.com>;
	Mon,  8 Oct 2012 09:57:01 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 467B125DCCC1
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 09:57:01 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Mon, 8 Oct 2012 09:57:01 +0800 (SGT)
Message-ID: <b7083cda.00000e68.00001f42@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_4619_01CDA53B.5FBE1A40"
Thread-Index: Ac2k975YFOC7pPBkRH6B2GFHbsYENA==
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -2.64  (BAYES_05,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 01:58:05 -0000

This is a multipart message in MIME format.

------=_NextPart_000_4619_01CDA53B.5FBE1A40
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,

 

After I added root volume in volume_list in lvm.conf I cannot inlitilize
other lvm .

If I remove volume_list from lvm.conf then only I can intilize other lvm.
But volume_list with only root volume  is required for the cluster.

 

Volume_list  =  [ "myrootvolume", "@hostname" ]

 

Can you help me how can I solve this?

 

Regards,

Shanti


------=_NextPart_000_4619_01CDA53B.5FBE1A40
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Hi =
all,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>After I added root volume in volume_list in lvm.conf I =
cannot inlitilize other lvm .<o:p></o:p></p><p class=3DMsoNormal>If I =
remove volume_list from lvm.conf then only I can intilize other lvm. But =
volume_list with only root volume &nbsp;is required for the =
cluster.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Volume_list&nbsp; =3D&nbsp; [ =
&#8220;myrootvolume&#8221;, &#8220;@hostname&#8221; ]<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Can you help =
me how can I solve this?<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Regards,<o:p></o:p></p><p =
class=3DMsoNormal>Shanti<o:p></o:p></p></div></body></html>
------=_NextPart_000_4619_01CDA53B.5FBE1A40--


From bmr@redhat.com Mon Oct  8 06:43:04 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98Ah4rU006150 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 06:43:04 -0400
Received: from bmr.usersys.redhat.com (dhcp-1-199.fab.redhat.com [10.33.1.199])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98Agu6T014068
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 06:42:59 -0400
Message-ID: <5072AE30.3000904@redhat.com>
Date: Mon, 08 Oct 2012 11:42:56 +0100
From: "Bryn M. Reeves" <bmr@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:13.0) Gecko/20120605 Thunderbird/13.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
In-Reply-To: <b7083cda.00000e68.00001f42@sierra-A66>
X-Enigmail-Version: 1.4.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 10:43:04 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 02:57 AM, Shanti Pahari wrote:
> If I remove volume_list from lvm.conf then only I can intilize
> other lvm. But volume_list with only root volume  is required for
> the cluster.
> 
> 
> 
> Volume_list  =  [ "myrootvolume", "@hostname" ]

It's 'volume_list' (lowercase 'v') and if you're specifying a logical
volume (rather than a volume group) it needs to be "vgname/lvname".

Also make sure it goes in the 'activation' section - there should be a
commented-out example you can use as a template in the default lvm.conf:

# If volume_list is defined, each LV is only activated if there is a
# match against the list.
#  "vgname" and "vgname/lvname" are matched exactly.
#  "@tag" matches any tag set in the LV or VG.
#  "@*" matches if any tag defined on the host is set in the LV or VG
#
# volume_list = [ "vg1", "vg2/lvol1", "@tag1", "@*" ]

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByri8ACgkQ6YSQoMYUY94ZNgCeL/ectFyPgippkiQVEYTPWpn7
lP0AoIls3TalqQZgQ0M5fxJppFrUnjVK
=AsGP
-----END PGP SIGNATURE-----


From shanti.pahari@sierra.sg Mon Oct  8 08:14:32 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98CEWm9017093 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 08:14:32 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98CEQMQ021404
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 08:14:27 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q98CENXa023516
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 08:14:24 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 0CA1F25DE535
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 20:13:34 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UcNFeGVnuEHB for <linux-cluster@redhat.com>;
	Mon,  8 Oct 2012 20:13:33 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 4292225DE52A
	for <linux-cluster@redhat.com>; Mon,  8 Oct 2012 20:13:33 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'linux clustering'" <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
	<5072AE30.3000904@redhat.com>
In-Reply-To: <5072AE30.3000904@redhat.com>
Date: Mon, 8 Oct 2012 20:13:33 +0800 (SGT)
Message-ID: <25537b6b.00000e68.00001f81@sierra-A66>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
Thread-Index: AQHCwgadwRZWi+92joRbx5FqQfmUCAIGmg8pl7TjbeA=
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.038  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 12:14:33 -0000

volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]

where my vg_pdcpicpl01 is Volume group rather than logical volume. This is
my root volume .

In example I saw that I have to specify only VG of root .

Can you help me where I am wrong ?

Thanks,
Shanti



-----Original Message-----
From: linux-cluster-bounces@redhat.com
[mailto:linux-cluster-bounces@redhat.com] On Behalf Of Bryn M. Reeves
Sent: Monday, 8 October, 2012 6:43 PM
To: linux clustering
Subject: Re: [Linux-cluster] LVM cannot initilize

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 02:57 AM, Shanti Pahari wrote:
> If I remove volume_list from lvm.conf then only I can intilize other 
> lvm. But volume_list with only root volume  is required for the 
> cluster.
> 
> 
> 
> Volume_list  =  [ "myrootvolume", "@hostname" ]

It's 'volume_list' (lowercase 'v') and if you're specifying a logical
volume (rather than a volume group) it needs to be "vgname/lvname".

Also make sure it goes in the 'activation' section - there should be a
commented-out example you can use as a template in the default lvm.conf:

# If volume_list is defined, each LV is only activated if there is a #
match against the list.
#  "vgname" and "vgname/lvname" are matched exactly.
#  "@tag" matches any tag set in the LV or VG.
#  "@*" matches if any tag defined on the host is set in the LV or VG # #
volume_list = [ "vg1", "vg2/lvol1", "@tag1", "@*" ]

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByri8ACgkQ6YSQoMYUY94ZNgCeL/ectFyPgippkiQVEYTPWpn7
lP0AoIls3TalqQZgQ0M5fxJppFrUnjVK
=AsGP
-----END PGP SIGNATURE-----

--
Linux-cluster mailing list
Linux-cluster@redhat.com
https://www.redhat.com/mailman/listinfo/linux-cluster


From bmr@redhat.com Mon Oct  8 08:47:05 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q98Cl5Dh020428 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 08:47:05 -0400
Received: from bmr.usersys.redhat.com (dhcp-1-199.fab.redhat.com [10.33.1.199])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q98CkwvO007302
	(version=TLSv1/SSLv3 cipher=DHE-RSA-CAMELLIA256-SHA bits=256 verify=NO);
	Mon, 8 Oct 2012 08:47:00 -0400
Message-ID: <5072CB41.4090006@redhat.com>
Date: Mon, 08 Oct 2012 13:46:57 +0100
From: "Bryn M. Reeves" <bmr@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:13.0) Gecko/20120605 Thunderbird/13.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
	<5072AE30.3000904@redhat.com>
	<25537b6b.00000e68.00001f81@sierra-A66>
In-Reply-To: <25537b6b.00000e68.00001f81@sierra-A66>
X-Enigmail-Version: 1.4.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 08 Oct 2012 12:47:06 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 01:13 PM, Shanti Pahari wrote:
> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]
> 
> where my vg_pdcpicpl01 is Volume group rather than logical volume.
> This is my root volume .

Either a tag "@tagname", a volume group as "vgname", or a logical
volume name as "vgname/lvname" (otherwise the tools cannot know which
LV you mean if there are multiple LVs with the same name in different
VGs).

In your earlier example you seemed to have an LV name:

>> Volume_list  =  [ "myrootvolume", "@hostname" ]

Which won't work since the LV name is unqualified by a VG. Your later
example:

> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]

Looks correct assuming that vg_pdcpicpl01 is the name of a VG on your
system.

> In example I saw that I have to specify only VG of root .

It's up to you whether you want to specify just an LV or a whole VG.

> Can you help me where I am wrong ?

It's hard to say. What error do you get initialising LVM? Try adding
more -v if there's nothing useful printed (normally syntax errors in
lvm.conf give a useful message).

Failing that you could post your full lvm.conf to a pastebin somewhere
and mail the link so that others can review your config.

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByy0EACgkQ6YSQoMYUY95VEgCdFK9QqeTOGAiiYnZiuAJ6iHY5
BrUAmwbCBULcq9gEVBtqOg8wAAGXph5M
=UsOX
-----END PGP SIGNATURE-----


From cfeist@redhat.com Mon Oct  8 20:27:42 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q990RgHK010829 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 20:27:42 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q990RajO006094; Mon, 8 Oct 2012 20:27:36 -0400
Message-ID: <50736F78.3060906@redhat.com>
Date: Mon, 08 Oct 2012 19:27:36 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: pacemaker@oss.clusterlabs.org, linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 00:27:42 -0000

We've been making improvements to the pcs (pacemaker/corosync configuration 
system) command line tool over the past few months.

Currently you can setup a basic cluster (including configuring corosync 2.0 udpu).

David Vossel has also created a version of the "Clusters from Scratch" document 
that illustrates setting up a cluster using pcs.  This should be showing up shortly.

You can view the source here: https://github.com/feist/pcs/

Or download the latest tarball:
https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz

There is also a Fedora 18 package that will be included with the next release. 
You should be able to find that package in the following locations...

RPM:
http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm

SRPM:
http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm

In the near future we are planning on having builds for SUSE & Ubuntu/Debian.

We're also actively working on a GUI/Daemon that will allow control of your 
entire cluster from one node and/or a web browser.

Please feel free to email me (cfeist@redhat.com) or open issues on the pcs 
project at github (https://github.com/feist/pcs/issues) if you have any 
questions or problems.

Thanks!
Chris


From ming-ming.chen@hp.com Mon Oct  8 21:51:27 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q991pRse028524 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 21:51:27 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q991pMDx012804
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:51:22 -0400
Received: from g4t0014.houston.hp.com (g4t0014.houston.hp.com [15.201.24.17])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q991pLIE011085
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:51:21 -0400
Received: from G9W0369G.americas.hpqcorp.net (g9w0369g.houston.hp.com
	[16.216.193.232]) (using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by g4t0014.houston.hp.com (Postfix) with ESMTPS id A475D24553;
	Tue,  9 Oct 2012 01:51:21 +0000 (UTC)
Received: from G9W0364.americas.hpqcorp.net (16.216.193.45) by
	G9W0369G.americas.hpqcorp.net (16.216.193.232) with Microsoft SMTP
	Server (TLS) id 14.2.283.4; Tue, 9 Oct 2012 01:47:15 +0000
Received: from G9W0733.americas.hpqcorp.net ([169.254.12.105]) by
	G9W0364.americas.hpqcorp.net ([16.216.193.45]) with mapi id
	14.02.0283.004; Tue, 9 Oct 2012 01:47:15 +0000
From: "Chen, Ming Ming" <ming-ming.chen@hp.com>
To: linux clustering <linux-cluster@redhat.com>, "bentech4you@gmail.com"
	<bentech4you@gmail.com>
Thread-Topic: [Linux-cluster] Configure multiple heartbeat on a redhat cluster
Thread-Index: AQHNpcAB9ri0xyfg5E6Y4Sw06+Hnyw==
Date: Tue, 9 Oct 2012 01:47:14 +0000
Message-ID: <1D241511770E2F4BA89AFD224EDD527141025BAE@G9W0733.americas.hpqcorp.net>
References: <CA+C_GOV08RN0bv4v--xVyY1hkU54r4ntVyXvHk4UgUtWjt3sSg@mail.gmail.com>
	<5057D17D.9060108@alteeve.ca>
	<CA+C_GOXhjW8aeEb586Oum81Qn+u2ryKNwx1pDHA_a7v6WBrcgw@mail.gmail.com>
	<5057E9C5.60506@alteeve.ca>
	<CA+C_GOW=epBq8N-XFhzQ=Fij+Ahz6J-9B+gASyb5PGi31v=8RQ@mail.gmail.com>
	<5057ED14.4030601@alteeve.ca>
In-Reply-To: <5057ED14.4030601@alteeve.ca>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [16.210.48.12]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -109.038  (BAYES_00, RCVD_IN_DNSWL_HI, RP_MATCHES_RCVD,
	USER_IN_WHITELIST)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q991pRse028524
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster]  Configure multiple heartbeat on a redhat cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 01:51:27 -0000



 Hi,
 Is there a way to configure multiple heartbeat network in the /etc/cluster.conf file.
I'm using redhat cluster.
Regards
Ming



From ming-ming.chen@hp.com Mon Oct  8 21:56:16 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q991uGnj029635 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 21:56:16 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q991uAa0014912
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:56:11 -0400
Received: from g4t0015.houston.hp.com (g4t0015.houston.hp.com [15.201.24.18])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q991u9IA006797
	for <linux-cluster@redhat.com>; Mon, 8 Oct 2012 21:56:09 -0400
Received: from G4W3011G.americas.hpqcorp.net (g4w3011g.houston.hp.com
	[16.234.25.125]) (using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by g4t0015.houston.hp.com (Postfix) with ESMTPS id 81E1F8634
	for <linux-cluster@redhat.com>; Tue,  9 Oct 2012 01:56:09 +0000 (UTC)
Received: from G9W2161G.americas.hpqcorp.net (16.216.113.179) by
	G4W3011G.americas.hpqcorp.net (16.234.25.125) with Microsoft SMTP
	Server (TLS) id 14.2.283.4; Tue, 9 Oct 2012 01:55:03 +0000
Received: from G9W0733.americas.hpqcorp.net ([169.254.12.105]) by
	G9W2161G.americas.hpqcorp.net ([16.216.113.179]) with mapi id
	14.02.0283.004; Tue, 9 Oct 2012 01:55:03 +0000
From: "Chen, Ming Ming" <ming-ming.chen@hp.com>
To: linux clustering <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster] problem quorum cman
Thread-Index: AQHNZlnET4V9DO7ziEeSMGvaMrmeO5ewtSmw
Date: Tue, 9 Oct 2012 01:55:01 +0000
Message-ID: <1D241511770E2F4BA89AFD224EDD527141025C87@G9W0733.americas.hpqcorp.net>
References: <CANQ3Co9=qVZehgECe=ZGj_wEv-eGGR__-TbDF-M=yMgeQuRpyg@mail.gmail.com>
In-Reply-To: <CANQ3Co9=qVZehgECe=ZGj_wEv-eGGR__-TbDF-M=yMgeQuRpyg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [16.210.48.12]
Content-Type: multipart/alternative;
	boundary="_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_"
MIME-Version: 1.0
X-RedHat-Spam-Score: -109.037  (BAYES_00, HTML_MESSAGE, RCVD_IN_DNSWL_HI,
	RP_MATCHES_RCVD, USER_IN_WHITELIST)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] problem quorum cman
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 01:56:16 -0000

--_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

Have you ever resolved this issue? If so, what is the problem? I sometime s=
ee the same issue on my cluster.

Ming





From: linux-cluster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat=
.com] On Behalf Of hakim abdellaoui
Sent: Friday, July 20, 2012 2:15 AM
To: linux-cluster@redhat.com
Subject: [Linux-cluster] problem quorum cman



Hi,

I use rhel6.3 with packages :

cman-3.0.12.1-32.el6.x86_64
rgmanager-3.0.12.1-12.el6.x86_64
openais-1.1.1-7.el6.x86_64

I have two virtual nodes  (vmware) and a quorum share disk (it's a virtual =
disk i use scsi sharing multi-write)

the cluster work sometime.

if i reboot node2 the cman not start i have   : Waiting for quorum... Timed=
-out waiting for cluster.

On the log corosync i have :

Jul 20 10:51:22 corosync [TOTEM ] A processor joined or left the membership=
 and a new membership was formed.
Jul 20 10:51:22 corosync [CPG   ] chosen downlist: sender r(0) ip(192.168.1=
0.154) ; members(old:1 left:0)
Jul 20 10:51:22 corosync [MAIN  ] Completed service synchronization, ready =
to provide service.
Jul 20 10:51:23 corosync [CMAN  ] quorum device unregistered


On the node1 when i type clustat i have :

Cluster Status for clusterweb @ Fri Jul 20 10:38:57 2012
Member Status: Quorate

 Member Name                                  ID   Status
 ------ ----                                  ---- ------
 server-1                                      1 Online, Local
 server-2                                      2 Offline
 /dev/block/8:16                           0 Online, Quorum Disk


If i restart cman on node1 and  i restart cman on node2 the cman start prop=
erly a
When i  type clustat on both nodes i can see all online.


I don't understand why i must restart on node1 the cman if i want to add th=
e node2 on the
cluster .


You can see my cluster.conf

<?xml version=3D"1.0"?>
<cluster config_version=3D"6" name=3D"clusterweb">
        <clusternodes>
                <clusternode name=3D"server-1" nodeid=3D"1"/>
                <clusternode name=3D"server-2" nodeid=3D"2"/>
        </clusternodes>
        <cman expected_votes=3D"3"/>
        <quorumd label=3D"quorum">
                <heuristic program=3D"ping -c3 -t2 192.168.254.254"/>
        </quorumd>
</cluster>


Very thanks for your help

Best regards.


--_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 12 (filtered medium)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
-->
</style><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext=3D"edit">
  <o:idmap v:ext=3D"edit" data=3D"1" />
 </o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D">Hi,<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D">Have you ever resolved this issue? If so, what is the proble=
m? I sometime see the same issue on my cluster.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D">Ming<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"font-size:11.0pt;font-family:&quot;Ca=
libri&quot;,&quot;sans-serif&quot;;
color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<div style=3D"border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in =
0in 0in">
<p class=3D"MsoNormal"><b><span style=3D"font-size:10.0pt;font-family:&quot=
;Tahoma&quot;,&quot;sans-serif&quot;">From:</span></b><span style=3D"font-s=
ize:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;"> linux-cl=
uster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat.com]
<b>On Behalf Of </b>hakim abdellaoui<br>
<b>Sent:</b> Friday, July 20, 2012 2:15 AM<br>
<b>To:</b> linux-cluster@redhat.com<br>
<b>Subject:</b> [Linux-cluster] problem quorum cman<o:p></o:p></span></p>
</div>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Hi,<br>
<br>
I use rhel6.3 with packages :<br>
<br>
cman-3.0.12.1-32.el6.x86_64<br>
rgmanager-3.0.12.1-12.el6.x86_64<br>
openais-1.1.1-7.el6.x86_64<br>
<br>
I have two virtual nodes&nbsp; (vmware) and a quorum share disk (it's a vir=
tual disk i use scsi sharing multi-write)<br>
<br>
the cluster work sometime.<br>
<br>
if i reboot node2 the cman not start i have&nbsp;&nbsp; : <b>Waiting for qu=
orum... Timed-out waiting for cluster.</b><br>
<br>
On the log corosync i have :<br>
<br>
<b>Jul 20 10:51:22 corosync [TOTEM ] A processor joined or left the members=
hip and a new membership was formed.<br>
Jul 20 10:51:22 corosync [CPG&nbsp;&nbsp; ] chosen downlist: sender r(0) ip=
(192.168.10.154) ; members(old:1 left:0)<br>
Jul 20 10:51:22 corosync [MAIN&nbsp; ] Completed service synchronization, r=
eady to provide service.<br>
Jul 20 10:51:23 corosync [CMAN&nbsp; ] quorum device unregistered</b><br>
<br>
<br>
On the node1 when i type clustat i have :<br>
&nbsp;<br>
Cluster Status for clusterweb @ Fri Jul 20 10:38:57 2012<br>
Member Status: Quorate<br>
<br>
&nbsp;Member Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ID&nbsp;&=
nbsp; Status<br>
&nbsp;------ ----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---- ----=
--<br>
&nbsp;server-1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; 1 Online, Local<br>
&nbsp;server-2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; 2 Offline<br>
&nbsp;/dev/block/8:16&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp; 0 Online, Quorum Disk<br>
<br>
<br>
If i restart cman on node1 and&nbsp; i restart cman on node2 the cman start=
 properly a<br>
When i&nbsp; type clustat on both nodes i can see all online.<br>
<br>
<br>
I don't understand why i must restart on node1 the cman if i want to add th=
e node2 on the
<br>
cluster .<br>
<br>
<br>
You can see my cluster.conf<br>
<br>
&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster config_version=3D&quot;6&quot; name=3D&quot;clusterweb&quot;&gt=
;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;clusternodes&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; &lt;clusternode name=3D&quot;server-1&quot; nodeid=3D&quot;=
1&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; &lt;clusternode name=3D&quot;server-2&quot; nodeid=3D&quot;=
2&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/clusternodes&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;cman expected_votes=3D&quot;=
3&quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;quorumd label=3D&quot;quorum=
&quot;&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp; &lt;heuristic program=3D&quot;ping -c3 -t2 192.168.254.254&=
quot;/&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/quorumd&gt;<br>
&lt;/cluster&gt;<br>
<br>
<br>
Very thanks for your help<br>
<br>
Best regards.<o:p></o:p></p>
</div>
</body>
</html>

--_000_1D241511770E2F4BA89AFD224EDD527141025C87G9W0733americas_--


From lists@alteeve.ca Mon Oct  8 21:58:14 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q991wDCs029700 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 8 Oct 2012 21:58:13 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q991w8PY021641; Mon, 8 Oct 2012 21:58:08 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q991w6rP017427;
	Mon, 8 Oct 2012 21:58:07 -0400
Received: from lemass.alteeve.ca (unknown [216.66.176.13])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 6263C422488;
	Mon,  8 Oct 2012 21:58:04 -0400 (EDT)
Message-ID: <507384AC.5010805@alteeve.ca>
Date: Mon, 08 Oct 2012 21:58:04 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Cc: pacemaker@oss.clusterlabs.org
Subject: Re: [Linux-cluster] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 01:58:14 -0000

Well, I was looking for a reason to download and start testing Fedora 
18. Suppose this is a good enough reason. :)

digimer

On 10/08/2012 08:27 PM, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync
> configuration system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync
> 2.0 udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should
> be showing up shortly.
>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next
> release. You should be able to find that package in the following
> locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE &
> Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of
> your entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the
> pcs project at github (https://github.com/feist/pcs/issues) if you have
> any questions or problems.
>
> Thanks!
> Chris
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From fdinitto@redhat.com Tue Oct  9 02:53:25 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q996rPat030789 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 02:53:25 -0400
Received: from [192.168.0.11] (ovpn-113-79.phx2.redhat.com [10.3.113.79])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q996rIJ3002146
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 02:53:19 -0400
Message-ID: <5073C9E3.7000009@redhat.com>
Date: Tue, 09 Oct 2012 08:53:23 +0200
From: "Fabio M. Di Nitto" <fdinitto@redhat.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1;
	rv:15.0) Gecko/20120907 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
X-Enigmail-Version: 1.4.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 06:53:25 -0000

On 10/9/2012 2:27 AM, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync
> configuration system) command line tool over the past few months.
> 
> Currently you can setup a basic cluster (including configuring corosync
> 2.0 udpu).
> 
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should
> be showing up shortly.
>

well done guys!!!

Fabio


From shanti.pahari@sierra.sg Tue Oct  9 05:08:10 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9998AmC020306 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 05:08:10 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q99984kG015878; Tue, 9 Oct 2012 05:08:05 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q999807b015832;
	Tue, 9 Oct 2012 05:08:02 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 34D2E25DEA51;
	Tue,  9 Oct 2012 17:07:11 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id r1FyQpswGn2T; Tue,  9 Oct 2012 17:07:10 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 7456F25DEA4B;
	Tue,  9 Oct 2012 17:07:10 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'Bryn M. Reeves'" <bmr@redhat.com>,
	"'linux clustering'" <linux-cluster@redhat.com>
References: <b7083cda.00000e68.00001f42@sierra-A66>
	<5072AE30.3000904@redhat.com>
	<25537b6b.00000e68.00001f81@sierra-A66>
	<5072CB41.4090006@redhat.com>
In-Reply-To: <5072CB41.4090006@redhat.com>
Date: Tue, 9 Oct 2012 17:07:10 +0800 (SGT)
Message-ID: <97898eab.00001f6c.00000041@sierra-A66>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
Thread-Index: AQHCwgadwRZWi+92joRbx5FqQfmUCAIGmg8pAWtf8u4Ba79Djpefh1fg
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.038  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] LVM cannot initilize
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 09:08:10 -0000

Hi Bryn,

>From example:
On each cluster node, edit /etc/lvm/lvm.conf and change the volume_list
field to
match the boot volume (myvg) and name of the node cluster interconnect
(ha-web1).
This restricts the list of volumes available during system boot to only
the root volume
and prevents cluster nodes from updating and potentially corrupting the
metadata on
the HA-LVM volume:
volume_list = [ "myvg", "@ha-web1" ]

so I added volume_list = [ " vg_pdcpicpl01 " , "@PDC-PIC-PL-01" ]

PDC-PIC-PL-01 : is my hostname

# dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)
# shutdown -r now "Activating ramdisk LVM changes"

Reboot

I have /dev/HA-Web-VG/ha-web-lv also, but after reboot I cannot initialize
my volume it throws  nor create logical volume
lvcreate gets error message "not activating volume group lv does not pass
activation filter"

-----Original Message-----
From: Bryn M. Reeves [mailto:bmr@redhat.com] 
Sent: Monday, 8 October, 2012 8:47 PM
To: linux clustering
Cc: Shanti Pahari
Subject: Re: [Linux-cluster] LVM cannot initilize

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/08/2012 01:13 PM, Shanti Pahari wrote:
> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]
> 
> where my vg_pdcpicpl01 is Volume group rather than logical volume.
> This is my root volume .

Either a tag "@tagname", a volume group as "vgname", or a logical volume
name as "vgname/lvname" (otherwise the tools cannot know which LV you mean
if there are multiple LVs with the same name in different VGs).

In your earlier example you seemed to have an LV name:

>> Volume_list  =  [ "myrootvolume", "@hostname" ]

Which won't work since the LV name is unqualified by a VG. Your later
example:

> volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-01" ]

Looks correct assuming that vg_pdcpicpl01 is the name of a VG on your
system.

> In example I saw that I have to specify only VG of root .

It's up to you whether you want to specify just an LV or a whole VG.

> Can you help me where I am wrong ?

It's hard to say. What error do you get initialising LVM? Try adding more
-v if there's nothing useful printed (normally syntax errors in lvm.conf
give a useful message).

Failing that you could post your full lvm.conf to a pastebin somewhere and
mail the link so that others can review your config.

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlByy0EACgkQ6YSQoMYUY95VEgCdFK9QqeTOGAiiYnZiuAJ6iHY5
BrUAmwbCBULcq9gEVBtqOg8wAAGXph5M
=UsOX
-----END PGP SIGNATURE-----


From mmorgan@dca.net Tue Oct  9 09:44:16 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99DiGiR021121 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 09:44:16 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q99DiAL9002481
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 09:44:11 -0400
Received: from staff.dca.net (staff.dca.net [207.245.84.197])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q99Di6mt016915
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 09:44:06 -0400
Received: by staff.dca.net (Postfix, from userid 514)
	id 06A652C6A32; Tue,  9 Oct 2012 09:44:06 -0400 (EDT)
Date: Tue, 9 Oct 2012 09:44:06 -0400
From: Michael Morgan <mmorgan@dca.net>
To: linux-cluster@redhat.com
Message-ID: <20121009134406.GB9351@staff.dca.net>
References: <20121005202216.GK17352@staff.dca.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20121005202216.GK17352@staff.dca.net>
User-Agent: Mutt/1.4.2.2i
Organization: DCANet, a division of Consult Dynamics Inc.
X-RedHat-Spam-Score: -3.262  (BAYES_00,RP_MATCHES_RCVD,SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] GFS2 showing the wrong directory contents on
	one node?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 13:44:16 -0000

Replying to myself,

 I was out of the office yesterday but I come back in this morning and
everything looks correct again. Apache is still stopped and nobody has touched
the server since I stopped services on Friday. Very strange

-Mike

On Fri, Oct 05, 2012 at 04:22:16PM -0400, Michael Morgan wrote:
> Hello,
> 
>  I have a 6 node CentOS 5.8 cluster with 4 nodes mounting a GFS2 filesystem.
> Everything had been running nicely for about 2 years but over the past few
> months I've had a strange occurence happen twice. One of the two web server
> nodes will suddenly start listing the wrong directory contents, both nodes have
> been affected at different times. This only seems to affect one or two
> directories but it's hard to be certain since there are a large numer of them.
> There are no errors logged anywhere on the cluster. Unmounting GFS2 on this
> node usually causes a hang and eventual fence. The node will come back online
> without issue and begin functioning normally again.
> 
>  Just a few minutes ago it started happening again. I currently have services
> stopped but have not gone through the unmount/reboot process yet. Before I do
> that I figured I'd check the list to see if anyone has come across this before.
> Is there any GFS2/cluster information I should be dumping to track down the
> cause? Any insight would be appreciated. Thanks.
> 
> -Mike
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster


From queszama@yahoo.in Tue Oct  9 12:25:09 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99GP8xS013319 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 12:25:09 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99GP3Lq023366
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:25:03 -0400
Received: from nm6-vm8.bullet.mail.sg3.yahoo.com
	(nm6-vm8.bullet.mail.sg3.yahoo.com [106.10.148.167])
	by mx1.redhat.com (8.14.4/8.14.4) with SMTP id q99GP1VK018601
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:25:02 -0400
Received: from [106.10.166.126] by nm6.bullet.mail.sg3.yahoo.com with NNFMP;
	09 Oct 2012 16:25:01 -0000
Received: from [106.10.151.203] by tm15.bullet.mail.sg3.yahoo.com with NNFMP;
	09 Oct 2012 16:25:01 -0000
Received: from [127.0.0.1] by omp1015.mail.sg3.yahoo.com with NNFMP;
	09 Oct 2012 16:25:01 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 48940.58227.bm@omp1015.mail.sg3.yahoo.com
Received: (qmail 96358 invoked by uid 60001); 9 Oct 2012 16:25:01 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.in; s=s1024;
	t=1349799900; bh=LSVmXYMIEhcSgY/LfAnAD8xQt8oAJX+V9Twa38RXIhc=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
	b=0a57y5W6gl/hOPc8IQUghteXGfO7KQarrqk8PkVQdW8X0cCLNd2VkaxOSGyD0BmiT1IeG/HpRVmykwZ+6CxqOsOtE8H0Lf05Fd6uF1jQPLwsk01k8pBXhzgdUKWa6dJ4RNKnlxMxFVY54jcctRBLvOvi7ByKVZUK8z2xT6/A/8w=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.in;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
	b=EB8WdcYPRi6Co3TNCaIbvbrKXJYK+ZiOduG9VYRc40/tPWFzxkR25mR/9Of02yAYOHRQeV+lPrr01RXLebQBMhBwfUUB+sYpCe9uzpCV8f3nutMHNAMYZolyD1+FpEJl0hfHLuVv9CcQoI0zUDSdGpVg+L0mamDzC8dn1Fh/4S0=;
X-YMail-OSG: 0847JTwVM1lDf66W8l.ScmpQtxyzu5P3EqIleBw1BM5v5L6
	dkgebhN0lvCRs02LGbRvxEOEp.fkNk3.ntb1vW6nyTdiaU6Ciy1nXpmhDy5i
	GsFGQ5d_D6nLFmH0itgO_wgLduS.6HMGnzE5dfHiUMuJJT3Vrd_FnIvk60z5
	IbH8Nd1MtcbGbif8zn0RYIJO20KPN_c6plwuoSe4R_I8NKYSGDrAYvPPy7jK
	7XnioNxFkZuLUt9kQu8zlwZfp7yyVFSUwSvdms82cLfGm1s3I8M5I674RP7M
	zYd7JqttT2WL5mHEfbQom12ly7CPR4WX9uyDnmf0cutWaGohPY4o6vfW4v6z
	I7kgcIiYusscHtx_K3BJCD.Fs_6EXAprFjq7jMEn7BDbjZFw6x7q4TlitAYC
	FVp3PiXFg3A--
Received: from [115.253.216.35] by web193006.mail.sg3.yahoo.com via HTTP;
	Wed, 10 Oct 2012 00:25:00 SGT
X-Rocket-MIMEInfo: 001.001,
	SGkgQWxsLAoKTmVlZCBoZWxwIGluIHNlbGVjdGluZyB0aGUgcmlnaHQgZmVuY2luZyBkZXZpY2UgZm9yIG91ciBIQSBjbHVzdGVyIG9mIHR3byBub2RlcyAuIFRoZSBzZXJ2ZXIgaGFyZHdhcmUgdXNlZCBpcyBIUCBQcm9saWFudCBTZXJ2ZXJzIGFuZCBPUyB3ZSBhcmUgdXNpbmcgaXMgQ2VudE9TIDUKClRoZXJlIGFyZSB0d28gb3B0aW9ucyBmb3IgdXMgaW4gc2VsZWN0aW5nIHRoZSBmZW5jaW5nIGRldmljZSAuIAoKCk9uZSBpcyBzZWxlY3RpbmcgYSBTQU4gQnJvY2FkZSBzd2l0Y2guIEluIHRoaXMgY2FzZSABMAEBAQE-
Message-ID: <1349799900.92783.YahooMailNeo@web193006.mail.sg3.yahoo.com>
Date: Wed, 10 Oct 2012 00:25:00 +0800 (SGT)
From: Zama Ques <queszama@yahoo.in>
To: linux clustering <linux-cluster@redhat.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="-488649105-436588037-1349799900=:92783"
X-RedHat-Spam-Score: 0.692  (BAYES_50, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Choosing a fencing device
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Zama Ques <queszama@yahoo.in>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 16:25:09 -0000

---488649105-436588037-1349799900=:92783
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi All,=0A=0ANeed help in selecting the right fencing device for our HA clu=
ster of two nodes . The server hardware used is HP Proliant Servers and OS =
we are using is CentOS 5=0A=0AThere are two options for us in selecting the=
 fencing device . =0A=0A=0AOne is selecting a SAN Brocade switch. In this c=
ase , we will use ILO as secondary fencing device .=0A=0AOther option for u=
s is using HP ILO as primary fencing device and IPMI fencing for secondary =
fencing =0A=0A=0AOf the two options which will be better to go for configur=
ing fencing .Any known issues with ILO or SAN Brocade switch in configuring=
 fencing ?=A0 Any suggestions will be greatly helpful.=A0=0A=0AThanks=0AZam=
an=0A
---488649105-436588037-1349799900=:92783
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:ar=
ial, helvetica, sans-serif;font-size:12pt"><div>Hi All,<br><br>Need help in=
 selecting the right fencing device for our HA cluster of two nodes . The s=
erver hardware used is HP Proliant Servers and OS we are using is CentOS 5<=
br><br>There are two options for us in selecting the fencing device . <br><=
br><br>One is selecting a SAN Brocade switch. In this case , we will use IL=
O as secondary fencing device .<br><br>Other option for us is using HP ILO =
as primary fencing device and IPMI fencing for secondary fencing <br><br><b=
r>Of the two options which will be better to go for configuring fencing .An=
y known issues with ILO or SAN Brocade switch in configuring fencing ?&nbsp=
; Any suggestions will be greatly helpful.&nbsp;</div><div style=3D"color: =
rgb(0, 0, 0); font-size: 16px; font-family: arial,helvetica,sans-serif; bac=
kground-color: transparent; font-style: normal;"><br></div><div
 style=3D"color: rgb(0, 0, 0); font-size: 16px; font-family: arial,helvetic=
a,sans-serif; background-color: transparent; font-style: normal;">Thanks</d=
iv><div style=3D"color: rgb(0, 0, 0); font-size: 16px; font-family: arial,h=
elvetica,sans-serif; background-color: transparent; font-style: normal;">Za=
man</div></div></body></html>
---488649105-436588037-1349799900=:92783--


From lists@alteeve.ca Tue Oct  9 12:58:51 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q99Gwppw019516 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 9 Oct 2012 12:58:51 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q99GwjmQ012476
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:58:45 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q99GwhwL006017
	for <linux-cluster@redhat.com>; Tue, 9 Oct 2012 12:58:43 -0400
Received: from lemass.alteeve.ca (199-7-156-147.eng.wind.ca [199.7.156.147])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 34353422502;
	Tue,  9 Oct 2012 12:58:41 -0400 (EDT)
Message-ID: <507457C1.1020402@alteeve.ca>
Date: Tue, 09 Oct 2012 12:58:41 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: Zama Ques <queszama@yahoo.in>, linux clustering <linux-cluster@redhat.com>
References: <1349799900.92783.YahooMailNeo@web193006.mail.sg3.yahoo.com>
In-Reply-To: <1349799900.92783.YahooMailNeo@web193006.mail.sg3.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Choosing a fencing device
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 09 Oct 2012 16:58:51 -0000

On 10/09/2012 12:25 PM, Zama Ques wrote:
> Hi All,
>
> Need help in selecting the right fencing device for our HA cluster of
> two nodes . The server hardware used is HP Proliant Servers and OS we
> are using is CentOS 5
>
> There are two options for us in selecting the fencing device .
>
>
> One is selecting a SAN Brocade switch. In this case , we will use ILO as
> secondary fencing device .
>
> Other option for us is using HP ILO as primary fencing device and IPMI
> fencing for secondary fencing
>
>
> Of the two options which will be better to go for configuring fencing
> .Any known issues with ILO or SAN Brocade switch in configuring fencing
> ?  Any suggestions will be greatly helpful.
>
> Thanks
> Zaman

There is no benefit to use fence_ilo and fence_ipmilan as they work on 
the same device... If one fails, the other will, too.

Personally, I'd use fence_ipmilan (more tested than fence_ilo) as 
primary and SAN fencing as a backup in case the out of band management 
fails (as could happen if the node lost it's power).

The reason I recommend the oob interface as primary is that power 
fencing has a chance of recovering the node where fabric fencing merely 
cuts it off, which is fine for fencing, but stays offline until an admin 
solves the problem and unfences the nodes.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From shanti.pahari@sierra.sg Wed Oct 10 03:07:35 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9A77Z63010322 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 03:07:35 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9A77Tsl001806
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 03:07:30 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9A77Nko016066
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 03:07:24 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 4823325DEE23
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 15:06:33 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lpd9XOC5-9CX for <linux-cluster@redhat.com>;
	Wed, 10 Oct 2012 15:06:31 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id E87C725DEE1D
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 15:06:30 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Wed, 10 Oct 2012 15:06:30 +0800 (SGT)
Message-ID: <a2202e87.00001f6c.00000065@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0238_01CDA6F8.EE9784E0"
Thread-Index: Ac2mtGR/xVgfv7BlSg6B1HSV901+Yw==
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.039  (BAYES_00, HTML_MESSAGE, MIME_QP_LONG_LINE,
	RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 07:07:36 -0000

This is a multipart message in MIME format.

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0239_01CDA6F8.EE9784E0"


------=_NextPart_001_0239_01CDA6F8.EE9784E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Dear all,

 

I have cluster setup with 2 node and created web cluster service on it but
it cannot run.

I have not listed anything in lvm.conf volume_list because once I add
anything in volume_list and reboot the system then I cannot mount and even
cannot read the lv which I created for my web . It throws error as 

error message "not activating volume group lv does not pass activation
filter"

Therefore I didn't add anything in lvm.conf . Then I try to start my
cluster servers for web server but the service failed.

Please help me so that I can solve this out.

 

I have attached my cluster.conf , lvdisplay , /var/log/messages and
lvm.conf and my /etc/hosts.

 

I will be greatful if anyone can help me!

Thanks

 

And my clustat: 

Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012

Member Status: Quorate

 

Member Name                                                     ID
Status

------ ----                                                     ----
------

PDC-PIC-PL-CL1                                                      1
Online, Local, rgmanager

PDC-PIC-PL-CL2                                                      2
Online, rgmanager

 

Service Name                                               Owner (Last)
State         

 ------- ----                                               ----- ------
-----         

 service:ha-web-service
(PDC-PIC-PL-CL1)                                           failed        


------=_NextPart_001_0239_01CDA6F8.EE9784E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Dear =
all,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>I have cluster setup with 2 node and created web =
cluster service on it but it cannot run.<o:p></o:p></p><p =
class=3DMsoNormal>I have not listed anything in lvm.conf volume_list =
because once I add anything in volume_list and reboot the system then I =
cannot mount and even cannot read the lv which I created for my web . It =
throws error as <o:p></o:p></p><p class=3DMsoNormal>error message =
&quot;not activating volume group lv does not pass activation =
filter&quot;<o:p></o:p></p><p class=3DMsoNormal>Therefore I didn&#8217;t =
add anything in lvm.conf . Then I try to start my cluster servers for =
web server but the service failed.<o:p></o:p></p><p =
class=3DMsoNormal>Please help me so that I can solve this =
out.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>I have attached my cluster.conf , lvdisplay , =
/var/log/messages and lvm.conf and my /etc/hosts.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>I will be =
greatful if anyone can help me!<o:p></o:p></p><p =
class=3DMsoNormal>Thanks<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>And my =
clustat: <o:p></o:p></p><p class=3DMsoNormal>Cluster Status for =
PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012<o:p></o:p></p><p =
class=3DMsoNormal>Member Status: Quorate<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal> Member =
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; ID&nbsp;&nbsp; Status<o:p></o:p></p><p =
class=3DMsoNormal> ------ =
----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; ---- ------<o:p></o:p></p><p class=3DMsoNormal> =
PDC-PIC-PL-CL1&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;1 Online, Local, rgmanager<o:p></o:p></p><p =
class=3DMsoNormal> =
PDC-PIC-PL-CL2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 Online, =
rgmanager<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal> Service =
Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Owner =
(Last)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp; =
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;State&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp; <o:p></o:p></p><p class=3DMsoNormal>&nbsp;------- =
----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----- =
------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
-----&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;service:ha-web-service&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
(PDC-PIC-PL-CL1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
failed&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
<o:p></o:p></p></div></body></html>
------=_NextPart_001_0239_01CDA6F8.EE9784E0--

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: application/octet-stream;
	name="cluster.conf"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="cluster.conf"

<?xml version=3D"1.0"?>=0A=
<cluster config_version=3D"11" name=3D"PDC-PIC-PL-CL">=0A=
	<clusternodes>=0A=
		<clusternode name=3D"PDC-PIC-PL-CL1" nodeid=3D"1"/>=0A=
		<clusternode name=3D"PDC-PIC-PL-CL2" nodeid=3D"2"/>=0A=
	</clusternodes>=0A=
	<cman expected_votes=3D"1" two_node=3D"1"/>=0A=
	<fencedevices>=0A=
		<fencedevice agent=3D"fence_ipmilan" auth=3D"password" =
ipaddr=3D"192.168.25.18" lanplus=3D"on" login=3D"hpadmin" =
name=3D"IPMI-PDC-PIC-PL-CL1" passwd=3D"hpinvent"/>=0A=
		<fencedevice agent=3D"fence_ipmilan" auth=3D"password" =
ipaddr=3D"192.168.25.26" lanplus=3D"on" login=3D"hpadmin" =
name=3D"IIPMI-PDC-PIC-PL-CL2" passwd=3D"hpinvent"/>=0A=
	</fencedevices>=0A=
	<rm>=0A=
		<failoverdomains>=0A=
			<failoverdomain name=3D"HA-web-failover" ordered=3D"1">=0A=
				<failoverdomainnode name=3D"PDC-PIC-PL-CL1" priority=3D"1"/>=0A=
				<failoverdomainnode name=3D"PDC-PIC-PL-CL2" priority=3D"2"/>=0A=
			</failoverdomain>=0A=
		</failoverdomains>=0A=
		<resources>=0A=
			<ip address=3D"192.168.24.37" sleeptime=3D"10"/>=0A=
			<fs device=3D"/dev/HA-Web-VG/ha-web-lv" fsid=3D"56432" =
fstype=3D"ext4" mountpoint=3D"/opt/ha-web" name=3D"ha-web-filesystem" =
self_fence=3D"on"/>=0A=
			<lvm lv_name=3D"ha-web-lv" name=3D"ha-web-HA-LVM" self_fence=3D"on" =
vg_name=3D"HA-Web-VG"/>=0A=
			<script file=3D"/etc/init.d/httpd" name=3D"ha-web-apache-script"/>=0A=
		</resources>=0A=
		<service domain=3D"HA-web-failover" name=3D"ha-web-service" =
recovery=3D"relocate">=0A=
			<ip ref=3D"192.168.24.37"/>=0A=
			<fs ref=3D"ha-web-filesystem"/>=0A=
			<lvm ref=3D"ha-web-HA-LVM"/>=0A=
			<script ref=3D"ha-web-apache-script"/>=0A=
		</service>=0A=
	</rm>=0A=
</cluster>=0A=

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: text/plain;
	name="lvdisplay.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
	filename="lvdisplay.txt"

[root@PDC-PIC-PL-01 cluster]# lvdisplay
  --- Logical volume ---
  LV Name                /dev/vg_pdcpicpl01/lv_swap
  VG Name                vg_pdcpicpl01
  LV UUID                im1tvN-btxf-zYJs-Wtuy-UDyq-gPHm-iMZ3pJ
  LV Write Access        read/write
  LV Status              available
  # open                 1
  LV Size                15.62 GiB
  Current LE             4000
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:1
   
  --- Logical volume ---
  LV Name                /dev/vg_pdcpicpl01/lv_root
  VG Name                vg_pdcpicpl01
  LV UUID                p2nRu2-oDdS-j1VZ-lLZr-CbEQ-G0Yf-Wl9dHA
  LV Write Access        read/write
  LV Status              available
  # open                 1
  LV Size                214.42 GiB
  Current LE             54892
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:4
   
  --- Logical volume ---
  LV Name                /dev/vg_pdcpicpl01/lv_home
  VG Name                vg_pdcpicpl01
  LV UUID                EZ3FqQ-yjeW-Yx4a-Iljz-WClZ-1LXd-S16l4J
  LV Write Access        read/write
  LV Status              available
  # open                 1
  LV Size                48.83 GiB
  Current LE             12500
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     256
  Block device           253:5
   
  --- Logical volume ---
  LV Name                /dev/HA-Web-VG/ha-web-lv
  VG Name                HA-Web-VG
  LV UUID                CdZ00K-pZSo-AJ4W-BVQZ-WvHF-O1yu-EGeC8n
  LV Write Access        read/write
  LV Status              NOT available
  LV Size                15.00 GiB
  Current LE             3840
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
   

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: text/plain;
	name="log.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="log.txt"

Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24083]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24130]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24113]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24138]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24167]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24164]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24192]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Starting stopped service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24358]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24380]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: start on lvm =
"ha-web-HA-LVM" returned 1 (generic error)
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: #68: Failed to start =
service:ha-web-service; return value: 1
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Stopping service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24411]: [script] Executing =
/etc/init.d/httpd stop
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24490]: [fs] stop: Could not =
match /dev/HA-Web-VG/ha-web-lv with a real device
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: stop on fs =
"ha-web-filesystem" returned 2 (invalid argument(s))
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24528]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24550]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24572]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24602]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24624]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24649]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24673]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #12: RG =
service:ha-web-service failed to stop; intervention required
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: Service =
service:ha-web-service is failed
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #13: Service =
service:ha-web-service failed to stop cleanly
(END)=20
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24083]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24130]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24113]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24138]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:44 PDC-PIC-PL-01 ricci[24167]: Executing '/usr/bin/virsh =
nodeinfo'
Oct 10 14:30:44 PDC-PIC-PL-01 rgmanager[24164]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: remove map (uevent)
Oct 10 14:30:45 PDC-PIC-PL-01 multipathd: dm-6: devmap not registered, =
can't remove
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24192]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Starting stopped service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24358]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24380]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: start on lvm =
"ha-web-HA-LVM" returned 1 (generic error)
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: #68: Failed to start =
service:ha-web-service; return value: 1
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[12542]: Stopping service =
service:ha-web-service
Oct 10 14:30:45 PDC-PIC-PL-01 rgmanager[24411]: [script] Executing =
/etc/init.d/httpd stop
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24490]: [fs] stop: Could not =
match /dev/HA-Web-VG/ha-web-lv with a real device
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: stop on fs =
"ha-web-filesystem" returned 2 (invalid argument(s))
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24528]: [lvm] HA LVM:  Improper =
setup detected
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24550]: [lvm] * "volume_list" =
not specified in lvm.conf.
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24572]: [lvm] WARNING: An =
improper setup can cause data corruption!
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24602]: [lvm] Deactivating =
HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24624]: [lvm] Making resilient : =
lvchange -an HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24649]: [lvm] Resilient command: =
lvchange -an HA-Web-VG/ha-web-lv --config =
devices{filter=3D["a|/dev/mapper/ha-web|","a|/dev/mapper/mpat
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[24673]: [lvm] Removing ownership =
tag (PDC-PIC-PL-CL1) from HA-Web-VG/ha-web-lv
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #12: RG =
service:ha-web-service failed to stop; intervention required
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: Service =
service:ha-web-service is failed
Oct 10 14:30:46 PDC-PIC-PL-01 rgmanager[12542]: #13: Service =
service:ha-web-service failed to stop cleanly

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: application/octet-stream;
	name="lvm.conf"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="lvm.conf"

# This is an example configuration file for the LVM2 system.=0A=
# It contains the default settings that would be used if there was no=0A=
# /etc/lvm/lvm.conf file.=0A=
#=0A=
# Refer to 'man lvm.conf' for further information including the file =
layout.=0A=
#=0A=
# To put this file in a different directory and override /etc/lvm set=0A=
# the environment variable LVM_SYSTEM_DIR before running the tools.=0A=
=0A=
=0A=
# This section allows you to configure which block devices should=0A=
# be used by the LVM system.=0A=
devices {=0A=
=0A=
    # Where do you want your volume groups to appear ?=0A=
    dir =3D "/dev"=0A=
=0A=
    # An array of directories that contain the device nodes you wish=0A=
    # to use with LVM2.=0A=
    scan =3D [ "/dev" ]=0A=
=0A=
    # If several entries in the scanned directories correspond to the=0A=
    # same block device and the tools need to display a name for device,=0A=
    # all the pathnames are matched against each item in the following=0A=
    # list of regular expressions in turn and the first match is used.=0A=
    # preferred_names =3D [ ]=0A=
=0A=
    # Try to avoid using undescriptive /dev/dm-N names, if present.=0A=
    preferred_names =3D [ "^/dev/mpath/", "^/dev/mapper/mpath", =
"^/dev/[hs]d" ]=0A=
=0A=
    # A filter that tells LVM2 to only use a restricted set of devices.=0A=
    # The filter consists of an array of regular expressions.  These=0A=
    # expressions can be delimited by a character of your choice, and=0A=
    # prefixed with either an 'a' (for accept) or 'r' (for reject).=0A=
    # The first expression found to match a device name determines if=0A=
    # the device will be accepted or rejected (ignored).  Devices that=0A=
    # don't match any patterns are accepted.=0A=
=0A=
    # Be careful if there there are symbolic links or multiple =
filesystem =0A=
    # entries for the same device as each name is checked separately =
against=0A=
    # the list of patterns.  The effect is that if any name matches any =
'a'=0A=
    # pattern, the device is accepted; otherwise if any name matches any =
'r'=0A=
    # pattern it is rejected; otherwise it is accepted.=0A=
=0A=
    # Don't have more than one filter line active at once: only one gets =
used.=0A=
=0A=
    # Run vgscan after you change this parameter to ensure that=0A=
    # the cache file gets regenerated (see below).=0A=
    # If it doesn't do what you expect, check the output of 'vgscan =
-vvvv'.=0A=
=0A=
=0A=
    # By default we accept every block device:=0A=
    filter =3D [ "a/.*/" ]=0A=
=0A=
    # Exclude the cdrom drive=0A=
    # filter =3D [ "r|/dev/cdrom|" ]=0A=
=0A=
    # When testing I like to work with just loopback devices:=0A=
    # filter =3D [ "a/loop/", "r/.*/" ]=0A=
=0A=
    # Or maybe all loops and ide drives except hdc:=0A=
    # filter =3D[ "a|loop|", "r|/dev/hdc|", "a|/dev/ide|", "r|.*|" ]=0A=
=0A=
    # Use anchors if you want to be really specific=0A=
    # filter =3D [ "a|^/dev/hda8$|", "r/.*/" ]=0A=
=0A=
    # The results of the filtering are cached on disk to avoid=0A=
    # rescanning dud devices (which can take a very long time).=0A=
    # By default this cache is stored in the /etc/lvm/cache directory=0A=
    # in a file called '.cache'.=0A=
    # It is safe to delete the contents: the tools regenerate it.=0A=
    # (The old setting 'cache' is still respected if neither of=0A=
    # these new ones is present.)=0A=
    cache_dir =3D "/etc/lvm/cache"=0A=
    cache_file_prefix =3D ""=0A=
=0A=
    # You can turn off writing this cache file by setting this to 0.=0A=
    write_cache_state =3D 1=0A=
=0A=
    # Advanced settings.=0A=
=0A=
    # List of pairs of additional acceptable block device types found =0A=
    # in /proc/devices with maximum (non-zero) number of partitions.=0A=
    # types =3D [ "fd", 16 ]=0A=
=0A=
    # If sysfs is mounted (2.6 kernels) restrict device scanning to =0A=
    # the block devices it believes are valid.=0A=
    # 1 enables; 0 disables.=0A=
    sysfs_scan =3D 1=0A=
=0A=
    # By default, LVM2 will ignore devices used as components of=0A=
    # software RAID (md) devices by looking for md superblocks.=0A=
    # 1 enables; 0 disables.=0A=
    md_component_detection =3D 1=0A=
=0A=
    # By default, if a PV is placed directly upon an md device, LVM2=0A=
    # will align its data blocks with the md device's stripe-width.=0A=
    # 1 enables; 0 disables.=0A=
    md_chunk_alignment =3D 1=0A=
=0A=
    # Default alignment of the start of a data area in MB.  If set to 0,=0A=
    # a value of 64KB will be used.  Set to 1 for 1MiB, 2 for 2MiB, etc.=0A=
    # default_data_alignment =3D 1=0A=
=0A=
    # By default, the start of a PV's data area will be a multiple of=0A=
    # the 'minimum_io_size' or 'optimal_io_size' exposed in sysfs.=0A=
    # - minimum_io_size - the smallest request the device can perform=0A=
    #   w/o incurring a read-modify-write penalty (e.g. MD's chunk size)=0A=
    # - optimal_io_size - the device's preferred unit of receiving I/O=0A=
    #   (e.g. MD's stripe width)=0A=
    # minimum_io_size is used if optimal_io_size is undefined (0).=0A=
    # If md_chunk_alignment is enabled, that detects the optimal_io_size.=0A=
    # This setting takes precedence over md_chunk_alignment.=0A=
    # 1 enables; 0 disables.=0A=
    data_alignment_detection =3D 1=0A=
=0A=
    # Alignment (in KB) of start of data area when creating a new PV.=0A=
    # md_chunk_alignment and data_alignment_detection are disabled if =
set.=0A=
    # Set to 0 for the default alignment (see: data_alignment_default)=0A=
    # or page size, if larger.=0A=
    data_alignment =3D 0=0A=
=0A=
    # By default, the start of the PV's aligned data area will be =
shifted by=0A=
    # the 'alignment_offset' exposed in sysfs.  This offset is often 0 =
but=0A=
    # may be non-zero; e.g.: certain 4KB sector drives that compensate =
for=0A=
    # windows partitioning will have an alignment_offset of 3584 bytes=0A=
    # (sector 7 is the lowest aligned logical block, the 4KB sectors =
start=0A=
    # at LBA -1, and consequently sector 63 is aligned on a 4KB =
boundary).=0A=
    # But note that pvcreate --dataalignmentoffset will skip this =
detection.=0A=
    # 1 enables; 0 disables.=0A=
    data_alignment_offset_detection =3D 1=0A=
=0A=
    # If, while scanning the system for PVs, LVM2 encounters a =
device-mapper=0A=
    # device that has its I/O suspended, it waits for it to become =
accessible.=0A=
    # Set this to 1 to skip such devices.  This should only be needed=0A=
    # in recovery situations.=0A=
    ignore_suspended_devices =3D 0=0A=
=0A=
    # During each LVM operation errors received from each device are =
counted.=0A=
    # If the counter of a particular device exceeds the limit set here, =
no=0A=
    # further I/O is sent to that device for the remainder of the =
respective=0A=
    # operation. Setting the parameter to 0 disables the counters =
altogether.=0A=
    disable_after_error_count =3D 0=0A=
=0A=
    # Allow use of pvcreate --uuid without requiring --restorefile.=0A=
    require_restorefile_with_uuid =3D 1=0A=
}=0A=
=0A=
# This section allows you to configure the way in which LVM selects=0A=
# free space for its Logical Volumes.=0A=
#allocation {=0A=
#    When searching for free space to extend an LV, the "cling"=0A=
#    allocation policy will choose space on the same PVs as the last=0A=
#    segment of the existing LV.  If there is insufficient space and a=0A=
#    list of tags is defined here, it will check whether any of them are=0A=
#    attached to the PVs concerned and then seek to match those PV tags=0A=
#    between existing extents and new extents.=0A=
#    Use the special tag "@*" as a wildcard to match any PV tag.=0A=
#    =0A=
#    Example: LVs are mirrored between two sites within a single VG.=0A=
#    PVs are tagged with either @site1 or @site2 to indicate where=0A=
#    they are situated.=0A=
#=0A=
#    cling_tag_list =3D [ "@site1", "@site2" ]=0A=
#    cling_tag_list =3D [ "@*" ]=0A=
#}=0A=
=0A=
# This section that allows you to configure the nature of the=0A=
# information that LVM2 reports.=0A=
log {=0A=
=0A=
    # Controls the messages sent to stdout or stderr.=0A=
    # There are three levels of verbosity, 3 being the most verbose.=0A=
    verbose =3D 0=0A=
=0A=
    # Should we send log messages through syslog?=0A=
    # 1 is yes; 0 is no.=0A=
    syslog =3D 1=0A=
=0A=
    # Should we log error and debug messages to a file?=0A=
    # By default there is no log file.=0A=
    #file =3D "/var/log/lvm2.log"=0A=
=0A=
    # Should we overwrite the log file each time the program is run?=0A=
    # By default we append.=0A=
    overwrite =3D 0=0A=
=0A=
    # What level of log messages should we send to the log file and/or =
syslog?=0A=
    # There are 6 syslog-like log levels currently in use - 2 to 7 =
inclusive.=0A=
    # 7 is the most verbose (LOG_DEBUG).=0A=
    level =3D 0=0A=
=0A=
    # Format of output messages=0A=
    # Whether or not (1 or 0) to indent messages according to their =
severity=0A=
    indent =3D 1=0A=
=0A=
    # Whether or not (1 or 0) to display the command name on each line =
output=0A=
    command_names =3D 0=0A=
=0A=
    # A prefix to use before the message text (but after the command =
name,=0A=
    # if selected).  Default is two spaces, so you can see/grep the =
severity=0A=
    # of each message.=0A=
    prefix =3D "  "=0A=
=0A=
    # To make the messages look similar to the original LVM tools use:=0A=
    #   indent =3D 0=0A=
    #   command_names =3D 1=0A=
    #   prefix =3D " -- "=0A=
=0A=
    # Set this if you want log messages during activation.=0A=
    # Don't use this in low memory situations (can deadlock).=0A=
    # activation =3D 0=0A=
}=0A=
=0A=
# Configuration of metadata backups and archiving.  In LVM2 when we=0A=
# talk about a 'backup' we mean making a copy of the metadata for the=0A=
# *current* system.  The 'archive' contains old metadata configurations.=0A=
# Backups are stored in a human readeable text format.=0A=
backup {=0A=
=0A=
    # Should we maintain a backup of the current metadata configuration ?=0A=
    # Use 1 for Yes; 0 for No.=0A=
    # Think very hard before turning this off!=0A=
    backup =3D 1=0A=
=0A=
    # Where shall we keep it ?=0A=
    # Remember to back up this directory regularly!=0A=
    backup_dir =3D "/etc/lvm/backup"=0A=
=0A=
    # Should we maintain an archive of old metadata configurations.=0A=
    # Use 1 for Yes; 0 for No.=0A=
    # On by default.  Think very hard before turning this off.=0A=
    archive =3D 1=0A=
=0A=
    # Where should archived files go ?=0A=
    # Remember to back up this directory regularly!=0A=
    archive_dir =3D "/etc/lvm/archive"=0A=
=0A=
    # What is the minimum number of archive files you wish to keep ?=0A=
    retain_min =3D 10=0A=
=0A=
    # What is the minimum time you wish to keep an archive file for ?=0A=
    retain_days =3D 30=0A=
}=0A=
=0A=
# Settings for the running LVM2 in shell (readline) mode.=0A=
shell {=0A=
=0A=
    # Number of lines of history to store in ~/.lvm_history=0A=
    history_size =3D 100=0A=
}=0A=
=0A=
=0A=
# Miscellaneous global LVM2 settings=0A=
global {=0A=
=0A=
    # The file creation mask for any files and directories created.=0A=
    # Interpreted as octal if the first digit is zero.=0A=
    umask =3D 077=0A=
=0A=
    # Allow other users to read the files=0A=
    #umask =3D 022=0A=
=0A=
    # Enabling test mode means that no changes to the on disk metadata=0A=
    # will be made.  Equivalent to having the -t option on every=0A=
    # command.  Defaults to off.=0A=
    test =3D 0=0A=
=0A=
    # Default value for --units argument=0A=
    units =3D "h"=0A=
=0A=
    # Since version 2.02.54, the tools distinguish between powers of=0A=
    # 1024 bytes (e.g. KiB, MiB, GiB) and powers of 1000 bytes (e.g.=0A=
    # KB, MB, GB).=0A=
    # If you have scripts that depend on the old behaviour, set this to 0=0A=
    # temporarily until you update them.=0A=
    si_unit_consistency =3D 1=0A=
=0A=
    # Whether or not to communicate with the kernel device-mapper.=0A=
    # Set to 0 if you want to use the tools to manipulate LVM metadata =0A=
    # without activating any logical volumes.=0A=
    # If the device-mapper kernel driver is not present in your kernel=0A=
    # setting this to 0 should suppress the error messages.=0A=
    activation =3D 1=0A=
=0A=
    # If we can't communicate with device-mapper, should we try running =0A=
    # the LVM1 tools?=0A=
    # This option only applies to 2.4 kernels and is provided to help you=0A=
    # switch between device-mapper kernels and LVM1 kernels.=0A=
    # The LVM1 tools need to be installed with .lvm1 suffices=0A=
    # e.g. vgscan.lvm1 and they will stop working after you start using=0A=
    # the new lvm2 on-disk metadata format.=0A=
    # The default value is set when the tools are built.=0A=
    # fallback_to_lvm1 =3D 0=0A=
=0A=
    # The default metadata format that commands should use - "lvm1" or =
"lvm2".=0A=
    # The command line override is -M1 or -M2.=0A=
    # Defaults to "lvm2".=0A=
    # format =3D "lvm2"=0A=
=0A=
    # Location of proc filesystem=0A=
    proc =3D "/proc"=0A=
=0A=
    # Type of locking to use. Defaults to local file-based locking (1).=0A=
    # Turn locking off by setting to 0 (dangerous: risks metadata =
corruption=0A=
    # if LVM2 commands get run concurrently).=0A=
    # Type 2 uses the external shared library locking_library.=0A=
    # Type 3 uses built-in clustered locking.=0A=
    # Type 4 uses read-only locking which forbids any operations that =
might =0A=
    # change metadata.=0A=
    locking_type =3D 1=0A=
=0A=
    # Set to 0 to fail when a lock request cannot be satisfied =
immediately.=0A=
    wait_for_locks =3D 1=0A=
=0A=
    # If using external locking (type 2) and initialisation fails,=0A=
    # with this set to 1 an attempt will be made to use the built-in=0A=
    # clustered locking.=0A=
    # If you are using a customised locking_library you should set this =
to 0.=0A=
    fallback_to_clustered_locking =3D 1=0A=
=0A=
    # If an attempt to initialise type 2 or type 3 locking failed, =
perhaps=0A=
    # because cluster components such as clvmd are not running, with =
this set=0A=
    # to 1 an attempt will be made to use local file-based locking (type =
1).=0A=
    # If this succeeds, only commands against local volume groups will =
proceed.=0A=
    # Volume Groups marked as clustered will be ignored.=0A=
    fallback_to_local_locking =3D 1=0A=
=0A=
    # Local non-LV directory that holds file-based locks while commands =
are=0A=
    # in progress.  A directory like /tmp that may get wiped on reboot =
is OK.=0A=
    locking_dir =3D "/var/lock/lvm"=0A=
=0A=
    # Whenever there are competing read-only and read-write access =
requests for=0A=
    # a volume group's metadata, instead of always granting the read-only=0A=
    # requests immediately, delay them to allow the read-write requests =
to be=0A=
    # serviced.  Without this setting, write access may be stalled by a =
high=0A=
    # volume of read-only requests.=0A=
    # NB. This option only affects locking_type =3D 1 viz. local =
file-based=0A=
    # locking.=0A=
    prioritise_write_locks =3D 1=0A=
=0A=
    # Other entries can go here to allow you to load shared libraries=0A=
    # e.g. if support for LVM1 metadata was compiled as a shared library =
use=0A=
    #   format_libraries =3D "liblvm2format1.so" =0A=
    # Full pathnames can be given.=0A=
=0A=
    # Search this directory first for shared libraries.=0A=
    #   library_dir =3D "/lib"=0A=
=0A=
    # The external locking library to load if locking_type is set to 2.=0A=
    #   locking_library =3D "liblvm2clusterlock.so"=0A=
=0A=
    # Treat any internal errors as fatal errors, aborting the process =
that=0A=
    # encountered the internal error. Please only enable for debugging.=0A=
    abort_on_internal_errors =3D 0=0A=
=0A=
    # If set to 1, no operations that change on-disk metadata will be =
permitted.=0A=
    # Additionally, read-only commands that encounter metadata in need =
of repair=0A=
    # will still be allowed to proceed exactly as if the repair had been =0A=
    # performed (except for the unchanged vg_seqno).=0A=
    # Inappropriate use could mess up your system, so seek advice first!=0A=
    metadata_read_only =3D 0=0A=
}=0A=
=0A=
activation {=0A=
    # Set to 0 to disable udev synchronisation (if compiled into the =
binaries).=0A=
    # Processes will not wait for notification from udev.=0A=
    # They will continue irrespective of any possible udev processing=0A=
    # in the background.  You should only use this if udev is not running=0A=
    # or has rules that ignore the devices LVM2 creates.=0A=
    # The command line argument --nodevsync takes precedence over this =
setting.=0A=
    # If set to 1 when udev is not running, and there are LVM2 processes=0A=
    # waiting for udev, run 'dmsetup udevcomplete_all' manually to wake =
them up.=0A=
    udev_sync =3D 1=0A=
=0A=
    # Set to 0 to disable the udev rules installed by LVM2 (if built with=0A=
    # --enable-udev_rules). LVM2 will then manage the /dev nodes and =
symlinks=0A=
    # for active logical volumes directly itself.=0A=
    # N.B. Manual intervention may be required if this setting is changed=0A=
    # while any logical volumes are active.=0A=
    udev_rules =3D 1=0A=
=0A=
    # How to fill in missing stripes if activating an incomplete volume.=0A=
    # Using "error" will make inaccessible parts of the device return=0A=
    # I/O errors on access.  You can instead use a device path, in which =0A=
    # case, that device will be used to in place of missing stripes.=0A=
    # But note that using anything other than "error" with mirrored =0A=
    # or snapshotted volumes is likely to result in data corruption.=0A=
    missing_stripe_filler =3D "error"=0A=
=0A=
    # How much stack (in KB) to reserve for use while devices suspended=0A=
    reserved_stack =3D 256=0A=
=0A=
    # How much memory (in KB) to reserve for use while devices suspended=0A=
    reserved_memory =3D 8192=0A=
=0A=
    # Nice value used while devices suspended=0A=
    process_priority =3D -18=0A=
=0A=
    # If volume_list is defined, each LV is only activated if there is a=0A=
    # match against the list.=0A=
    #   "vgname" and "vgname/lvname" are matched exactly.=0A=
    #   "@tag" matches any tag set in the LV or VG.=0A=
    #   "@*" matches if any tag defined on the host is also set in the =
LV or VG=0A=
    #=0A=
    # volume_list =3D [ "vg1", "vg2/lvol1", "@tag1", "@*" ]=0A=
=0A=
    # Size (in KB) of each copy operation when mirroring=0A=
    mirror_region_size =3D 512=0A=
=0A=
    # Setting to use when there is no readahead value stored in the =
metadata.=0A=
    #=0A=
    # "none" - Disable readahead.=0A=
    # "auto" - Use default value chosen by kernel.=0A=
    readahead =3D "auto"=0A=
=0A=
    # 'mirror_image_fault_policy' and 'mirror_log_fault_policy' define=0A=
    # how a device failure affecting a mirror is handled.=0A=
    # A mirror is composed of mirror images (copies) and a log.=0A=
    # A disk log ensures that a mirror does not need to be re-synced=0A=
    # (all copies made the same) every time a machine reboots or crashes.=0A=
    #=0A=
    # In the event of a failure, the specified policy will be used to =
determine=0A=
    # what happens. This applies to automatic repairs (when the mirror =
is being=0A=
    # monitored by dmeventd) and to manual lvconvert --repair when=0A=
    # --use-policies is given.=0A=
    #=0A=
    # "remove" - Simply remove the faulty device and run without it.  If=0A=
    #            the log device fails, the mirror would convert to using=0A=
    #            an in-memory log.  This means the mirror will not=0A=
    #            remember its sync status across crashes/reboots and=0A=
    #            the entire mirror will be re-synced.  If a=0A=
    #            mirror image fails, the mirror will convert to a=0A=
    #            non-mirrored device if there is only one remaining good=0A=
    #            copy.=0A=
    #=0A=
    # "allocate" - Remove the faulty device and try to allocate space on=0A=
    #            a new device to be a replacement for the failed device.=0A=
    #            Using this policy for the log is fast and maintains the=0A=
    #            ability to remember sync state through crashes/reboots.=0A=
    #            Using this policy for a mirror device is slow, as it=0A=
    #            requires the mirror to resynchronize the devices, but it=0A=
    #            will preserve the mirror characteristic of the device.=0A=
    #            This policy acts like "remove" if no suitable device and=0A=
    #            space can be allocated for the replacement.=0A=
    #=0A=
    # "allocate_anywhere" - Not yet implemented. Useful to place the log =
device=0A=
    #            temporarily on same physical volume as one of the mirror=0A=
    #            images. This policy is not recommended for mirror =
devices=0A=
    #            since it would break the redundant nature of the =
mirror. This=0A=
    #            policy acts like "remove" if no suitable device and =
space can=0A=
    #            be allocated for the replacement.=0A=
=0A=
    mirror_log_fault_policy =3D "allocate"=0A=
    mirror_image_fault_policy =3D "remove"=0A=
=0A=
    # 'snapshot_autoextend_threshold' and 'snapshot_autoextend_percent' =
define=0A=
    # how to handle automatic snapshot extension. The former defines =
when the=0A=
    # snapshot should be extended: when its space usage exceeds this many=0A=
    # percent. The latter defines how much extra space should be =
allocated for=0A=
    # the snapshot, in percent of its current size.=0A=
    #=0A=
    # For example, if you set snapshot_autoextend_threshold to 70 and=0A=
    # snapshot_autoextend_percent to 20, whenever a snapshot exceeds 70% =
usage,=0A=
    # it will be extended by another 20%. For a 1G snapshot, using up =
700M will=0A=
    # trigger a resize to 1.2G. When the usage exceeds 840M, the =
snapshot will=0A=
    # be extended to 1.44G, and so on.=0A=
    #=0A=
    # Setting snapshot_autoextend_threshold to 100 disables automatic=0A=
    # extensions. The minimum value is 50 (A setting below 50 will be =
treated=0A=
    # as 50).=0A=
=0A=
    snapshot_autoextend_threshold =3D 100=0A=
    snapshot_autoextend_percent =3D 20=0A=
=0A=
    # While activating devices, I/O to devices being (re)configured is=0A=
    # suspended, and as a precaution against deadlocks, LVM2 needs to pin=0A=
    # any memory it is using so it is not paged out.  Groups of pages =
that=0A=
    # are known not to be accessed during activation need not be pinned=0A=
    # into memory.  Each string listed in this setting is compared =
against=0A=
    # each line in /proc/self/maps, and the pages corresponding to any=0A=
    # lines that match are not pinned.  On some systems locale-archive =
was=0A=
    # found to make up over 80% of the memory used by the process.=0A=
    # mlock_filter =3D [ "locale/locale-archive", =
"gconv/gconv-modules.cache" ]=0A=
=0A=
    # Set to 1 to revert to the default behaviour prior to version =
2.02.62=0A=
    # which used mlockall() to pin the whole process's memory while =
activating=0A=
    # devices.=0A=
    use_mlockall =3D 0=0A=
=0A=
    # Monitoring is enabled by default when activating logical volumes.=0A=
    # Set to 0 to disable monitoring or use the --ignoremonitoring =
option.=0A=
    monitoring =3D 1=0A=
=0A=
    # When pvmove or lvconvert must wait for the kernel to finish=0A=
    # synchronising or merging data, they check and report progress=0A=
    # at intervals of this number of seconds.  The default is 15 seconds.=0A=
    # If this is set to 0 and there is only one thing to wait for, there=0A=
    # are no progress reports, but the process is awoken immediately the=0A=
    # operation is complete.=0A=
    polling_interval =3D 15=0A=
}=0A=
=0A=
=0A=
####################=0A=
# Advanced section #=0A=
####################=0A=
=0A=
# Metadata settings=0A=
#=0A=
# metadata {=0A=
    # Default number of copies of metadata to hold on each PV.  0, 1 or =
2.=0A=
    # You might want to override it from the command line with 0 =0A=
    # when running pvcreate on new PVs which are to be added to large =
VGs.=0A=
=0A=
    # pvmetadatacopies =3D 1=0A=
=0A=
    # Default number of copies of metadata to maintain for each VG.=0A=
    # If set to a non-zero value, LVM automatically chooses which of=0A=
    # the available metadata areas to use to achieve the requested=0A=
    # number of copies of the VG metadata.  If you set a value larger=0A=
    # than the the total number of metadata areas available then=0A=
    # metadata is stored in them all.=0A=
    # The default value of 0 ("unmanaged") disables this automatic=0A=
    # management and allows you to control which metadata areas=0A=
    # are used at the individual PV level using 'pvchange=0A=
    # --metadataignore y/n'.=0A=
=0A=
    # vgmetadatacopies =3D 0=0A=
=0A=
    # Approximate default size of on-disk metadata areas in sectors.=0A=
    # You should increase this if you have large volume groups or=0A=
    # you want to retain a large on-disk history of your metadata =
changes.=0A=
=0A=
    # pvmetadatasize =3D 255=0A=
=0A=
    # List of directories holding live copies of text format metadata.=0A=
    # These directories must not be on logical volumes!=0A=
    # It's possible to use LVM2 with a couple of directories here,=0A=
    # preferably on different (non-LV) filesystems, and with no other =0A=
    # on-disk metadata (pvmetadatacopies =3D 0). Or this can be in=0A=
    # addition to on-disk metadata areas.=0A=
    # The feature was originally added to simplify testing and is not=0A=
    # supported under low memory situations - the machine could lock up.=0A=
    #=0A=
    # Never edit any files in these directories by hand unless you=0A=
    # you are absolutely sure you know what you are doing! Use=0A=
    # the supplied toolset to make changes (e.g. vgcfgrestore).=0A=
=0A=
    # dirs =3D [ "/etc/lvm/metadata", "/mnt/disk2/lvm/metadata2" ]=0A=
#}=0A=
=0A=
# Event daemon=0A=
#=0A=
dmeventd {=0A=
    # mirror_library is the library used when monitoring a mirror device.=0A=
    #=0A=
    # "libdevmapper-event-lvm2mirror.so" attempts to recover from=0A=
    # failures.  It removes failed devices from a volume group and=0A=
    # reconfigures a mirror as necessary. If no mirror library is=0A=
    # provided, mirrors are not monitored through dmeventd.=0A=
=0A=
    mirror_library =3D "libdevmapper-event-lvm2mirror.so"=0A=
=0A=
    # snapshot_library is the library used when monitoring a snapshot =
device.=0A=
    #=0A=
    # "libdevmapper-event-lvm2snapshot.so" monitors the filling of=0A=
    # snapshots and emits a warning through syslog when the use of=0A=
    # the snapshot exceeds 80%. The warning is repeated when 85%, 90% and=0A=
    # 95% of the snapshot is filled.=0A=
=0A=
    snapshot_library =3D "libdevmapper-event-lvm2snapshot.so"=0A=
=0A=
    # Full path of the dmeventd binary.=0A=
    #=0A=
    # executable =3D "/sbin/dmeventd"=0A=
}=0A=

------=_NextPart_000_0238_01CDA6F8.EE9784E0
Content-Type: text/plain;
	name="hosts.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="hosts.txt"

[root@PDC-PIC-PL-01 cluster]# cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 =
localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 =
localhost6.localdomain6
192.168.24.32   PDC-PIC-PL-01   PDC-PIC-PL-01.chcs.sg
192.168.25.132  PDC-PIC-PL-01-PM
192.168.26.13   PDC-PIC-PL-CL1
192.168.24.33   PDC-PIC-PL-02  PDC-PIC-PL-02.chcs.sg
192.168.25.133  PDC-PIC-PL-02-PM
192.168.26.14   PDC-PIC-PL-CL2

------=_NextPart_000_0238_01CDA6F8.EE9784E0--


From andrew@beekhof.net Wed Oct 10 06:47:24 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AAlOYe006413 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 06:47:24 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AAlJVp030853
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 06:47:19 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AAlIK6032767
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 06:47:18 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so359581obb.33
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 03:47:17 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type:x-gm-message-state;
	bh=jVWsIeLhC+SgxL9kwunnqyoBc6z4ydOcOTeMgrsUtJE=;
	b=A1W5Z1V5HX21g4o7M188HtZxEMKxkyCalpFAkA4gXnOpQyPJ1l5cBqwoYeHgHV8tGH
	qQGvexXGIOcb1ZpenYFCUFPisn56vNhfZbsupWTFLL6/RKzL5/DSdaMNkuBOmSPLxZTK
	cadNxUDCvkRyEjn8ojVYfse3IPVQsHmmUV57M06s9BnLGFeZhIanEmxcvt1tl8jfLijO
	lkO98cAPREUe6nMcEW2bvEPclTd/yA+nc+jWn4qbCzTEAy55l0DzxPtuaI5t8SXhtLds
	h1ULK5aCXdAaBCClDiamxpdRLFA+JMjGz05doh6ItuY9HdshLfo0EDfnOeUqsIbnvmhS
	MYPQ==
MIME-Version: 1.0
Received: by 10.60.13.3 with SMTP id d3mr18591096oec.118.1349866037792; Wed,
	10 Oct 2012 03:47:17 -0700 (PDT)
Received: by 10.76.173.70 with HTTP; Wed, 10 Oct 2012 03:47:17 -0700 (PDT)
In-Reply-To: <50736F78.3060906@redhat.com>
References: <50736F78.3060906@redhat.com>
Date: Wed, 10 Oct 2012 21:47:17 +1100
Message-ID: <CAEDLWG2iTtphgjAnBcGTVSDSuaUPHSbvr2bij9LanXbehtCATA@mail.gmail.com>
From: Andrew Beekhof <andrew@beekhof.net>
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQngsPJrETv586fT4qRRnl5ycdhO4uXAFJ18dBadfgADzlrNb4kSY4TBoqUf3sf6DgG8Qu/a
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 10:47:24 -0000

On Tue, Oct 9, 2012 at 11:27 AM, Chris Feist <cfeist@redhat.com> wrote:
> We've been making improvements to the pcs (pacemaker/corosync configuration
> system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync 2.0
> udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should be
> showing up shortly.

Its now available at the usual location:

   http://www.clusterlabs.org/doc

>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next
> release. You should be able to find that package in the following
> locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE &
> Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of your
> entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the pcs
> project at github (https://github.com/feist/pcs/issues) if you have any
> questions or problems.
>
> Thanks!
> Chris
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org


From andrewd@sterling.net Wed Oct 10 11:27:12 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AFRBao028120 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 11:27:11 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AFR6Tj003320
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:27:06 -0400
Received: from mail4.sterling.net (mail4.sterling.net [199.108.225.109])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AFR39G022556
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:27:03 -0400
Received: from str-exchange2.sterling.local (exchange.sterling.net
	[199.107.167.35]) (using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail4.sterling.net (Postfix) with ESMTPS id DC0AACA81E5;
	Wed, 10 Oct 2012 08:27:02 -0700 (PDT)
Received: from dali.sterling.local (10.10.1.154) by exchange.sterling.net
	(10.10.1.5) with Microsoft SMTP Server (TLS) id 14.2.318.1;
	Wed, 10 Oct 2012 08:27:02 -0700
Message-ID: <507593C6.5040708@sterling.net>
Date: Wed, 10 Oct 2012 08:27:02 -0700
From: Andrew Denton <andrewd@sterling.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
In-Reply-To: <a2202e87.00001f6c.00000065@sierra-A66>
X-Enigmail-Version: 1.4.4
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="------------enigFA6B042CF070239471FEACBD"
X-RedHat-Spam-Score: -4.043  (BAYES_00, HTML_MESSAGE, RP_MATCHES_RCVD,
	SPF_HELO_PASS, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 15:27:13 -0000

--------------enigFA6B042CF070239471FEACBD
Content-Type: multipart/alternative;
	boundary="------------060608050606010400020401"

This is a multi-part message in MIME format.
--------------060608050606010400020401
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 10/10/2012 12:06 AM, Shanti Pahari wrote:
> I have cluster setup with 2 node and created web cluster service on it
> but it cannot run.
>
> I have not listed anything in lvm.conf volume_list because once I add
> anything in volume_list and reboot the system then I cannot mount and
> even cannot read the lv which I created for my web . It throws error as=

>
> error message "not activating volume group lv does not pass activation
> filter"
>
> Therefore I didn't add anything in lvm.conf . Then I try to start my
> cluster servers for web server but the service failed.
>

I've seen this failure too when building my cluster. You either need to
add the system's volume groups to volume_list, or tag the system's vgs
with the @hostname so it can still activate them.
e.g.
    volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL=
2" ]
on one node and
    volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL=
2" ]
on the other. Next it will complain about initrd being older than
lvm.conf, so I've been running
# mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`
Not sure if that's the right command but it works for me =3D)

One of these days I'm going to tag the system's vgs properly so I can
use the same lvm.conf across the nodes. I think it's something like
lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root
etc...

By the way, to display how things are tagged, you have to do
lvs -o +tags
I wish it displayed them in lvdisplay, but it doesn't.

-- Andrew




--------------060608050606010400020401
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<html>
  <head>
    <meta content=3D"text/html; charset=3DISO-8859-1"
      http-equiv=3D"Content-Type">
  </head>
  <body bgcolor=3D"#FFFFFF" text=3D"#000000">
    <div class=3D"moz-cite-prefix">On 10/10/2012 12:06 AM, Shanti Pahari
      wrote:<br>
    </div>
    <blockquote cite=3D"mid:a2202e87.00001f6c.00000065@sierra-A66"
      type=3D"cite">
      <meta http-equiv=3D"Content-Type" content=3D"text/html;
        charset=3DISO-8859-1">
      <meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered
        medium)">
      <style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
=2EMsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
      <div class=3D"WordSection1">I have cluster setup with 2 node and
        created web cluster service on it but it cannot run.<o:p></o:p>
        <p class=3D"MsoNormal">I have not listed anything in lvm.conf
          volume_list because once I add anything in volume_list and
          reboot the system then I cannot mount and even cannot read the
          lv which I created for my web . It throws error as <o:p></o:p><=
/p>
        <p class=3D"MsoNormal">error message "not activating volume group=

          lv does not pass activation filter"<o:p></o:p></p>
        <p class=3D"MsoNormal">Therefore I didn&#8217;t add anything in l=
vm.conf
          . Then I try to start my cluster servers for web server but
          the service failed.<o:p></o:p></p>
      </div>
    </blockquote>
    <br>
    I've seen this failure too when building my cluster. You either need
    to add the system's volume groups to volume_list, or tag the
    system's vgs with the @hostname so it can still activate them. <br>
    e.g.<br>
    &nbsp;&nbsp;&nbsp; volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL=
1",
    "@PDC-PIC-PL-CL2" ]<br>
    on one node and<br>
    &nbsp;&nbsp;&nbsp; volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL=
1",
    "@PDC-PIC-PL-CL2" ]<br>
    on the other. Next it will complain about initrd being older than
    lvm.conf, so I've been running<br>
    # mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`<br>
    Not sure if that's the right command but it works for me =3D)<br>
    <br>
    One of these days I'm going to tag the system's vgs properly so I
    can use the same lvm.conf across the nodes. I think it's something
    like<br>
    lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root <br>
    etc...<br>
    <br>
    By the way, to display how things are tagged, you have to do<br>
    lvs -o +tags<br>
    I wish it displayed them in lvdisplay, but it doesn't.<br>
    <br>
    -- Andrew<br>
    <br>
    <br>
    <br>
  </body>
</html>

--------------060608050606010400020401--

--------------enigFA6B042CF070239471FEACBD
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://www.enigmail.net/

iQIcBAEBAgAGBQJQdZPGAAoJENMx+en9ioCI0pcP/jZ2HdW3Wnl4gU+4IXQcwDBU
OfRuzJaF4zfBE7AU5tjs/DeA6kx9QHcNvLRiozxk2wU3081Kg9ZFNu7xrd0J4jFR
hz5AdhLHBgAGRkeuh79JBHUnvVVTxJHe8cckqyQj5qOZOhKbqXHV1ke/EAqSyaQ7
qvE9R1ZT5rFPfEAgy+kBKBAcRxbEJxmxNMCZ6+RJGl9yzecvXWyeBomnm6Mbpb9q
tLhmuY9Rip9u133MW97VBoo7C5ij5MtaxS5gjBoQUOsUUha3YTLQIMdvcQ+kyCpi
w73JlsgWiMumhkukCj4j0tPK1X44OsgispLwcTz/xsetNQUS2AifyomDGjyQWbuK
J8ibzHjRsIizHiNOBwURp536in/E7QhqiVd4FSKbI2IwqVixC1BPw8hX4qKd6IyP
2nxH4u2gagpcQsYMkLlmOjcM3bCQFZJiM9KIIHnugrCHPu2XV59xnPQom6vCv+RP
L/mkHmsVVs89EVYt3lDCOBihruDVc9cTpI8ODKewqQGz5ZAdD3GhKDUJioLLOEpq
+z47W68UFyjFmse3sO6uQv3LjoHsL+zSxaXRbxXfy/52CACFw5wLCTfo/LOX79bP
Ct9OwKcxz8ybRbKJDLN8QbzABY+3AS99Ghi1uToXU0FwxTdb9rGLw5CdsWpPANVi
c9XZZaFWiEwVgMr8cTvS
=ig5y
-----END PGP SIGNATURE-----

--------------enigFA6B042CF070239471FEACBD--


From lists@alteeve.ca Wed Oct 10 11:50:45 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AFoiNs030375 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 11:50:45 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AFodKw030043
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:50:39 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AFob75008549
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 11:50:38 -0400
Received: from lemass.alteeve.ca (unknown [199.119.232.211])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 1B739422488;
	Wed, 10 Oct 2012 11:50:33 -0400 (EDT)
Message-ID: <50759946.7060303@alteeve.ca>
Date: Wed, 10 Oct 2012 11:50:30 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
In-Reply-To: <a2202e87.00001f6c.00000065@sierra-A66>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 15:50:45 -0000

Your fencing is not setup properly. You define the fence devices, but do 
not use them as <method>'s under each node definition. You should be 
able to 'fence_node <target>' and watch it get rebooted. Until then, 
your cluster will hang (by design) the first time there is a problem.

Assuming you want to use clustered LVM, you need to change locking_type 
to '3' and, I advise, change 'falllback_to_local_locking' to '0'. This 
also requires that the 'clvmd' daemon is running, which in turn needs 
cman to be running first.

What is your backing device for the LVM PV?

digimer

On 10/10/2012 03:06 AM, Shanti Pahari wrote:
> Dear all,
>
> I have cluster setup with 2 node and created web cluster service on it
> but it cannot run.
>
> I have not listed anything in lvm.conf volume_list because once I add
> anything in volume_list and reboot the system then I cannot mount and
> even cannot read the lv which I created for my web . It throws error as
>
> error message "not activating volume group lv does not pass activation
> filter"
>
> Therefore I didnt add anything in lvm.conf . Then I try to start my
> cluster servers for web server but the service failed.
>
> Please help me so that I can solve this out.
>
> I have attached my cluster.conf , lvdisplay , /var/log/messages and
> lvm.conf and my /etc/hosts.
>
> I will be greatful if anyone can help me!
>
> Thanks
>
> And my clustat:
>
> Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
>
> Member Status: Quorate
>
> Member Name                                                     ID   Status
>
> ------ ----                                                     ---- ------
>
> PDC-PIC-PL-CL1                                                      1
> Online, Local, rgmanager
>
> PDC-PIC-PL-CL2                                                      2
> Online, rgmanager
>
> Service Name                                               Owner
> (Last)                                               State
>
>   ------- ----                                               -----
> ------                                               -----
>
>   service:ha-web-service
> (PDC-PIC-PL-CL1)                                           failed
>
>
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From CBurke@innova-partners.com Wed Oct 10 14:45:22 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9AIjMIF010343 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 14:45:22 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9AIjHrW009235
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 14:45:17 -0400
Received: from spam.innova-partners.com (mail.innova-partners.com
	[65.118.247.8])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9AIjFcG026439
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 14:45:16 -0400
X-ASG-Debug-ID: 1349894714-03f73742b9688590001-nvKthU
Received: from alexandria.innova.local ([192.168.30.100]) by
	spam.innova-partners.com with ESMTP id HPRMDEvdPTCvgqz6 for
	<linux-cluster@redhat.com>; Wed, 10 Oct 2012 14:45:14 -0400 (EDT)
X-Barracuda-Envelope-From: CBurke@innova-partners.com
X-ASG-Whitelist: Client
Received: from alexandria.innova.local ([::1]) by alexandria.innova.local
	([::1]) with mapi id 14.02.0309.002; Wed, 10 Oct 2012 14:45:14 -0400
From: Chip Burke <CBurke@innova-partners.com>
X-Barracuda-Apparent-Source-IP: ::1
To: linux clustering <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster]  Configure multiple heartbeat on a redhat cluster
X-ASG-Orig-Subj: Re: [Linux-cluster] Configure multiple heartbeat on a redhat
	cluster
Thread-Index: AQHNpcAB9ri0xyfg5E6Y4Sw06+Hny5ey40IA
Date: Wed, 10 Oct 2012 18:45:13 +0000
Message-ID: <F6CC886A516DF049A33F32C149ED21C823C3FAD9@alexandria.innova.local>
In-Reply-To: <1D241511770E2F4BA89AFD224EDD527141025BAE@G9W0733.americas.hpqcorp.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [192.168.15.109]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <3811175A9B610143AB0581874FE9E994@innova-partners.com>
MIME-Version: 1.0
X-Barracuda-Connect: UNKNOWN[192.168.30.100]
X-Barracuda-Start-Time: 1349894714
X-Barracuda-URL: http://spam.innova-partners.com:8000/cgi-mod/mark.cgi
X-Virus-Scanned: by bsmtpd at innova-partners.com
X-RedHat-Spam-Score: -4.042  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9AIjMIF010343
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Configure multiple heartbeat on a redhat cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 10 Oct 2012 18:45:22 -0000

I have been looking for an answer to this myself. The only answer I have
found is using bonded interfaces.

https://access.redhat.com/knowledge/node/48157

However, seeing that it uses multicast, I am not sure it say you have NICs
on a production LAN and then NICs on an iSCSI LAN, that they all
send/receive heartbeat packets to the multicast address on all attached
LANs.


________________________________________
Chip Burke







On 10/8/12 9:47 PM, "Chen, Ming Ming" <ming-ming.chen@hp.com> wrote:

>
>
> Hi,
> Is there a way to configure multiple heartbeat network in the
>/etc/cluster.conf file.
>I'm using redhat cluster.
>Regards
>Ming
>
>
>-- 
>Linux-cluster mailing list
>Linux-cluster@redhat.com
>https://www.redhat.com/mailman/listinfo/linux-cluster



From lists@alteeve.ca Wed Oct 10 22:36:58 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9B2awi5012890 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 22:36:58 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9B2aqFA020512; Wed, 10 Oct 2012 22:36:52 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9B2aoSD012261;
	Wed, 10 Oct 2012 22:36:50 -0400
Received: from lemass.alteeve.ca (unknown [216.66.176.13])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id DBBCE42249F;
	Wed, 10 Oct 2012 22:36:47 -0400 (EDT)
Message-ID: <507630C0.2010607@alteeve.ca>
Date: Wed, 10 Oct 2012 22:36:48 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 02:36:58 -0000

On 10/08/2012 08:27 PM, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync
> configuration system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync
> 2.0 udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch"
> document that illustrates setting up a cluster using pcs.  This should
> be showing up shortly.
>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next
> release. You should be able to find that package in the following
> locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE &
> Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of
> your entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the
> pcs project at github (https://github.com/feist/pcs/issues) if you have
> any questions or problems.
>
> Thanks!
> Chris

Hi Chris,

   I started following Andrew's new pcs-based tutorial today on a fresh, 
minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;

===
yum install -y pcs

2.5 Setup

<snip>

# systemctl start pcsd.service
# systemctl enable pcsd.service
===

This fails, and Andrew suggested using the version of pcs you annouced 
here. Same problem though;

===
[root@an-c01n01 ~]# rpm -Uvh 
http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
Retrieving http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
Preparing...                ########################################### 
[100%]
    1:pcs                    ########################################### 
[100%]
[root@an-c01n01 ~]# systemctl start pcsd.service
Failed to issue method call: Unit pcsd.service failed to load: No such 
file or directory. See system logs and 'systemctl status pcsd.service' 
for details.

[root@an-c01n01 ~]# rpm -q pacemaker corosync pcs
pacemaker-1.1.7-2.fc17.x86_64
corosync-2.0.1-1.fc17.x86_64
pcs-0.9.26-1.fc18.noarch
===

Any thoughts?

Cheers!

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From shanti.pahari@sierra.sg Wed Oct 10 22:55:45 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9B2tjR9013940 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 22:55:45 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9B2td2P013220
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 22:55:39 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9B2tYAW004822
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 22:55:35 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 8EE1525DF0F7;
	Thu, 11 Oct 2012 10:54:44 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id x6Rr4VuVH4Cp; Thu, 11 Oct 2012 10:54:42 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id A537B25DF0F5;
	Thu, 11 Oct 2012 10:54:42 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'Andrew Denton'" <andrewd@sterling.net>,
	"'linux clustering'" <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
	<507593C6.5040708@sterling.net>
In-Reply-To: <507593C6.5040708@sterling.net>
Date: Thu, 11 Oct 2012 10:54:42 +0800 (SGT)
Message-ID: <27d23437.00001f6c.000000ff@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0425_01CDA79E.EA87C490"
Thread-Index: AQKAFHoF1ve9uTx3zEYklPiVsevdRgIcGZ1Wlj2sjhA=
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.041  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 02:55:45 -0000

This is a multipart message in MIME format.

------=_NextPart_000_0425_01CDA79E.EA87C490
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi Andrew,

 

Now I added following in my lvm.conf

volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]

and

# dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)

# shutdown -r now "Activating ramdisk LVM changes"

 

After that when the system tries to boot up:

Kernel panic - not syncing: Attempted to kill init!

 

So didn't have luck L

 


volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]

The hostname should be cluster connect name or initial hostname ?

My /etc/hosts:

 

192.168.24.32   PDC-PIC-PL-01   PDC-PIC-PL-01.chcs.sg

192.168.25.132  PDC-PIC-PL-01-PM        

192.168.26.13   PDC-PIC-PL-CL1

192.168.24.33   PDC-PIC-PL-02  PDC-PIC-PL-02.chcs.sg

192.168.25.133  PDC-PIC-PL-02-PM

192.168.26.14   PDC-PIC-PL-CL2

 

 

 

From: Andrew Denton [mailto:andrewd@sterling.net] 
Sent: Wednesday, 10 October, 2012 11:27 PM
To: linux clustering
Cc: Shanti Pahari
Subject: Re: [Linux-cluster] cannot run cluster service

 

On 10/10/2012 12:06 AM, Shanti Pahari wrote:

I have cluster setup with 2 node and created web cluster service on it but
it cannot run. 

I have not listed anything in lvm.conf volume_list because once I add
anything in volume_list and reboot the system then I cannot mount and even
cannot read the lv which I created for my web . It throws error as 

error message "not activating volume group lv does not pass activation
filter"

Therefore I didn't add anything in lvm.conf . Then I try to start my
cluster servers for web server but the service failed.


I've seen this failure too when building my cluster. You either need to
add the system's volume groups to volume_list, or tag the system's vgs
with the @hostname so it can still activate them. 
e.g.
    volume_list = [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"
]
on one node and
    volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"
]
on the other. Next it will complain about initrd being older than
lvm.conf, so I've been running
# mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`
Not sure if that's the right command but it works for me =)

One of these days I'm going to tag the system's vgs properly so I can use
the same lvm.conf across the nodes. I think it's something like
lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root 
etc...

By the way, to display how things are tagged, you have to do
lvs -o +tags
I wish it displayed them in lvdisplay, but it doesn't.

-- Andrew





------=_NextPart_000_0425_01CDA79E.EA87C490
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:LiberationMono;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:LiberationMono-Bold;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	color:black;
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body bgcolor=3Dwhite =
lang=3DEN-SG link=3Dblue vlink=3Dpurple><div class=3DWordSection1><p =
class=3DMsoNormal><span style=3D'color:#1F497D'>Hi =
Andrew,<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span style=3D'color:#1F497D'>Now I added following in =
my lvm.conf<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'color:#1F497D'> </span><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>volume_list =3D [ =
&quot;vg_pdcpicpl02&quot;, &quot;@PDC-PIC-PL-CL1&quot;, =
&quot;@PDC-PIC-PL-CL2&quot; ]<o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'> and<o:p></o:p></span></p><p =
class=3DMsoNormal style=3D'text-autospace:none'><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'> </span><span =
style=3D'font-size:10.5pt;font-family:LiberationMono;color:windowtext;mso=
-fareast-language:EN-SG'># </span><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>dracut --hostonly --force =
/boot/initramfs-$(uname -r).img $(uname -r)<o:p></o:p></span></b></p><p =
class=3DMsoNormal><span =
style=3D'font-size:10.5pt;font-family:LiberationMono;color:windowtext;mso=
-fareast-language:EN-SG'># </span><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>shutdown -r now &quot;Activating ramdisk =
LVM changes&quot;<o:p></o:p></span></b></p><p class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>After that when the system tries to boot =
up:<o:p></o:p></span></b></p><p class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>Kernel panic &#8211; not syncing: =
Attempted to kill init!<o:p></o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'>So didn&#8217;t have luck =
</span></b><b><span =
style=3D'font-size:10.5pt;font-family:Wingdings;color:windowtext;mso-fare=
ast-language:EN-SG'>L</span></b><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p></o:p></span></b></p><p =
class=3DMsoNormal><b><span =
style=3D'font-size:10.5pt;font-family:LiberationMono-Bold;color:windowtex=
t;mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></b></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><br>volume_list =3D [ =
&quot;vg_pdcpicpl02&quot;, &quot;@PDC-PIC-PL-CL1&quot;, =
&quot;@PDC-PIC-PL-CL2&quot; ]<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>The hostname should be =
cluster connect name or initial hostname ?<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>My =
/etc/hosts:<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></p><p=
 class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times =
New Roman","serif";mso-fareast-language:EN-SG'>192.168.24.32&nbsp;&nbsp; =
PDC-PIC-PL-01&nbsp;&nbsp; PDC-PIC-PL-01.chcs.sg<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.25.132&nbsp; =
PDC-PIC-PL-01-PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.26.13&nbsp;&nbsp; =
PDC-PIC-PL-CL1<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.24.33&nbsp;&nbsp; =
PDC-PIC-PL-02&nbsp; PDC-PIC-PL-02.chcs.sg<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.25.133&nbsp; =
PDC-PIC-PL-02-PM<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>192.168.26.14&nbsp;&nbsp; =
PDC-PIC-PL-CL2<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><o:p>&nbsp;</o:p></span></p><p=
 class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><div><div =
style=3D'border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0cm =
0cm 0cm'><p class=3DMsoNormal><b><span lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif";color:windowt=
ext;mso-fareast-language:EN-SG'>From:</span></b><span lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif";color:windowt=
ext;mso-fareast-language:EN-SG'> Andrew Denton =
[mailto:andrewd@sterling.net] <br><b>Sent:</b> Wednesday, 10 October, =
2012 11:27 PM<br><b>To:</b> linux clustering<br><b>Cc:</b> Shanti =
Pahari<br><b>Subject:</b> Re: [Linux-cluster] cannot run cluster =
service<o:p></o:p></span></p></div></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p class=3DMsoNormal>On =
10/10/2012 12:06 AM, Shanti Pahari =
wrote:<o:p></o:p></p></div><blockquote =
style=3D'margin-top:5.0pt;margin-bottom:5.0pt'><p =
class=3DMsoNormal><span style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'>I have cluster setup with 2 =
node and created web cluster service on it but it cannot run. =
<o:p></o:p></span></p><p class=3DMsoNormal>I have not listed anything in =
lvm.conf volume_list because once I add anything in volume_list and =
reboot the system then I cannot mount and even cannot read the lv which =
I created for my web . It throws error as <o:p></o:p></p><p =
class=3DMsoNormal>error message &quot;not activating volume group lv =
does not pass activation filter&quot;<o:p></o:p></p><p =
class=3DMsoNormal>Therefore I didn&#8217;t add anything in lvm.conf . =
Then I try to start my cluster servers for web server but the service =
failed.<o:p></o:p></p></blockquote><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'><span =
style=3D'font-size:12.0pt;font-family:"Times New =
Roman","serif";mso-fareast-language:EN-SG'><br>I've seen this failure =
too when building my cluster. You either need to add the system's volume =
groups to volume_list, or tag the system's vgs with the @hostname so it =
can still activate them. <br>e.g.<br>&nbsp;&nbsp;&nbsp; volume_list =3D =
[ &quot;vg_pdcpicpl01&quot;, &quot;@PDC-PIC-PL-CL1&quot;, =
&quot;@PDC-PIC-PL-CL2&quot; ]<br>on one node and<br>&nbsp;&nbsp;&nbsp; =
volume_list =3D [ &quot;vg_pdcpicpl02&quot;, =
&quot;@PDC-PIC-PL-CL1&quot;, &quot;@PDC-PIC-PL-CL2&quot; ]<br>on the =
other. Next it will complain about initrd being older than lvm.conf, so =
I've been running<br># mkinitrd -f /boot/initrd-`uname -r`.img `uname =
-r`<br>Not sure if that's the right command but it works for me =
=3D)<br><br>One of these days I'm going to tag the system's vgs properly =
so I can use the same lvm.conf across the nodes. I think it's something =
like<br>lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root =
<br>etc...<br><br>By the way, to display how things are tagged, you have =
to do<br>lvs -o +tags<br>I wish it displayed them in lvdisplay, but it =
doesn't.<br><br>-- =
Andrew<br><br><br><o:p></o:p></span></p></div></body></html>
------=_NextPart_000_0425_01CDA79E.EA87C490--


From shanti.pahari@sierra.sg Wed Oct 10 23:03:10 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9B33Aet014379 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 10 Oct 2012 23:03:10 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9B334eR024984
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 23:03:04 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9B3339E011196
	for <linux-cluster@redhat.com>; Wed, 10 Oct 2012 23:03:03 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 0217225DF109;
	Thu, 11 Oct 2012 11:02:13 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zMhuUAx8Xn2D; Thu, 11 Oct 2012 11:02:11 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 4E9F125DF0FD;
	Thu, 11 Oct 2012 11:02:11 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: "'Digimer'" <lists@alteeve.ca>,
	"'linux clustering'" <linux-cluster@redhat.com>
References: <a2202e87.00001f6c.00000065@sierra-A66>
	<50759946.7060303@alteeve.ca>
In-Reply-To: <50759946.7060303@alteeve.ca>
Date: Thu, 11 Oct 2012 11:02:11 +0800 (SGT)
Message-ID: <ab9b4ebf.00001f6c.00000104@sierra-A66>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 8bit
Thread-Index: AQKAFHoF1ve9uTx3zEYklPiVsevdRgJWcSaNljvc2lA=
Content-Language: en-sg
X-Originating-IP: [192.168.2.141]
X-RedHat-Spam-Score: -4.042  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 03:03:10 -0000

Thanks!

I updated the fencing method in each of the nodes. But after I added
volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]
and
# dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)
# shutdown -r now "Activating ramdisk LVM changes"

After that when the system tries to boot up:
Kernel panic  not syncing: Attempted to kill init!

So didnt have luck 

Can you help me pls!

-----Original Message-----
From: Digimer [mailto:lists@alteeve.ca]
Sent: Wednesday, 10 October, 2012 11:51 PM
To: linux clustering
Cc: Shanti Pahari
Subject: Re: [Linux-cluster] cannot run cluster service

Your fencing is not setup properly. You define the fence devices, but do not 
use them as <method>'s under each node definition. You should be able to 
'fence_node <target>' and watch it get rebooted. Until then, your cluster 
will hang (by design) the first time there is a problem.

Assuming you want to use clustered LVM, you need to change locking_type to 
'3' and, I advise, change 'falllback_to_local_locking' to '0'. This also 
requires that the 'clvmd' daemon is running, which in turn needs cman to be 
running first.

What is your backing device for the LVM PV?

digimer

On 10/10/2012 03:06 AM, Shanti Pahari wrote:
> Dear all,
>
> I have cluster setup with 2 node and created web cluster service on it
> but it cannot run.
>
> I have not listed anything in lvm.conf volume_list because once I add
> anything in volume_list and reboot the system then I cannot mount and
> even cannot read the lv which I created for my web . It throws error
> as
>
> error message "not activating volume group lv does not pass activation
> filter"
>
> Therefore I didnt add anything in lvm.conf . Then I try to start my
> cluster servers for web server but the service failed.
>
> Please help me so that I can solve this out.
>
> I have attached my cluster.conf , lvdisplay , /var/log/messages and
> lvm.conf and my /etc/hosts.
>
> I will be greatful if anyone can help me!
>
> Thanks
>
> And my clustat:
>
> Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
>
> Member Status: Quorate
>
> Member Name                                                     ID 
> Status
>
> ------ ----                                                     ---- ------
>
> PDC-PIC-PL-CL1                                                      1
> Online, Local, rgmanager
>
> PDC-PIC-PL-CL2                                                      2
> Online, rgmanager
>
> Service Name                                               Owner
> (Last)                                               State
>
>   ------- ----                                               -----
> ------                                               -----
>
>   service:ha-web-service
> (PDC-PIC-PL-CL1)                                           failed
>
>
>


--
Digimer
Papers and Projects: https://alteeve.ca/w/ "Hydrogen is just a colourless, 
odorless gas which, if left alone in sufficient quantities for long periods 
of time, begins to think about itself."


From ali.bendriss@gmail.com Thu Oct 11 06:03:39 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BA3dUc006769 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 06:03:39 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BA3YSe015386
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:03:34 -0400
Received: from azel.univ-paris8.fr (azel.univ-paris8.fr [193.54.174.2])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BA3XX1007002
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:03:33 -0400
Received: from localhost (localhost [127.0.0.1])
	by azel.univ-paris8.fr (Postfix) with ESMTP id 0E44EBE0A
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:03:32 +0200 (CEST)
Received: from azel.univ-paris8.fr ([127.0.0.1])
	by localhost (azel.univ-paris8.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id M0rjHhHHweqi for <linux-cluster@redhat.com>;
	Thu, 11 Oct 2012 12:03:31 +0200 (CEST)
Received: from zapp.localnet (pcinf10.dsi.univ-paris8.fr [193.54.165.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by azel.univ-paris8.fr (Postfix) with ESMTPSA id E8CE4BE04
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:03:31 +0200 (CEST)
From: Ali Bendriss <ali.bendriss@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Thu, 11 Oct 2012 12:03:02 +0200
Message-ID: <1552642.6zb82LHdvl@zapp>
User-Agent: KMail/4.8.5 (Linux/3.2.29; KDE/4.8.5; x86_64; ; )
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
X-RedHat-Spam-Score: -0.219  (BAYES_00, DKIM_ADSP_CUSTOM_MED, FREEMAIL_FROM,
	NML_ADSP_CUSTOM_MED, SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] locking_type
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 10:03:39 -0000

Hello,

I'm runnning a two nodes clusters on linux: 

- current setup:
cluster-3.1.93
LVM2-2.02.96
kernel 3.2.29

- previous setup:
cluster-3.1.92
LVM2.2.02.84
kernel 3.4.3

Since the updrade to current setup, I'm only able to run clvmd if it is 
compiled using "--with-cluster=shared" and setting the locking_type = 2 in 
clvm.conf

before that using the previous setup I was able to compile clvmd using 
"--with-cluster=internal"  and setting the locking_type = 3

Is there any problem running a gfs2 fs with clvmd using the external shared 
library locking_library ?

thanks

--
Ali


From ali.bendriss@gmail.com Thu Oct 11 06:14:22 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BAEMnc008018 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 06:14:22 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BAEHAF006900
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:14:17 -0400
Received: from azel.univ-paris8.fr (azel.univ-paris8.fr [193.54.174.2])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BAEGnB011709
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 06:14:16 -0400
Received: from localhost (localhost [127.0.0.1])
	by azel.univ-paris8.fr (Postfix) with ESMTP id 4D300BE0A
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:14:16 +0200 (CEST)
Received: from azel.univ-paris8.fr ([127.0.0.1])
	by localhost (azel.univ-paris8.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id ZOTZhDqmkRU9 for <linux-cluster@redhat.com>;
	Thu, 11 Oct 2012 12:14:16 +0200 (CEST)
Received: from zapp.localnet (pcinf10.dsi.univ-paris8.fr [193.54.165.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by azel.univ-paris8.fr (Postfix) with ESMTPSA id 325B5BE01
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 12:14:16 +0200 (CEST)
From: Ali Bendriss <ali.bendriss@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Thu, 11 Oct 2012 12:13:45 +0200
Message-ID: <1780785.LbQT9riKYZ@zapp>
User-Agent: KMail/4.8.5 (Linux/3.2.29; KDE/4.8.5; x86_64; ; )
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="nextPart1418095.5W5VQxmf8P"
Content-Transfer-Encoding: 7Bit
X-RedHat-Spam-Score: -0.218  (BAYES_00, DKIM_ADSP_CUSTOM_MED, FREEMAIL_FROM,
	HTML_MESSAGE, NML_ADSP_CUSTOM_MED, SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] snapshot status
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 10:14:22 -0000


--nextPart1418095.5W5VQxmf8P
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"

Hello,

I'm runnning a two nodes clusters on linux using gfs2
(cluster-3.1.93, LVM2-2.02.96, kernel 3.2.29).
I would like to know what is the current status of the snapshot support.
I've got a third node that I would like to use for the backup. Could someone 
give me some hint about backuping a gfs2 shared file system.

thanks

--
Ali


--nextPart1418095.5W5VQxmf8P
Content-Transfer-Encoding: 7Bit
Content-Type: text/html; charset="us-ascii"

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'Sans Serif'; font-size:9pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=" font-size:12px; color:#1f1c1b;">Hello,</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=" font-size:12px; color:#1f1c1b;">I'm runnning a two nodes clusters on linux using gfs2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;"><span style=" font-size:12px; color:#1f1c1b;">(cluster-3.1.93, LVM2-2.02.96, kernel 3.2.29).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">I would like to know what is the current status of the snapshot support.</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">I've got a third node that I would like to use for the backup. Could someone give me some hint about backuping a gfs2 shared file system.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">thanks</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">--</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; -qt-user-state:0;">Ali<br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; ">&nbsp;</p></body></html>
--nextPart1418095.5W5VQxmf8P--


From agk@redhat.com Thu Oct 11 06:36:11 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BAaBax011673 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 06:36:11 -0400
Received: from agk-dp.fab.redhat.com (agk-dp.fab.redhat.com [10.33.0.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BAa5qQ014775
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Thu, 11 Oct 2012 06:36:06 -0400
Received: from agk by agk-dp.fab.redhat.com with local (Exim 4.69)
	(envelope-from <agk@agk-dp.fab.redhat.com>)
	id 1TMG7Z-0001At-36; Thu, 11 Oct 2012 11:36:05 +0100
Date: Thu, 11 Oct 2012 11:36:05 +0100
From: Alasdair G Kergon <agk@redhat.com>
To: Ali Bendriss <ali.bendriss@gmail.com>
Message-ID: <20121011103604.GD2133@agk-dp.fab.redhat.com>
Mail-Followup-To: Ali Bendriss <ali.bendriss@gmail.com>,
	linux clustering <linux-cluster@redhat.com>
References: <1552642.6zb82LHdvl@zapp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <1552642.6zb82LHdvl@zapp>
Organization: Red Hat UK Ltd. Registered in England and Wales, number
	03798903. Registered Office: 64 Baker Street, 4th floor, London,
	W1U 7DF.
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] locking_type
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 10:36:11 -0000

On Thu, Oct 11, 2012 at 12:03:02PM +0200, Ali Bendriss wrote:
> Since the updrade to current setup, I'm only able to run clvmd if it is 
> compiled using "--with-cluster=shared" and setting the locking_type = 2 in 
> clvm.conf
 
What is the error you get?

I don't think we stopped this working intentionally, but admittedly it's
not a configuration we test very often.

Alasdair


From ali.bendriss@gmail.com Thu Oct 11 07:19:40 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BBJerq016733 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 07:19:40 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BBJZjD009696; Thu, 11 Oct 2012 07:19:35 -0400
Received: from azel.univ-paris8.fr (azel.univ-paris8.fr [193.54.174.2])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BBJXGc026862;
	Thu, 11 Oct 2012 07:19:34 -0400
Received: from localhost (localhost [127.0.0.1])
	by azel.univ-paris8.fr (Postfix) with ESMTP id A2C26BE0C;
	Thu, 11 Oct 2012 13:19:33 +0200 (CEST)
Received: from azel.univ-paris8.fr ([127.0.0.1])
	by localhost (azel.univ-paris8.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WNgSBxiN2AR9; Thu, 11 Oct 2012 13:19:33 +0200 (CEST)
Received: from zapp.localnet (pcinf10.dsi.univ-paris8.fr [193.54.165.10])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by azel.univ-paris8.fr (Postfix) with ESMTPSA id 7F9ABBE04;
	Thu, 11 Oct 2012 13:19:33 +0200 (CEST)
From: Ali Bendriss <ali.bendriss@gmail.com>
To: Alasdair G Kergon <agk@redhat.com>
Date: Thu, 11 Oct 2012 13:19:09 +0200
Message-ID: <2094091.Y1l6vVcmm9@zapp>
User-Agent: KMail/4.8.5 (Linux/3.2.29; KDE/4.8.5; x86_64; ; )
In-Reply-To: <20121011103604.GD2133@agk-dp.fab.redhat.com>
References: <1552642.6zb82LHdvl@zapp>
	<20121011103604.GD2133@agk-dp.fab.redhat.com>
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
X-RedHat-Spam-Score: -0.219  (BAYES_00, DKIM_ADSP_CUSTOM_MED, FREEMAIL_FROM,
	NML_ADSP_CUSTOM_MED, SPF_NEUTRAL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] locking_type
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 11:19:41 -0000

On Thursday, October 11, 2012 11:36:05 AM Alasdair G Kergon wrote:
> On Thu, Oct 11, 2012 at 12:03:02PM +0200, Ali Bendriss wrote:
> > Since the updrade to current setup, I'm only able to run clvmd if it is
> > compiled using "--with-cluster=shared" and setting the locking_type = 2 in
> > clvm.conf
> 
> What is the error you get?
> 
Starting the node with locking type = 3 and clvmd compiled using with-
cluster=internal , I've got no error:
clvmd: Cluster LVM daemon started - connected to CMAN

but running for example vgscan desn't work:
/sbin/vgscan
  connect() failed on local socket: No such file or directory
  Internal cluster locking initialisation failed.
  WARNING: Falling back to local file-based locking.
  Volume Groups with the clustered attribute will be inaccessible.
  Reading all physical volumes.  This may take a while...
  Skipping clustered volume group samba4
  Skipping clustered volume group ctdb
  Skipping clustered volume group shared
  Found volume group "main" using metadata type lvm2

the same command is working using clvmd compiled using the shared locking.

more log below

> I don't think we stopped this working intentionally, but admittedly it's
> not a configuration we test very often.
> 
I was thinking that "--with-cluster=internal", was the recommended 
configuration.
  
> Alasdair

--------------------------------------------------------------------------------------------
(using locking type = 3) and calling vgscan

#clvmd -d 1 
CLVMD[9d22b740]: Oct 11 13:03:51 CLVMD started
CLVMD[9d22b740]: Oct 11 13:03:51 Connected to CMAN
CLVMD[9d22b740]: Oct 11 13:03:51 CMAN initialisation complete
CLVMD[9d22b740]: Oct 11 13:03:51 Created DLM lockspace for CLVMD.
CLVMD[9d22b740]: Oct 11 13:03:51 DLM initialisation complete
CLVMD[9d22b740]: Oct 11 13:03:51 Cluster ready, doing some more initialisation
CLVMD[9d22b740]: Oct 11 13:03:51 starting LVM thread
CLVMD[9d22a700]: Oct 11 13:03:51 LVM thread function started
WARNING: Locking disabled. Be careful! This could corrupt your metadata.
Incorrect metadata area header checksum on /dev/sdd at offset 4096
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 1
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 2
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 3
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 4
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 5
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 6
CLVMD[9d22a700]: Oct 11 13:03:51 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0' mode:1 
flags=1
CLVMD[9d22a700]: Oct 11 13:03:51 sync_lock: returning lkid 7
CLVMD[9d22a700]: Oct 11 13:03:51 Sub thread ready for work.
CLVMD[9d22b740]: Oct 11 13:03:51 clvmd ready for work
CLVMD[9d22b740]: Oct 11 13:03:51 Using timeout of 60 seconds
CLVMD[9d22a700]: Oct 11 13:03:51 LVM thread waiting for work

-------------------------------------------------------------------------------------------------------------------------------------
using locking type = 2 and calling vgscan
# clvmd -d 1 

CLVMD[6d153740]: Oct 11 13:07:57 CLVMD started
CLVMD[6d153740]: Oct 11 13:07:57 Connected to CMAN
CLVMD[6d153740]: Oct 11 13:07:57 CMAN initialisation complete
CLVMD[6d153740]: Oct 11 13:07:57 Created DLM lockspace for CLVMD.
CLVMD[6d153740]: Oct 11 13:07:57 DLM initialisation complete
CLVMD[6d153740]: Oct 11 13:07:57 Cluster ready, doing some more initialisation
CLVMD[6d153740]: Oct 11 13:07:57 starting LVM thread
CLVMD[6d152700]: Oct 11 13:07:57 LVM thread function started
WARNING: Locking disabled. Be careful! This could corrupt your metadata.
Incorrect metadata area header checksum on /dev/sdd at offset 4096
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCNUNjh9w8HFdbVvQLBjZidl8QseraUBc0' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 1
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
ve26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
've26qDQ7hcpgDH2fw19GFZkbKgTadysCAXDuTvYJ4ambKnLALpOffDSxPrjHliO0' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 2
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'ByYnMJeHNgSIBuJENA2WLMe148edovbofR4f9clPHk2BUveeSUstcSEJzcOHt2BE' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 3
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx6QSKUI7riC86QhzIX98cmu8rL4lHXJlO' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 4
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjxS36cpLJRPxWYtjPQChMIQZW7Zxx97aGL' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 5
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx7Vov15UStgsS1tgOISASG7bPjYf7NpYO' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 6
CLVMD[6d152700]: Oct 11 13:07:57 getting initial lock for 
GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: 
'GkJTcHFLl6YNc8M0QN7yYA0nWwhzHKjx1OWkvGiyJGfz9u5Pcedbzj4hnT2Q6TY0' mode:1 
flags=1
CLVMD[6d152700]: Oct 11 13:07:57 sync_lock: returning lkid 7
  Incorrect LVM locking library specified in lvm.conf, cluster operations may 
not work.
CLVMD[6d152700]: Oct 11 13:07:57 Sub thread ready for work.
CLVMD[6d152700]: Oct 11 13:07:57 LVM thread waiting for work
CLVMD[6d153740]: Oct 11 13:07:57 clvmd ready for work
CLVMD[6d153740]: Oct 11 13:07:57 Using timeout of 60 seconds
CLVMD[6d153740]: Oct 11 13:08:56 Got new connection on fd 11
CLVMD[6d153740]: Oct 11 13:08:56 Read on local socket 11, len = 29
CLVMD[6d153740]: Oct 11 13:08:56 check_all_clvmds_running
CLVMD[6d153740]: Oct 11 13:08:56 creating pipe, [12, 13]
CLVMD[6d153740]: Oct 11 13:08:56 Creating pre&post thread
CLVMD[6d153740]: Oct 11 13:08:56 Created pre&post thread, state = 0
CLVMD[6d131700]: Oct 11 13:08:56 in sub thread: client = 0x12d06d0
CLVMD[6d131700]: Oct 11 13:08:56 doing PRE command LOCK_VG 'P_#global' at 4 
(client=0x12d06d0)
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: 'P_#global' mode:4 flags=0
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: returning lkid 8
CLVMD[6d131700]: Oct 11 13:08:56 Writing status 0 down pipe 13
CLVMD[6d131700]: Oct 11 13:08:56 Waiting to do post command - state = 0
CLVMD[6d153740]: Oct 11 13:08:56 read on PIPE 12: 4 bytes: status: 0
CLVMD[6d153740]: Oct 11 13:08:56 background routine status was 0, 
sock_client=0x12d06d0
CLVMD[6d153740]: Oct 11 13:08:56 distribute command: XID = 0, flags=0x0 ()
CLVMD[6d153740]: Oct 11 13:08:56 add_to_lvmqueue: cmd=0x12d0a10. 
client=0x12d06d0, msg=0x12d02f0, len=29, csid=(nil), xid=0
CLVMD[6d153740]: Oct 11 13:08:56 Sending message to all cluster nodes
CLVMD[6d152700]: Oct 11 13:08:56 process_work_item: local
CLVMD[6d152700]: Oct 11 13:08:56 process_local_command: LOCK_VG (0x33) 
msg=0x12d0a50, msglen =29, client=0x12d06d0
CLVMD[6d152700]: Oct 11 13:08:56 do_lock_vg: resource 'P_#global', cmd = 0x4 
LCK_VG (WRITE|VG), flags = 0x4 ( DMEVENTD_MONITOR ), critical_section = 0
CLVMD[6d152700]: Oct 11 13:08:56 Refreshing context
  Incorrect metadata area header checksum on /dev/sdd at offset 4096
CLVMD[6d152700]: Oct 11 13:08:56 Reply from node node-10: 0 bytes
CLVMD[6d152700]: Oct 11 13:08:56 Got 1 replies, expecting: 2
CLVMD[6d152700]: Oct 11 13:08:56 LVM thread waiting for work
CLVMD[6d153740]: Oct 11 13:08:56 Reply from node node-11: 0 bytes
CLVMD[6d153740]: Oct 11 13:08:56 Got 2 replies, expecting: 2
CLVMD[6d131700]: Oct 11 13:08:56 Got post command condition...
CLVMD[6d131700]: Oct 11 13:08:56 Waiting for next pre command
CLVMD[6d153740]: Oct 11 13:08:56 read on PIPE 12: 4 bytes: status: 0
CLVMD[6d153740]: Oct 11 13:08:56 background routine status was 0, 
sock_client=0x12d06d0
CLVMD[6d153740]: Oct 11 13:08:56 Send local reply
CLVMD[6d153740]: Oct 11 13:08:56 Read on local socket 11, len = 28
CLVMD[6d131700]: Oct 11 13:08:56 Got pre command condition...
CLVMD[6d131700]: Oct 11 13:08:56 doing PRE command LOCK_VG 'V_samba4' at 1 
(client=0x12d06d0)
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: 'V_samba4' mode:3 flags=0
CLVMD[6d131700]: Oct 11 13:08:56 sync_lock: returning lkid 9
CLVMD[6d131700]: Oct 11 13:08:56 Writing status 0 down pipe 13
CLVMD[6d131700]: Oct 11 13:08:56 Waiting to do post command - state = 0
CLVMD[6d153740]: Oct 11 13:08:56 read on PIPE 12: 4 bytes: status: 0
CLVMD[6d153740]: Oct 11 13:08:56 background routine status was 0, 
sock_client=0x12d06d0
CLVMD[6d153740]: Oct 11 13:08:56 distribute command: XID = 1, flags=0x1 (LOCAL)
CLVMD[6d153740]: Oct 11 13:08:56 add_to_lvmqueue: cmd=0x12d0a10. 
client=0x12d06d0, msg=0x12d02f0, len=28, csid=(nil), xid=1
CLVMD[6d152700]: Oct 11 13:08:56 process_work_item: local
CLVMD[6d152700]: Oct 11 13:08:56 process_local_command: LOCK_VG (0x33) 
msg=0x12d0a50, msglen =28, client=0x12d06d0
CLVMD[6d152700]: Oct 11 13:08:56 do_lock_vg: resource 'V_samba4', cmd = 0x1 
LCK_VG (READ|VG), flags = 0x4 ( DMEVENTD_MONITOR ), critical_section = 0
CLVMD[6d152700]: Oct 11 13:08:56 Invalidating cached metadata for VG samba4
...


From jpokorny@redhat.com Thu Oct 11 07:26:03 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BBQ3fY017730 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 07:26:03 -0400
Received: from redhat.com (poki.brq.redhat.com [10.34.129.84])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BBPsOE026464
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 07:25:57 -0400
Date: Thu, 11 Oct 2012 13:25:54 +0200
From: Jan =?utf-8?Q?Pokorn=C3=BD?= <jpokorny@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <20121011112554.GC29887@redhat.com>
References: <50736F78.3060906@redhat.com>
 <507630C0.2010607@alteeve.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <507630C0.2010607@alteeve.ca>
User-Agent: Mutt/1.5.21 (2011-07-01)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 11:26:03 -0000

Hello Digimer,

On 10/10/12 22:36 -0400, Digimer wrote:
>   I started following Andrew's new pcs-based tutorial today on a fresh,
> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
> 
> ===
> yum install -y pcs
> 
> 2.5 Setup
> 
> <snip>
> 
> # systemctl start pcsd.service
> # systemctl enable pcsd.service
> ===
> 
> This fails, and Andrew suggested using the version of pcs you annouced here.
> Same problem though;
> 
> ===
> [root@an-c01n01 ~]# rpm -Uvh
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
> Retrieving http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
> Preparing...                ###########################################
> [100%]
>    1:pcs                    ###########################################
> [100%]
> [root@an-c01n01 ~]# systemctl start pcsd.service
> Failed to issue method call: Unit pcsd.service failed to load: No such file
> or directory. See system logs and 'systemctl status pcsd.service' for
> details.
> 
> [...]
> 
> Any thoughts?

this is part of pcs-gui project [1] packaging of which is probably pending.

[1] https://github.com/feist/pcs-gui

-- 
Jan


From shanti.pahari@sierra.sg Thu Oct 11 09:44:25 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BDiPTp005425 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 09:44:25 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BDiJcF023080
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 09:44:19 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BDiEZx014036
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 09:44:15 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 47EE725DF3CF
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:43:24 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7E9LntwIH3f3 for <linux-cluster@redhat.com>;
	Thu, 11 Oct 2012 21:43:23 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 9EB5A25D79E8
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:43:23 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Thu, 11 Oct 2012 21:43:23 +0800 (SGT)
Message-ID: <0a55cf02.00000e4c.00000039@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0105_01CDA7F9.884C75E0"
Thread-Index: Ac2ntiK0E6I8OTrfSkWfNscMEAN//A==
Content-Language: en-sg
X-Originating-IP: [119.56.122.237]
X-RedHat-Spam-Score: -4.042  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] lvm.conf for HA LVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 13:44:26 -0000

This is a multipart message in MIME format.

------=_NextPart_000_0105_01CDA7F9.884C75E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all,

 

Please help me to configure lvm.conf .

I always get problem when I add volume_list in lvm.conf file.

After I add volume_list  = [ "vg_pdcpicpl101" , "@pdc-pic-pl-01" ] and
reboot it later my other lvm goes down L cannot initialize it. Or do I
need to add all my VG in volume list?

 

Please help!

 

Thanks,

Shanti


------=_NextPart_000_0105_01CDA7F9.884C75E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Hi =
all,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Please help me to configure lvm.conf =
.<o:p></o:p></p><p class=3DMsoNormal>I always get problem when I add =
volume_list in lvm.conf file.<o:p></o:p></p><p class=3DMsoNormal>After I =
add volume_list&nbsp; =3D [ &#8220;vg_pdcpicpl101&#8221; , =
&#8220;@pdc-pic-pl-01&#8221; ] and reboot it later my other lvm goes =
down <span style=3D'font-family:Wingdings'>L</span> cannot initialize =
it. Or do I need to add all my VG in volume list?<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Please =
help!<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Thanks,<o:p></o:p></p><p =
class=3DMsoNormal>Shanti<o:p></o:p></p></div></body></html>
------=_NextPart_000_0105_01CDA7F9.884C75E0--


From bergman@merctech.com Thu Oct 11 13:01:47 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BH1k6g001146 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:01:47 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BH1fLV025477
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:41 -0400
Received: from mailbackend.panix.com (mailbackend.panix.com [166.84.1.89])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BH1dq8005352
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:40 -0400
Received: from merctech.com (braid.uphs.upenn.edu [165.123.243.100])
	by mailbackend.panix.com (Postfix) with ESMTP id B9FFF2ED1F
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:38 -0400 (EDT)
Received: from localhost.localdomain (localhost [127.0.0.1])
	by merctech.com (8.14.5/8.14.5) with ESMTP id q9BH1caB004148
	(version=TLSv1/SSLv3 cipher=DHE-DSS-AES256-SHA bits=256 verify=NO)
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:38 -0400
Received: from localhost (bergman@localhost)
	by localhost.localdomain (8.14.5/8.14.5/Submit) with ESMTP id
	q9BH1cIT004137
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:01:38 -0400
To: linux clustering <linux-cluster@redhat.com>
From: bergman@merctech.com
In-Reply-To: Your message of "Thu, 11 Oct 2012 11:02:11 +0800."
	<ab9b4ebf.00001f6c.00000104@sierra-A66>
References: <ab9b4ebf.00001f6c.00000104@sierra-A66>
	<a2202e87.00001f6c.00000065@sierra-A66>
	<50759946.7060303@alteeve.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
Content-ID: <4135.1349974897.1@localhost>
Date: Thu, 11 Oct 2012 13:01:37 -0400
Message-ID: <4136.1349974897@localhost>
X-RedHat-Spam-Score: -4.2  (BAYES_00,RCVD_IN_DNSWL_MED)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9BH1k6g001146
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: bergman@merctech.com, linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:01:47 -0000

In the message dated: Thu, 11 Oct 2012 11:02:11 +0800,
The pithy ruminations from "Shanti Pahari" on 
<Re: [Linux-cluster] cannot run cluster service> were:
=> Thanks!
=> 
=> I updated the fencing method in each of the nodes. But after I added
=> volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]
=> and
=> # dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)

Note that the lvm.conf data that is stored within the initrd.img is not an
exact copy of /etc/lvm/lvm.conf, but it is a filtered version, created
by "lvm dumpconfig". Previous bugs have meant that the embedded version was
not alway bootable...perhaps you're having a similar problem.

=> # shutdown -r now "Activating ramdisk LVM changes"
=> 
=> After that when the system tries to boot up:
=> Kernel panic  not syncing: Attempted to kill init!

I don't recall information from you about what OS distribution you are using,
but this problem sounds similar to:

	https://bugzilla.redhat.com/show_bug.cgi?id=517868


Before giving up on LVM and and moving all filesystem management out of RHCS
control, I had several problems with the the embedded copy of /etc/lvm.conf
that's stored within the initrd image. I ended up with a procedure where I
would replace the embedded version (produced with "lvm dumpconfig" by the
mkinitrd process) inside the initrd image with the full working version.

This procedure was necessary after any kernel or lvm.conf change.

An abbreviated set of steps (ommitting all error checking, etc) is:

	gunzip < $initrdfile > /tmp/initrd.unzipped.img
	cpio -i --make-directories < /tmp/initrd.unzipped.img
	cd /tmp/initrd.$$/etc/lvm
	cp /etc/lvm/lvm.conf .
	cd /tmp/initrd.$$
	find ./ | cpio -H newc -o > /tmp/initrd.unzipped.img
	gzip < /tmp/initrd.unzipped.img > /tmp/initrd.zipped.img
	mv /tmp/initrd.zipped.img $initrdfile

I do not recommend this as a standard procedure, but it might be worth
doing once, in order to see whether the embedded version of the lvm.conf
file used in the initrd.img is causing your problem.

Mark

=> 
=> So didnt have luck 
=> 
=> Can you help me pls!
=> 
=> -----Original Message-----
=> From: Digimer [mailto:lists@alteeve.ca]
=> Sent: Wednesday, 10 October, 2012 11:51 PM
=> To: linux clustering
=> Cc: Shanti Pahari
=> Subject: Re: [Linux-cluster] cannot run cluster service
=> 
=> Your fencing is not setup properly. You define the fence devices, but do not 
=> use them as <method>'s under each node definition. You should be able to 
=> 'fence_node <target>' and watch it get rebooted. Until then, your cluster 
=> will hang (by design) the first time there is a problem.
=> 
=> Assuming you want to use clustered LVM, you need to change locking_type to 
=> '3' and, I advise, change 'falllback_to_local_locking' to '0'. This also 
=> requires that the 'clvmd' daemon is running, which in turn needs cman to be 
=> running first.
=> 
=> What is your backing device for the LVM PV?
=> 
=> digimer
=> 
=> On 10/10/2012 03:06 AM, Shanti Pahari wrote:
=> > Dear all,
=> >
=> > I have cluster setup with 2 node and created web cluster service on it
=> > but it cannot run.
=> >
=> > I have not listed anything in lvm.conf volume_list because once I add
=> > anything in volume_list and reboot the system then I cannot mount and
=> > even cannot read the lv which I created for my web . It throws error
=> > as
=> >
=> > error message "not activating volume group lv does not pass activation
=> > filter"
=> >
=> > Therefore I didnt add anything in lvm.conf . Then I try to start my
=> > cluster servers for web server but the service failed.
=> >
=> > Please help me so that I can solve this out.
=> >
=> > I have attached my cluster.conf , lvdisplay , /var/log/messages and
=> > lvm.conf and my /etc/hosts.
=> >
=> > I will be greatful if anyone can help me!
=> >
=> > Thanks
=> >
=> > And my clustat:
=> >
=> > Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
=> >
=> > Member Status: Quorate
=> >
=> > Member Name                                                     ID 
=> > Status
=> >
=> > ------ ----                                                     ---- ------
=> >
=> > PDC-PIC-PL-CL1                                                      1
=> > Online, Local, rgmanager
=> >
=> > PDC-PIC-PL-CL2                                                      2
=> > Online, rgmanager
=> >
=> > Service Name                                               Owner
=> > (Last)                                               State
=> >
=> >   ------- ----                                               -----
=> > ------                                               -----
=> >
=> >   service:ha-web-service
=> > (PDC-PIC-PL-CL1)                                           failed
=> >
=> >
=> >
=> 
=> 
=> --
=> Digimer
=> Papers and Projects: https://alteeve.ca/w/ "Hydrogen is just a colourless, 
=> odorless gas which, if left alone in sufficient quantities for long periods 
=> of time, begins to think about itself."
=> 
=> -- 
=> Linux-cluster mailing list
=> Linux-cluster@redhat.com
=> https://www.redhat.com/mailman/listinfo/linux-cluster
=> 




From lists@alteeve.ca Thu Oct 11 13:14:19 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHEJBe002801 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:14:19 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHEDx7017704
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:14:14 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BHEBNY012241
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:14:12 -0400
Received: from lemass.alteeve.ca (lns2-pool-d8429402.dsl.look.ca
	[216.66.148.2])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 613F1422488;
	Thu, 11 Oct 2012 13:14:09 -0400 (EDT)
Message-ID: <5076FE62.9000707@alteeve.ca>
Date: Thu, 11 Oct 2012 13:14:10 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: Shanti Pahari <shanti.pahari@sierra.sg>
References: <a2202e87.00001f6c.00000065@sierra-A66>
	<50759946.7060303@alteeve.ca>
	<ab9b4ebf.00001f6c.00000104@sierra-A66>
In-Reply-To: <ab9b4ebf.00001f6c.00000104@sierra-A66>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: 'linux clustering' <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:14:20 -0000

I don't think you addressed any of my comments.

On 10/10/2012 11:02 PM, Shanti Pahari wrote:
> Thanks!
>
> I updated the fencing method in each of the nodes. But after I added
> volume_list = [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]
> and
> # dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname -r)
> # shutdown -r now "Activating ramdisk LVM changes"
>
> After that when the system tries to boot up:
> Kernel panic  not syncing: Attempted to kill init!
>
> So didnt have luck 
>
> Can you help me pls!
>
> -----Original Message-----
> From: Digimer [mailto:lists@alteeve.ca]
> Sent: Wednesday, 10 October, 2012 11:51 PM
> To: linux clustering
> Cc: Shanti Pahari
> Subject: Re: [Linux-cluster] cannot run cluster service
>
> Your fencing is not setup properly. You define the fence devices, but do not
> use them as <method>'s under each node definition. You should be able to
> 'fence_node <target>' and watch it get rebooted. Until then, your cluster
> will hang (by design) the first time there is a problem.
>
> Assuming you want to use clustered LVM, you need to change locking_type to
> '3' and, I advise, change 'falllback_to_local_locking' to '0'. This also
> requires that the 'clvmd' daemon is running, which in turn needs cman to be
> running first.
>
> What is your backing device for the LVM PV?
>
> digimer
>
> On 10/10/2012 03:06 AM, Shanti Pahari wrote:
>> Dear all,
>>
>> I have cluster setup with 2 node and created web cluster service on it
>> but it cannot run.
>>
>> I have not listed anything in lvm.conf volume_list because once I add
>> anything in volume_list and reboot the system then I cannot mount and
>> even cannot read the lv which I created for my web . It throws error
>> as
>>
>> error message "not activating volume group lv does not pass activation
>> filter"
>>
>> Therefore I didnt add anything in lvm.conf . Then I try to start my
>> cluster servers for web server but the service failed.
>>
>> Please help me so that I can solve this out.
>>
>> I have attached my cluster.conf , lvdisplay , /var/log/messages and
>> lvm.conf and my /etc/hosts.
>>
>> I will be greatful if anyone can help me!
>>
>> Thanks
>>
>> And my clustat:
>>
>> Cluster Status for PDC-PIC-PL-CL @ Wed Oct 10 14:58:05 2012
>>
>> Member Status: Quorate
>>
>> Member Name                                                     ID
>> Status
>>
>> ------ ----                                                     ---- ------
>>
>> PDC-PIC-PL-CL1                                                      1
>> Online, Local, rgmanager
>>
>> PDC-PIC-PL-CL2                                                      2
>> Online, rgmanager
>>
>> Service Name                                               Owner
>> (Last)                                               State
>>
>>    ------- ----                                               -----
>> ------                                               -----
>>
>>    service:ha-web-service
>> (PDC-PIC-PL-CL1)                                           failed
>>
>>
>>
>
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/ "Hydrogen is just a colourless,
> odorless gas which, if left alone in sufficient quantities for long periods
> of time, begins to think about itself."
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From mkathuria@tuxtechnologies.co.in Thu Oct 11 13:36:25 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHaPgA005814 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:36:25 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BHaKi4013109
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:36:20 -0400
Received: from mail-yh0-f46.google.com (mail-yh0-f46.google.com
	[209.85.213.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BHaHJo023148
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:36:18 -0400
Received: by mail-yh0-f46.google.com with SMTP id m54so542344yhm.33
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 10:36:17 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:content-transfer-encoding:x-gm-message-state;
	bh=sfXmHELHTtj3fr54rXCosR2/8sdvwRo8BSuGA/lFT44=;
	b=c8IAFBA2AR1iZ5pwi765N59hjROXYs0j9OxvArK6i/ZmtMcyWrshQKXks2dxtpm96V
	OXJ5ltwrpZFdgub7QTFLzZohjEXymuofJVevGpBdPtWC3QC4my4z5WK5G/hXE1c5XjJl
	vrBXdWCyDsQCvKywYtRjPq61PyoqzvO0VYVWtYpLFgG9fb+LqZBoFzquvVTs25E72+6R
	3G+fBMyXL/7Jz1H8cdaoAnh1NPw74DoO3Wjzj50QEnRlxHFYy9NNWDQ9yO5qDUL0W29G
	z15fnPtaHt5YgyS68w6JjSuKgQgPYJbziXvtdzaFwWaKIRBIzDJyKBNG+sHyVYm6FA4c
	rX9w==
MIME-Version: 1.0
Received: by 10.236.154.165 with SMTP id h25mr1586942yhk.38.1349976977718;
	Thu, 11 Oct 2012 10:36:17 -0700 (PDT)
Received: by 10.147.161.30 with HTTP; Thu, 11 Oct 2012 10:36:17 -0700 (PDT)
In-Reply-To: <0a55cf02.00000e4c.00000039@sierra-A66>
References: <0a55cf02.00000e4c.00000039@sierra-A66>
Date: Thu, 11 Oct 2012 23:06:17 +0530
Message-ID: <CALiQAgno1d2DLs3xrVmiPC1coiZvR6h5oxKK8Gnc2+SqJAiv-g@mail.gmail.com>
From: Manish Kathuria <mkathuria@tuxtechnologies.co.in>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=windows-1252
X-Gm-Message-State: ALoCoQmfvqBT4UkFpbBMexSLOzgFqfmqq0ZZKI85fC3JDg4S8mhS4OoiGPPGGFJ9YZoFzR5eR2V9
X-RedHat-Spam-Score: -0.977  (BAYES_00,RCVD_IN_DNSWL_LOW,URIBL_SBL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9BHaPgA005814
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] lvm.conf for HA LVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:36:25 -0000

On Thu, Oct 11, 2012 at 7:13 PM, Shanti Pahari <shanti.pahari@sierra.sg> wrote:
> Hi all,
>
>
>
> Please help me to configure lvm.conf .
>
> I always get problem when I add volume_list in lvm.conf file.
>
> After I add volume_list  = [ vg_pdcpicpl101 , @pdc-pic-pl-01 ] and
> reboot it later my other lvm goes down L cannot initialize it. Or do I need
> to add all my VG in volume list?

The Volume Groups which are to be shared using HA LVM should not be
added to this volume list. They need to be included as resources in
the cluster configuration.

>

You can refer to the following document for the steps to configure HA LVM

https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Cluster_Administration/ap-ha-halvm-CA.html

Thanks,
-- 
Manish Kathuria


From gumbs.alfred@att.net Thu Oct 11 13:51:49 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BHpnF7007861 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 13:51:49 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BHphLT020360
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:51:43 -0400
Received: from nm8.bullet.mail.sp2.yahoo.com (nm8.bullet.mail.sp2.yahoo.com
	[98.139.91.78])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BHpgrp029838
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 13:51:42 -0400
Received: from [72.30.22.78] by nm8.bullet.mail.sp2.yahoo.com with NNFMP;
	11 Oct 2012 17:49:29 -0000
Received: from [98.139.44.66] by tm12.bullet.mail.sp2.yahoo.com with NNFMP;
	11 Oct 2012 17:49:29 -0000
Received: from [127.0.0.1] by omp1003.access.mail.sp2.yahoo.com with NNFMP;
	11 Oct 2012 17:49:29 -0000
X-Yahoo-Newman-Id: 164293.60658.bm@omp1003.access.mail.sp2.yahoo.com
Received: (qmail 27453 invoked from network); 11 Oct 2012 17:49:28 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=att.net; s=s1024;
	t=1349977768; bh=Hw9zejHvLs1AhVp97UzvqNIp6ufBWWwVZC2bcrHXsY4=;
	h=X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:From:To:References:In-Reply-To:Subject:Date:MIME-Version:Content-Type:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
	b=DXPRJ3VuPMFhKBbEBO/OBOuQ2xC88A5aSdmMxAHPxgboal6g/P+zb297GfLXIB0ArYX5Zz2hRBcfQqdmJzJo4qB5XUr7kd5g1D3rxLO04TQPznGwJtG81E1l+inaEftAgJnJ06crF/WBOKgV6GpIVT8MFmIkp+FHw7LDjE9Sguo=
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: PQAvLwEVM1nX_v8xhsmvUpr8CgQ9i046wmmQRJL92PC.Ud0
	W0E.bd2itjztVvQRmdKvYLOxBS.LAMdQWY.bMC7CaZWd8mymp8PfT0qg4zns
	u6Rs7uSL_QJ_FFqo2sxQ3tMofs91Upa67LLn11xFLBc6M6IN.BJykIWr_KGT
	7GgDaQPs1fGPFVGRxVJ3HESJcGVhp3XszktW5SMT74xaMSm3MKOwXWHBz0wC
	USzA_8.k30F14wKfSqTB1Gw9uCYFNI.Eh3YJ0KdcNlkMH1TSqfJwtQ6OY5Nm
	f_BcmL6mv7.ilaw5qSBW7wxn_j5cxGiJy1JZSNpD8sxbSpTGO9VEmEzVVbVT
	rYi6s6X5ckHnlU3rz.kLiZaJUwb_oV3pZVv4BsreLR8bF57HVnOAs6K2zAzj
	QAYLgkdw1Z.sxjXDxbIc2rZ3dZ2J7saB8NSZXaAw7rINLND7dLNKU72Ngmdm
	_PFxwjoHx0ioHO7ZyfvDU0vEvu5gPVlDBetK.R6S1_Yq1rAKQ2x_Dg9IfjuD
	HVIb6j1p_ApcO73Dc0sakJXwFNA--
X-Yahoo-SMTP: epJVGXmswBC8gpPBhL8iiEDCBTk3aBlLw11k1Sivx6gI
Received: from AlfredPC (gumbs.alfred@76.242.78.203 with login)
	by smtp108.sbc.mail.gq1.yahoo.com with SMTP;
	11 Oct 2012 10:49:28 -0700 PDT
Message-ID: <318E18D064474C05AA6F41B04602BF0A@AlfredPC>
From: "Alfred Gumbs" <gumbs.alfred@att.net>
To: "linux clustering" <linux-cluster@redhat.com>,
	"'Andrew Denton'" <andrewd@sterling.net>
References: <a2202e87.00001f6c.00000065@sierra-A66><507593C6.5040708@sterling.net>
	<27d23437.00001f6c.000000ff@sierra-A66>
In-Reply-To: <27d23437.00001f6c.000000ff@sierra-A66>
Date: Thu, 11 Oct 2012 12:49:25 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0098_01CDA7AE.D8613610"
X-Priority: 3
X-MSMail-Priority: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6002.18463
X-RedHat-Spam-Score: -2.007  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE,
	UNPARSEABLE_RELAY)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot run cluster service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 17:51:49 -0000

This is a multi-part message in MIME format.

------=_NextPart_000_0098_01CDA7AE.D8613610
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'm not certain of your complete configuration.  However looking at the =
entry that you placed in the volume_list.  It looks like you listed the =
VG that is part of your cluster's resource group.  However, the =
volume_lists should actually list all the volume groups that are not =
part of the cluster. =20

The VG's in the volume_list are actually the ones that the system needs =
to bring up.  The volume group that are part of the cluster will be =
brought up by rgmanager, so they should not  be in volumes_list.  The =
reason for the system panic is because the required volume groups were =
not listed in volume_list.  So the kernel could not varyon the system =
VG.

If I have mistakenly interprettted what you've done I'm sorry. =20
  ----- Original Message -----=20
  From: Shanti Pahari=20
  To: 'Andrew Denton' ; 'linux clustering'=20
  Sent: Wednesday, October 10, 2012 9:54 PM
  Subject: Re: [Linux-cluster] cannot run cluster service


  Hi Andrew,

  =20

  Now I added following in my lvm.conf

  volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]

  and

  # dracut --hostonly --force /boot/initramfs-$(uname -r).img $(uname =
-r)

  # shutdown -r now "Activating ramdisk LVM changes"

  =20

  After that when the system tries to boot up:

  Kernel panic - not syncing: Attempted to kill init!

  =20

  So didn't have luck L

  =20


  volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]

  The hostname should be cluster connect name or initial hostname ?

  My /etc/hosts:

  =20

  192.168.24.32   PDC-PIC-PL-01   PDC-PIC-PL-01.chcs.sg

  192.168.25.132  PDC-PIC-PL-01-PM       =20

  192.168.26.13   PDC-PIC-PL-CL1

  192.168.24.33   PDC-PIC-PL-02  PDC-PIC-PL-02.chcs.sg

  192.168.25.133  PDC-PIC-PL-02-PM

  192.168.26.14   PDC-PIC-PL-CL2

  =20

  =20

  =20

  From: Andrew Denton [mailto:andrewd@sterling.net]=20
  Sent: Wednesday, 10 October, 2012 11:27 PM
  To: linux clustering
  Cc: Shanti Pahari
  Subject: Re: [Linux-cluster] cannot run cluster service

  =20

  On 10/10/2012 12:06 AM, Shanti Pahari wrote:

    I have cluster setup with 2 node and created web cluster service on =
it but it cannot run.=20

    I have not listed anything in lvm.conf volume_list because once I =
add anything in volume_list and reboot the system then I cannot mount =
and even cannot read the lv which I created for my web . It throws error =
as=20

    error message "not activating volume group lv does not pass =
activation filter"

    Therefore I didn't add anything in lvm.conf . Then I try to start my =
cluster servers for web server but the service failed.


  I've seen this failure too when building my cluster. You either need =
to add the system's volume groups to volume_list, or tag the system's =
vgs with the @hostname so it can still activate them.=20
  e.g.
      volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]
  on one node and
      volume_list =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]
  on the other. Next it will complain about initrd being older than =
lvm.conf, so I've been running
  # mkinitrd -f /boot/initrd-`uname -r`.img `uname -r`
  Not sure if that's the right command but it works for me =3D)

  One of these days I'm going to tag the system's vgs properly so I can =
use the same lvm.conf across the nodes. I think it's something like
  lvchange --addtag PDC-PIC-PL-CL1 vg_pdcpicpl01/lv_root=20
  etc...

  By the way, to display how things are tagged, you have to do
  lvs -o +tags
  I wish it displayed them in lvdisplay, but it doesn't.

  -- Andrew






-------------------------------------------------------------------------=
-----


  --=20
  Linux-cluster mailing list
  Linux-cluster@redhat.com
  https://www.redhat.com/mailman/listinfo/linux-cluster
------=_NextPart_000_0098_01CDA7AE.D8613610
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML xmlns=3D"http://www.w3.org/TR/REC-html40" xmlns:v =3D=20
"urn:schemas-microsoft-com:vml" xmlns:o =3D=20
"urn:schemas-microsoft-com:office:office" xmlns:w =3D=20
"urn:schemas-microsoft-com:office:word" xmlns:m =3D=20
"http://schemas.microsoft.com/office/2004/12/omml"><HEAD>
<META content=3D"text/html; charset=3Diso-8859-1" =
http-equiv=3DContent-Type>
<META name=3DGENERATOR content=3D"MSHTML 9.00.8112.16447">
<STYLE>@font-face {
	font-family: Wingdings;
}
@font-face {
	font-family: Wingdings;
}
@font-face {
	font-family: Calibri;
}
@font-face {
	font-family: Tahoma;
}
@font-face {
	font-family: LiberationMono;
}
@font-face {
	font-family: LiberationMono-Bold;
}
@page WordSection1 {size: 612.0pt 792.0pt; margin: 72.0pt 72.0pt 72.0pt =
72.0pt; }
P.MsoNormal {
	MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Calibri","sans-serif"; COLOR: black; =
FONT-SIZE: 11pt; mso-fareast-language: EN-US
}
LI.MsoNormal {
	MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Calibri","sans-serif"; COLOR: black; =
FONT-SIZE: 11pt; mso-fareast-language: EN-US
}
DIV.MsoNormal {
	MARGIN: 0cm 0cm 0pt; FONT-FAMILY: "Calibri","sans-serif"; COLOR: black; =
FONT-SIZE: 11pt; mso-fareast-language: EN-US
}
A:link {
	COLOR: blue; TEXT-DECORATION: underline; mso-style-priority: 99
}
SPAN.MsoHyperlink {
	COLOR: blue; TEXT-DECORATION: underline; mso-style-priority: 99
}
A:visited {
	COLOR: purple; TEXT-DECORATION: underline; mso-style-priority: 99
}
SPAN.MsoHyperlinkFollowed {
	COLOR: purple; TEXT-DECORATION: underline; mso-style-priority: 99
}
SPAN.EmailStyle17 {
	FONT-FAMILY: "Calibri","sans-serif"; COLOR: windowtext; mso-style-type: =
personal
}
SPAN.EmailStyle18 {
	FONT-FAMILY: "Calibri","sans-serif"; COLOR: #1f497d; mso-style-type: =
personal-reply
}
.MsoChpDefault {
	FONT-SIZE: 10pt; mso-style-type: export-only
}
DIV.WordSection1 {
	page: WordSection1
}
</STYLE>
<!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></HEAD>
<BODY lang=3DEN-SG bgColor=3Dwhite vLink=3Dpurple link=3Dblue>
<DIV><FONT size=3D2 face=3DArial>I'm not certain of your complete=20
configuration.&nbsp; However looking at the entry that you placed in the =

volume_list.&nbsp; It looks like you listed the VG that is part of your=20
cluster's resource group.&nbsp; However, the volume_lists should =
actually list=20
all the volume groups that are not part of the cluster.&nbsp; =
</FONT></DIV>
<DIV><FONT size=3D2 face=3DArial></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2 face=3DArial>The VG's in the volume_list are =
actually the ones=20
that the system needs to bring up.&nbsp; The volume group that are part =
of the=20
cluster will be brought up by rgmanager, so they should not&nbsp; be in=20
volumes_list.&nbsp; The reason for the system panic is because the =
required=20
volume groups were not listed in volume_list.&nbsp; So the kernel could =
not=20
varyon the system VG.</FONT></DIV>
<DIV><FONT size=3D2 face=3DArial></FONT>&nbsp;</DIV>
<DIV><FONT size=3D2 face=3DArial>If I have mistakenly interprettted what =
you've done=20
I'm sorry.&nbsp; </FONT></DIV>
<BLOCKQUOTE=20
style=3D"BORDER-LEFT: #000000 2px solid; PADDING-LEFT: 5px; =
PADDING-RIGHT: 0px; MARGIN-LEFT: 5px; MARGIN-RIGHT: 0px">
  <DIV style=3D"FONT: 10pt arial">----- Original Message ----- </DIV>
  <DIV=20
  style=3D"FONT: 10pt arial; BACKGROUND: #e4e4e4; font-color: =
black"><B>From:</B>=20
  <A title=3Dshanti.pahari@sierra.sg =
href=3D"mailto:shanti.pahari@sierra.sg">Shanti=20
  Pahari</A> </DIV>
  <DIV style=3D"FONT: 10pt arial"><B>To:</B> <A =
title=3Dandrewd@sterling.net=20
  href=3D"mailto:andrewd@sterling.net">'Andrew Denton'</A> ; <A=20
  title=3Dlinux-cluster@redhat.com =
href=3D"mailto:linux-cluster@redhat.com">'linux=20
  clustering'</A> </DIV>
  <DIV style=3D"FONT: 10pt arial"><B>Sent:</B> Wednesday, October 10, =
2012 9:54=20
  PM</DIV>
  <DIV style=3D"FONT: 10pt arial"><B>Subject:</B> Re: [Linux-cluster] =
cannot run=20
  cluster service</DIV>
  <DIV><BR></DIV>
  <DIV class=3DWordSection1>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: #1f497d">Hi=20
  Andrew,<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: =
#1f497d"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: #1f497d">Now I added =
following in my=20
  lvm.conf<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: #1f497d"></SPAN><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">volume_list=20
  =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"=20
  ]<o:p></o:p></SPAN></P>
  <P style=3D"TEXT-AUTOSPACE: " class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">and<o:p></o:p></SPAN></P>
  <P style=3D"TEXT-AUTOSPACE: " class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"></SPAN><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono; COLOR: windowtext; FONT-SIZE: =
10.5pt; mso-fareast-language: EN-SG">#=20
  </SPAN><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">dracut=20
  --hostonly --force /boot/initramfs-$(uname -r).img $(uname=20
  -r)<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono; COLOR: windowtext; FONT-SIZE: =
10.5pt; mso-fareast-language: EN-SG">#=20
  </SPAN><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">shutdown=20
  -r now "Activating ramdisk LVM changes"<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p>&nbsp;</o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">After=20
  that when the system tries to boot up:<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">Kernel=20
  panic =96 not syncing: Attempted to kill =
init!<o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p>&nbsp;</o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: EN-SG">So=20
  didn=92t have luck </SPAN></B><B><SPAN=20
  style=3D"FONT-FAMILY: Wingdings; COLOR: windowtext; FONT-SIZE: 10.5pt; =
mso-fareast-language: EN-SG">L</SPAN></B><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p></o:p></SPAN></B></P>
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: LiberationMono-Bold; COLOR: windowtext; =
FONT-SIZE: 10.5pt; mso-fareast-language: =
EN-SG"><o:p>&nbsp;</o:p></SPAN></B></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><BR>volume_list=20
  =3D [ "vg_pdcpicpl02", "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2"=20
  ]<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">The=20
  hostname should be cluster connect name or initial hostname=20
  ?<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">My=20
  /etc/hosts:<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.24.32&nbsp;&nbsp;=20
  PDC-PIC-PL-01&nbsp;&nbsp; PDC-PIC-PL-01.chcs.sg<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.25.132&nbsp;=20
  PDC-PIC-PL-01-PM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=20
  <o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.26.13&nbsp;&nbsp;=20
  PDC-PIC-PL-CL1<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.24.33&nbsp;&nbsp;=20
  PDC-PIC-PL-02&nbsp; PDC-PIC-PL-02.chcs.sg<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.25.133&nbsp;=20
  PDC-PIC-PL-02-PM<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">192.168.26.14&nbsp;&nbsp;=20
  PDC-PIC-PL-CL2<o:p></o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: =
#1f497d"><o:p>&nbsp;</o:p></SPAN></P>
  <P class=3DMsoNormal><SPAN style=3D"COLOR: =
#1f497d"><o:p>&nbsp;</o:p></SPAN></P>
  <DIV>
  <DIV=20
  style=3D"BORDER-BOTTOM: medium none; BORDER-LEFT: medium none; =
PADDING-BOTTOM: 0cm; PADDING-LEFT: 0cm; PADDING-RIGHT: 0cm; BORDER-TOP: =
#b5c4df 1pt solid; BORDER-RIGHT: medium none; PADDING-TOP: 3pt">
  <P class=3DMsoNormal><B><SPAN=20
  style=3D"FONT-FAMILY: 'Tahoma','sans-serif'; COLOR: windowtext; =
FONT-SIZE: 10pt; mso-fareast-language: EN-SG"=20
  lang=3DEN-US>From:</SPAN></B><SPAN=20
  style=3D"FONT-FAMILY: 'Tahoma','sans-serif'; COLOR: windowtext; =
FONT-SIZE: 10pt; mso-fareast-language: EN-SG"=20
  lang=3DEN-US> Andrew Denton [mailto:andrewd@sterling.net] =
<BR><B>Sent:</B>=20
  Wednesday, 10 October, 2012 11:27 PM<BR><B>To:</B> linux=20
  clustering<BR><B>Cc:</B> Shanti Pahari<BR><B>Subject:</B> Re: =
[Linux-cluster]=20
  cannot run cluster service<o:p></o:p></SPAN></P></DIV></DIV>
  <P class=3DMsoNormal><o:p>&nbsp;</o:p></P>
  <DIV>
  <P class=3DMsoNormal>On 10/10/2012 12:06 AM, Shanti Pahari=20
  wrote:<o:p></o:p></P></DIV>
  <BLOCKQUOTE style=3D"MARGIN-TOP: 5pt; MARGIN-BOTTOM: 5pt">
    <P class=3DMsoNormal><SPAN=20
    style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG">I=20
    have cluster setup with 2 node and created web cluster service on it =
but it=20
    cannot run. <o:p></o:p></SPAN></P>
    <P class=3DMsoNormal>I have not listed anything in lvm.conf =
volume_list=20
    because once I add anything in volume_list and reboot the system =
then I=20
    cannot mount and even cannot read the lv which I created for my web =
. It=20
    throws error as <o:p></o:p></P>
    <P class=3DMsoNormal>error message "not activating volume group lv =
does not=20
    pass activation filter"<o:p></o:p></P>
    <P class=3DMsoNormal>Therefore I didn=92t add anything in lvm.conf . =
Then I try=20
    to start my cluster servers for web server but the service=20
    failed.<o:p></o:p></P></BLOCKQUOTE>
  <P style=3D"MARGIN-BOTTOM: 12pt" class=3DMsoNormal><SPAN=20
  style=3D"FONT-FAMILY: 'Times New Roman','serif'; FONT-SIZE: 12pt; =
mso-fareast-language: EN-SG"><BR>I've=20
  seen this failure too when building my cluster. You either need to add =
the=20
  system's volume groups to volume_list, or tag the system's vgs with =
the=20
  @hostname so it can still activate them. =
<BR>e.g.<BR>&nbsp;&nbsp;&nbsp;=20
  volume_list =3D [ "vg_pdcpicpl01", "@PDC-PIC-PL-CL1", =
"@PDC-PIC-PL-CL2" ]<BR>on=20
  one node and<BR>&nbsp;&nbsp;&nbsp; volume_list =3D [ "vg_pdcpicpl02",=20
  "@PDC-PIC-PL-CL1", "@PDC-PIC-PL-CL2" ]<BR>on the other. Next it will =
complain=20
  about initrd being older than lvm.conf, so I've been running<BR># =
mkinitrd -f=20
  /boot/initrd-`uname -r`.img `uname -r`<BR>Not sure if that's the right =
command=20
  but it works for me =3D)<BR><BR>One of these days I'm going to tag the =
system's=20
  vgs properly so I can use the same lvm.conf across the nodes. I think =
it's=20
  something like<BR>lvchange --addtag PDC-PIC-PL-CL1 =
vg_pdcpicpl01/lv_root=20
  <BR>etc...<BR><BR>By the way, to display how things are tagged, you =
have to=20
  do<BR>lvs -o +tags<BR>I wish it displayed them in lvdisplay, but it=20
  doesn't.<BR><BR>-- Andrew<BR><BR><BR><o:p></o:p></SPAN></P></DIV>
  <P>
  <HR>

  <P></P>-- <BR>Linux-cluster mailing=20
  =
list<BR>Linux-cluster@redhat.com<BR>https://www.redhat.com/mailman/listin=
fo/linux-cluster</BLOCKQUOTE></BODY></HTML>

------=_NextPart_000_0098_01CDA7AE.D8613610--


From lists@alteeve.ca Thu Oct 11 14:46:58 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9BIkwP0015177 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 14:46:58 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9BIkrSS003232; Thu, 11 Oct 2012 14:46:53 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9BIkpiC031613;
	Thu, 11 Oct 2012 14:46:52 -0400
Received: from lemass.alteeve.ca (lns2-pool-d8429402.dsl.look.ca
	[216.66.148.2])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 226EE42249F;
	Thu, 11 Oct 2012 14:46:49 -0400 (EDT)
Message-ID: <50771419.1000306@alteeve.ca>
Date: Thu, 11 Oct 2012 14:46:49 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <50736F78.3060906@redhat.com> <507630C0.2010607@alteeve.ca>
	<20121011112554.GC29887@redhat.com>
In-Reply-To: <20121011112554.GC29887@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 11 Oct 2012 18:46:59 -0000

On 10/11/2012 07:25 AM, Jan Pokorn wrote:
> Hello Digimer,
>
> On 10/10/12 22:36 -0400, Digimer wrote:
>>    I started following Andrew's new pcs-based tutorial today on a fresh,
>> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
>>
>> ===
>> yum install -y pcs
>>
>> 2.5 Setup
>>
>> <snip>
>>
>> # systemctl start pcsd.service
>> # systemctl enable pcsd.service
>> ===
>>
>> This fails, and Andrew suggested using the version of pcs you annouced here.
>> Same problem though;
>>
>> ===
>> [root@an-c01n01 ~]# rpm -Uvh
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>> Retrieving http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>> Preparing...                ###########################################
>> [100%]
>>     1:pcs                    ###########################################
>> [100%]
>> [root@an-c01n01 ~]# systemctl start pcsd.service
>> Failed to issue method call: Unit pcsd.service failed to load: No such file
>> or directory. See system logs and 'systemctl status pcsd.service' for
>> details.
>>
>> [...]
>>
>> Any thoughts?
>
> this is part of pcs-gui project [1] packaging of which is probably pending.
>
> [1] https://github.com/feist/pcs-gui

Ah, so the daemon isn't needed if a user doesn't care to use the GUI?

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From andrew@beekhof.net Thu Oct 11 21:05:28 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9C15S5l019771 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 21:05:28 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9C15Ng5014516
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:05:23 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9C15LYn011619
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:05:22 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so2819075obb.33
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 18:05:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:content-transfer-encoding:x-gm-message-state;
	bh=Zopa6awRlZmfdi6HQwwLnOK1YGGtVb3FCGmKOs6DXYI=;
	b=mw3WgfnjQxzRxP9dMCl8cUHBw0Oi+Hte/Grd/fZE5nCKOvZyu3Z/TiwpYgk/pwcnvN
	XKTOJX4WlJZIrt/MOVKDuUQHq7DDw6q0M88BdNu88Skv9A/plHFfbV2QQQf+f9y0JxuC
	IOxwzbleKOfYd5mRx35f7lgWoPJT55WpzVKMgVuVIm596lgFAV0VrpY0HNJz0yLcIa+7
	3tqAWp/H4hNjViwlcHsZRDyZRmYBbT+CW7jFDa5AR2H9qMk/Rz3Evu/E5GuNm67SoTl3
	iseOfoz1rKMRXOVHgP0E4yplGQve3wXeEgFx3dzoXwHUa0D9+uQ0CihPDbjOiPm58Ysf
	JsxA==
MIME-Version: 1.0
Received: by 10.182.240.45 with SMTP id vx13mr2316671obc.21.1350003612056;
	Thu, 11 Oct 2012 18:00:12 -0700 (PDT)
Received: by 10.76.173.70 with HTTP; Thu, 11 Oct 2012 18:00:11 -0700 (PDT)
In-Reply-To: <50771419.1000306@alteeve.ca>
References: <50736F78.3060906@redhat.com> <507630C0.2010607@alteeve.ca>
	<20121011112554.GC29887@redhat.com> <50771419.1000306@alteeve.ca>
Date: Fri, 12 Oct 2012 12:00:11 +1100
Message-ID: <CAEDLWG10dC_HrvUyPVyxZzz_pneopXJovDY=DkMOzZYa36mBMg@mail.gmail.com>
From: Andrew Beekhof <andrew@beekhof.net>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlTFdNCxM4gNNRhA03wN8OGbCaEqFCCkKJh8leDkc/YS/F7ClqA6U652fdG8YkrnaUqB/u4
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9C15S5l019771
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 01:05:28 -0000

On Fri, Oct 12, 2012 at 5:46 AM, Digimer <lists@alteeve.ca> wrote:
> On 10/11/2012 07:25 AM, Jan Pokorn wrote:
>>
>> Hello Digimer,
>>
>> On 10/10/12 22:36 -0400, Digimer wrote:
>>>
>>>    I started following Andrew's new pcs-based tutorial today on a fresh,
>>> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
>>>
>>> ===
>>> yum install -y pcs
>>>
>>> 2.5 Setup
>>>
>>> <snip>
>>>
>>> # systemctl start pcsd.service
>>> # systemctl enable pcsd.service
>>> ===
>>>
>>> This fails, and Andrew suggested using the version of pcs you annouced
>>> here.
>>> Same problem though;
>>>
>>> ===
>>> [root@an-c01n01 ~]# rpm -Uvh
>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>> Retrieving
>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>> Preparing...                ###########################################
>>> [100%]
>>>     1:pcs                    ###########################################
>>> [100%]
>>> [root@an-c01n01 ~]# systemctl start pcsd.service
>>> Failed to issue method call: Unit pcsd.service failed to load: No such
>>> file
>>> or directory. See system logs and 'systemctl status pcsd.service' for
>>> details.
>>>
>>> [...]
>>>
>>> Any thoughts?
>>
>>
>> this is part of pcs-gui project [1] packaging of which is probably
>> pending.
>>
>> [1] https://github.com/feist/pcs-gui
>
>
> Ah, so the daemon isn't needed if a user doesn't care to use the GUI?

I believe it is needed if you want to do anything more than talk to
the local node.  Which includes initial cluster setup.
I talked to Chris just now, he wanted to add PAM support (instead of
using pcs_passwd) before releasing that part for upstream.

New packages including the daemon pieces (with PAM support) should
land in the next day or so.


From lists@alteeve.ca Thu Oct 11 21:26:38 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9C1Qbfa021477 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 11 Oct 2012 21:26:38 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9C1QW09029920
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:26:32 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9C1QVJx013400
	for <linux-cluster@redhat.com>; Thu, 11 Oct 2012 21:26:31 -0400
Received: from lemass.alteeve.ca (lns2-pool-d8429402.dsl.look.ca
	[216.66.148.2])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id C7A8C42249F;
	Thu, 11 Oct 2012 21:26:28 -0400 (EDT)
Message-ID: <507771C5.2080001@alteeve.ca>
Date: Thu, 11 Oct 2012 21:26:29 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:15.0) Gecko/20120911 Thunderbird/15.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <50736F78.3060906@redhat.com> <507630C0.2010607@alteeve.ca>
	<20121011112554.GC29887@redhat.com> <50771419.1000306@alteeve.ca>
	<CAEDLWG10dC_HrvUyPVyxZzz_pneopXJovDY=DkMOzZYa36mBMg@mail.gmail.com>
In-Reply-To: <CAEDLWG10dC_HrvUyPVyxZzz_pneopXJovDY=DkMOzZYa36mBMg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 01:26:38 -0000

On 10/11/2012 09:00 PM, Andrew Beekhof wrote:
> On Fri, Oct 12, 2012 at 5:46 AM, Digimer <lists@alteeve.ca> wrote:
>> On 10/11/2012 07:25 AM, Jan Pokorn wrote:
>>>
>>> Hello Digimer,
>>>
>>> On 10/10/12 22:36 -0400, Digimer wrote:
>>>>
>>>>     I started following Andrew's new pcs-based tutorial today on a fresh,
>>>> minimal F17 x86_64 install. Section 2.5 of CfS-pcs shows;
>>>>
>>>> ===
>>>> yum install -y pcs
>>>>
>>>> 2.5 Setup
>>>>
>>>> <snip>
>>>>
>>>> # systemctl start pcsd.service
>>>> # systemctl enable pcsd.service
>>>> ===
>>>>
>>>> This fails, and Andrew suggested using the version of pcs you annouced
>>>> here.
>>>> Same problem though;
>>>>
>>>> ===
>>>> [root@an-c01n01 ~]# rpm -Uvh
>>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>>> Retrieving
>>>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>>> Preparing...                ###########################################
>>>> [100%]
>>>>      1:pcs                    ###########################################
>>>> [100%]
>>>> [root@an-c01n01 ~]# systemctl start pcsd.service
>>>> Failed to issue method call: Unit pcsd.service failed to load: No such
>>>> file
>>>> or directory. See system logs and 'systemctl status pcsd.service' for
>>>> details.
>>>>
>>>> [...]
>>>>
>>>> Any thoughts?
>>>
>>>
>>> this is part of pcs-gui project [1] packaging of which is probably
>>> pending.
>>>
>>> [1] https://github.com/feist/pcs-gui
>>
>>
>> Ah, so the daemon isn't needed if a user doesn't care to use the GUI?
>
> I believe it is needed if you want to do anything more than talk to
> the local node.  Which includes initial cluster setup.
> I talked to Chris just now, he wanted to add PAM support (instead of
> using pcs_passwd) before releasing that part for upstream.
>
> New packages including the daemon pieces (with PAM support) should
> land in the next day or so.
>

Awesome, I'll try it out once it's available.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
"Hydrogen is just a colourless, odorless gas which, if left alone in 
sufficient quantities for long periods of time, begins to think about 
itself."


From a.holway@syseleven.de Fri Oct 12 11:22:57 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CFMuTU019525 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 11:22:57 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CFMphY021270
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:22:51 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CFMj4V014340
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:22:46 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for linux-cluster@redhat.com; Fri, 12 Oct 2012 17:22:43 +0200
From: Andrew Holway <a.holway@syseleven.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Fri, 12 Oct 2012 17:22:39 +0200
Message-Id: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
To: linux clustering <linux-cluster@redhat.com>
Mime-Version: 1.0 (Apple Message framework v1278)
X-RedHat-Spam-Score: -4.746  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 15:22:57 -0000

Hello,

I am trying to set up a 4 node cluster with a shared iSCSI storage device.

I cannot start clvmd: service clvmd start just hangs.

I cannot stop cman:

node001:	Working directory: /root
node001:	Stopping cluster: 
node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
node001:	fence_tool: cannot leave due to active systems
node001:	[FAILED]

I find these errors in /var/log/cluster/dlm_controld.log 

Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying

[root@node001 clvmd]# clvmd status
clvmd failed in initialisation

Any ideas?

Thanks,

Andrew



From lists@alteeve.ca Fri Oct 12 11:28:44 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CFSirO019775 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 11:28:44 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CFSdEr008632
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:28:39 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CFSbOI017074
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 11:28:37 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 046A042249F;
	Fri, 12 Oct 2012 11:28:35 -0400 (EDT)
Message-ID: <50783724.5040703@alteeve.ca>
Date: Fri, 12 Oct 2012 11:28:36 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
In-Reply-To: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 15:28:44 -0000

On 10/12/2012 11:22 AM, Andrew Holway wrote:
> Hello,
>
> I am trying to set up a 4 node cluster with a shared iSCSI storage device.
>
> I cannot start clvmd: service clvmd start just hangs.
>
> I cannot stop cman:
>
> node001:	Working directory: /root
> node001:	Stopping cluster:
> node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
> node001:	fence_tool: cannot leave due to active systems
> node001:	[FAILED]
>
> I find these errors in /var/log/cluster/dlm_controld.log
>
> Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
> Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
> Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying
>
> [root@node001 clvmd]# clvmd status
> clvmd failed in initialisation
>
> Any ideas?
>
> Thanks,
>
> Andrew

Can you paste your cluster.conf please? I suspect something went wrong, 
it tried to fence and then failed to do so, so it's blocked.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?


From a.holway@syseleven.de Fri Oct 12 14:52:51 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CIqogh009254 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 14:52:50 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CIqigL020242
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 14:52:45 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CIqfWB030962
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 14:52:42 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits));
	Fri, 12 Oct 2012 20:52:37 +0200
Mime-Version: 1.0 (Apple Message framework v1278)
Content-Type: text/plain; charset=iso-8859-1
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <50783724.5040703@alteeve.ca>
Date: Fri, 12 Oct 2012 20:52:35 +0200
Message-Id: <48CCA736-1A1B-43F5-B94E-8C9EE28E0384@syseleven.de>
References: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
	<50783724.5040703@alteeve.ca>
To: Digimer <lists@alteeve.ca>
X-RedHat-Spam-Score: -4.746  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9CIqogh009254
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 18:52:51 -0000


On Oct 12, 2012, at 5:28 PM, Digimer wrote:

> On 10/12/2012 11:22 AM, Andrew Holway wrote:
>> Hello,
>> 
>> I am trying to set up a 4 node cluster with a shared iSCSI storage device.
>> 
>> I cannot start clvmd: service clvmd start just hangs.
>> 
>> I cannot stop cman:
>> 
>> node001:	Working directory: /root
>> node001:	Stopping cluster:
>> node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
>> node001:	fence_tool: cannot leave due to active systems
>> node001:	[FAILED]
>> 
>> I find these errors in /var/log/cluster/dlm_controld.log
>> 
>> Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
>> Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
>> Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying
>> 
>> [root@node001 clvmd]# clvmd status
>> clvmd failed in initialisation
>> 
>> Any ideas?
>> 
>> Thanks,
>> 
>> Andrew
> 
> Can you paste your cluster.conf please? I suspect something went wrong, it tried to fence and then failed to do so, so it's blocked.

:) I had two node id's the same.

Thanks

Andrew

> 
> -- 
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without access to education?




From shanti.pahari@sierra.sg Fri Oct 12 15:48:19 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJmIAW015154 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 15:48:19 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJmDrE010292
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:48:13 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CJmAeH019759
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:48:11 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 019CA25DF9CB
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GJ0RKZEOnQhT for <linux-cluster@redhat.com>;
	Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id 272D325DF9C2
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <linux-cluster@redhat.com>
Date: Sat, 13 Oct 2012 03:47:19 +0800 (SGT)
Message-ID: <423ded17.00000e6c.00000023@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00AE_01CDA8F5.87BDCFF0"
Thread-Index: Ac2oslJlfI6juIErTrusxz/czYSAsQ==
Content-Language: en-sg
X-Originating-IP: [119.56.113.125]
X-RedHat-Spam-Score: -4.044  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 19:48:20 -0000

This is a multipart message in MIME format.

------=_NextPart_000_00AE_01CDA8F5.87BDCFF0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi ,

 

When I added FC external disk in RHEL 6.1 it didn't load in /dev/mapper .

After reboot also it didn't detect.

Any help ? 

Highly appreciated.

 

thanks


------=_NextPart_000_00AE_01CDA8F5.87BDCFF0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>Hi =
,<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>When I added FC external disk in RHEL 6.1 it =
didn&#8217;t load in /dev/mapper .<o:p></o:p></p><p =
class=3DMsoNormal>After reboot also it didn&#8217;t =
detect.<o:p></o:p></p><p class=3DMsoNormal>Any help ? <o:p></o:p></p><p =
class=3DMsoNormal>Highly appreciated.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>thanks<o:p></o:p></p></div></body></html>
------=_NextPart_000_00AE_01CDA8F5.87BDCFF0--


From lists@alteeve.ca Fri Oct 12 15:53:20 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJrKC0015585 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 15:53:20 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CJrE7r011446
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:53:15 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CJrDup028879
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 15:53:13 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 47531422488;
	Fri, 12 Oct 2012 15:53:11 -0400 (EDT)
Message-ID: <50787528.7000602@alteeve.ca>
Date: Fri, 12 Oct 2012 15:53:12 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: Andrew Holway <a.holway@syseleven.de>
References: <1D60B84E-0ABD-4A5C-8E53-67D1EA796537@syseleven.de>
	<50783724.5040703@alteeve.ca>
	<48CCA736-1A1B-43F5-B94E-8C9EE28E0384@syseleven.de>
In-Reply-To: <48CCA736-1A1B-43F5-B94E-8C9EE28E0384@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] some clvmd / locking problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 19:53:21 -0000

On 10/12/2012 02:52 PM, Andrew Holway wrote:
>
> On Oct 12, 2012, at 5:28 PM, Digimer wrote:
>
>> On 10/12/2012 11:22 AM, Andrew Holway wrote:
>>> Hello,
>>>
>>> I am trying to set up a 4 node cluster with a shared iSCSI storage device.
>>>
>>> I cannot start clvmd: service clvmd start just hangs.
>>>
>>> I cannot stop cman:
>>>
>>> node001:	Working directory: /root
>>> node001:	Stopping cluster:
>>> node001:	   Leaving fence domain... found dlm lockspace /sys/kernel/dlm/clvmd
>>> node001:	fence_tool: cannot leave due to active systems
>>> node001:	[FAILED]
>>>
>>> I find these errors in /var/log/cluster/dlm_controld.log
>>>
>>> Oct 12 17:12:13 dlm_controld daemon cpg_join error retrying
>>> Oct 12 17:12:23 dlm_controld daemon cpg_join error retrying
>>> Oct 12 17:12:33 dlm_controld daemon cpg_join error retrying
>>>
>>> [root@node001 clvmd]# clvmd status
>>> clvmd failed in initialisation
>>>
>>> Any ideas?
>>>
>>> Thanks,
>>>
>>> Andrew
>>
>> Can you paste your cluster.conf please? I suspect something went wrong, it tried to fence and then failed to do so, so it's blocked.
>
> :) I had two node id's the same.
>
> Thanks
>
> Andrew

Heh, I've done that before, too. >_>

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?


From raju.rajsand@gmail.com Fri Oct 12 16:08:25 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CK8Pj4018018 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 16:08:25 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9CK8KMM014826
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 16:08:20 -0400
Received: from mail-oa0-f46.google.com (mail-oa0-f46.google.com
	[209.85.219.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CK8J6B016245
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 16:08:20 -0400
Received: by mail-oa0-f46.google.com with SMTP id h16so3863372oag.33
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 13:08:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type:content-transfer-encoding;
	bh=DRD5LusZRYXGl6JCGpZg+E6F3miusd6gZ/KskGF3IQY=;
	b=zocjJNoe3d4vY8+usji5yAEQ8eQpXPZ6OvrM0CVho7bnGOq0vY7lLb6mSbMvy+Krlk
	A27osgXeBm+qCrdFIpTK2B9BRGo7SVoW+RTWmgAzZSiVDVbNYnKkRSTDHTeCAvpZiQMi
	9HJgw6tY7zCyjSRfBx4bs4LKV863+emwvExQ9Z4EkgULf5HPW9oywsj4LPHowHnn/7cu
	Vfyns3+HBGIpmsa1zD99M61DCb3z1i0z5+BvbmJt9OYo+wWFktjDtvhjqToC1C0T2DGe
	oP872CFNVbWOkkAmoaIgmu97BTHLFWFmw+jMME06oh8e7R6a8TOkTwKl2Y4aO1GLdPqb
	VxLA==
MIME-Version: 1.0
Received: by 10.60.14.165 with SMTP id q5mr4518137oec.28.1350072024403; Fri,
	12 Oct 2012 13:00:24 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Fri, 12 Oct 2012 13:00:24 -0700 (PDT)
In-Reply-To: <423ded17.00000e6c.00000023@sierra-A66>
References: <423ded17.00000e6c.00000023@sierra-A66>
Date: Sat, 13 Oct 2012 01:30:24 +0530
X-Google-Sender-Auth: sLT9w74fL5tvHC_gk-vuUVnXPF8
Message-ID: <CA+YdgaqU_FwwpR2=inBDYKBMkjTa3G_wuK9=t3kvJ=aqNw5puQ@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=windows-1252
X-RedHat-Spam-Score: -1.077  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_SBL)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9CK8Pj4018018
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 20:08:25 -0000

Greetings,

On Sat, Oct 13, 2012 at 1:17 AM, Shanti Pahari <shanti.pahari@sierra.sg> wrote:
> When I added FC external disk in RHEL 6.1 it didnt load in /dev/mapper .
>
> After reboot also it didnt detect.
>
>
> Highly appreciated.

IMHO not appreciated.

You have been very cryptic in your answers.

Why don't you buy Redhat support?

-- 
Regards,

Rajagopal


From shanti.pahari@sierra.sg Fri Oct 12 19:38:55 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CNct09006150 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 12 Oct 2012 19:38:55 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9CNcnIt001349
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 19:38:50 -0400
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9CNchhC024021
	for <linux-cluster@redhat.com>; Fri, 12 Oct 2012 19:38:44 -0400
Received: from localhost (localhost [127.0.0.1])
	by mail.sierra.sg (Postfix) with ESMTP id 9F1E925DF9D6;
	Sat, 13 Oct 2012 07:37:52 +0800 (SGT)
X-Virus-Scanned: amavisd-new at sierra.sg
Received: from mail.sierra.sg ([127.0.0.1])
	by localhost (mail.sierra.sg [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id AW6hfn+j3SMC; Sat, 13 Oct 2012 07:37:48 +0800 (SGT)
Received: from mail.sierra.sg (mail.sierra.sg [115.42.187.205])
	by mail.sierra.sg (Postfix) with ESMTP id EE4D825DF9D3;
	Sat, 13 Oct 2012 07:37:47 +0800 (SGT)
From: "Shanti Pahari" <shanti.pahari@sierra.sg>
To: <bentech4you@gmail.com>
References: <423ded17.00000e6c.00000023@sierra-A66>
	<CA+C_GOVNjiaJ4HFUDE-Rn9SHrK7FTqSKMOiHtEqB6VH0m-5JMA@mail.gmail.com>
In-Reply-To: <CA+C_GOVNjiaJ4HFUDE-Rn9SHrK7FTqSKMOiHtEqB6VH0m-5JMA@mail.gmail.com>
Date: Sat, 13 Oct 2012 07:37:47 +0800 (SGT)
Message-ID: <6f3021d4.00000e6c.00000027@sierra-A66>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00BF_01CDA915.BA8295E0"
Thread-Index: AQEcqcI7fvq92Te0FkjibWAJzF4GfgLNSpnKmQHnBQA=
Content-Language: en-sg
X-Originating-IP: [119.56.115.152]
X-RedHat-Spam-Score: -2.421  (BAYES_00, HTML_MESSAGE, RP_MATCHES_RCVD,
	URIBL_SBL)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 12 Oct 2012 23:38:55 -0000

This is a multipart message in MIME format.

------=_NextPart_000_00BF_01CDA915.BA8295E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Multipathd is running

And when I try /sbin/multipath -v0  it didn't show anything but when lsmod
|grep dm then I saw dm-multipath here.

But still cannot detect.

 

[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0

[root@PDC-PIC-PL-01 ~]# modprobe dm-multipath

[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0

[root@PDC-PIC-PL-01 ~]# lsmod |grep dm

dm_mirror              14067  0 

dm_region_hash         12136  1 dm_mirror

dm_log                 10120  2 dm_mirror,dm_region_hash

dm_round_robin          2651  6 

dm_multipath           18266  4 dm_round_robin

dm_mod                 75539  16 dm_mirror,dm_log,dm_multipath

[root@PDC-PIC-PL-01 ~]# service multipathd status

multipathd (pid  1567) is running...

[root@PDC-PIC-PL-01 ~]#

 

From: Ben .T.George [mailto:bentech4you@gmail.com] 
Sent: Saturday, 13 October, 2012 4:57 AM
To: shanti.pahari@sierra.sg
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1

 

HI

 

check multipath demon is running or not..also check dm-multipath kernel
module is loaded or not

 

 

regards,

Ben

 

On Fri, Oct 12, 2012 at 10:47 PM, Shanti Pahari <shanti.pahari@sierra.sg>
wrote:

Hi ,

 

When I added FC external disk in RHEL 6.1 it didn't load in /dev/mapper .

After reboot also it didn't detect.

Any help ? 

Highly appreciated.

 

thanks


--
Linux-cluster mailing list
Linux-cluster@redhat.com
https://www.redhat.com/mailman/listinfo/linux-cluster





 

 


------=_NextPart_000_00BF_01CDA915.BA8295E0
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><META =
HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-SG link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>Multipathd is running<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>And when I try /sbin/multipath &#8211;v0&nbsp; it didn&#8217;t show =
anything but when lsmod |grep dm then I saw dm-multipath =
here.<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>But still cannot detect.<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# modprobe dm-multipath<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# /sbin/multipath -v0<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# lsmod |grep dm<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_mirror&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp; 14067&nbsp; 0 <o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_region_hash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
12136&nbsp; 1 dm_mirror<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10120&nbsp; 2 =
dm_mirror,dm_region_hash<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_round_robin&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
2651&nbsp; 6 <o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_multipath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p; 18266&nbsp; 4 dm_round_robin<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>dm_mod&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 75539&nbsp; 16 =
dm_mirror,dm_log,dm_multipath<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]# service multipathd =
status<o:p></o:p></span></p><p class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>multipathd (pid&nbsp; 1567) is running...<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'>[root@PDC-PIC-PL-01 ~]#<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'font-size:11.0pt;font-family:"Calibri","sans-serif";color:#1F497=
D'><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal><b><span =
lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif"'>From:</span>=
</b><span lang=3DEN-US =
style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif"'> Ben =
.T.George [mailto:bentech4you@gmail.com] <br><b>Sent:</b> Saturday, 13 =
October, 2012 4:57 AM<br><b>To:</b> =
shanti.pahari@sierra.sg<br><b>Subject:</b> Re: [Linux-cluster] cannot =
detect SAN disk in RHEL6.1<o:p></o:p></span></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><div><p =
class=3DMsoNormal>HI<o:p></o:p></p><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal>check multipath demon is running or not..also check =
dm-multipath kernel module is loaded or not<o:p></o:p></p></div><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><div><p =
class=3DMsoNormal>regards,<o:p></o:p></p></div><div><p =
class=3DMsoNormal>Ben<o:p></o:p></p></div><div><p class=3DMsoNormal =
style=3D'margin-bottom:12.0pt'><o:p>&nbsp;</o:p></p><div><p =
class=3DMsoNormal>On Fri, Oct 12, 2012 at 10:47 PM, Shanti Pahari &lt;<a =
href=3D"mailto:shanti.pahari@sierra.sg" =
target=3D"_blank">shanti.pahari@sierra.sg</a>&gt; =
wrote:<o:p></o:p></p><div><div><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Hi =
,<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;<o:p><=
/o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>When I =
added FC external disk in RHEL 6.1 it didn&#8217;t load in /dev/mapper =
.<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>After =
reboot also it didn&#8217;t detect.<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Any help ? =
<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Highly =
appreciated.<o:p></o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>&nbsp;<o:p><=
/o:p></p><p class=3DMsoNormal =
style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>thanks<o:p><=
/o:p></p></div></div><p class=3DMsoNormal><br>--<br>Linux-cluster =
mailing list<br><a =
href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br>=
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" =
target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</=
a><o:p></o:p></p></div><p class=3DMsoNormal><br><br =
clear=3Dall><o:p></o:p></p><div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></div></div></body></html>
------=_NextPart_000_00BF_01CDA915.BA8295E0--


From a.holway@syseleven.de Sat Oct 13 06:40:21 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9DAeLtd004192 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 13 Oct 2012 06:40:21 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9DAeFku011072
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 06:40:16 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9DAeC3d013756
	for <Linux-cluster@redhat.com>; Sat, 13 Oct 2012 06:40:13 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for Linux-cluster@redhat.com; Sat, 13 Oct 2012 12:40:09 +0200
From: Andrew Holway <a.holway@syseleven.de>
Content-Type: text/plain; charset=us-ascii
Date: Sat, 13 Oct 2012 12:40:11 +0200
Message-Id: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
To: linux clustering <Linux-cluster@redhat.com>
Mime-Version: 1.0 (Apple Message framework v1278)
X-RedHat-Spam-Score: -4.743  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9DAeLtd004192
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Linux clustering for high availability databases
	and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 13 Oct 2012 10:40:21 -0000

Hello, 

We have been experimenting with various storage technologies in order to create moderately highly available database services.

I have the following equipment in my lab:

4x HP G8 servers with 
* Mellanox QDR InfiniBand 
* 10GE adapters
* Lots of memory and the latest, most powerful CPUS.
* Centos 6.0

Oracle ZFS appliance
* Infiniband 
* NFS (over ethernet and infiniband)
* iSCSI (over ethernet and infiniband)
* Various RDMA protocols that are not supported by oracle  on redhat.

Nimble Storage device
* iSCSI over 10G ethernet

Brocade 10G switches.

Can I have some guidance on possible setups for HA database services? I have tested and have a good understanding of all the technology components but I am a bit confused how I should be glueing them together. I need a focus :)

Thanks,

Andrew








From raju.rajsand@gmail.com Sat Oct 13 12:02:05 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9DG25tb014428 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 13 Oct 2012 12:02:05 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9DG20Ab004934
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 12:02:00 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9DG1uRu010805
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 12:01:59 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so4434449obb.33
	for <linux-cluster@redhat.com>; Sat, 13 Oct 2012 09:01:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=dlB/eVdlCV6DAvL1jlt8aUN6GAqw7OnGBM0UnycYaIk=;
	b=pgvJWRCHwPNKN+s9WDLGCXfr4yQLL2TVngs1Ox3MmVOFSq7fFL1lsx9UzXEmPNJ6l+
	/zw16+mKECgOwZxzNV7VV02Yauy4W/+R1rYw560A7tybvoT8Y7q0JGyxbBq7H0RFjs6S
	dTpVQBlSW77l3G1tkkEu6eFFZ7fBegNHhp2EsITNTM1AyExLGuCBjTh1v7iIeZUoQN6Z
	DSCoD4B32GXkhBignosel2eHNDiFtpBWAD3BVr4kKUy0JTWtYivZ9OEMKoYecU8csWK1
	wCh8a9WYloSdmWsW0UDleKQ8JoIV3YXWi4LzjoZjOptOs/k0Gl45YePsYqAF18FAIqlU
	ehyg==
MIME-Version: 1.0
Received: by 10.182.38.69 with SMTP id e5mr5993245obk.79.1350144119606; Sat,
	13 Oct 2012 09:01:59 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Sat, 13 Oct 2012 09:01:59 -0700 (PDT)
In-Reply-To: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
Date: Sat, 13 Oct 2012 21:31:59 +0530
X-Google-Sender-Auth: Gc-FjAskd6IA--pb4t3BRvBQYVU
Message-ID: <CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 13 Oct 2012 16:02:05 -0000

Greetings,

On Sat, Oct 13, 2012 at 4:10 PM, Andrew Holway <a.holway@syseleven.de> wrote:
> Hello,
>
> We have been experimenting with various storage technologies in order to create moderately highly available database services.
>
> Can I have some guidance on possible setups for HA database services? I have tested and have a good understanding of all the technology components but I am a bit confused how I should be glueing them together. I need a focus :)
>
> Thanks,

Do you mean active/active Oracle RAC type?

-- 
Regards,

Rajagopal


From heiko.nardmann@itechnical.de Sun Oct 14 10:06:11 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EE6BOG021251 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 10:06:11 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EE66T0009840
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:06:06 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de
	[212.227.126.186])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EE64AE001417
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:06:05 -0400
Received: from laptop.itechnical.de (p5B16242A.dip0.t-ipconnect.de
	[91.22.36.42])
	by mrelayeu.kundenserver.de (node=mrbap4) with ESMTP (Nemesis)
	id 0MVd4p-1SrDEa0u6h-00YQ6u; Sun, 14 Oct 2012 16:06:03 +0200
Message-ID: <507AC6CA.8080602@itechnical.de>
Date: Sun, 14 Oct 2012 16:06:02 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
In-Reply-To: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:NCqDYrhJE3Zhd2kSfB7lWj/yYyWM4i1UiDecPi990N8
	86O47MQVHbS03DxPNZC2bIyLeOsbPck/7y2s/QIZ0FNLTbSn1M
	gYuQ4MnCidCAaHmYb70otAJcXrCrE+CyFw9UKJo/QqPggUhmUJ
	boUYYyYIbU3zHxThKTlR7Ac4FISrjMtod/5shF+6ecgpZ+Tp6R
	4LIPu13DdduQOfb5L3qn+6ulA3m6FNLl0BHMnkmVLxesTrIzjd
	zsYsHuGvFcEjlchkUMIZlMFD7COXIkJPwkM04NY7lFTUDUHyYq
	LQtlqCTNoTCXLLQRL3x7SSuU63B13zRrCOyfbTzMNBKORd8h1Z
	H1l2/eTXqK4fC8tjqLupxBfOHUqbEXc0XuIw6wrSV
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 14:06:11 -0000

Hi,

RedHat provides support for setting up such scenarios. I recommend
buying RHEL and contacting them.


Kind regards,

    Heiko

Am 13.10.2012 12:40, schrieb Andrew Holway:
> Hello, 
>
> We have been experimenting with various storage technologies in order to create moderately highly available database services.
>
> I have the following equipment in my lab:
>
> 4x HP G8 servers with 
> * Mellanox QDR InfiniBand 
> * 10GE adapters
> * Lots of memory and the latest, most powerful CPUS.
> * Centos 6.0
>
> Oracle ZFS appliance
> * Infiniband 
> * NFS (over ethernet and infiniband)
> * iSCSI (over ethernet and infiniband)
> * Various RDMA protocols that are not supported by oracle  on redhat.
>
> Nimble Storage device
> * iSCSI over 10G ethernet
>
> Brocade 10G switches.
>
> Can I have some guidance on possible setups for HA database services? I have tested and have a good understanding of all the technology components but I am a bit confused how I should be glueing them together. I need a focus :)
>
> Thanks,
>
> Andrew
>
>


From raju.rajsand@gmail.com Sun Oct 14 10:38:25 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EEcPuG025167 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 10:38:25 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9EEcKq0030073
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:38:20 -0400
Received: from mail-oa0-f46.google.com (mail-oa0-f46.google.com
	[209.85.219.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EEcJST009210
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 10:38:19 -0400
Received: by mail-oa0-f46.google.com with SMTP id h16so5008733oag.33
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 07:38:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:x-google-sender-delegation:in-reply-to
	:references:date:x-google-sender-auth:message-id:subject:from:to
	:content-type; bh=4bVGjHmIxV6v0BYvU8B28LVU5NuuQGhxIl8Tx2XEItk=;
	b=L6AuqmQ+IprNKnaajiX6FW1m7C2EOYQJVD5zt4rqVjl8Tkz/NXUYO3DyMb0+YhpDXO
	Vb/blQCyoiPuLcNgpachiLDp+9c9JBiFeJeQhr9MpPlosQxG0rXRneNlEUH+B823yMe7
	0bFb4vnOc+WkLvOeJMBKr12femFjpy8Gw7Vp+M7EhlQOf+R7nkfHDock6XhuyHRNejN9
	M8Vs0JlpDE9gpAADkepgJA3NiDTZiw1ZKvtkRB1td5K2Jp7pfWpq+CICOWhXBjAukhPK
	PAHzGZ98YT7q6ciT/HA8zQnc1+zRRZIGOHSNVZ/epduGsjY84wUEj8bH7r/xznPlJXyq
	rTYg==
MIME-Version: 1.0
Received: by 10.182.54.103 with SMTP id i7mr7452157obp.62.1350225499055; Sun,
	14 Oct 2012 07:38:19 -0700 (PDT)
Sender: rajsand@gmail.com
X-Google-Sender-Delegation: rajsand@gmail.com
Received: by 10.76.94.236 with HTTP; Sun, 14 Oct 2012 07:38:18 -0700 (PDT)
In-Reply-To: <507AC6CA.8080602@itechnical.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<507AC6CA.8080602@itechnical.de>
Date: Sun, 14 Oct 2012 20:08:18 +0530
X-Google-Sender-Auth: Cy9nSvBXK5jIPBKGZClgbZRisMU
Message-ID: <CA+Ydgaqu94yzEbBoNvxQMNeuiAZyFSC4oi75jyRC29_4ex+MqA@mail.gmail.com>
From: Rajagopal Swaminathan <raju.rajsand@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.7  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 14:38:25 -0000

Greetings,


On Sun, Oct 14, 2012 at 7:36 PM, Heiko Nardmann
<heiko.nardmann@itechnical.de> wrote:
>
> RedHat provides support for setting up such scenarios. I recommend
> buying RHEL and contacting them.

++1

Please note that active/active file sharing is *very* different from
active/active DB server.

AFAIK, only Oracle RAC and IBM DB2 have Active/Active HA DB options:
no escape from spending money .... :)

-- 
Regards,

Rajagopal


From a.holway@syseleven.de Sun Oct 14 13:39:09 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHd8Sc016084 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 13:39:09 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHd3jL000563
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:39:03 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EHd0CJ003124
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:39:01 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for linux-cluster@redhat.com; Sun, 14 Oct 2012 19:38:58 +0200
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1278)
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
Date: Sun, 14 Oct 2012 19:38:57 +0200
Content-Transfer-Encoding: 7bit
Message-Id: <75F0F61B-117E-4EFE-B265-C61DB52C75D0@syseleven.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
To: linux clustering <linux-cluster@redhat.com>
X-RedHat-Spam-Score: -2.988  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
	databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 17:39:09 -0000

> 
> Do you mean active/active Oracle RAC type?

No, Perhaps active / passive mysql type.



> 
> -- 
> Regards,
> 
> Rajagopal
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster



From a.holway@syseleven.de Sun Oct 14 13:57:47 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHvkl3018157 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 13:57:47 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EHvf0n025673
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:57:41 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EHvcAP018326
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 13:57:39 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from [IPv6:::1] ([37.44.1.226])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for linux-cluster@redhat.com; Sun, 14 Oct 2012 19:57:36 +0200
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1278)
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
Date: Sun, 14 Oct 2012 19:57:24 +0200
Message-Id: <8114940B-2405-4A7B-A189-71B50666B67E@syseleven.de>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<CA+Ydgaq1HZQ3OYgEibWWqnVnHJKR=zYkSpgv6CO_P7wk0pvkiA@mail.gmail.com>
To: linux clustering <linux-cluster@redhat.com>
X-RedHat-Spam-Score: -2.988  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9EHvkl3018157
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
	databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 17:57:47 -0000

> 
> Do you mean active/active Oracle RAC type?

We are using a lot Mysql in house. Perhaps high availability is the wrong phrase.

More Available perhaps?

> 
> -- 
> Regards,
> 
> Rajagopal
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster




From christian.masopust@siemens.com Sun Oct 14 15:37:00 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9EJaxma028699 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 14 Oct 2012 15:36:59 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9EJasY2001881
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 15:36:54 -0400
Received: from david.siemens.de (david.siemens.de [192.35.17.14])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9EJapoi020682
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 15:36:52 -0400
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.13.6/8.13.6) with ESMTP id q9EJaoFF003677
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 21:36:51 +0200
Received: from ATVIES9916TMSX.ww300.siemens.net
	(atvies9916tmsx.ww300.siemens.net [158.226.134.166])
	by mail1.siemens.de (8.13.6/8.13.6) with ESMTP id q9EJaomn032293
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <linux-cluster@redhat.com>; Sun, 14 Oct 2012 21:36:50 +0200
Received: from ATVIES9917VMSX.ww300.siemens.net ([169.254.1.101]) by
	ATVIES9916TMSX.ww300.siemens.net ([158.226.134.166]) with mapi;
	Sun, 14 Oct 2012 21:36:50 +0200
From: "Masopust, Christian" <christian.masopust@siemens.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Sun, 14 Oct 2012 21:36:48 +0200
Thread-Topic: [Linux-cluster] Linux clustering for high availability
	databases and other services
Thread-Index: Ac2qFnsmmtB0mWFATw2+bG5NmSqE4QALJR9Q
Message-ID: <C3B6F57F6F0CE34093FF52B3FFBEFA7C0144E493B5D6@ATVIES9917VMSX.ww300.siemens.net>
References: <344E72A6-BFE0-4413-88AD-8A066ED39D54@syseleven.de>
	<507AC6CA.8080602@itechnical.de>
In-Reply-To: <507AC6CA.8080602@itechnical.de>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9EJaxma028699
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Linux clustering for high availability
 databases and other services
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 14 Oct 2012 19:37:00 -0000


Hi Andrew,

maybe I understand you completely wrong, but...

Do you know "Galera Cluster" ?  If you are on MySQL maybe
you can give it a try?

br,
christian

> Am 13.10.2012 12:40, schrieb Andrew Holway:
> > Hello, 
> >
> > We have been experimenting with various storage 
> technologies in order to create moderately highly available 
> database services.
> >
> > I have the following equipment in my lab:
> >
> > 4x HP G8 servers with 
> > * Mellanox QDR InfiniBand 
> > * 10GE adapters
> > * Lots of memory and the latest, most powerful CPUS.
> > * Centos 6.0
> >
> > Oracle ZFS appliance
> > * Infiniband 
> > * NFS (over ethernet and infiniband)
> > * iSCSI (over ethernet and infiniband)
> > * Various RDMA protocols that are not supported by oracle  
> on redhat.
> >
> > Nimble Storage device
> > * iSCSI over 10G ethernet
> >
> > Brocade 10G switches.
> >
> > Can I have some guidance on possible setups for HA database 
> services? I have tested and have a good understanding of all 
> the technology components but I am a bit confused how I 
> should be glueing them together. I need a focus :)
> >
> > Thanks,
> >
> > Andrew
> >
> >
> 
> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
> 


From bmr@redhat.com Mon Oct 15 07:08:21 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FB8LSt018992 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 15 Oct 2012 07:08:21 -0400
Received: from bmr.usersys.redhat.com (dhcp-1-199.fab.redhat.com [10.33.1.199])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FB8DWD018669
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Mon, 15 Oct 2012 07:08:15 -0400
Message-ID: <507BEE9D.10304@redhat.com>
Date: Mon, 15 Oct 2012 12:08:13 +0100
From: "Bryn M. Reeves" <bmr@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:13.0) Gecko/20120605 Thunderbird/13.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <423ded17.00000e6c.00000023@sierra-A66>
In-Reply-To: <423ded17.00000e6c.00000023@sierra-A66>
X-Enigmail-Version: 1.4.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] cannot detect SAN disk in RHEL6.1
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 15 Oct 2012 11:08:22 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/12/2012 08:47 PM, Shanti Pahari wrote:
> When I added FC external disk in RHEL 6.1 it didn't load in
> /dev/mapper .
> 
> After reboot also it didn't detect.

Check for SCSI devices being registered (/proc/scsi/scsi, lsscsi and
dmesg).

Also read: http://tinyurl.com/93rnlbn [access.redhat.com, RHEL Storage
Administration Guide).

Regards,
Bryn.
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAlB77p0ACgkQ6YSQoMYUY94sBwCdFpKSB5gdgdR27CcoE/RTTPkO
xXsAoIPFK1KA2CpHgsYHaubW5s1ocIWg
=XaKW
-----END PGP SIGNATURE-----


From epretorious@yahoo.com Mon Oct 15 16:41:06 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FKf6Ub030070 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 15 Oct 2012 16:41:06 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9FKf1Dd012361
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 16:41:01 -0400
Received: from nm24-vm3.bullet.mail.ne1.yahoo.com
	(nm24-vm3.bullet.mail.ne1.yahoo.com [98.138.91.154])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9FKf0Pm024030
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 16:41:00 -0400
Received: from [98.138.90.51] by nm24.bullet.mail.ne1.yahoo.com with NNFMP;
	15 Oct 2012 20:41:00 -0000
Received: from [98.138.89.166] by tm4.bullet.mail.ne1.yahoo.com with NNFMP;
	15 Oct 2012 20:41:00 -0000
Received: from [127.0.0.1] by omp1022.mail.ne1.yahoo.com with NNFMP;
	15 Oct 2012 20:41:00 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 300090.35892.bm@omp1022.mail.ne1.yahoo.com
Received: (qmail 35629 invoked by uid 60001); 15 Oct 2012 20:41:00 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1350333660; bh=hTwMfHFENWTJkmqUf4bpS0Ritw1pvyfJkAbRr1AaSGc=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
	b=t4Tcqo+DiIUvn9R0sqvdG2qI4Ei5Vz/ss7u/rGQ+LyQdcmNXToGcLvcroNqoiQuoyFEYF0yo8TjFYQddbieQd0gol5vyG2fLourGDP9RNrcm2f6a8sJg1cqs8lnTjqZv3Go+rdknlDgQFjgSZtF9OlUn7It8cD5NvSm3lpJb4aM=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
	b=ZMuNS94OT681vzBna8eZNbt1PSOUGPjHMl8yehegupyDNgLxp0s4hFaoy2ZJHPLnaIvtOptmTwj13vbyq6WVzy9f+QIqSG1sDJRZDVVSIXANPt9DPef5iY6w000JSDBybWIvoAoHhJfHGbOGSkUk873QHBKk/+RmzFkqclVck78=;
X-YMail-OSG: Cx4ETNsVM1nml.AazX1rIX4g.W.SconUSBJTllpqa6ZmETi
	h18p59iRt7kf1q0fd_ikCwu05ZGKfsx2pSFZGJOb80.a__nCnDCDD4dGqQsQ
	uqpDJMC3L0.45JiXwg8.M1Iq4z5j8fw1IAsvoUjfImMy0Nne8WxSp6.cfTfI
	EqDz0OIdWUeKu2Xum30XWod7oW__QobZ8n.X43zWJoUTribMLwNHHsyb1ZUN
	4AA3Qeh6tS90Gm648yGB7PmmtpeANtitDfJO.c03SwVcw2y8K5CjKH60vdev
	dxEy6hrD6nhVNhLDoPlt1I0C6xzOeSD4cHZm3U4WhbUY5cpiw0sHO9rZXru8
	WBQOS1a2Bh42jXY8PbCCvm.ddtD.GyFaJNuYXfvJdE9D7Y902F_08Gd_EMQc
	lestOuOXek.0HihJ7VaxC_RxoT52p2nJGA0ZSo2PbrBMimgMYAr3hFL9vyiC
	zaRob2UXsiWsz5SoE387n6QKT7B497U6PfK1qchaaAqqoMFTcL1ut
Received: from [74.197.253.230] by web121705.mail.ne1.yahoo.com via HTTP;
	Mon, 15 Oct 2012 13:41:00 PDT
X-Rocket-MIMEInfo: 001.001,
	SSd2ZSBiZWVuIHJlYWRpbmcgYWJvdXQgY0xWTSBhbmQgSSdtIGhhdmluZyBhIGRpZmZpY3VsdCB0aW1lIGdldHRpbmcgbXkgbWluZCB3cmFwcGVkIGFyb3VuZCBUaGUgQmlnIFBpY3R1cmUuCgpMb29raW5nIGF0IEZpZ3VyZcKgMS4yLCDigJxDTFZNIE92ZXJ2aWV3LCBvZsKgIHRoZSBSZWQgSGF0IExWTSBBZG1pbmlzdHJhdG9yIEd1aWRlIEknbSBhIGJpdCBwdXp6bGVkLiBTcGVjaWZpY2FsbHk6IEFyZSBzdG9yYWdlIGRldmljZXMgZXhwb3J0ZWQgZGlyZWN0bHkgdG8gY0xWTSBkYWVtb25zPyBPciBhcmUgTFYBMAEBAQE-
Message-ID: <1350333660.23559.YahooMailNeo@web121705.mail.ne1.yahoo.com>
Date: Mon, 15 Oct 2012 13:41:00 -0700 (PDT)
From: Eric <epretorious@yahoo.com>
To: linux clustering <linux-cluster@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
X-RedHat-Spam-Score: -2.38  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, RCVD_IN_DNSWL_NONE, RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9FKf6Ub030070
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Getting started with cLVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Eric <epretorious@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 15 Oct 2012 20:41:06 -0000

I've been reading about cLVM and I'm having a difficult time getting my mind wrapped around The Big Picture.

Looking at Figure1.2, CLVM Overview, of the Red Hat LVM Administrator Guide I'm a bit puzzled. Specifically: Are storage devices exported directly to cLVM daemons? Or are LV's exported directly to cLVM daemonds for consumption? Or will another shared-disk protocol (e.g., GNBD or iSCSI) be required for "the last mile"?

Eric Pretorious
Truckee, CA



From lists@alteeve.ca Mon Oct 15 17:37:19 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9FLbJBM003383 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 15 Oct 2012 17:37:19 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9FLbElo031220
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 17:37:14 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9FLbC7n013612
	for <linux-cluster@redhat.com>; Mon, 15 Oct 2012 17:37:12 -0400
Received: from lemass.alteeve.ca (lns1-pool-d8428dc1.dsl.look.ca
	[216.66.141.193])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 4F9AB42249F;
	Mon, 15 Oct 2012 17:37:09 -0400 (EDT)
Message-ID: <507C8206.6090908@alteeve.ca>
Date: Mon, 15 Oct 2012 17:37:10 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: Eric <epretorious@yahoo.com>, linux clustering <linux-cluster@redhat.com>
References: <1350333660.23559.YahooMailNeo@web121705.mail.ne1.yahoo.com>
In-Reply-To: <1350333660.23559.YahooMailNeo@web121705.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Getting started with cLVM
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 15 Oct 2012 21:37:20 -0000

On 10/15/2012 04:41 PM, Eric wrote:
> I've been reading about cLVM and I'm having a difficult time getting my mind wrapped around The Big Picture.
>
> Looking at Figure 1.2, CLVM Overview, of  the Red Hat LVM Administrator Guide I'm a bit puzzled. Specifically: Are storage devices exported directly to cLVM daemons? Or are LV's exported directly to cLVM daemonds for consumption? Or will another shared-disk protocol (e.g., GNBD or iSCSI) be required for "the last mile"?
>
> Eric Pretorious
> Truckee, CA

Clustered LVM, fundamentally, swaps out the normal internal locking to 
DLM (distributed lock manager), which is provided by cman under EL6 and 
corosync (v2+). Beyond this, you can think of LVM as you always have.

So, commonly, the PV(s) would be some form of shared storage; DRBD and 
SANs are the most common I think. When you pvcreate /dev/foo (foo being 
your shared storage), you can immediately 'pvscan' on the other nodes 
and see the new PV. Likewise, once you assign the PV to a VG on one 
node, 'vgscan' on all the other nodes will immediately see the 
new/expanded VG. Likewise with LV creation/resize/removes.

Beyond this, there is nothing further special about clustered LVM over 
"normal" LVM.

hth

digimer

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?


From cfeist@redhat.com Tue Oct 16 20:02:48 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9H02ls6029201 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 16 Oct 2012 20:02:47 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9H02fOO022775; Tue, 16 Oct 2012 20:02:42 -0400
Message-ID: <507DF5A1.3060905@redhat.com>
Date: Tue, 16 Oct 2012 19:02:41 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
References: <50736F78.3060906@redhat.com>
In-Reply-To: <50736F78.3060906@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 00:02:48 -0000

On 10/08/12 19:27, Chris Feist wrote:
> We've been making improvements to the pcs (pacemaker/corosync configuration
> system) command line tool over the past few months.
>
> Currently you can setup a basic cluster (including configuring corosync 2.0 udpu).
>
> David Vossel has also created a version of the "Clusters from Scratch" document
> that illustrates setting up a cluster using pcs.  This should be showing up
> shortly.

Just an update, I've updated the pcs (to 0.9.27) and included the pcsd daemon 
with the fedora packages.  You can grab the updated packages here:

http://people.redhat.com/cfeist/pcs/

And you should be able to used the new Clusters from Scratch optimized for the 
pcs CLI here: http://www.clusterlabs.org/doc/

Just a couple things to note (this should be shortly updated in the notes).

To run pcs on Fedora 17/18 you'll need to turn off selinux & disable the 
firewall (or at least allow traffic on port 2224).

To disable SELinux set 'SELINUX=permissive' in /etc/selinux/config and reboot
To disable the firewall run 'systemctl stop iptables.service' (to permanently 
disable run 'systemctl disable iptables.service')

The pcs_passwd command has been removed.  In it's place you can do 
authentication with the hacluster user.  Just set the hacluster user password 
(passwd hacluster) and then use that user and password to authenticate with pcs.

If you have any questions or any issues don't hesitate to contact me, we're 
still working out the bugs in the new pcsd daemon and we appreciate all the 
feedback we can get.

Thanks,
Chris

>
> You can view the source here: https://github.com/feist/pcs/
>
> Or download the latest tarball:
> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>
> There is also a Fedora 18 package that will be included with the next release.
> You should be able to find that package in the following locations...
>
> RPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>
> SRPM:
> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>
> In the near future we are planning on having builds for SUSE & Ubuntu/Debian.
>
> We're also actively working on a GUI/Daemon that will allow control of your
> entire cluster from one node and/or a web browser.
>
> Please feel free to email me (cfeist@redhat.com) or open issues on the pcs
> project at github (https://github.com/feist/pcs/issues) if you have any
> questions or problems.
>
> Thanks!
> Chris
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org


From andrew@beekhof.net Tue Oct 16 22:09:26 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9H29Q7x009623 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 16 Oct 2012 22:09:26 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9H29Kwm013983
	for <linux-cluster@redhat.com>; Tue, 16 Oct 2012 22:09:20 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9H29JjY023335
	for <linux-cluster@redhat.com>; Tue, 16 Oct 2012 22:09:19 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so8152017obb.33
	for <linux-cluster@redhat.com>; Tue, 16 Oct 2012 19:09:19 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type:x-gm-message-state;
	bh=9dbmW89KvUYKzmMUhEN/sKDwaRMxQ7lvDKO4J2jxHnM=;
	b=G+MjAgAqHwtUVX4NwP9x/+H5OGcWZK1pAVC5mnc7kYw98zJPegYy81ZJcw4oZW/5UM
	bsWszL/6dzA5nyjP4mqO2r2Z6TGj1MGASrc1Z0XC+vTAhuzJWYf16Hw5JrcMsj28l6GY
	NDbJZjklewX66UkNpYjzRHwMfFZQ/R1yPkHoXLKou6xKMEFz42CyQjFEr/we32OqLIuE
	ALhoOuI8Hz6Uj6Tb75epXtrSqYVm875TGw+tnakomraqrkx4YzkmimckcXMgxLuZi/ce
	j4TC6kXau8BLJ/FoBD5dBwpdWaAUdjRGt7FT8VhNdTBYRteVohwQOPzjWiAXLRgBSRGZ
	c9wA==
MIME-Version: 1.0
Received: by 10.60.8.71 with SMTP id p7mr14436288oea.56.1350439758951; Tue, 16
	Oct 2012 19:09:18 -0700 (PDT)
Received: by 10.76.173.70 with HTTP; Tue, 16 Oct 2012 19:09:18 -0700 (PDT)
In-Reply-To: <507DF5A1.3060905@redhat.com>
References: <50736F78.3060906@redhat.com>
	<507DF5A1.3060905@redhat.com>
Date: Wed, 17 Oct 2012 13:09:18 +1100
Message-ID: <CAEDLWG23eoSyspSa1=PakrKvVxFrr9ShXibBPE480fJAGmQMZQ@mail.gmail.com>
From: Andrew Beekhof <andrew@beekhof.net>
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQmvVWxCp38JTHAGTi5SECPmsmnsIaQ6h8U/Yy5+PBQ42RomEDbAECbzpPZRf9AwCcEXpKoY
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 02:09:26 -0000

On Wed, Oct 17, 2012 at 11:02 AM, Chris Feist <cfeist@redhat.com> wrote:
> On 10/08/12 19:27, Chris Feist wrote:
>>
>> We've been making improvements to the pcs (pacemaker/corosync
>> configuration
>> system) command line tool over the past few months.
>>
>> Currently you can setup a basic cluster (including configuring corosync
>> 2.0 udpu).
>>
>> David Vossel has also created a version of the "Clusters from Scratch"
>> document
>> that illustrates setting up a cluster using pcs.  This should be showing
>> up
>> shortly.
>
>
> Just an update, I've updated the pcs (to 0.9.27) and included the pcsd
> daemon with the fedora packages.  You can grab the updated packages here:
>
> http://people.redhat.com/cfeist/pcs/
>
> And you should be able to used the new Clusters from Scratch optimized for
> the pcs CLI here: http://www.clusterlabs.org/doc/

Those docs have now been updated to match the new release.

>
> Just a couple things to note (this should be shortly updated in the notes).
>
> To run pcs on Fedora 17/18 you'll need to turn off selinux & disable the
> firewall (or at least allow traffic on port 2224).
>
> To disable SELinux set 'SELINUX=permissive' in /etc/selinux/config and
> reboot
> To disable the firewall run 'systemctl stop iptables.service' (to
> permanently disable run 'systemctl disable iptables.service')
>
> The pcs_passwd command has been removed.  In it's place you can do
> authentication with the hacluster user.  Just set the hacluster user
> password (passwd hacluster) and then use that user and password to
> authenticate with pcs.
>
> If you have any questions or any issues don't hesitate to contact me, we're
> still working out the bugs in the new pcsd daemon and we appreciate all the
> feedback we can get.
>
> Thanks,
> Chris
>
>
>>
>> You can view the source here: https://github.com/feist/pcs/
>>
>> Or download the latest tarball:
>> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>>
>> There is also a Fedora 18 package that will be included with the next
>> release.
>> You should be able to find that package in the following locations...
>>
>> RPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>
>> SRPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>>
>> In the near future we are planning on having builds for SUSE &
>> Ubuntu/Debian.
>>
>> We're also actively working on a GUI/Daemon that will allow control of
>> your
>> entire cluster from one node and/or a web browser.
>>
>> Please feel free to email me (cfeist@redhat.com) or open issues on the pcs
>> project at github (https://github.com/feist/pcs/issues) if you have any
>> questions or problems.
>>
>> Thanks!
>> Chris
>>
>> _______________________________________________
>> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
>> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>>
>> Project Home: http://www.clusterlabs.org
>> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
>> Bugs: http://bugs.clusterlabs.org
>
>
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org


From terance@socialtwist.com Wed Oct 17 09:12:28 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HDCSXX032295 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 09:12:28 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HDCNGj007455
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:12:23 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HDCMF0021230
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:12:22 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so7258026pbb.33
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 06:12:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=2iz8qv92aEOdl+ign+dGfOP/glj2/HsWBkGHVpT8UnI=;
	b=D2RQcYaHNMA6AjmS0x4aGgpwU6161YiY/6WclkFly7CbExjBlhfWt0UdlgiZ52AH5r
	hdtzs05/+fkRWoiO4bYgEDqi+HJgK08afh5NNd8cAdOxXNq2UiC6FtOwPqbm09qvLz15
	3zJvK73F8HE6Ls24RLBEAZ2GjhQvXhK5LRaTFWaLYv8jAOuQuSRTWHVyp586qwe1qVzF
	W3XsTpv0Hh2mcu7FzmI3B7UgxMpRjnjjzJ5OrF4sOq8dhe0jEE2czVLR1ZC1/65zTb5w
	RBOEW8GLneBWxu+j5YZgTOGI+CguflP/Hf3J0CrMG/g9Kc3SWEaKNaUgatrCGVE1RKKC
	JIRQ==
MIME-Version: 1.0
Received: by 10.68.125.230 with SMTP id mt6mr17121080pbb.110.1350479541737;
	Wed, 17 Oct 2012 06:12:21 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Wed, 17 Oct 2012 06:12:21 -0700 (PDT)
In-Reply-To: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
Date: Wed, 17 Oct 2012 18:42:21 +0530
Message-ID: <CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=047d7b2e44465c990304cc4105a3
X-Gm-Message-State: ALoCoQnjCcRB6AMCwXH82D835+Gm9uP/2LoY7lKYMFLQXMRKzdkOetyDcy1E7fucp140M6SnlAQP
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 13:12:28 -0000

--047d7b2e44465c990304cc4105a3
Content-Type: text/plain; charset=ISO-8859-1

Hi,

We're trying to create a cluster in which the nodes lie in 2 different
LANs. Since the nodes lie in different networks, they cannot resolve the
other node by their internal IP. So in my cluster.conf file, I've provided
their external IPs. But now when I start CMAN service, I get the following
error.

-----------------------------------

Starting cluster:
   Checking Network Manager... [  OK  ]
   Global setup... [  OK  ]
   Loading kernel modules... [  OK  ]
   Mounting configfs... [  OK  ]
   Starting cman... Cannot find node name in cluster.conf
Unable to get the configuration
Cannot find node name in cluster.conf
cman_tool: corosync daemon didn't start
[FAILED]

-------------------------------------

My cluster.conf file is as below

-------------------------------------

<?xml version="1.0"?>
<!--
This is an example of a cluster.conf file to run qpidd HA under rgmanager.

NOTE: fencing is not shown, you must configure fencing appropriately for
your cluster.
-->

<cluster name="test-cluster" config_version="18">
  <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
       for quorum. -->
  <clusternodes>
    <clusternode name="*external-ip-1*" nodeid="1"/>
    <clusternode name="*external-ip-2*" nodeid="2"/>
  </clusternodes>
  <cman two_node="1" expected_votes="1" transport="udpu">
  </cman>
  <!-- Resouce Manager configuration. -->
  <rm>
    <!--
        There is a failoverdomain for each node containing just that node.
        This lets us stipulate that the qpidd service should always run on
each node.
    -->
    <failoverdomains>
      <failoverdomain name="east-domain" restricted="1">
        <failoverdomainnode name="*external-ip-1*"/>
      </failoverdomain>
      <failoverdomain name="west-domain" restricted="1">
        <failoverdomainnode name="*external-ip-2*"/>
      </failoverdomain>
    </failoverdomains>

    <resources>
      <!-- This script starts a qpidd broker acting as a backup. -->
      <script file="/usr/local/etc/init.d/qpidd" name="qpidd"/>

      <!-- This script promotes the qpidd broker on this node to primary.
-->
      <script file="/usr/local/etc/init.d/qpidd-primary"
name="qpidd-primary"/>
    </resources>

    <!-- There is a qpidd service on each node, it should be restarted if
it fails. -->
    <service name="east-qpidd-service" domain="east-domain"
recovery="restart">
      <script ref="qpidd"/>
    </service>
    <service name="west-qpidd-service" domain="west-domain"
recovery="restart">
      <script ref="qpidd"/>
    </service>

    <!-- There should always be a single qpidd-primary service, it can run
on any node. -->
    <service name="qpidd-primary-service" autostart="1" exclusive="0"
recovery="relocate">
      <script ref="qpidd-primary"/>
    </service>
  </rm>
</cluster>
------------------------------------------------

Thanks,
Terance

--047d7b2e44465c990304cc4105a3
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><div class=3D"gmail_quote"><div><br></div><div>We&#39;re trying to c=
reate a cluster in which the nodes lie in 2 different LANs. Since the nodes=
 lie in different networks, they cannot resolve the other node by their int=
ernal IP. So in my cluster.conf file, I&#39;ve provided their external IPs.=
 But now when I start CMAN service, I get the following error.</div>

<div><br></div><div>-----------------------------------</div><div><br></div=
><div><div>Starting cluster:</div><div>=A0 =A0Checking Network Manager... [=
 =A0OK =A0]</div><div>=A0 =A0Global setup... [ =A0OK =A0]</div><div>=A0 =A0=
Loading kernel modules... [ =A0OK =A0]</div>

<div>=A0 =A0Mounting configfs... [ =A0OK =A0]</div><div>=A0 =A0Starting cma=
n... Cannot find node name in cluster.conf</div><div>Unable to get the conf=
iguration</div><div>Cannot find node name in cluster.conf</div><div>cman_to=
ol: corosync daemon didn&#39;t start</div>

<div>[FAILED]</div></div><div><br></div><div>------------------------------=
-------</div><div><br></div><div>My cluster.conf file is as below</div><div=
><br></div><div>-------------------------------------</div><div><br></div>

<div><div>&lt;?xml version=3D&quot;1.0&quot;?&gt;</div><div>&lt;!--</div><d=
iv>This is an example of a cluster.conf file to run qpidd HA under rgmanage=
r.</div><div><br></div><div>NOTE: fencing is not shown, you must configure =
fencing appropriately for your cluster.</div>

<div>--&gt;</div><div><br></div><div>&lt;cluster name=3D&quot;test-cluster&=
quot; config_version=3D&quot;18&quot;&gt;</div><div>=A0 &lt;!-- The cluster=
 has 2 nodes. Each has a unique nodid and one vote</div><div>=A0 =A0 =A0 =
=A0for quorum. --&gt;</div>

<div>=A0 &lt;clusternodes&gt;</div><div>=A0 =A0 &lt;clusternode name=3D&quo=
t;<i>external-ip-1</i>&quot; nodeid=3D&quot;1&quot;/&gt;</div><div>=A0 =A0 =
&lt;clusternode name=3D&quot;<i>external-ip-2</i>&quot; nodeid=3D&quot;2&qu=
ot;/&gt;</div>

<div>=A0 &lt;/clusternodes&gt;</div><div>=A0 &lt;cman two_node=3D&quot;1&qu=
ot; expected_votes=3D&quot;1&quot; transport=3D&quot;udpu&quot;&gt;</div><d=
iv>=A0 &lt;/cman&gt;</div><div>=A0 &lt;!-- Resouce Manager configuration. -=
-&gt;</div>

<div>=A0 &lt;rm&gt;</div><div>=A0 =A0 &lt;!--</div><div>=A0 =A0 =A0 =A0 The=
re is a failoverdomain for each node containing just that node.</div><div>=
=A0 =A0 =A0 =A0 This lets us stipulate that the qpidd service should always=
 run on each node.</div>

<div>=A0 =A0 --&gt;</div><div>=A0 =A0 &lt;failoverdomains&gt;</div><div>=A0=
 =A0 =A0 &lt;failoverdomain name=3D&quot;east-domain&quot; restricted=3D&qu=
ot;1&quot;&gt;</div><div>=A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quo=
t;<i>external-ip-1</i>&quot;/&gt;</div>

<div>=A0 =A0 =A0 &lt;/failoverdomain&gt;</div><div>=A0 =A0 =A0 &lt;failover=
domain name=3D&quot;west-domain&quot; restricted=3D&quot;1&quot;&gt;</div><=
div>=A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quot;<i>external-ip-2</i=
>&quot;/&gt;</div><div>

=A0 =A0 =A0 &lt;/failoverdomain&gt;</div><div>=A0 =A0 &lt;/failoverdomains&=
gt;</div><div><br></div><div>=A0 =A0 &lt;resources&gt;</div><div>=A0 =A0 =
=A0 &lt;!-- This script starts a qpidd broker acting as a backup. --&gt;</d=
iv><div>=A0 =A0 =A0 &lt;script file=3D&quot;/usr/local/etc/init.d/qpidd&quo=
t; name=3D&quot;qpidd&quot;/&gt;</div>

<div><br></div><div>=A0 =A0 =A0 &lt;!-- This script promotes the qpidd brok=
er on this node to primary. --&gt;</div><div>=A0 =A0 =A0 &lt;script file=3D=
&quot;/usr/local/etc/init.d/qpidd-primary&quot; name=3D&quot;qpidd-primary&=
quot;/&gt;</div>

<div>=A0 =A0 &lt;/resources&gt;</div><div><br></div><div>=A0 =A0 &lt;!-- Th=
ere is a qpidd service on each node, it should be restarted if it fails. --=
&gt;</div><div>=A0 =A0 &lt;service name=3D&quot;east-qpidd-service&quot; do=
main=3D&quot;east-domain&quot; recovery=3D&quot;restart&quot;&gt;</div>

<div>=A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;</div><div>=A0 =A0 =
&lt;/service&gt;</div><div>=A0 =A0 &lt;service name=3D&quot;west-qpidd-serv=
ice&quot; domain=3D&quot;west-domain&quot; recovery=3D&quot;restart&quot;&g=
t;</div><div>=A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;</div>

<div>=A0 =A0 &lt;/service&gt;</div><div><br></div><div>=A0 =A0 &lt;!-- Ther=
e should always be a single qpidd-primary service, it can run on any node. =
--&gt;</div><div>=A0 =A0 &lt;service name=3D&quot;qpidd-primary-service&quo=
t; autostart=3D&quot;1&quot; exclusive=3D&quot;0&quot; recovery=3D&quot;rel=
ocate&quot;&gt;</div>

<div>=A0 =A0 =A0 &lt;script ref=3D&quot;qpidd-primary&quot;/&gt;</div><div>=
=A0 =A0 &lt;/service&gt;</div><div>=A0 &lt;/rm&gt;</div><div>&lt;/cluster&g=
t;</div></div><div>------------------------------------------------</div><d=
iv><br></div>

<div>Thanks,</div><div>Terance</div>
</div><br>

--047d7b2e44465c990304cc4105a3--


From lists@alteeve.ca Wed Oct 17 09:42:16 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HDgFHX003959 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 09:42:16 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HDgA6w000490
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:42:10 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HDg5q1030587
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 09:42:08 -0400
Received: from lemass.alteeve.ca (74-115-197-226.eng.wind.ca [74.115.197.226])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 24A1B422488;
	Wed, 17 Oct 2012 09:41:59 -0400 (EDT)
Message-ID: <507EB5A4.4020502@alteeve.ca>
Date: Wed, 17 Oct 2012 09:41:56 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
In-Reply-To: <CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 13:42:16 -0000

On 10/17/2012 09:12 AM, Terance Dias wrote:
> Hi,
> 
> We're trying to create a cluster in which the nodes lie in 2 different
> LANs. Since the nodes lie in different networks, they cannot resolve the
> other node by their internal IP. So in my cluster.conf file, I've provided
> their external IPs. But now when I start CMAN service, I get the following
> error.
> 
> NOTE: fencing is not shown, you must configure fencing appropriately for
> your cluster.

You do need fencing. Without *working* fencing, the first time something
goes wrong, your cluster will hang (by design).

> <cluster name="test-cluster" config_version="18">
>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>        for quorum. -->
>   <clusternodes>
>     <clusternode name="*external-ip-1*" nodeid="1"/>
>     <clusternode name="*external-ip-2*" nodeid="2"/>

You need to use names and these names need to resolve to an IP.
Whichever interface that IP matches will be used for cluster
communications. The ideal is to use `uname -n` from each node, though
this is more convention that a requirement.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?


From heiko.nardmann@itechnical.de Wed Oct 17 10:03:13 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HE3DT0007276 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 10:03:13 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HE37kD029203
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:03:07 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de [212.227.17.10])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HE35F0018851
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:03:06 -0400
Received: from laptop.itechnical.de
	(business-178-015-194-126.static.arcor-ip.net [178.15.194.126])
	by mrelayeu.kundenserver.de (node=mrbap1) with ESMTP (Nemesis)
	id 0MMpWJ-1TGUOE1JFv-008Zpe; Wed, 17 Oct 2012 16:03:05 +0200
Message-ID: <507EBA98.7040106@itechnical.de>
Date: Wed, 17 Oct 2012 16:03:04 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
In-Reply-To: <507EB5A4.4020502@alteeve.ca>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:asMqFemljGjITtdPaDnpM6D7IIymHZgAHuO7jPiIpTe
	3x2SkKk8tZv86UZhRDY55Ou9Pr2qtfWcriIza8SjmYzX7SMUxC
	CVqtAKYYuChmGNPaiP+3gI5jYf2bXe64L/cK2XLKblmRVwhp1t
	wB7loFN85KUczSQGi2T7wUiOPZnP1oXgloRVgFvHAnFKU9mKA5
	Ap6Y4W5I8JS+OulEE/ZTKeQZblPG+bVetUwP+Pd0gKqE0lOU20
	J0ZtcVubS2F+/tghkHlDLu9bm3ylgV0rbY3HQvWfB4xN0OIxfe
	Po6RcZS+fQENPuSYEDV9TP+g2qtFzCHli5djQytykjV4sDKadr
	C90RuKuoulSTRk8azZqTnvwtDZI9rYq7fnL4oJqsb
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 14:03:13 -0000

Sometimes I wonder whether an ML bot grepping for 'fencing' and
responding with something like 'Check fencing' might make sense ... ;-)

    Heiko

Am 17.10.2012 15:41, schrieb Digimer:
> On 10/17/2012 09:12 AM, Terance Dias wrote:
>> Hi,
>>
>> We're trying to create a cluster in which the nodes lie in 2 different
>> LANs. Since the nodes lie in different networks, they cannot resolve the
>> other node by their internal IP. So in my cluster.conf file, I've provided
>> their external IPs. But now when I start CMAN service, I get the following
>> error.
>>
>> NOTE: fencing is not shown, you must configure fencing appropriately for
>> your cluster.
> You do need fencing. Without *working* fencing, the first time something
> goes wrong, your cluster will hang (by design).
>
>> <cluster name="test-cluster" config_version="18">
>>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>>        for quorum. -->
>>   <clusternodes>
>>     <clusternode name="*external-ip-1*" nodeid="1"/>
>>     <clusternode name="*external-ip-2*" nodeid="2"/>
> You need to use names and these names need to resolve to an IP.
> Whichever interface that IP matches will be used for cluster
> communications. The ideal is to use `uname -n` from each node, though
> this is more convention that a requirement.
>


From lists@alteeve.ca Wed Oct 17 10:06:31 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HE6Vbj008068 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 10:06:31 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HE6POe030978
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:06:26 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HE6OWj008782
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 10:06:24 -0400
Received: from lemass.alteeve.ca (74-115-197-226.eng.wind.ca [74.115.197.226])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id D6B99422461;
	Wed, 17 Oct 2012 10:06:21 -0400 (EDT)
Message-ID: <507EBB5D.4020509@alteeve.ca>
Date: Wed, 17 Oct 2012 10:06:21 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca> <507EBA98.7040106@itechnical.de>
In-Reply-To: <507EBA98.7040106@itechnical.de>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 14:06:31 -0000

But but but, I'd have nothing useful left to add! :(

digimer

On 10/17/2012 10:03 AM, Heiko Nardmann wrote:
> Sometimes I wonder whether an ML bot grepping for 'fencing' and
> responding with something like 'Check fencing' might make sense ... ;-)
> 
>     Heiko
> 
> Am 17.10.2012 15:41, schrieb Digimer:
>> On 10/17/2012 09:12 AM, Terance Dias wrote:
>>> Hi,
>>>
>>> We're trying to create a cluster in which the nodes lie in 2 different
>>> LANs. Since the nodes lie in different networks, they cannot resolve the
>>> other node by their internal IP. So in my cluster.conf file, I've provided
>>> their external IPs. But now when I start CMAN service, I get the following
>>> error.
>>>
>>> NOTE: fencing is not shown, you must configure fencing appropriately for
>>> your cluster.
>> You do need fencing. Without *working* fencing, the first time something
>> goes wrong, your cluster will hang (by design).
>>
>>> <cluster name="test-cluster" config_version="18">
>>>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>>>        for quorum. -->
>>>   <clusternodes>
>>>     <clusternode name="*external-ip-1*" nodeid="1"/>
>>>     <clusternode name="*external-ip-2*" nodeid="2"/>
>> You need to use names and these names need to resolve to an IP.
>> Whichever interface that IP matches will be used for cluster
>> communications. The ideal is to use `uname -n` from each node, though
>> this is more convention that a requirement.
>>
> 


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?


From terance@socialtwist.com Wed Oct 17 14:45:40 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HIjekI010146 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 14:45:40 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HIjZUS030164
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 14:45:35 -0400
Received: from mail-pa0-f46.google.com (mail-pa0-f46.google.com
	[209.85.220.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HIjXvF003363
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 14:45:33 -0400
Received: by mail-pa0-f46.google.com with SMTP id hz1so7550227pad.33
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 11:45:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type:x-gm-message-state;
	bh=EU8uUHw6vwjCxxxpLgsGikyNeoxDCiKBBgAjIqMiPxM=;
	b=acVdLG1mdXpfR3RDw4dFXbF7r048UzU/0c0EO+4EkvHXVNBouTqKrkzEujgz4Tc64g
	Ub5JEsssrq4ANcgtBir53cUiFOz5NiL9dC+LRVWZuZsu0YwbG+LPmoy+TmYaq7v0a/hO
	kCozftcP+x+ML5ukDZmb+l5ts0v/cAvwsAlqasL2BHCJfFBUEzYfroOkX/z1srU69QeR
	U87bH5ABtDMuQDlDV2zviDGmBNV1ZweUfZk0x+zj15b34oiUxH6ZS+6ipBmPbT4KQfsq
	0v3LAaQ2SQ/hPlnTviaXt4RhNwr8W2MViFEDoq5YmyrL7ut60kuVskNOh2Hh4o1ndmJ/
	zPWA==
MIME-Version: 1.0
Received: by 10.68.201.6 with SMTP id jw6mr11877413pbc.149.1350499533355; Wed,
	17 Oct 2012 11:45:33 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Wed, 17 Oct 2012 11:45:33 -0700 (PDT)
In-Reply-To: <507EB5A4.4020502@alteeve.ca>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
Date: Thu, 18 Oct 2012 00:15:33 +0530
Message-ID: <CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=047d7b15a97ff47af704cc45ac21
X-Gm-Message-State: ALoCoQnEthLNNgj84aLZm/IZnjFox8GuVu53d/oAjAUaAcufodbOGtLyqOIujd1pDJSPTOAN/Pj1
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 18:45:41 -0000

--047d7b15a97ff47af704cc45ac21
Content-Type: text/plain; charset=ISO-8859-1

I tried using public IP as well as names like 'ec2-node-1.amazonaws.com'
which is resolved to an IP by DNS lookup. In both cases I get the same
error I mentioned earlier.
If I give the internal IP of the node where I'm trying to run the CMAN
service, the service starts, but I still cannot get it to resolve the other
node since the other node is in a different network.

On Wed, Oct 17, 2012 at 7:11 PM, Digimer <lists@alteeve.ca> wrote:

> On 10/17/2012 09:12 AM, Terance Dias wrote:
> > Hi,
> >
> > We're trying to create a cluster in which the nodes lie in 2 different
> > LANs. Since the nodes lie in different networks, they cannot resolve the
> > other node by their internal IP. So in my cluster.conf file, I've
> provided
> > their external IPs. But now when I start CMAN service, I get the
> following
> > error.
> >
> > NOTE: fencing is not shown, you must configure fencing appropriately for
> > your cluster.
>
> You do need fencing. Without *working* fencing, the first time something
> goes wrong, your cluster will hang (by design).
>
> > <cluster name="test-cluster" config_version="18">
> >   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
> >        for quorum. -->
> >   <clusternodes>
> >     <clusternode name="*external-ip-1*" nodeid="1"/>
> >     <clusternode name="*external-ip-2*" nodeid="2"/>
>
> You need to use names and these names need to resolve to an IP.
> Whichever interface that IP matches will be used for cluster
> communications. The ideal is to use `uname -n` from each node, though
> this is more convention that a requirement.
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
>

--047d7b15a97ff47af704cc45ac21
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I tried using public IP as well as names like &#39;<a href=3D"http://ec2-no=
de-1.amazonaws.com">ec2-node-1.amazonaws.com</a>&#39; which is resolved to =
an IP by DNS lookup. In both cases I get the same error I mentioned earlier=
. <br>
If I give the internal IP of the node where I&#39;m trying to run the CMAN =
service, the service starts, but I still cannot get it to resolve the other=
 node since the other node is in a different network.<br><br><div class=3D"=
gmail_quote">
On Wed, Oct 17, 2012 at 7:11 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"m=
ailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> w=
rote:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;borde=
r-left:1px #ccc solid;padding-left:1ex">
<div class=3D"im">On 10/17/2012 09:12 AM, Terance Dias wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; We&#39;re trying to create a cluster in which the nodes lie in 2 diffe=
rent<br>
&gt; LANs. Since the nodes lie in different networks, they cannot resolve t=
he<br>
&gt; other node by their internal IP. So in my cluster.conf file, I&#39;ve =
provided<br>
&gt; their external IPs. But now when I start CMAN service, I get the follo=
wing<br>
&gt; error.<br>
&gt;<br>
</div><div class=3D"im">&gt; NOTE: fencing is not shown, you must configure=
 fencing appropriately for<br>
&gt; your cluster.<br>
<br>
</div>You do need fencing. Without *working* fencing, the first time someth=
ing<br>
goes wrong, your cluster will hang (by design).<br>
<div class=3D"im"><br>
&gt; &lt;cluster name=3D&quot;test-cluster&quot; config_version=3D&quot;18&=
quot;&gt;<br>
&gt; =A0 &lt;!-- The cluster has 2 nodes. Each has a unique nodid and one v=
ote<br>
&gt; =A0 =A0 =A0 =A0for quorum. --&gt;<br>
&gt; =A0 &lt;clusternodes&gt;<br>
</div>&gt; =A0 =A0 &lt;clusternode name=3D&quot;*external-ip-1*&quot; nodei=
d=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 &lt;clusternode name=3D&quot;*external-ip-2*&quot; nodeid=3D&q=
uot;2&quot;/&gt;<br>
<br>
You need to use names and these names need to resolve to an IP.<br>
Whichever interface that IP matches will be used for cluster<br>
communications. The ideal is to use `uname -n` from each node, though<br>
this is more convention that a requirement.<br>
<span class=3D"HOEnZb"><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></blockquote></div><br>

--047d7b15a97ff47af704cc45ac21--


From cfeist@redhat.com Wed Oct 17 15:22:15 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HJMFce013681 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 15:22:15 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HJM93R010663; Wed, 17 Oct 2012 15:22:09 -0400
Message-ID: <507F0561.3030006@redhat.com>
Date: Wed, 17 Oct 2012 14:22:09 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: The Pacemaker cluster resource manager <pacemaker@oss.clusterlabs.org>
References: <50736F78.3060906@redhat.com> <507DF5A1.3060905@redhat.com>
	<A08579D19748D444B15E83044CC3E433025A4E88@MLRSM11.MLR.BWL.NET>
In-Reply-To: <A08579D19748D444B15E83044CC3E433025A4E88@MLRSM11.MLR.BWL.NET>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>,
	=?ISO-8859-1?Q?=22Gr=FCninger=2C_Andreas_=28LGL_Extern=29=22?=
	<Andreas.Grueninger@lgl.bwl.de>
Subject: Re: [Linux-cluster] [Pacemaker] Announce: pcs-0.9.26
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 19:22:16 -0000

On 10/17/12 03:22, Grninger, Andreas (LGL Extern) wrote:
> Please see here:
>
> https://github.com/feist/pcs/issues

I'm definitely planning on supporting the --prefix option (and possibly options 
to specify the location for each binary).  I should have something shortly if 
you would like to test it out.

Thanks,
Chris

>
> Andreas
>
> -----Ursprngliche Nachricht-----
> Von: Chris Feist [mailto:cfeist@redhat.com]
> Gesendet: Mittwoch, 17. Oktober 2012 02:03
> An: The Pacemaker cluster resource manager
> Cc: linux clustering
> Betreff: Re: [Pacemaker] Announce: pcs-0.9.26
>
> On 10/08/12 19:27, Chris Feist wrote:
>> We've been making improvements to the pcs (pacemaker/corosync
>> configuration
>> system) command line tool over the past few months.
>>
>> Currently you can setup a basic cluster (including configuring corosync 2.0 udpu).
>>
>> David Vossel has also created a version of the "Clusters from Scratch"
>> document that illustrates setting up a cluster using pcs.  This should
>> be showing up shortly.
>
> Just an update, I've updated the pcs (to 0.9.27) and included the pcsd daemon with the fedora packages.  You can grab the updated packages here:
>
> http://people.redhat.com/cfeist/pcs/
>
> And you should be able to used the new Clusters from Scratch optimized for the pcs CLI here: http://www.clusterlabs.org/doc/
>
> Just a couple things to note (this should be shortly updated in the notes).
>
> To run pcs on Fedora 17/18 you'll need to turn off selinux & disable the firewall (or at least allow traffic on port 2224).
>
> To disable SELinux set 'SELINUX=permissive' in /etc/selinux/config and reboot To disable the firewall run 'systemctl stop iptables.service' (to permanently disable run 'systemctl disable iptables.service')
>
> The pcs_passwd command has been removed.  In it's place you can do authentication with the hacluster user.  Just set the hacluster user password (passwd hacluster) and then use that user and password to authenticate with pcs.
>
> If you have any questions or any issues don't hesitate to contact me, we're still working out the bugs in the new pcsd daemon and we appreciate all the feedback we can get.
>
> Thanks,
> Chris
>
>>
>> You can view the source here: https://github.com/feist/pcs/
>>
>> Or download the latest tarball:
>> https://github.com/downloads/feist/pcs/pcs-0.9.26.tar.gz
>>
>> There is also a Fedora 18 package that will be included with the next release.
>> You should be able to find that package in the following locations...
>>
>> RPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.noarch.rpm
>>
>> SRPM:
>> http://people.redhat.com/cfeist/pcs/pcs-0.9.26-1.fc18.src.rpm
>>
>> In the near future we are planning on having builds for SUSE & Ubuntu/Debian.
>>
>> We're also actively working on a GUI/Daemon that will allow control of
>> your entire cluster from one node and/or a web browser.
>>
>> Please feel free to email me (cfeist@redhat.com) or open issues on the
>> pcs project at github (https://github.com/feist/pcs/issues) if you
>> have any questions or problems.
>>
>> Thanks!
>> Chris
>>
>> _______________________________________________
>> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
>> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>>
>> Project Home: http://www.clusterlabs.org Getting started:
>> http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
>> Bugs: http://bugs.clusterlabs.org
>
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org
>
> _______________________________________________
> Pacemaker mailing list: Pacemaker@oss.clusterlabs.org
> http://oss.clusterlabs.org/mailman/listinfo/pacemaker
>
> Project Home: http://www.clusterlabs.org
> Getting started: http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf
> Bugs: http://bugs.clusterlabs.org
>


From sam@dotsec.com Wed Oct 17 17:11:19 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HLBJgw024835 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 17:11:19 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HLBDWH031627
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:11:14 -0400
Received: from mail.dotsec.com (mail.dotsec.com [59.167.210.116])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HLBCUT012460
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:11:13 -0400
Received: from localhost (imappy.electron.dotsec.com [127.0.0.1])
	by imappy.blackhole.dotsec.com (Postfix) with ESMTP id C2CAD42CE4B
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 07:11:10 +1000 (EST)
X-Virus-Scanned: amavisd-new at dotsec.com
Received: from mail.dotsec.com ([127.0.0.1])
	by localhost (imappy-centos.blackhole.dotsec.com [127.0.0.1])
	(amavisd-new, port 10024)
	with ESMTP id AYoCXVLj+2or for <linux-cluster@redhat.com>;
	Thu, 18 Oct 2012 07:11:04 +1000 (EST)
Message-ID: <507F1EE8.40102@dotsec.com>
Date: Thu, 18 Oct 2012 07:11:04 +1000
From: Sam Wilson <sam@dotsec.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
In-Reply-To: <CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
X-Enigmail-Version: 1.4.5
OpenPGP: id=211F97F7
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -2.27  (BAYES_00,RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 21:11:19 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

I might be totally missing something but unless you specify otherwise
doesn't cman require layer 2 connectivity between nodes?

Cheers,

Sam

- -- 
 ______________________________________________________

Mr Sam Wilson,
Information Security Specialist,
DotSec - Dot com Security.
Email: sam@dotsec.com
Telephone: +61 7 3221 2442
Postal correspondence:
  PO Box 10286, Adelaide St., Brisbane, 4000
Head office (no post):
  Suite 201, 303 Adelaide Street,  Brisbane, Australia

______________________________________________________
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.18 (GNU/Linux)

iF4EAREIAAYFAlB/HuIACgkQFdt86iEfl/ed4AD+LIHCF2ljuZ+j6h/fcyk94V6W
Y0H9M2CRcbfFcYR+Qz0BAKwuAmP4eW7Qev0m1Q/em69ClXWW/1v5aC82DQ0Ju2HB
=kaHg
-----END PGP SIGNATURE-----


From lists@alteeve.ca Wed Oct 17 17:13:49 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9HLDnFm024967 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 17 Oct 2012 17:13:49 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9HLDiuY029330
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:13:44 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9HLDgUr015500
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 17:13:43 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 6D563422488;
	Wed, 17 Oct 2012 17:13:40 -0400 (EDT)
Message-ID: <507F1F85.5020804@alteeve.ca>
Date: Wed, 17 Oct 2012 17:13:41 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121009 Thunderbird/16.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com>
In-Reply-To: <507F1EE8.40102@dotsec.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 17 Oct 2012 21:13:49 -0000

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 10/17/2012 05:11 PM, Sam Wilson wrote:
> I might be totally missing something but unless you specify
> otherwise doesn't cman require layer 2 connectivity between nodes?
> 
> Cheers,
> 
> Sam
> 

It normally uses multicast, but you can use unicast with newer
corosync (I've not tried this). I am not sure if two nodes in separate
subnets works, I've also never tried this. I have to think it would be
a bad idea, given the need to fast/stable networking.

- -- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.12 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://www.enigmail.net/

iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
51i6iTjsbqlEPeICmCgW
=qzFE
-----END PGP SIGNATURE-----


From terance@socialtwist.com Thu Oct 18 02:44:38 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9I6icT6011398 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 02:44:38 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9I6iXOB024170
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 02:44:33 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9I6iUX6014031
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 02:44:31 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so8185039pbb.33
	for <linux-cluster@redhat.com>; Wed, 17 Oct 2012 23:44:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=aayGs6ti5+oQW2ko1uHU8ZfCbHnv4VBsuW8ScPU/1NM=;
	b=UrwIeAjPdbBAHj11pbGz4vFJrj+zEHm2gl0K30CrIjg2s5VgN/Q8Kz2PY0l4EpPxHY
	Cjh439qhwkowjK6v6AKau+CC7BdUNL9zoWTKGNhczh3cYEpt4oIYazAQVXVTzaq6McCZ
	VThQN9nHce5EELTW+hkWcbgQ5FJ4n1o4VEvSTFgKncuSMCvSpOHNiPeW/R+8TYXzfuL5
	BDaRJipACCr0Ke5stGyxXIFglbBZH2umiUEv2PD34e7XgVJETqktlH2q+zF6h5UWViXI
	6wKfVG0zgTlLSSoT3P/S9tUkudLJrfBw6bOqIZ65S77NMhDprUlE6cFWAC9ra4Bzla7b
	j4AQ==
MIME-Version: 1.0
Received: by 10.66.81.231 with SMTP id d7mr56773513pay.50.1350542670594; Wed,
	17 Oct 2012 23:44:30 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Wed, 17 Oct 2012 23:44:30 -0700 (PDT)
In-Reply-To: <507F1F85.5020804@alteeve.ca>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
Date: Thu, 18 Oct 2012 12:14:30 +0530
Message-ID: <CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=f46d042ef5b922849304cc4fb897
X-Gm-Message-State: ALoCoQmjvof8bdIOe5JVlE07DFxCZSEL18VFs2spb3HExdIUanTHyd7asoVOnE6KtJ4H8IZycFt7
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 06:44:38 -0000

--f46d042ef5b922849304cc4fb897
Content-Type: text/plain; charset=ISO-8859-1

Sorry I did not give much context of what I'm trying to do.

I'm trying to set up a cluster of nodes running apache qpid as mentioned in
the documentation
here<http://qpid.apache.org/books/trunk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passive_Cluster.html>
The documentation says that cluster mechanism uses cman and rgmanager but
does not directly depend on openais or corosync and does not use
multicasting. It also says "Replication to a *disaster recovery* site can
be handled as simply another node in the cluster, it does not require a
separate replication mechanism" . I think by "disaster recovery site" it
means a different network. I'm very new to clustering so I just wanted to
know if it is possible to use cman and rgmanager with cluster nodes in
different networks.

Thanks,
Terance.

On Thu, Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 10/17/2012 05:11 PM, Sam Wilson wrote:
> > I might be totally missing something but unless you specify
> > otherwise doesn't cman require layer 2 connectivity between nodes?
> >
> > Cheers,
> >
> > Sam
> >
>
> It normally uses multicast, but you can use unicast with newer
> corosync (I've not tried this). I am not sure if two nodes in separate
> subnets works, I've also never tried this. I have to think it would be
> a bad idea, given the need to fast/stable networking.
>
> - --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://www.enigmail.net/
>
> iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
> o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
> WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
> 1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
> eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
> WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
> S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
> xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
> uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
> aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
> PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
> 51i6iTjsbqlEPeICmCgW
> =qzFE
> -----END PGP SIGNATURE-----
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--f46d042ef5b922849304cc4fb897
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry I did not give much context of what I&#39;m trying to do.<div><br></d=
iv><div>I&#39;m trying to set up a cluster of nodes running apache qpid as =
mentioned in the documentation=A0<a href=3D"http://qpid.apache.org/books/tr=
unk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Pa=
ssive_Cluster.html">here</a></div>
<div>The documentation says that cluster mechanism uses cman and rgmanager =
but does not directly depend on openais or corosync and does not use multic=
asting. It also says &quot;Replication to a <em class=3D"firstterm">disaste=
r recovery</em> site can be handled as
	    simply another node in the cluster, it does not require a separate rep=
lication
	    mechanism&quot; . I think by &quot;disaster recovery site&quot; it mea=
ns a different network. I&#39;m very new to clustering so I just wanted to =
know if it is possible to use cman and rgmanager with cluster nodes in diff=
erent networks.</div>
<div><br></div><div>Thanks,</div><div>Terance.</div><div><br><div class=3D"=
gmail_quote">On Thu, Oct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt=
;<a href=3D"mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>=
&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">-----BEGIN PGP SIGNED MESSAGE-----<br>
Hash: SHA1<br>
<div class=3D"im"><br>
On 10/17/2012 05:11 PM, Sam Wilson wrote:<br>
&gt; I might be totally missing something but unless you specify<br>
&gt; otherwise doesn&#39;t cman require layer 2 connectivity between nodes?=
<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Sam<br>
&gt;<br>
<br>
</div>It normally uses multicast, but you can use unicast with newer<br>
corosync (I&#39;ve not tried this). I am not sure if two nodes in separate<=
br>
subnets works, I&#39;ve also never tried this. I have to think it would be<=
br>
a bad idea, given the need to fast/stable networking.<br>
<br>
- --<br>
<div class=3D"im">Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div>-----BEGIN PGP SIGNATURE-----<br>
Version: GnuPG v1.4.12 (GNU/Linux)<br>
Comment: Using GnuPG with Mozilla - <a href=3D"http://www.enigmail.net/" ta=
rget=3D"_blank">http://www.enigmail.net/</a><br>
<br>
iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>
51i6iTjsbqlEPeICmCgW<br>
=3DqzFE<br>
<div class=3D"HOEnZb"><div class=3D"h5">-----END PGP SIGNATURE-----<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</div></div></blockquote></div><br></div>

--f46d042ef5b922849304cc4fb897--


From binanalhalabi@yahoo.com Thu Oct 18 07:37:07 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IBb7xa024498 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 07:37:07 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IBb2Kh006741
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 07:37:02 -0400
Received: from nm26-vm3.bullet.mail.ne1.yahoo.com
	(nm26-vm3.bullet.mail.ne1.yahoo.com [98.138.91.156])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9IBb0eh013099
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 07:37:00 -0400
Received: from [98.138.226.176] by nm26.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 11:36:59 -0000
Received: from [98.138.88.239] by tm11.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 11:36:59 -0000
Received: from [127.0.0.1] by omp1039.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 11:36:59 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 886841.33877.bm@omp1039.mail.ne1.yahoo.com
Received: (qmail 44675 invoked by uid 60001); 18 Oct 2012 11:36:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1350560219; bh=A0KxI+993fSGerlflMEjiP6r0L3+b9M5XKZvG3MOiTk=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=gHj5zcUuh4YdVlWug5SoqaNbDUt/1VIIDBLwJBonWJn5hS/3+IS9fz8y075AGVrLk+OgsqEqZrHeXeLnK3DfyglNVF9rIuio1EVmJ4pQQFbBpUZykX/u9QIUQpixCIoKjNRLdZUIXGKVKzV3S4bEMFG2jRooZWXn6outtNwnrh0=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=elB2uUhvQLBn/n4QyJjfqh+po3HA+oLp+8tECaVIvVWFGSOYnSbVeHsGGnFBamCSBtbMC3E6viiBr/bEcv2qFmnw7AqlA9hAYHJ38qgFPki0fthP9btbIomxeAhertJ0e5aqrZUgj+e4B+aNCY2ssQNq6L/HaGzZE8T5PQZEkMw=;
X-YMail-OSG: 0HOIGGsVM1k3lIBGC7yXR2TB7vwep.oy0huYj013MmUQ0Pd
	TK4u184bfdLqVtAqtu4E_7fBJzS1oMsGh7O4ARRed3LefMc3WSmSLghYPW4I
	2lRWrJisDH7zXOUr4ZnBy0cnlPgdupDq2H9f_b.jCI7qfWYelUUB_S2.vFP8
	sGiDrshe52rJCYwF4xyH5Qcs8336SaET9p_JQrKRK3rTvpb8VM3Zji7rbg5D
	FMMrsMgpD9wzA3WSYq_pkLcSm8mI9o7smFaByIZnMcjVQfpuLagwvSv5tuA.
	i5Z0xxsKUgsUWmEFpzgaHZL2wTW148q18wfOPNIUjIxZJ5VXMeoI9AuNOTEp
	ZzPB773tYBEHZM.PJQXgoQS_VdR0_mf5VeApn97FLmN3TWGVziPZcFsh4Crv
	Wj8SBvfwItasCPcAs.F4qNbEjzs_WcibZBjINBX14UxHhUm5RvbLP4jo7bw4
	5oGPT7l_FZxglQxreDE_584X9WeEeGuCumUQ.vIFLrqL56dQGQE764WFE.2L
	Ty8.M.f9tiM_WShkELhgAJoS1mBztOuBiHcu9dXFxWQ3IaId4wnmykp9HIXA
	k6DWgeNX0Eh.mB97mzReshpOZ1xgOc9.lrrNz4Uwfg_roV4x2jgLU1YpE__e
	GHnMJcXVhvE71SyI9pY1UQCAUf3pbpfXYddvCeRCOvIiKPKdPfWvpu64JnlY
	HLnCx1ChA.luuhDf_h7i8j2tmONA_DkHUbXI2XgV38l6ZmbLqoANb8o5ZsNT
	Gd5p0eNn7hw--
Received: from [92.244.19.236] by web122604.mail.ne1.yahoo.com via HTTP;
	Thu, 18 Oct 2012 04:36:59 PDT
X-Rocket-MIMEInfo: 001.001,
	SGVsbG8sCllvdSBjYW4gYnVpbGQgYSBjbHVzdGVyIHdpdGggbm9kZXMgb24gZGlmZmVyZW50IExBTnMgYnV0IHlvdXIgcmVzb3VyY2UgbWFuYWdlciBtdXN0IHN1cHBvcnQgVmlydHVhbCBJUCBhZGRyZXNzZXMuCkFzIGkgc2VlIGluIHlvdXIgbGluayB0aGlzIGlzIHN1cHBvcnRlZCBpbiB0aGUgcmVzb3VyY2UgbWFuYWdlci4KCi8vIEJpbmFuCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwogRnLDpW46IFRlcmFuY2UgRGlhcyA8dGVyYW5jZUBzb2NpYWx0d2lzdC5jb20.ClRpbGw6IGxpbnV4IGMBMAEBAQE-
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
Message-ID: <1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 04:36:59 -0700 (PDT)
From: Binan AL Halabi <binanalhalabi@yahoo.com>
To: linux clustering <linux-cluster@redhat.com>
In-Reply-To: <CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="-159098491-733212626-1350560219=:38099"
X-RedHat-Spam-Score: -2.379  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE,
	RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Binan AL Halabi <binanalhalabi@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 11:37:07 -0000

---159098491-733212626-1350560219=:38099
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,=0AYou can build a cluster with nodes on different LANs but your reso=
urce manager must support Virtual IP addresses.=0AAs i see in your link thi=
s is supported in the resource manager.=0A=0A// Binan=0A=0A________________=
________________=0A Fr=E5n: Terance Dias <terance@socialtwist.com>=0ATill: =
linux clustering <linux-cluster@redhat.com> =0ASkickat: torsdag, 18 oktober=
 2012 8:44=0A=C4mne: Re: [Linux-cluster] CMAN nodes in different LANs=0A =
=0A=0ASorry I did not give much context of what I'm trying to do.=0A=0AI'm =
trying to set up a cluster of nodes running apache qpid as mentioned in the=
 documentation=A0here=0AThe documentation says that cluster mechanism uses =
cman and rgmanager but does not directly depend on openais or corosync and =
does not use multicasting. It also says "Replication to a disaster recovery=
 site can be handled as simply another node in the cluster, it does not req=
uire a separate replication mechanism" . I think by "disaster recovery site=
" it means a different network. I'm very new to clustering so I just wanted=
 to know if it is possible to use cman and rgmanager with cluster nodes in =
different networks.=0A=0AThanks,=0ATerance.=0A=0A=0AOn Thu, Oct 18, 2012 at=
 2:43 AM, Digimer <lists@alteeve.ca> wrote:=0A=0A-----BEGIN PGP SIGNED MESS=
AGE-----=0A>Hash: SHA1=0A>=0A>=0A>On 10/17/2012 05:11 PM, Sam Wilson wrote:=
=0A>> I might be totally missing something but unless you specify=0A>> othe=
rwise doesn't cman require layer 2 connectivity between nodes?=0A>>=0A>> Ch=
eers,=0A>>=0A>> Sam=0A>>=0A>=0A>It normally uses multicast, but you can use=
 unicast with newer=0A>corosync (I've not tried this). I am not sure if two=
 nodes in separate=0A>subnets works, I've also never tried this. I have to =
think it would be=0A>a bad idea, given the need to fast/stable networking.=
=0A>=0A>- --=0A>=0A>Digimer=0A>Papers and Projects: https://alteeve.ca/w/=
=0A>What if the cure for cancer is trapped in the mind of a person without=
=0A>access to education?=0A>-----BEGIN PGP SIGNATURE-----=0A>Version: GnuPG=
 v1.4.12 (GNU/Linux)=0A>Comment: Using GnuPG with Mozilla - http://www.enig=
mail.net/=0A>=0A>iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsv=
N1hUTZ=0A>o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl=
=0A>WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L=0A>1D6=
MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg=0A>eEbFKBWCjh=
x5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp=0A>WYgsDyP9S6FQQc6+1=
OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK=0A>S2y1F6am1th0Wj79z4o7Wwhh=
evbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP=0A>xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjq=
TCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK=0A>uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB=
316/Y8TTDAyrbk7eQLUribGqra=0A>aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPF=
NCa/cPkMJTfKO7O19BP=0A>PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp=
+9EOac9VRm7n=0A>51i6iTjsbqlEPeICmCgW=0A>=3DqzFE=0A>=0A>-----END PGP SIGNATU=
RE-----=0A>=0A>--=0A>Linux-cluster mailing list=0A>Linux-cluster@redhat.com=
=0A>https://www.redhat.com/mailman/listinfo/linux-cluster=0A>=0A=0A-- =0ALi=
nux-cluster mailing list=0ALinux-cluster@redhat.com=0Ahttps://www.redhat.co=
m/mailman/listinfo/linux-cluster
---159098491-733212626-1350560219=:38099
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:ti=
mes new roman, new york, times, serif;font-size:10pt"><div><span>Hello,</sp=
an></div><div style=3D"color: rgb(0, 0, 0); font-size: 13.3333px; font-fami=
ly: times new roman,new york,times,serif; background-color: transparent; fo=
nt-style: normal;"><span>You can build a cluster with nodes on different LA=
Ns but your resource manager must support Virtual IP addresses.</span></div=
><div style=3D"color: rgb(0, 0, 0); font-size: 13.3333px; font-family: time=
s new roman,new york,times,serif; background-color: transparent; font-style=
: normal;"><span>As i see in your link this is supported in the resource ma=
nager.</span></div><div style=3D"color: rgb(0, 0, 0); font-size: 13.3333px;=
 font-family: times new roman,new york,times,serif; background-color: trans=
parent; font-style: normal;"><span><br></span></div><div><span></span></div=
>// Binan  <div style=3D"font-family: times new roman, new york, times, ser=
if;
 font-size: 10pt;"> <div style=3D"font-family: times new roman, new york, t=
imes, serif; font-size: 12pt;"> <div dir=3D"ltr"> <font size=3D"2" face=3D"=
Arial"> <hr size=3D"1">  <b><span style=3D"font-weight:bold;">Fr=E5n:</span=
></b> Terance Dias &lt;terance@socialtwist.com&gt;<br> <b><span style=3D"fo=
nt-weight: bold;">Till:</span></b> linux clustering &lt;linux-cluster@redha=
t.com&gt; <br> <b><span style=3D"font-weight: bold;">Skickat:</span></b> to=
rsdag, 18 oktober 2012 8:44<br> <b><span style=3D"font-weight: bold;">=C4mn=
e:</span></b> Re: [Linux-cluster] CMAN nodes in different LANs<br> </font> =
</div> <br>=0A<div id=3D"yiv639325006">Sorry I did not give much context of=
 what I'm trying to do.<div><br></div><div>I'm trying to set up a cluster o=
f nodes running apache qpid as mentioned in the documentation&nbsp;<a rel=
=3D"nofollow" target=3D"_blank" href=3D"http://qpid.apache.org/books/trunk/=
AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passiv=
e_Cluster.html">here</a></div>=0A<div>The documentation says that cluster m=
echanism uses cman and rgmanager but does not directly depend on openais or=
 corosync and does not use multicasting. It also says "Replication to a <i>=
disaster recovery</i> site can be handled as=0A=09    simply another node i=
n the cluster, it does not require a separate replication=0A=09    mechanis=
m" . I think by "disaster recovery site" it means a different network. I'm =
very new to clustering so I just wanted to know if it is possible to use cm=
an and rgmanager with cluster nodes in different networks.</div>=0A<div><br=
></div><div>Thanks,</div><div>Terance.</div><div><br><div class=3D"yiv63932=
5006gmail_quote">On Thu, Oct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr"=
>&lt;<a rel=3D"nofollow" ymailto=3D"mailto:lists@alteeve.ca" target=3D"_bla=
nk" href=3D"mailto:lists@alteeve.ca">lists@alteeve.ca</a>&gt;</span> wrote:=
<br>=0A<blockquote class=3D"yiv639325006gmail_quote" style=3D"margin:0 0 0 =
.8ex;border-left:1px #ccc solid;padding-left:1ex;">-----BEGIN PGP SIGNED ME=
SSAGE-----<br>=0AHash: SHA1<br>=0A<div class=3D"yiv639325006im"><br>=0AOn 1=
0/17/2012 05:11 PM, Sam Wilson wrote:<br>=0A&gt; I might be totally missing=
 something but unless you specify<br>=0A&gt; otherwise doesn't cman require=
 layer 2 connectivity between nodes?<br>=0A&gt;<br>=0A&gt; Cheers,<br>=0A&g=
t;<br>=0A&gt; Sam<br>=0A&gt;<br>=0A<br>=0A</div>It normally uses multicast,=
 but you can use unicast with newer<br>=0Acorosync (I've not tried this). I=
 am not sure if two nodes in separate<br>=0Asubnets works, I've also never =
tried this. I have to think it would be<br>=0Aa bad idea, given the need to=
 fast/stable networking.<br>=0A<br>=0A- --<br>=0A<div class=3D"yiv639325006=
im">Digimer<br>=0APapers and Projects: <a rel=3D"nofollow" target=3D"_blank=
" href=3D"https://alteeve.ca/w/">https://alteeve.ca/w/</a><br>=0AWhat if th=
e cure for cancer is trapped in the mind of a person without<br>=0Aaccess t=
o education?<br>=0A</div>-----BEGIN PGP SIGNATURE-----<br>=0AVersion: GnuPG=
 v1.4.12 (GNU/Linux)<br>=0AComment: Using GnuPG with Mozilla - http://www.e=
nigmail.net/<br>=0A<br>=0AiQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQ=
DOSA2DVsvN1hUTZ<br>=0Ao9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUX=
phX41QfM7Fl<br>=0AWQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWd=
LLPfT9L<br>=0A1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7=
HJg<br>=0AeEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<=
br>=0AWYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>=
=0AS2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>=0Ax=
MYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>=0AuaLYb=
gma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>=0AaRSHz5b+R=
BlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>=0APShZxE7HvsphT=
vAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>=0A51i6iTjsbqlEPeICm=
CgW<br>=0A=3DqzFE<br>=0A<div class=3D"yiv639325006HOEnZb"><div class=3D"yiv=
639325006h5">-----END PGP SIGNATURE-----<br>=0A<br>=0A--<br>=0ALinux-cluste=
r mailing list<br>=0A<a rel=3D"nofollow" ymailto=3D"mailto:Linux-cluster@re=
dhat.com" target=3D"_blank" href=3D"mailto:Linux-cluster@redhat.com">Linux-=
cluster@redhat.com</a><br>=0A<a rel=3D"nofollow" target=3D"_blank" href=3D"=
https://www.redhat.com/mailman/listinfo/linux-cluster">https://www.redhat.c=
om/mailman/listinfo/linux-cluster</a><br>=0A</div></div></blockquote></div>=
<br></div>=0A</div><br>-- <br>Linux-cluster mailing list<br><a ymailto=3D"m=
ailto:Linux-cluster@redhat.com" href=3D"mailto:Linux-cluster@redhat.com">Li=
nux-cluster@redhat.com</a><br><a href=3D"https://www.redhat.com/mailman/lis=
tinfo/linux-cluster" target=3D"_blank">https://www.redhat.com/mailman/listi=
nfo/linux-cluster</a><br><br> </div> </div>  </div></body></html>
---159098491-733212626-1350560219=:38099--


From terance@socialtwist.com Thu Oct 18 08:28:27 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9ICSRo8032457 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 08:28:27 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9ICSMcI016218
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 08:28:22 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9ICSLNY032619
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 08:28:21 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so8448115pbb.33
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 05:28:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=2yPlxwk+Jr/3iJh3FyG0qCU6/Yd00NXwQlRkjJQDPKk=;
	b=JzbitRZ2td4T32wn9ad5fShKir5SF4L1RWyiKgv9QgcZm9iULByh3vkqDnxy459X/3
	u80bDnYBkHxBM/a4EyLl5SEj6/NPVRA7mThHuWfPvO0kU2P5S/obQp2ma4Us3AOjHtpl
	zTGcVufwLTN1kHAGFI5N1Sp517D/GsHZ/wdi8Gc091UtWcYLjPEnv7iT0E42e4B+ND0B
	mgGXZT0L8NR80iyw7ODhGwgKtgOWYyoFofgv/a3l2IhxCggYkX01oCbjhQ7FkY8moXHk
	rNqvBMIVya+9vIjq+czm0mUg3xWqWL1w043IStskXDwEWcnaBw0L9i2MJyB5QeL0Ofx6
	7SJA==
MIME-Version: 1.0
Received: by 10.68.195.195 with SMTP id ig3mr66303732pbc.108.1350562804657;
	Thu, 18 Oct 2012 05:20:04 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Thu, 18 Oct 2012 05:20:04 -0700 (PDT)
In-Reply-To: <1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
	<1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 17:50:04 +0530
Message-ID: <CAK76X7TYvv0YxcaLxCeUUtPJ8gawoNsE7Dnx6Nk3J8dYLQvuLA@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: Binan AL Halabi <binanalhalabi@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b10d18737efd304cc54683b
X-Gm-Message-State: ALoCoQlLImDVkxcN+hPQizrrxF1LnPMJ/3jJvmd8HyyAfdzR+XNRFeUZfn6N8sx/0W7XunFv/pfr
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 12:28:27 -0000

--047d7b10d18737efd304cc54683b
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I cannot use Virtual IP addresses since my 2 networks are in different
geographical locations and therefore the IP cannot be relocated. Is it
possible to build this cluster without virtual IP addresses?

Thanks,
Terance.

On Thu, Oct 18, 2012 at 5:06 PM, Binan AL Halabi <binanalhalabi@yahoo.com>w=
rote:

> Hello,
> You can build a cluster with nodes on different LANs but your resource
> manager must support Virtual IP addresses.
> As i see in your link this is supported in the resource manager.
>
> // Binan
>   ------------------------------
> *Fr=E5n:* Terance Dias <terance@socialtwist.com>
> *Till:* linux clustering <linux-cluster@redhat.com>
> *Skickat:* torsdag, 18 oktober 2012 8:44
> *=C4mne:* Re: [Linux-cluster] CMAN nodes in different LANs
>
> Sorry I did not give much context of what I'm trying to do.
>
> I'm trying to set up a cluster of nodes running apache qpid as mentioned
> in the documentation here<http://qpid.apache.org/books/trunk/AMQP-Messagi=
ng-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passive_Cluster.ht=
ml>
> The documentation says that cluster mechanism uses cman and rgmanager but
> does not directly depend on openais or corosync and does not use
> multicasting. It also says "Replication to a *disaster recovery* site can
> be handled as simply another node in the cluster, it does not require a
> separate replication mechanism" . I think by "disaster recovery site" it
> means a different network. I'm very new to clustering so I just wanted to
> know if it is possible to use cman and rgmanager with cluster nodes in
> different networks.
>
> Thanks,
> Terance.
>
> On Thu, Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 10/17/2012 05:11 PM, Sam Wilson wrote:
> > I might be totally missing something but unless you specify
> > otherwise doesn't cman require layer 2 connectivity between nodes?
> >
> > Cheers,
> >
> > Sam
> >
>
> It normally uses multicast, but you can use unicast with newer
> corosync (I've not tried this). I am not sure if two nodes in separate
> subnets works, I've also never tried this. I have to think it would be
> a bad idea, given the need to fast/stable networking.
>
> - --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://www.enigmail.net/
>
> iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
> o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
> WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
> 1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
> eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
> WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
> S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
> xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
> uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
> aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
> PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
> 51i6iTjsbqlEPeICmCgW
> =3DqzFE
> -----END PGP SIGNATURE-----
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--047d7b10d18737efd304cc54683b
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I cannot use Virtual IP addresses since my 2 networks are in different geog=
raphical locations and therefore the IP cannot be relocated. Is it possible=
 to build this cluster without virtual IP addresses?<div><br></div><div>
Thanks,</div><div>Terance.<br><div><br><div class=3D"gmail_quote">On Thu, O=
ct 18, 2012 at 5:06 PM, Binan AL Halabi <span dir=3D"ltr">&lt;<a href=3D"ma=
ilto:binanalhalabi@yahoo.com" target=3D"_blank">binanalhalabi@yahoo.com</a>=
&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div style=3D"font-size:10pt;font-famil=
y:times new roman,new york,times,serif"><div><span>Hello,</span></div><div =
style=3D"font-style:normal;font-size:13.3333px;background-color:transparent=
;font-family:times new roman,new york,times,serif">
<span>You can build a cluster with nodes on different LANs but your resourc=
e manager must support Virtual IP addresses.</span></div><div style=3D"font=
-style:normal;font-size:13.3333px;background-color:transparent;font-family:=
times new roman,new york,times,serif">
<span>As i see in your link this is supported in the resource manager.</spa=
n></div><div style=3D"font-style:normal;font-size:13.3333px;background-colo=
r:transparent;font-family:times new roman,new york,times,serif"><span><br>
</span></div><div><span></span></div>// Binan  <div style=3D"font-family:ti=
mes new roman,new york,times,serif;font-size:10pt"> <div style=3D"font-fami=
ly:times new roman,new york,times,serif;font-size:12pt"> <div dir=3D"ltr"> =
<font face=3D"Arial"> <hr size=3D"1">
  <b><span style=3D"font-weight:bold">Fr=E5n:</span></b> Terance Dias &lt;<=
a href=3D"mailto:terance@socialtwist.com" target=3D"_blank">terance@socialt=
wist.com</a>&gt;<br> <b><span style=3D"font-weight:bold">Till:</span></b> l=
inux clustering &lt;<a href=3D"mailto:linux-cluster@redhat.com" target=3D"_=
blank">linux-cluster@redhat.com</a>&gt; <br>
 <b><span style=3D"font-weight:bold">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 8:44<br> <b><span style=3D"font-weight:bold">=C4mne:</span></b> Re: =
[Linux-cluster] CMAN nodes in different LANs<br> </font> </div><div><div cl=
ass=3D"h5">
 <br>
<div>Sorry I did not give much context of what I&#39;m trying to do.<div><b=
r></div><div>I&#39;m trying to set up a cluster of nodes running apache qpi=
d as mentioned in the documentation=A0<a rel=3D"nofollow" href=3D"http://qp=
id.apache.org/books/trunk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messagin=
g_User_Guide-Active_Passive_Cluster.html" target=3D"_blank">here</a></div>

<div>The documentation says that cluster mechanism uses cman and rgmanager =
but does not directly depend on openais or corosync and does not use multic=
asting. It also says &quot;Replication to a <i>disaster recovery</i> site c=
an be handled as
	    simply another node in the cluster, it does not require a separate rep=
lication
	    mechanism&quot; . I think by &quot;disaster recovery site&quot; it mea=
ns a different network. I&#39;m very new to clustering so I just wanted to =
know if it is possible to use cman and rgmanager with cluster nodes in diff=
erent networks.</div>

<div><br></div><div>Thanks,</div><div>Terance.</div><div><br><div>On Thu, O=
ct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt;<a rel=3D"nofollow" h=
ref=3D"mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;<=
/span> wrote:<br>

<blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
eft:1ex">-----BEGIN PGP SIGNED MESSAGE-----<br>
Hash: SHA1<br>
<div><br>
On 10/17/2012 05:11 PM, Sam Wilson wrote:<br>
&gt; I might be totally missing something but unless you specify<br>
&gt; otherwise doesn&#39;t cman require layer 2 connectivity between nodes?=
<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Sam<br>
&gt;<br>
<br>
</div>It normally uses multicast, but you can use unicast with newer<br>
corosync (I&#39;ve not tried this). I am not sure if two nodes in separate<=
br>
subnets works, I&#39;ve also never tried this. I have to think it would be<=
br>
a bad idea, given the need to fast/stable networking.<br>
<br>
- --<br>
<div>Digimer<br>
Papers and Projects: <a rel=3D"nofollow" href=3D"https://alteeve.ca/w/" tar=
get=3D"_blank">https://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div>-----BEGIN PGP SIGNATURE-----<br>
Version: GnuPG v1.4.12 (GNU/Linux)<br>
Comment: Using GnuPG with Mozilla - <a href=3D"http://www.enigmail.net/" ta=
rget=3D"_blank">http://www.enigmail.net/</a><br>
<br>
iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>
51i6iTjsbqlEPeICmCgW<br>
=3DqzFE<br>
<div><div>-----END PGP SIGNATURE-----<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a rel=3D"nofollow" href=3D"mailto:Linux-cluster@redhat.com" target=3D"_bla=
nk">Linux-cluster@redhat.com</a><br>
<a rel=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-c=
luster" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-clu=
ster</a><br>
</div></div></blockquote></div><br></div>
</div><br>-- <br>Linux-cluster mailing list<br><a href=3D"mailto:Linux-clus=
ter@redhat.com" target=3D"_blank">Linux-cluster@redhat.com</a><br><a href=
=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D"_blank=
">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
<br> </div></div></div> </div>  </div></div><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br></div></div>

--047d7b10d18737efd304cc54683b--


From binanalhalabi@yahoo.com Thu Oct 18 09:33:16 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IDXFwh010736 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 09:33:15 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9IDXAu4015942
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:33:10 -0400
Received: from nm10-vm2.bullet.mail.ne1.yahoo.com
	(nm10-vm2.bullet.mail.ne1.yahoo.com [98.138.90.158])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9IDX7nF029164
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:33:08 -0400
Received: from [98.138.226.177] by nm10.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 13:30:13 -0000
Received: from [98.138.89.192] by tm12.bullet.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 13:30:13 -0000
Received: from [127.0.0.1] by omp1050.mail.ne1.yahoo.com with NNFMP;
	18 Oct 2012 13:30:13 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 338121.60942.bm@omp1050.mail.ne1.yahoo.com
Received: (qmail 47576 invoked by uid 60001); 18 Oct 2012 13:30:13 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1350567013; bh=X6muORFZJuiZCB+3LDd3FVKl/9S5N1cVIw5rvJo/8uk=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=iqkrnTFaim9W60dhV8Nc5g5MAfYtLJPCdkh+VrxOuvgw1QguVWIEyjcnF1XNkoBB6H9Q+t+5zfU1tehNhqSGfh2pV4SJcCGF7QHWaWKTodR83V64gxMV1fMwPfPEFdd9X7uatqAOfpamAOPvaeqWuhHcxcrwNf1rQutYbNAPGDw=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=gGXu0p5EZqmeYyfQvd7LhIgyz5im/GGLjgviC++jAWr2wsykJcYxDzR+Q5LEZ9B8tCxg7dgDJdTOpY581XFNGg5v4HN3RpwFdgSx/LZPJ5d9N3tShur1Yzb/7An/3DMhqupCEUqF9pgwECP6Tg04+/TiUJOJa5Yj9eKe1V2FA7Q=;
X-YMail-OSG: 1pemPNcVM1nA.ikxW7oKCGG01X2G_QMjr8N8ImUvxnCOHwT
	MbX4oTSiKl.j7oUeWV8ikLTIX7hztB033QR6C2_uxQAGDG4pCWPD9E8CGrbz
	GsCSRzU33CBoYTaUOvY1u4Qf0YLyl4xj7mVF6eB.xw.j4gEtS82kKqXh5Vgw
	RSpa1YeV8Cy_UOI230J5C0ifZS4Q8s57hoSbfXw.ACs__313MGfO2U6CXryN
	IIbMs_TJ7Hc7g8mnvJttBr6VvfHdC2TMEu13UBzyE0m514cxAZwhfbuCqVxv
	5FkuljADUzzsrCFvAS.GuW8U8EZKclQjxssBy5PlJI6fUkdoONeRwjLZmW60
	MzzJAUAhDdhteMTC.cyrP0T.ZW8_Co72tCOqy.vFe06cRizFOOBal9NCBUNL
	mqx4dVS0oZKdvMKat4_LlUa7MbBLJazjiCatK3ADoYPttuvFHU0SmW0a2ppX
	iNvaI5XBzUgDNBnm4d_avK9bm9Qp9W1xwtzDzTEx6GV06JXnWD4Yp79MG8_f
	EZw6WcPLH5GY6uhQVjEjSNHv.Au_xTgnYftfzgTCm2nRWprhBv4l7.esg5HS
	8qoy1rao6yv_kF3B9cdrDb_Xyu6b1LPJIL3hAtdWcXulP0N2TtYhQDc52ZdG
	KFjJY0_n2A.cCqnywN3JvBdvsmOU7UJA0_gyas.zLt9N0xiE3VNYwGhNanwL
	e1pazP4xvMmIhOS8juJpbjx11IPcZvtMSTOL5r610vCY3DFXKUYQs9Z0.RbQ
	H9_BAm5pe4g--
Received: from [92.244.19.236] by web122605.mail.ne1.yahoo.com via HTTP;
	Thu, 18 Oct 2012 06:30:13 PDT
X-Rocket-MIMEInfo: 001.001,
	CgpIaSwKCkluIHRoaXMgY2FzZSBpdCBtdXN0IGJlIGFwcGxpY2F0aW9uLWxldmVsIGxvYWRiYWxhbmNpbmcuIElzIEl0PyAKSSB0aGluayBzbyBiZWNhdXNlIGkgc2VlIGluIHlvdXIgbGluayB0aGVyZSBpYSBhIGxpc3Qgb2YgYnJva2VycyBhbmQgdGhleSBhcmUgc3BlY2lmaWVkIGJ5IFVSTCBzbyB0aGlzIGlzIGFwcGxpY2F0aW9uIGxldmVsIGxvYWRiYWxhbmNpbmcuCmFuZCB5b3UgY2FuIGRvIGl0LgoKVGhlIGZ1bGwgZm9ybWF0IG9mIHRoZSBicm9rZXIgVVJMIGlzIGdpdmVuIGJ5IHRoaXMgZ3JhbW1hcjoBMAEBAQE-
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
	<1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
	<CAK76X7TYvv0YxcaLxCeUUtPJ8gawoNsE7Dnx6Nk3J8dYLQvuLA@mail.gmail.com>
	<1350566725.99107.YahooMailNeo@web122603.mail.ne1.yahoo.com>
Message-ID: <1350567013.23919.YahooMailNeo@web122605.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 06:30:13 -0700 (PDT)
From: Binan AL Halabi <binanalhalabi@yahoo.com>
To: "linux-cluster@redhat.com" <linux-cluster@redhat.com>
In-Reply-To: <1350566725.99107.YahooMailNeo@web122603.mail.ne1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="1778881473-2121884111-1350567013=:23919"
X-RedHat-Spam-Score: -2.379  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_NONE,
	RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] VB:  CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Binan AL Halabi <binanalhalabi@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 13:33:16 -0000

--1778881473-2121884111-1350567013=:23919
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0AHi,=0A=0AIn this case it must be application-level loadbalancing. Is =
It? =0AI think so because i see in your link there ia a list of brokers and=
 they are specified by URL so this is application level loadbalancing.=0Aan=
d you can do it.=0A=0AThe full format of the broker URL is given by this gr=
ammar: =0Aurl =3D ["amqp:"][ user ["/" password] "@" ] addr ("," addr)*=0Aa=
ddr =3D tcp_addr / rmda_addr / ssl_addr / ...=0Atcp_addr =3D ["tcp:"] host =
[":" port]=0Ardma_addr =3D "rdma:" host [":" port]=0Assl_addr =3D "ssl:" ho=
st [":" port]' The URL can be virtual IP (simple case) or URL as above (Thi=
s what you want).=0A=0A=0A// Binan=0A=0A=0A________________________________=
=0A Fr=E5n: Terance Dias <terance@socialtwist.com>=0ATill: Binan AL Halabi =
<binanalhalabi@yahoo.com>; linux clustering <linux-cluster@redhat.com> =0AS=
kickat: torsdag, 18 oktober 2012 14:20=0A=C4mne: Re: [Linux-cluster] CMAN n=
odes in different LANs=0A =0A=0AI cannot use Virtual IP addresses since my =
2 networks are in different geographical locations and therefore the IP can=
not be relocated. Is it possible to build this cluster without virtual IP a=
ddresses?=0A=0AThanks,=0ATerance.=0A=0A=0A=0AOn Thu, Oct 18, 2012 at 5:06 P=
M, Binan AL Halabi <binanalhalabi@yahoo.com> wrote:=0A=0AHello,=0A>You can =
build a cluster with nodes on different LANs but your resource manager must=
 support Virtual IP addresses.=0A>As i see in your link this is supported i=
n the resource manager.=0A>=0A>// Binan =0A>=0A>___________________________=
_____=0A> Fr=E5n: Terance Dias <terance@socialtwist.com>=0A>Till: linux clu=
stering <linux-cluster@redhat.com> =0A>Skickat: torsdag, 18 oktober 2012 8:=
44=0A>=C4mne: Re: [Linux-cluster] CMAN nodes in different LANs=0A> =0A>=0A>=
=0A>Sorry I did not give much context of what I'm trying to do.=0A>=0A>=0A>=
I'm trying to set up a cluster of nodes running apache qpid as mentioned in=
 the documentation=A0here=0A>The documentation says that cluster mechanism =
uses cman and rgmanager but does not directly depend on openais or corosync=
 and does not use multicasting. It also says "Replication to a disaster rec=
overy site can be handled as simply another node in the cluster, it does no=
t require a separate replication mechanism" . I think by "disaster recovery=
 site" it means a different network. I'm very new to clustering so I just w=
anted to know if it is possible to use cman and rgmanager with cluster node=
s in different networks.=0A>=0A>=0A>Thanks,=0A>Terance.=0A>=0A>=0A>On Thu, =
Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:=0A>=0A>-----BEGI=
N PGP SIGNED MESSAGE-----=0A>>Hash: SHA1=0A>>=0A>>=0A>>On 10/17/2012 05:11 =
PM, Sam Wilson wrote:=0A>>> I might be totally missing something but unless=
 you specify=0A>>> otherwise doesn't cman require layer 2 connectivity betw=
een nodes?=0A>>>=0A>>> Cheers,=0A>>>=0A>>> Sam=0A>>>=0A>>=0A>>It normally u=
ses multicast, but you can use unicast with newer=0A>>corosync (I've not tr=
ied this). I am not sure if two nodes in separate=0A>>subnets works, I've a=
lso never tried this. I have to think it would be=0A>>a bad idea, given the=
 need to fast/stable networking.=0A>>=0A>>- --=0A>>=0A>>Digimer=0A>>Papers =
and Projects: https://alteeve.ca/w/=0A>>What if the cure for cancer is trap=
ped in the mind of a person without=0A>>access to education?=0A>>-----BEGIN=
 PGP SIGNATURE-----=0A>>Version: GnuPG v1.4.12 (GNU/Linux)=0A>>Comment: Usi=
ng GnuPG with Mozilla - http://www.enigmail.net/=0A>>=0A>>iQIcBAEBAgAGBQJQf=
x+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ=0A>>o9u+JSSMv8cigW2VabayZcx=
s/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl=0A>>WQQ/P1ChkDk1FRdNPVIIwNOYPApIA=
8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L=0A>>1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7Cwob=
fqVIhNcmyw8iw4nxlBpnDswds7HJg=0A>>eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKln=
Mo6JqpJatlorMP5FxkLsgRp=0A>>WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2s=
h0ZRdXlIvM3kckCmK=0A>>S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTR=
Ug7oTfnIKJP=0A>>xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyh=
O1VdK=0A>>uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra=
=0A>>aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP=0A>>P=
ShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n=0A>>51i6iTj=
sbqlEPeICmCgW=0A>>=3DqzFE=0A>>=0A>>-----END PGP SIGNATURE-----=0A>>=0A>>--=
=0A>>Linux-cluster mailing list=0A>>Linux-cluster@redhat.com=0A>>https://ww=
w.redhat.com/mailman/listinfo/linux-cluster=0A>>=0A>=0A>-- =0A>Linux-cluste=
r mailing list=0A>Linux-cluster@redhat.com=0A>https://www.redhat.com/mailma=
n/listinfo/linux-cluster=0A>=0A>=0A>--=0A>Linux-cluster mailing list=0A>Lin=
ux-cluster@redhat.com=0A>https://www.redhat.com/mailman/listinfo/linux-clus=
ter=0A>
--1778881473-2121884111-1350567013=:23919
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:ti=
mes new roman, new york, times, serif;font-size:10pt"><br>=0A<div style=3D"=
font-family: times new roman, new york, times, serif; font-size: 10pt;"><di=
v style=3D"font-family: times new roman, new york, times, serif; font-size:=
 12pt;"><div id=3D"yiv1985237836"><div><div style=3D"color:#000;background-=
color:#fff;font-family:times new roman, new york, times, serif;font-size:10=
pt;">Hi,<br><br>In this case it must be application-level loadbalancing. Is=
 It? <br>I think so because i see in your link there ia a list of brokers a=
nd they are specified by URL so this is application level loadbalancing.<br=
>and you can do it.<br><br> =0A=09=09  The full format of the broker URL is=
 given by this grammar:=0A=09=09  <pre class=3D"yiv1985237836programlisting=
">url =3D ["amqp:"][ user ["/" password] "@" ] addr ("," addr)*=0Aaddr =3D =
tcp_addr / rmda_addr / ssl_addr / ...=0Atcp_addr =3D ["tcp:"] host [":" por=
t]=0Ardma_addr =3D "rdma:" host [":" port]=0Assl_addr =3D "ssl:" host [":" =
port]'=0A=09=09  </pre>The URL can be virtual IP (simple case) or URL as ab=
ove (This what you want).<br><div><span><br></span></div><div>// Binan<br><=
/div>  <div style=3D"font-family:times new roman, new york, times, serif;fo=
nt-size:10pt;"> <div style=3D"font-family:times new roman, new york, times,=
 serif;font-size:12pt;"> <div dir=3D"ltr"> <font size=3D"2" face=3D"Arial">=
 <hr size=3D"1">  <b><span style=3D"font-weight:bold;">Fr=E5n:</span></b> T=
erance Dias &lt;terance@socialtwist.com&gt;<br> <b><span style=3D"font-weig=
ht:bold;">Till:</span></b> Binan AL Halabi &lt;binanalhalabi@yahoo.com&gt;;=
 linux clustering &lt;linux-cluster@redhat.com&gt; <br> <b><span style=3D"f=
ont-weight:bold;">Skickat:</span></b> torsdag, 18 oktober 2012 14:20<br> <b=
><span style=3D"font-weight:bold;">=C4mne:</span></b> Re: [Linux-cluster] C=
MAN nodes in different LANs<br> </font> </div> <br>=0A<div id=3D"yiv1985237=
836">I cannot use Virtual IP addresses since my 2 networks are in different=
 geographical locations and therefore the IP cannot be relocated. Is it pos=
sible to build this cluster without virtual IP addresses?<div><br></div><di=
v>=0AThanks,</div><div>Terance.<br><div><br><div class=3D"yiv1985237836gmai=
l_quote">On Thu, Oct 18, 2012 at 5:06 PM, Binan AL Halabi <span dir=3D"ltr"=
>&lt;<a rel=3D"nofollow" ymailto=3D"mailto:binanalhalabi@yahoo.com" target=
=3D"_blank" href=3D"mailto:binanalhalabi@yahoo.com">binanalhalabi@yahoo.com=
</a>&gt;</span> wrote:<br>=0A<blockquote class=3D"yiv1985237836gmail_quote"=
 style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"><=
div><div style=3D"font-size:10pt;font-family:times new roman, new york, tim=
es, serif;"><div><span>Hello,</span></div><div style=3D"font-style:normal;f=
ont-size:13.3333px;background-color:transparent;font-family:times new roman=
, new york, times, serif;">=0A<span>You can build a cluster with nodes on d=
ifferent LANs but your resource manager must support Virtual IP addresses.<=
/span></div><div style=3D"font-style:normal;font-size:13.3333px;background-=
color:transparent;font-family:times new roman, new york, times, serif;">=0A=
<span>As i see in your link this is supported in the resource manager.</spa=
n></div><div style=3D"font-style:normal;font-size:13.3333px;background-colo=
r:transparent;font-family:times new roman, new york, times, serif;"><span><=
br>=0A</span></div><div><span></span></div>// Binan  <div style=3D"font-fam=
ily:times new roman, new york, times, serif;font-size:10pt;"> <div style=3D=
"font-family:times new roman, new york, times, serif;font-size:12pt;"> <div=
 dir=3D"ltr"> <font face=3D"Arial"> <hr size=3D"1">=0A  <b><span style=3D"f=
ont-weight:bold;">Fr=E5n:</span></b> Terance Dias &lt;<a rel=3D"nofollow" y=
mailto=3D"mailto:terance@socialtwist.com" target=3D"_blank" href=3D"mailto:=
terance@socialtwist.com">terance@socialtwist.com</a>&gt;<br> <b><span style=
=3D"font-weight:bold;">Till:</span></b> linux clustering &lt;<a rel=3D"nofo=
llow" ymailto=3D"mailto:linux-cluster@redhat.com" target=3D"_blank" href=3D=
"mailto:linux-cluster@redhat.com">linux-cluster@redhat.com</a>&gt; <br>=0A =
<b><span style=3D"font-weight:bold;">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 8:44<br> <b><span style=3D"font-weight:bold;">=C4mne:</span></b> Re:=
 [Linux-cluster] CMAN nodes in different LANs<br> </font> </div><div><div c=
lass=3D"yiv1985237836h5">=0A <br>=0A<div>Sorry I did not give much context =
of what I'm trying to do.<div><br></div><div>I'm trying to set up a cluster=
 of nodes running apache qpid as mentioned in the documentation&nbsp;<a rel=
=3D"nofollow" target=3D"_blank" href=3D"http://qpid.apache.org/books/trunk/=
AMQP-Messaging-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passiv=
e_Cluster.html">here</a></div>=0A=0A<div>The documentation says that cluste=
r mechanism uses cman and rgmanager but does not directly depend on openais=
 or corosync and does not use multicasting. It also says "Replication to a =
<i>disaster recovery</i> site can be handled as=0A=09    simply another nod=
e in the cluster, it does not require a separate replication=0A=09    mecha=
nism" . I think by "disaster recovery site" it means a different network. I=
'm very new to clustering so I just wanted to know if it is possible to use=
 cman and rgmanager with cluster nodes in different networks.</div>=0A=0A<d=
iv><br></div><div>Thanks,</div><div>Terance.</div><div><br><div>On Thu, Oct=
 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt;<a rel=3D"nofollow" yma=
ilto=3D"mailto:lists@alteeve.ca" target=3D"_blank" href=3D"mailto:lists@alt=
eeve.ca">lists@alteeve.ca</a>&gt;</span> wrote:<br>=0A=0A<blockquote style=
=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">-----BE=
GIN PGP SIGNED MESSAGE-----<br>=0AHash: SHA1<br>=0A<div><br>=0AOn 10/17/201=
2 05:11 PM, Sam Wilson wrote:<br>=0A&gt; I might be totally missing somethi=
ng but unless you specify<br>=0A&gt; otherwise doesn't cman require layer 2=
 connectivity between nodes?<br>=0A&gt;<br>=0A&gt; Cheers,<br>=0A&gt;<br>=
=0A&gt; Sam<br>=0A&gt;<br>=0A<br>=0A</div>It normally uses multicast, but y=
ou can use unicast with newer<br>=0Acorosync (I've not tried this). I am no=
t sure if two nodes in separate<br>=0Asubnets works, I've also never tried =
this. I have to think it would be<br>=0Aa bad idea, given the need to fast/=
stable networking.<br>=0A<br>=0A- --<br>=0A<div>Digimer<br>=0APapers and Pr=
ojects: <a rel=3D"nofollow" target=3D"_blank" href=3D"https://alteeve.ca/w/=
">https://alteeve.ca/w/</a><br>=0AWhat if the cure for cancer is trapped in=
 the mind of a person without<br>=0Aaccess to education?<br>=0A</div>-----B=
EGIN PGP SIGNATURE-----<br>=0AVersion: GnuPG v1.4.12 (GNU/Linux)<br>=0AComm=
ent: Using GnuPG with Mozilla - http://www.enigmail.net/<br>=0A<br>=0AiQIcB=
AEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>=0Ao9u+JSSMv=
8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>=0AWQQ/P1ChkDk1F=
RdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>=0A1D6MRy8P+dOU8n+sA=
yvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>=0AeEbFKBWCjhx5i1O4lFUI7=
TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>=0AWYgsDyP9S6FQQc6+1OZwKk9E7=
cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>=0AS2y1F6am1th0Wj79z4o7Wwhhevbhm=
1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>=0AxMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTC=
ggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>=0AuaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZ=
B316/Y8TTDAyrbk7eQLUribGqra<br>=0AaRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7=
BaPFNCa/cPkMJTfKO7O19BP<br>=0APShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59=
MUwCkTp+9EOac9VRm7n<br>=0A51i6iTjsbqlEPeICmCgW<br>=0A=3DqzFE<br>=0A<div><di=
v>-----END PGP SIGNATURE-----<br>=0A<br>=0A--<br>=0ALinux-cluster mailing l=
ist<br>=0A<a rel=3D"nofollow" ymailto=3D"mailto:Linux-cluster@redhat.com" t=
arget=3D"_blank" href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@red=
hat.com</a><br>=0A<a rel=3D"nofollow" target=3D"_blank" href=3D"https://www=
.redhat.com/mailman/listinfo/linux-cluster">https://www.redhat.com/mailman/=
listinfo/linux-cluster</a><br>=0A</div></div></blockquote></div><br></div>=
=0A</div><br>-- <br>Linux-cluster mailing list<br><a rel=3D"nofollow" ymail=
to=3D"mailto:Linux-cluster@redhat.com" target=3D"_blank" href=3D"mailto:Lin=
ux-cluster@redhat.com">Linux-cluster@redhat.com</a><br><a rel=3D"nofollow" =
target=3D"_blank" href=3D"https://www.redhat.com/mailman/listinfo/linux-clu=
ster">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>=0A<br> =
</div></div></div> </div>  </div></div><br>--<br>=0ALinux-cluster mailing l=
ist<br>=0A<a rel=3D"nofollow" ymailto=3D"mailto:Linux-cluster@redhat.com" t=
arget=3D"_blank" href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@red=
hat.com</a><br>=0A<a rel=3D"nofollow" target=3D"_blank" href=3D"https://www=
.redhat.com/mailman/listinfo/linux-cluster">https://www.redhat.com/mailman/=
listinfo/linux-cluster</a><br></blockquote></div><br></div></div>=0A</div><=
br><br> </div> </div>  </div></div></div><br><br> </div> </div>  </div></bo=
dy></html>
--1778881473-2121884111-1350567013=:23919--


From terance@socialtwist.com Thu Oct 18 09:58:16 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9IDwFml014374 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 18 Oct 2012 09:58:16 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9IDwAwd001209
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:58:10 -0400
Received: from mail-pa0-f46.google.com (mail-pa0-f46.google.com
	[209.85.220.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9IDw96t011757
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 09:58:09 -0400
Received: by mail-pa0-f46.google.com with SMTP id hz1so8473386pad.33
	for <linux-cluster@redhat.com>; Thu, 18 Oct 2012 06:58:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=exc1C4HtqDTeVHsckdDdnBBdqKS6uUxx4IgfGR3193s=;
	b=TfdDjswdk1zHiu0ffTpxsSZ6TJ1JQvp5ev4lBn2gO9J3MQ1TBLzYdczKzNXQ0mDzGQ
	GYj6oImE1r8vB/qnHasNrImMj9Ez/6bkk6X1JAPMz3FTGYg1iYJMShqPbc2WUwUytOm2
	rSXUIBqabAu6dHcHR57cp1WsEtIbEjA2xoyIJrGVa/4q2t9c229EJDV8IbTBa/GuRqvV
	cK2WlZHeSzIsdym26AMBvHqh6S9Q2xK+uS+licqrz5wRojXlMcCzwqg5TdYL/12MhQlR
	TfXs0iXu8Sfa8vzVXsvfUYi19BIZmdvZNAH0/7FEWia4iCHk2zceO76UbA70yEtaQnZz
	VDQQ==
MIME-Version: 1.0
Received: by 10.68.201.6 with SMTP id jw6mr19299962pbc.149.1350568689028; Thu,
	18 Oct 2012 06:58:09 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Thu, 18 Oct 2012 06:58:08 -0700 (PDT)
In-Reply-To: <1350567013.23919.YahooMailNeo@web122605.mail.ne1.yahoo.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<507EB5A4.4020502@alteeve.ca>
	<CAK76X7TcNHmdPoprDgTt-LnjwO+b5uwvogUUio1aP4hGsEzXcQ@mail.gmail.com>
	<507F1EE8.40102@dotsec.com> <507F1F85.5020804@alteeve.ca>
	<CAK76X7SwhCJ0przhtZ4xvefB0Q8Ccf6VcWer7OMXY_DS42_z1A@mail.gmail.com>
	<1350560219.38099.YahooMailNeo@web122604.mail.ne1.yahoo.com>
	<CAK76X7TYvv0YxcaLxCeUUtPJ8gawoNsE7Dnx6Nk3J8dYLQvuLA@mail.gmail.com>
	<1350566725.99107.YahooMailNeo@web122603.mail.ne1.yahoo.com>
	<1350567013.23919.YahooMailNeo@web122605.mail.ne1.yahoo.com>
Date: Thu, 18 Oct 2012 19:28:08 +0530
Message-ID: <CAK76X7QvkD33fBS8jKh4Yam7qsMnXZW4WKywp4FzRu5nEZvyxw@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b15a97ff4502204cc55c6df
X-Gm-Message-State: ALoCoQnsobgIZusBNeeOmD/uHVtNWqoA8LSBRJqOmPF5bc+i4F7JptWLBR6D/CHlN9Eii7a7eJ+8
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] VB: CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 18 Oct 2012 13:58:16 -0000

--047d7b15a97ff4502204cc55c6df
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Yes, that is correct. We want to give address of both nodes in the URL and
allow failover to the other node in case the first node fails. So if the
primary node fails, the rgmanager will promote the secondary node to
primary and the application will failover to the new primary node.
Also, our nodes are in Amazon EC2 where it is not possible to have virtual
IP addresses.

Thanks,
Terance.

On Thu, Oct 18, 2012 at 7:00 PM, Binan AL Halabi <binanalhalabi@yahoo.com>w=
rote:

>
> Hi,
>
> In this case it must be application-level loadbalancing. Is It?
> I think so because i see in your link there ia a list of brokers and they
> are specified by URL so this is application level loadbalancing.
> and you can do it.
>
> The full format of the broker URL is given by this grammar:
>
> url =3D ["amqp:"][ user ["/" password] "@" ] addr ("," addr)*
> addr =3D tcp_addr / rmda_addr / ssl_addr / ...
> tcp_addr =3D ["tcp:"] host [":" port]
> rdma_addr =3D "rdma:" host [":" port]
> ssl_addr =3D "ssl:" host [":" port]'
> 	=09
>
> The URL can be virtual IP (simple case) or URL as above (This what you
> want).
>
> // Binan
>   ------------------------------
> *Fr=E5n:* Terance Dias <terance@socialtwist.com>
> *Till:* Binan AL Halabi <binanalhalabi@yahoo.com>; linux clustering <
> linux-cluster@redhat.com>
> *Skickat:* torsdag, 18 oktober 2012 14:20
> *=C4mne:* Re: [Linux-cluster] CMAN nodes in different LANs
>
> I cannot use Virtual IP addresses since my 2 networks are in different
> geographical locations and therefore the IP cannot be relocated. Is it
> possible to build this cluster without virtual IP addresses?
>
> Thanks,
> Terance.
>
> On Thu, Oct 18, 2012 at 5:06 PM, Binan AL Halabi <binanalhalabi@yahoo.com=
>wrote:
>
> Hello,
> You can build a cluster with nodes on different LANs but your resource
> manager must support Virtual IP addresses.
> As i see in your link this is supported in the resource manager.
>
> // Binan
>   ------------------------------
> *Fr=E5n:* Terance Dias <terance@socialtwist.com>
> *Till:* linux clustering <linux-cluster@redhat.com>
> *Skickat:* torsdag, 18 oktober 2012 8:44
> *=C4mne:* Re: [Linux-cluster] CMAN nodes in different LANs
>
> Sorry I did not give much context of what I'm trying to do.
>
> I'm trying to set up a cluster of nodes running apache qpid as mentioned
> in the documentation here<http://qpid.apache.org/books/trunk/AMQP-Messagi=
ng-Broker-CPP-Book/html/chap-Messaging_User_Guide-Active_Passive_Cluster.ht=
ml>
> The documentation says that cluster mechanism uses cman and rgmanager but
> does not directly depend on openais or corosync and does not use
> multicasting. It also says "Replication to a *disaster recovery* site can
> be handled as simply another node in the cluster, it does not require a
> separate replication mechanism" . I think by "disaster recovery site" it
> means a different network. I'm very new to clustering so I just wanted to
> know if it is possible to use cman and rgmanager with cluster nodes in
> different networks.
>
> Thanks,
> Terance.
>
> On Thu, Oct 18, 2012 at 2:43 AM, Digimer <lists@alteeve.ca> wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> On 10/17/2012 05:11 PM, Sam Wilson wrote:
> > I might be totally missing something but unless you specify
> > otherwise doesn't cman require layer 2 connectivity between nodes?
> >
> > Cheers,
> >
> > Sam
> >
>
> It normally uses multicast, but you can use unicast with newer
> corosync (I've not tried this). I am not sure if two nodes in separate
> subnets works, I've also never tried this. I have to think it would be
> a bad idea, given the need to fast/stable networking.
>
> - --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.12 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://www.enigmail.net/
>
> iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ
> o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl
> WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L
> 1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg
> eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp
> WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK
> S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP
> xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK
> uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra
> aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP
> PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n
> 51i6iTjsbqlEPeICmCgW
> =3DqzFE
> -----END PGP SIGNATURE-----
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
>
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--047d7b15a97ff4502204cc55c6df
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<span style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;font-size:1=
3px;background-color:rgb(255,255,255)">Yes, that is correct. We want to giv=
e address of both nodes in the URL and allow failover to the other node in =
case the first node fails. So if the primary node fails, the rgmanager will=
 promote the secondary node to primary and the application will failover to=
 the new primary node.</span><div style=3D"color:rgb(34,34,34);font-family:=
arial,sans-serif;font-size:13px;background-color:rgb(255,255,255)">
Also, our nodes are in Amazon EC2 where it is not possible to have virtual =
IP addresses.<br><div><br></div><div>Thanks,</div><div>Terance.</div></div>=
<br><div class=3D"gmail_quote">On Thu, Oct 18, 2012 at 7:00 PM, Binan AL Ha=
labi <span dir=3D"ltr">&lt;<a href=3D"mailto:binanalhalabi@yahoo.com" targe=
t=3D"_blank">binanalhalabi@yahoo.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div style=3D"font-size:10pt;font-famil=
y:times new roman,new york,times,serif"><br>
<div style=3D"font-family:times new roman,new york,times,serif;font-size:10=
pt"><div style=3D"font-family:times new roman,new york,times,serif;font-siz=
e:12pt"><div><div><div style=3D"font-size:10pt;font-family:times new roman,=
new york,times,serif">
Hi,<br><br>In this case it must be application-level loadbalancing. Is It? =
<br>I think so because i see in your link there ia a list of brokers and th=
ey are specified by URL so this is application level loadbalancing.<br>
and you can do it.<br><br>=20
		  The full format of the broker URL is given by this grammar:
		  <pre>url =3D [&quot;amqp:&quot;][ user [&quot;/&quot; password] &quot;@=
&quot; ] addr (&quot;,&quot; addr)*
addr =3D tcp_addr / rmda_addr / ssl_addr / ...
tcp_addr =3D [&quot;tcp:&quot;] host [&quot;:&quot; port]
rdma_addr =3D &quot;rdma:&quot; host [&quot;:&quot; port]
ssl_addr =3D &quot;ssl:&quot; host [&quot;:&quot; port]&#39;
		  </pre>The URL can be virtual IP (simple case) or URL as above (This wha=
t you want).<br><div><span><br></span></div><div>// Binan<br></div>  <div s=
tyle=3D"font-family:times new roman,new york,times,serif;font-size:10pt">
 <div style=3D"font-family:times new roman,new york,times,serif;font-size:1=
2pt"> <div dir=3D"ltr"> <font face=3D"Arial"> <hr size=3D"1">  <b><span sty=
le=3D"font-weight:bold">Fr=E5n:</span></b> Terance Dias &lt;<a href=3D"mail=
to:terance@socialtwist.com" target=3D"_blank">terance@socialtwist.com</a>&g=
t;<br>
 <b><span style=3D"font-weight:bold">Till:</span></b> Binan AL Halabi &lt;<=
a href=3D"mailto:binanalhalabi@yahoo.com" target=3D"_blank">binanalhalabi@y=
ahoo.com</a>&gt;; linux clustering &lt;<a href=3D"mailto:linux-cluster@redh=
at.com" target=3D"_blank">linux-cluster@redhat.com</a>&gt; <br>
 <b><span style=3D"font-weight:bold">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 14:20<br> <b><span style=3D"font-weight:bold">=C4mne:</span></b> Re:=
 [Linux-cluster] CMAN nodes in different LANs<br> </font> </div> <br>
<div>I cannot use Virtual IP addresses since my 2 networks are in different=
 geographical locations and therefore the IP cannot be relocated. Is it pos=
sible to build this cluster without virtual IP addresses?<div><br></div>
<div>
Thanks,</div><div>Terance.<br><div><br><div>On Thu, Oct 18, 2012 at 5:06 PM=
, Binan AL Halabi <span dir=3D"ltr">&lt;<a rel=3D"nofollow" href=3D"mailto:=
binanalhalabi@yahoo.com" target=3D"_blank">binanalhalabi@yahoo.com</a>&gt;<=
/span> wrote:<br>

<blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
eft:1ex"><div><div style=3D"font-size:10pt;font-family:times new roman,new =
york,times,serif"><div><span>Hello,</span></div><div style=3D"font-style:no=
rmal;font-size:13.3333px;background-color:transparent;font-family:times new=
 roman,new york,times,serif">

<span>You can build a cluster with nodes on different LANs but your resourc=
e manager must support Virtual IP addresses.</span></div><div style=3D"font=
-style:normal;font-size:13.3333px;background-color:transparent;font-family:=
times new roman,new york,times,serif">

<span>As i see in your link this is supported in the resource manager.</spa=
n></div><div style=3D"font-style:normal;font-size:13.3333px;background-colo=
r:transparent;font-family:times new roman,new york,times,serif"><span><br>

</span></div><div><span></span></div>// Binan  <div style=3D"font-family:ti=
mes new roman,new york,times,serif;font-size:10pt"> <div style=3D"font-fami=
ly:times new roman,new york,times,serif;font-size:12pt"> <div dir=3D"ltr"> =
<font face=3D"Arial"> <hr size=3D"1">

  <b><span style=3D"font-weight:bold">Fr=E5n:</span></b> Terance Dias &lt;<=
a rel=3D"nofollow" href=3D"mailto:terance@socialtwist.com" target=3D"_blank=
">terance@socialtwist.com</a>&gt;<br> <b><span style=3D"font-weight:bold">T=
ill:</span></b> linux clustering &lt;<a rel=3D"nofollow" href=3D"mailto:lin=
ux-cluster@redhat.com" target=3D"_blank">linux-cluster@redhat.com</a>&gt; <=
br>

 <b><span style=3D"font-weight:bold">Skickat:</span></b> torsdag, 18 oktobe=
r 2012 8:44<br> <b><span style=3D"font-weight:bold">=C4mne:</span></b> Re: =
[Linux-cluster] CMAN nodes in different LANs<br> </font> </div><div><div>
 <br>
<div>Sorry I did not give much context of what I&#39;m trying to do.<div><b=
r></div><div>I&#39;m trying to set up a cluster of nodes running apache qpi=
d as mentioned in the documentation=A0<a rel=3D"nofollow" href=3D"http://qp=
id.apache.org/books/trunk/AMQP-Messaging-Broker-CPP-Book/html/chap-Messagin=
g_User_Guide-Active_Passive_Cluster.html" target=3D"_blank">here</a></div>


<div>The documentation says that cluster mechanism uses cman and rgmanager =
but does not directly depend on openais or corosync and does not use multic=
asting. It also says &quot;Replication to a <i>disaster recovery</i> site c=
an be handled as
	    simply another node in the cluster, it does not require a separate rep=
lication
	    mechanism&quot; . I think by &quot;disaster recovery site&quot; it mea=
ns a different network. I&#39;m very new to clustering so I just wanted to =
know if it is possible to use cman and rgmanager with cluster nodes in diff=
erent networks.</div>


<div><br></div><div>Thanks,</div><div>Terance.</div><div><br><div>On Thu, O=
ct 18, 2012 at 2:43 AM, Digimer <span dir=3D"ltr">&lt;<a rel=3D"nofollow" h=
ref=3D"mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;<=
/span> wrote:<br>


<blockquote style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-l=
eft:1ex">-----BEGIN PGP SIGNED MESSAGE-----<br>
Hash: SHA1<br>
<div><br>
On 10/17/2012 05:11 PM, Sam Wilson wrote:<br>
&gt; I might be totally missing something but unless you specify<br>
&gt; otherwise doesn&#39;t cman require layer 2 connectivity between nodes?=
<br>
&gt;<br>
&gt; Cheers,<br>
&gt;<br>
&gt; Sam<br>
&gt;<br>
<br>
</div>It normally uses multicast, but you can use unicast with newer<br>
corosync (I&#39;ve not tried this). I am not sure if two nodes in separate<=
br>
subnets works, I&#39;ve also never tried this. I have to think it would be<=
br>
a bad idea, given the need to fast/stable networking.<br>
<br>
- --<br>
<div>Digimer<br>
Papers and Projects: <a rel=3D"nofollow" href=3D"https://alteeve.ca/w/" tar=
get=3D"_blank">https://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div>-----BEGIN PGP SIGNATURE-----<br>
Version: GnuPG v1.4.12 (GNU/Linux)<br>
Comment: Using GnuPG with Mozilla - <a href=3D"http://www.enigmail.net/" ta=
rget=3D"_blank">http://www.enigmail.net/</a><br>
<br>
iQIcBAEBAgAGBQJQfx+FAAoJEJL1R7RwoP6IXswP/00lC2YFQDOSA2DVsvN1hUTZ<br>
o9u+JSSMv8cigW2VabayZcxs/JMigafRnJK4Lg1VE6272zxGLoKUXphX41QfM7Fl<br>
WQQ/P1ChkDk1FRdNPVIIwNOYPApIA8hPhbBkPsMKdUPTwWu5ecG6RWVWdLLPfT9L<br>
1D6MRy8P+dOU8n+sAyvVCI2LY6LoNX7CwobfqVIhNcmyw8iw4nxlBpnDswds7HJg<br>
eEbFKBWCjhx5i1O4lFUI7TS10N0QoWx+L90HtxKlnMo6JqpJatlorMP5FxkLsgRp<br>
WYgsDyP9S6FQQc6+1OZwKk9E7cOwCenS/FQooBPdgyjGo2sh0ZRdXlIvM3kckCmK<br>
S2y1F6am1th0Wj79z4o7Wwhhevbhm1NRd6myKFkxdxoOeiRRN2vTRUg7oTfnIKJP<br>
xMYjW9UWHm/A6WdDXkFXRkT4a9O0zjqTCggmL6BPT7bkl5I71wmP9fLfQyhO1VdK<br>
uaLYbgma6zEHFJq+sHGgpawowlRlU2CXaJ1jZB316/Y8TTDAyrbk7eQLUribGqra<br>
aRSHz5b+RBlaSHBA3V6b0zEnIIXxcwWtOjpKy++M7BaPFNCa/cPkMJTfKO7O19BP<br>
PShZxE7HvsphTvAwl+Gb3gnhgt1W4a0mrHwRf49lVdf59MUwCkTp+9EOac9VRm7n<br>
51i6iTjsbqlEPeICmCgW<br>
=3DqzFE<br>
<div><div>-----END PGP SIGNATURE-----<br>
<br>
--<br>
Linux-cluster mailing list<br>
<a rel=3D"nofollow" href=3D"mailto:Linux-cluster@redhat.com" target=3D"_bla=
nk">Linux-cluster@redhat.com</a><br>
<a rel=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-c=
luster" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-clu=
ster</a><br>
</div></div></blockquote></div><br></div><span class=3D"HOEnZb"><font color=
=3D"#888888">
</font></span></div><span class=3D"HOEnZb"><font color=3D"#888888"><br>-- <=
br>Linux-cluster mailing list<br><a rel=3D"nofollow" href=3D"mailto:Linux-c=
luster@redhat.com" target=3D"_blank">Linux-cluster@redhat.com</a><br><a rel=
=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster=
" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</=
a><br>

<br> </font></span></div></div></div><span class=3D"HOEnZb"><font color=3D"=
#888888"> </font></span></div><span class=3D"HOEnZb"><font color=3D"#888888=
">  </font></span></div></div><span class=3D"HOEnZb"><font color=3D"#888888=
"><br>--<br>

Linux-cluster mailing list<br>
<a rel=3D"nofollow" href=3D"mailto:Linux-cluster@redhat.com" target=3D"_bla=
nk">Linux-cluster@redhat.com</a><br>
<a rel=3D"nofollow" href=3D"https://www.redhat.com/mailman/listinfo/linux-c=
luster" target=3D"_blank">https://www.redhat.com/mailman/listinfo/linux-clu=
ster</a><br></font></span></blockquote></div><br></div></div>
</div><br><br> </div> </div>  </div></div></div><br><br> </div> </div>  </d=
iv></div><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br>

--047d7b15a97ff4502204cc55c6df--


From fdinitto@redhat.com Mon Oct 22 03:33:30 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9M7XUHH026871 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 22 Oct 2012 03:33:30 -0400
Received: from [10.36.116.29] (ovpn-116-29.ams2.redhat.com [10.36.116.29])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9M7XNCd028370
	for <linux-cluster@redhat.com>; Mon, 22 Oct 2012 03:33:24 -0400
Message-ID: <5084F6C1.8010406@redhat.com>
Date: Mon, 22 Oct 2012 09:33:21 +0200
From: "Fabio M. Di Nitto" <fdinitto@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux i686;
	rv:14.0) Gecko/20120717 Thunderbird/14.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
In-Reply-To: <CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
X-Enigmail-Version: 1.4.3
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 22 Oct 2012 07:33:30 -0000

On 10/17/2012 03:12 PM, Terance Dias wrote:
> Hi,
> 
> We're trying to create a cluster in which the nodes lie in 2 different
> LANs. Since the nodes lie in different networks, they cannot resolve the
> other node by their internal IP. So in my cluster.conf file, I've
> provided their external IPs. But now when I start CMAN service, I get
> the following error.
> 

First of all, we never tested nodes on different LANs, so you might have
issues there that we are not aware of (beside that, latency between
nodes *MUST* be < 2ms).

As for the IP/name that should work, but I recall fixing something
related not too long ago.

What version of cman did you install and which distribution/OS?

Fabio

> -----------------------------------
> 
> Starting cluster:
>    Checking Network Manager... [  OK  ]
>    Global setup... [  OK  ]
>    Loading kernel modules... [  OK  ]
>    Mounting configfs... [  OK  ]
>    Starting cman... Cannot find node name in cluster.conf
> Unable to get the configuration
> Cannot find node name in cluster.conf
> cman_tool: corosync daemon didn't start
> [FAILED]
> 
> -------------------------------------
> 
> My cluster.conf file is as below
> 
> -------------------------------------
> 
> <?xml version="1.0"?>
> <!--
> This is an example of a cluster.conf file to run qpidd HA under rgmanager.
> 
> NOTE: fencing is not shown, you must configure fencing appropriately for
> your cluster.
> -->
> 
> <cluster name="test-cluster" config_version="18">
>   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
>        for quorum. -->
>   <clusternodes>
>     <clusternode name="/external-ip-1/" nodeid="1"/>
>     <clusternode name="/external-ip-2/" nodeid="2"/>
>   </clusternodes>
>   <cman two_node="1" expected_votes="1" transport="udpu">
>   </cman>
>   <!-- Resouce Manager configuration. -->
>   <rm>
>     <!--
>         There is a failoverdomain for each node containing just that node.
>         This lets us stipulate that the qpidd service should always run
> on each node.
>     -->
>     <failoverdomains>
>       <failoverdomain name="east-domain" restricted="1">
>         <failoverdomainnode name="/external-ip-1/"/>
>       </failoverdomain>
>       <failoverdomain name="west-domain" restricted="1">
>         <failoverdomainnode name="/external-ip-2/"/>
>       </failoverdomain>
>     </failoverdomains>
> 
>     <resources>
>       <!-- This script starts a qpidd broker acting as a backup. -->
>       <script file="/usr/local/etc/init.d/qpidd" name="qpidd"/>
> 
>       <!-- This script promotes the qpidd broker on this node to
> primary. -->
>       <script file="/usr/local/etc/init.d/qpidd-primary"
> name="qpidd-primary"/>
>     </resources>
> 
>     <!-- There is a qpidd service on each node, it should be restarted
> if it fails. -->
>     <service name="east-qpidd-service" domain="east-domain"
> recovery="restart">
>       <script ref="qpidd"/>
>     </service>
>     <service name="west-qpidd-service" domain="west-domain"
> recovery="restart">
>       <script ref="qpidd"/>
>     </service>
> 
>     <!-- There should always be a single qpidd-primary service, it can
> run on any node. -->
>     <service name="qpidd-primary-service" autostart="1" exclusive="0"
> recovery="relocate">
>       <script ref="qpidd-primary"/>
>     </service>
>   </rm>
> </cluster>
> ------------------------------------------------
> 
> Thanks,
> Terance
> 
> 
> 


From Tom_Dryden@BUDCO.com Tue Oct 23 16:35:34 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9NKZYnj001511 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 23 Oct 2012 16:35:34 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9NKZTeA015385
	for <linux-cluster@redhat.com>; Tue, 23 Oct 2012 16:35:29 -0400
Received: from mail1.budco.com (MAIL1.BUDCO.COM [198.178.223.235])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9NKZR7t031042
	for <linux-cluster@redhat.com>; Tue, 23 Oct 2012 16:35:27 -0400
Received: from BPMC-G0-EX1.budcotdc.net (bpmc-g2.budco.com [198.180.209.212])
	by mail1.budco.com (MOS 4.1.8-GA) with ESMTP id AIE15113;
	Tue, 23 Oct 2012 16:35:25 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CDB15D.D15B6BAC"
Date: Tue, 23 Oct 2012 16:34:36 -0400
Message-ID: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Set time on cluster
Thread-Index: Ac2xXBwl6Bd4B1UBS5i6AP0tE+6A/g==
From: "Dryden, Tom" <Tom_Dryden@BUDCO.com>
To: <linux-cluster@redhat.com>
X-Junkmail-Status: score=10/49, host=mail1.budco.com
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A020204.5086FF8E.0114,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22, dmn=2009-09-10 00:05:08,
	mode=single engine
X-Junkmail-IWF: false
X-Mirapoint-RAPID-Raw: score=unknown(0),
	refid=str=0001.0A020204.5086FF8E.0114,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22,
	dmn=2009-09-10 00:05:08
X-Mirapoint-Loop-Id: 5365a049b2f23175e9cae694a5de26e1
X-RedHat-Spam-Score: -2.635  (BAYES_00,HTML_MESSAGE,RP_MATCHES_RCVD,SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Set time on cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 23 Oct 2012 20:35:35 -0000

This is a multi-part message in MIME format.

------_=_NextPart_001_01CDB15D.D15B6BAC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

Hello All

I had a problem when time adjusted that caused node evictions.   The
sequence of events are in the log clip below.=20

 The events were,=20

1. ntpd restarted

2. ntpd adjusted time  +155 sec

3. openais thinks it has lost communication and begins to evict nodes.

=20

My question is how do I adjust the time without causing the cluster to
get confused?

=20

Thanks for your assistance.=20

Tom

=20

=20

LOG CLIP:

Oct 22 16:05:02 bpas-j5 ntpd[27399]: Listening on interface bond0:9,
172.26.5.21#123 Enabled

Oct 22 16:05:02 bpas-j5 ntpd[27399]: kernel time sync status 0040

Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency initialized 40.201 PPM
from /var/lib/ntp/drift

Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to 169.229.70.201,
stratum 3

Oct 22 16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s

Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync enabled 0001

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] The token was lost in the
OPERATIONAL state.

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Receive multicast socket
recv buffer size (288000 bytes).

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Transmit multicast socket
send buffer size (262142 bytes).

Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
from 2.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
from 0.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Creating commit token
because I am the rep.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving state aru 33 high
seq received 33

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id
for ring 1f48

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering COMMIT state.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering RECOVERY state.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member
172.26.5.11:

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] previous ring seq 8004
rep 172.26.5.11

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] aru 33 high delivered 33
received flag 1

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Did not need to originate
any messages in recovery.

Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Sending initial ORF token

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] CLM CONFIGURATION CHANGE

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] New Configuration:

Oct 22 16:10:55 bpas-j5 kernel: dlm: closing connection to node 2

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.5.11)

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] Members Left:

Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.6.11)

=20


------_=_NextPart_001_01CDB15D.D15B6BAC
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Hello =
All<o:p></o:p></p><p class=3DMsoNormal>I had a problem when time =
adjusted that caused node evictions.&nbsp;&nbsp; The sequence of events =
are in the log clip below. <o:p></o:p></p><p class=3DMsoNormal>&nbsp;The =
events were, <o:p></o:p></p><p class=3DMsoNormal>1. ntpd =
restarted<o:p></o:p></p><p class=3DMsoNormal>2. ntpd adjusted time&nbsp; =
+155 sec<o:p></o:p></p><p class=3DMsoNormal>3. openais thinks it has =
lost communication and begins to evict nodes.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>My question =
is how do I adjust the time without causing the cluster to get =
confused?<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Thanks for your assistance. <o:p></o:p></p><p =
class=3DMsoNormal>Tom<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>LOG =
CLIP:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:05:02 bpas-j5 =
ntpd[27399]: Listening on interface bond0:9, 172.26.5.21#123 =
Enabled<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:05:02 bpas-j5 =
ntpd[27399]: kernel time sync status 0040<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency =
initialized 40.201 PPM from /var/lib/ntp/drift<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to =
169.229.70.201, stratum 3<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync =
enabled 0001<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 =
openais[7238]: [TOTEM] The token was lost in the OPERATIONAL =
state.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 =
openais[7238]: [TOTEM] Receive multicast socket recv buffer size (288000 =
bytes).<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 bpas-j5 =
openais[7238]: [TOTEM] Transmit multicast socket send buffer size =
(262142 bytes).<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:50 =
bpas-j5 openais[7238]: [TOTEM] entering GATHER state from =
2.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] entering GATHER state from 0.<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] =
Creating commit token because I am the rep.<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving =
state aru 33 high seq received 33<o:p></o:p></p><p class=3DMsoNormal>Oct =
22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id for =
ring 1f48<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] entering COMMIT state.<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] =
entering RECOVERY state.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member =
172.26.5.11:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] previous ring seq 8004 rep =
172.26.5.11<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] aru 33 high delivered 33 received flag =
1<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] Did not need to originate any messages in =
recovery.<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [TOTEM] Sending initial ORF token<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; ] =
CLM CONFIGURATION CHANGE<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; ] New =
Configuration:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 =
bpas-j5 kernel: dlm: closing connection to node 2<o:p></o:p></p><p =
class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; =
]&nbsp; r(0) ip(172.26.5.11)<o:p></o:p></p><p class=3DMsoNormal>Oct 22 =
16:10:55 bpas-j5 openais[7238]: [CLM&nbsp; ] Members =
Left:<o:p></o:p></p><p class=3DMsoNormal>Oct 22 16:10:55 bpas-j5 =
openais[7238]: [CLM&nbsp; ]&nbsp; r(0) ip(172.26.6.11)<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></body></html>
------_=_NextPart_001_01CDB15D.D15B6BAC--


From jfriesse@redhat.com Wed Oct 24 03:24:28 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9O7OSfp014242 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 03:24:28 -0400
Received: from daemon.usersys.redhat.com (dhcp-1-240.brq.redhat.com
	[10.34.1.240])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9O7OMGq020317; Wed, 24 Oct 2012 03:24:22 -0400
Message-ID: <508797A6.7090307@redhat.com>
Date: Wed, 24 Oct 2012 09:24:22 +0200
From: Jan Friesse <jfriesse@redhat.com>
User-Agent: Mozilla/5.0 (X11; FreeBSD amd64;
	rv:16.0) Gecko/20121015 Firefox/16.0 SeaMonkey/2.13.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
In-Reply-To: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-loop: linux-cluster@redhat.com
Cc: "Dryden, Tom" <Tom_Dryden@BUDCO.com>
Subject: Re: [Linux-cluster] Set time on cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 07:24:28 -0000

We have support for monotonic timer since 0.80.6-33 (so RHEL >= 5.8).
This should solve problems you are describing. What version are you
using? If it's older then 0.80.6-33, try upgrade.

Regards,
  Honza

Dryden, Tom napsal(a):
>  
> 
> Hello All
> 
> I had a problem when time adjusted that caused node evictions.   The
> sequence of events are in the log clip below. 
> 
>  The events were, 
> 
> 1. ntpd restarted
> 
> 2. ntpd adjusted time  +155 sec
> 
> 3. openais thinks it has lost communication and begins to evict nodes.
> 
>  
> 
> My question is how do I adjust the time without causing the cluster to
> get confused?
> 
>  
> 
> Thanks for your assistance. 
> 
> Tom
> 
>  
> 
>  
> 
> LOG CLIP:
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: Listening on interface bond0:9,
> 172.26.5.21#123 Enabled
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: kernel time sync status 0040
> 
> Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency initialized 40.201 PPM
> from /var/lib/ntp/drift
> 
> Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to 169.229.70.201,
> stratum 3
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync enabled 0001
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] The token was lost in the
> OPERATIONAL state.
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Receive multicast socket
> recv buffer size (288000 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Transmit multicast socket
> send buffer size (262142 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
> from 2.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering GATHER state
> from 0.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Creating commit token
> because I am the rep.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving state aru 33 high
> seq received 33
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id
> for ring 1f48
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering COMMIT state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering RECOVERY state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member
> 172.26.5.11:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] previous ring seq 8004
> rep 172.26.5.11
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] aru 33 high delivered 33
> received flag 1
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Did not need to originate
> any messages in recovery.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Sending initial ORF token
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] CLM CONFIGURATION CHANGE
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] New Configuration:
> 
> Oct 22 16:10:55 bpas-j5 kernel: dlm: closing connection to node 2
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.5.11)
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] Members Left:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.6.11)
> 
>  
> 
> 
> 
> 


From Tom_Dryden@BUDCO.com Wed Oct 24 10:06:13 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OE6CPq005721 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 10:06:13 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OE665W008937; Wed, 24 Oct 2012 10:06:07 -0400
Received: from mail1.budco.com (MAIL1.BUDCO.COM [198.178.223.235])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OE649X006741;
	Wed, 24 Oct 2012 10:06:04 -0400
Received: from BPMC-G0-EX1.budcotdc.net (bpmc-g2.budco.com [198.180.209.212])
	by mail1.budco.com (MOS 4.1.8-GA) with ESMTP id AIE22297;
	Wed, 24 Oct 2012 10:06:03 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Date: Wed, 24 Oct 2012 10:05:04 -0400
Message-ID: <1E7F581BEF7B8444A6D29997EECCC66C024ECF24@BPMC-G0-EX1.budcotdc.net>
In-Reply-To: <508797A6.7090307@redhat.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [Linux-cluster] Set time on cluster
Thread-Index: Ac2xuJt6u/zfeJa1SBmLDTSPVV1UCQAN9fkw
References: <1E7F581BEF7B8444A6D29997EECCC66C024ECF21@BPMC-G0-EX1.budcotdc.net>
	<508797A6.7090307@redhat.com>
From: "Dryden, Tom" <Tom_Dryden@BUDCO.com>
To: "Jan Friesse" <jfriesse@redhat.com>,
	"linux clustering" <linux-cluster@redhat.com>
X-Junkmail-Status: score=10/49, host=mail1.budco.com
X-Junkmail-SD-Raw: score=unknown,
	refid=str=0001.0A02020B.5087F5CC.0003,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22, dmn=2009-09-10 00:05:08,
	mode=single engine
X-Junkmail-IWF: false
X-Mirapoint-RAPID-Raw: score=unknown(0),
	refid=str=0001.0A02020B.5087F5CC.0003,ss=1,fgs=0,
	ip=0.0.0.0, so=2009-09-22 00:05:22,
	dmn=2009-09-10 00:05:08
X-Mirapoint-Loop-Id: 75a379d42cb11772cce6de55eb86b9b4
X-RedHat-Spam-Score: -2.638  (BAYES_00,RP_MATCHES_RCVD,SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9OE6CPq005721
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Set time on cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 14:06:13 -0000

Thank you, we will look into upgrading.



-----Original Message-----
From: Jan Friesse [mailto:jfriesse@redhat.com] 
Sent: Wednesday, October 24, 2012 3:24 AM
To: linux clustering
Cc: Dryden, Tom
Subject: Re: [Linux-cluster] Set time on cluster

We have support for monotonic timer since 0.80.6-33 (so RHEL >= 5.8).
This should solve problems you are describing. What version are you
using? If it's older then 0.80.6-33, try upgrade.

Regards,
  Honza

Dryden, Tom napsal(a):
>  
> 
> Hello All
> 
> I had a problem when time adjusted that caused node evictions.   The
> sequence of events are in the log clip below. 
> 
>  The events were,
> 
> 1. ntpd restarted
> 
> 2. ntpd adjusted time  +155 sec
> 
> 3. openais thinks it has lost communication and begins to evict nodes.
> 
>  
> 
> My question is how do I adjust the time without causing the cluster to

> get confused?
> 
>  
> 
> Thanks for your assistance. 
> 
> Tom
> 
>  
> 
>  
> 
> LOG CLIP:
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: Listening on interface bond0:9,
> 172.26.5.21#123 Enabled
> 
> Oct 22 16:05:02 bpas-j5 ntpd[27399]: kernel time sync status 0040
> 
> Oct 22 16:05:03 bpas-j5 ntpd[27399]: frequency initialized 40.201 PPM 
> from /var/lib/ntp/drift
> 
> Oct 22 16:08:15 bpas-j5 ntpd[27399]: synchronized to 169.229.70.201, 
> stratum 3
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: time reset +155.075282 s
> 
> Oct 22 16:10:50 bpas-j5 ntpd[27399]: kernel time sync enabled 0001
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] The token was lost in 
> the OPERATIONAL state.
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Receive multicast 
> socket recv buffer size (288000 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] Transmit multicast 
> socket send buffer size (262142 bytes).
> 
> Oct 22 16:10:50 bpas-j5 openais[7238]: [TOTEM] entering GATHER state 
> from 2.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering GATHER state 
> from 0.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Creating commit token 
> because I am the rep.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Saving state aru 33 
> high seq received 33
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Storing new sequence id

> for ring 1f48
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering COMMIT state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] entering RECOVERY
state.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] position [0] member
> 172.26.5.11:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] previous ring seq 8004 
> rep 172.26.5.11
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] aru 33 high delivered 
> 33 received flag 1
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Did not need to 
> originate any messages in recovery.
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [TOTEM] Sending initial ORF 
> token
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] CLM CONFIGURATION 
> CHANGE
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] New Configuration:
> 
> Oct 22 16:10:55 bpas-j5 kernel: dlm: closing connection to node 2
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.5.11)
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ] Members Left:
> 
> Oct 22 16:10:55 bpas-j5 openais[7238]: [CLM  ]  r(0) ip(172.26.6.11)
> 
>  
> 
> 
> 
> 



From a.holway@syseleven.de Wed Oct 24 10:39:03 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OEd3Ob030388 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 10:39:03 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OEcvYi024555
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 10:38:58 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OEcsQK019211
	for <Linux-cluster@redhat.com>; Wed, 24 Oct 2012 10:38:55 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from ws148.sys11.net ([176.74.56.148])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits))
	for Linux-cluster@redhat.com; Wed, 24 Oct 2012 16:38:52 +0200
From: Andrew Holway <a.holway@syseleven.de>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Date: Wed, 24 Oct 2012 16:38:46 +0200
Message-Id: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
To: linux clustering <Linux-cluster@redhat.com>
Mime-Version: 1.0 (Apple Message framework v1278)
X-RedHat-Spam-Score: -3.338  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 14:39:03 -0000

Hello,

Ive been doing some testing.
I have an iSCSI device that I have set up with CLVM. 
I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
I have 12 KVM machines per physical machine with a total of 48 VMs.
Each KVM is mounted on a LV.
The performance is not very good.
I am not a fish.

Could CLVM be the bottleneck? Especially with so many LV's?
I though I would ask before I set up 48 physical luns on the iSCSI device :)

Thanks,

Andrew





From heiko.nardmann@itechnical.de Wed Oct 24 11:01:20 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OF1JUI000349 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 11:01:19 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9OF1B2q007716
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:01:11 -0400
Received: from moutng.kundenserver.de (moutng.kundenserver.de [212.227.17.10])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OF12U7029590
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:01:10 -0400
Received: from linux-imsd.site (business-178-015-194-126.static.arcor-ip.net
	[178.15.194.126])
	by mrelayeu.kundenserver.de (node=mrbap3) with ESMTP (Nemesis)
	id 0Lgoo2-1T6seJ27B0-00oHXP; Wed, 24 Oct 2012 17:01:01 +0200
Message-ID: <508802AF.1050504@itechnical.de>
Date: Wed, 24 Oct 2012 17:01:03 +0200
From: Heiko Nardmann <heiko.nardmann@itechnical.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: Andrew Holway <a.holway@syseleven.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
In-Reply-To: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Provags-ID: V02:K0:L/r/IA8yM3mkrfApWJrZUHYpxY9fNrB1eh57I7goWH6
	XQ6pWWiEsGOAgrU1qwdv+FHmolf/NCpQ6oVfGuqOXRsVvAxQB4
	Q/6rpvhweXf/h6hDAo0tcXANlm1mggkZG/5/yyTye2U8Hf9san
	/mN2xHfsztbpNLYL8NLHmVdMxZxridn1SSeTBxKKcG9v/80lyu
	GuUE+M7tx0N6omG8Y5aAiRTE0V1AehUcvKYphJSv0Li08wOuKe
	gk8Z7EKhl5EcSuooV9cOZ47QZKmK5HFo/SEEZEYu1vkP557lS7
	klo3zMRWAvQlgRC2WJxkOaEEFU3ebgxheBHGF4uo0V3Kl0toRL
	9v9VXlZ1eCxXfhnXJK03/0gS7+S+Cw+uVnq7KLl4l
X-RedHat-Spam-Score: -1.911  (BAYES_00,RCVD_IN_DNSWL_NONE,SPF_HELO_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 15:01:20 -0000

Am 24.10.2012 16:38, schrieb Andrew Holway:
> Hello,
>
> Ive been doing some testing.
> I have an iSCSI device that I have set up with CLVM. 
> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
> I have 12 KVM machines per physical machine with a total of 48 VMs.
> Each KVM is mounted on a LV.
> The performance is not very good.
> I am not a fish.
>
> Could CLVM be the bottleneck? Especially with so many LV's?
> I though I would ask before I set up 48 physical luns on the iSCSI device :)
>
> Thanks,
>
> Andrew
>
>
>
>
Looks like you should open a ticket with RedHat and give them/us some
more infos (including expected perf. vs. experienced perf., cluster
configuration) ...

Kind regards,

    Heiko


From a.holway@syseleven.de Wed Oct 24 11:27:42 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9OFRgfL004976 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 24 Oct 2012 11:27:42 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9OFRbao015361
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:27:37 -0400
Received: from kms.syseleven.de (kms.syseleven.de [176.74.58.26])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9OFRYTj012298
	for <linux-cluster@redhat.com>; Wed, 24 Oct 2012 11:27:35 -0400
X-Footer: c3lzZWxldmVuLmRl
Received: from ws148.sys11.net ([176.74.56.148])
	(authenticated user a.holway@syseleven.de) by kms.syseleven.de
	(using TLSv1/SSLv3 with cipher AES128-SHA (128 bits));
	Wed, 24 Oct 2012 17:27:32 +0200
Mime-Version: 1.0 (Apple Message framework v1278)
Content-Type: text/plain; charset=iso-8859-1
From: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <508802AF.1050504@itechnical.de>
Date: Wed, 24 Oct 2012 17:27:27 +0200
Message-Id: <0EEAC8C7-D4D5-4570-9613-78EA46BDE048@syseleven.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
	<508802AF.1050504@itechnical.de>
To: Heiko Nardmann <heiko.nardmann@itechnical.de>
X-RedHat-Spam-Score: -3.338  (BAYES_00, RCVD_IN_DNSWL_LOW, RP_MATCHES_RCVD,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id q9OFRgfL004976
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 24 Oct 2012 15:27:42 -0000


On Oct 24, 2012, at 5:01 PM, Heiko Nardmann wrote:

> Am 24.10.2012 16:38, schrieb Andrew Holway:
>> Hello,
>> 
>> Ive been doing some testing.
>> I have an iSCSI device that I have set up with CLVM. 
>> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
>> I have 12 KVM machines per physical machine with a total of 48 VMs.
>> Each KVM is mounted on a LV.
>> The performance is not very good.
>> I am not a fish.
>> 
>> Could CLVM be the bottleneck? Especially with so many LV's?
>> I though I would ask before I set up 48 physical luns on the iSCSI device :)
>> 
>> Thanks,
>> 
>> Andrew
>> 
>> 
>> 
>> 
> Looks like you should open a ticket with RedHat and give them/us some
> more infos (including expected perf. vs. experienced perf., cluster
> configuration) ...

That would be tricky! We don't have Redhat subscription!

In any case, Im just interested if it *could* be a problem. I will have to test this with no CLVM before I can open a ticket somewhere.

Ta,

Andrew

> 
> Kind regards,
> 
>    Heiko
> 




From lmb@suse.de Thu Oct 25 07:27:06 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9PBR6NY002292 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 25 Oct 2012 07:27:06 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9PBR1KJ022561
	for <linux-cluster@redhat.com>; Thu, 25 Oct 2012 07:27:01 -0400
Received: from mx.in-addr.de (gate.in-addr.de [212.8.193.158])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9PBQqf4031634
	for <linux-cluster@redhat.com>; Thu, 25 Oct 2012 07:27:00 -0400
Received: by mx.in-addr.de (mx.in-addr.de, from userid 10)
	id 0EBFE16E90; Thu, 25 Oct 2012 13:26:50 +0200 (CEST)
Received: by hermes.in-addr.de (Postfix, from userid 500)
	id 71D7DE1390; Thu, 25 Oct 2012 13:25:37 +0200 (CEST)
Date: Thu, 25 Oct 2012 13:25:37 +0200
From: Lars Marowsky-Bree <lmb@suse.de>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <20121025112537.GI22929@suse.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
X-Ctuhulu: HASTUR
User-Agent: Mutt/1.5.21 (2011-07-01)
X-RedHat-Spam-Score: -0.9  (BAYES_00,FRT_OFFER2)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 25 Oct 2012 11:27:06 -0000

On 2012-10-24T16:38:46, Andrew Holway <a.holway@syseleven.de> wrote:

> Hello,
> 
> Ive been doing some testing.
> I have an iSCSI device that I have set up with CLVM. 
> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
> I have 12 KVM machines per physical machine with a total of 48 VMs.
> Each KVM is mounted on a LV.
> The performance is not very good.
> I am not a fish.
> 
> Could CLVM be the bottleneck? Especially with so many LV's?

cLVM2 pretty much gets out of the way, except for the
adminstrative/management tasks like adding/deleting/resizing LVs. It has
almost no measurable impact on the IO latency/throughput of the LVs.

It is more likely you're looking at a bandwidth/latency problem on the
iSCSI side. Is the connection clogged? Server side overloaded? Network?

Regards,
    Lars

-- 
Architect Storage/HA
SUSE LINUX Products GmbH, GF: Jeff Hawn, Jennifer Guild, Felix Imendrffer, HRB 21284 (AG Nrnberg)
"Experience is the name everyone gives to their mistakes." -- Oscar Wilde


From swhiteho@redhat.com Thu Oct 25 08:22:18 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9PCMILW026066 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 25 Oct 2012 08:22:18 -0400
Received: from [10.11.10.69] (vpn-10-69.rdu.redhat.com [10.11.10.69])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9PCMBdJ013459; Thu, 25 Oct 2012 08:22:12 -0400
From: Steven Whitehouse <swhiteho@redhat.com>
To: Andrew Holway <a.holway@syseleven.de>
In-Reply-To: <0EEAC8C7-D4D5-4570-9613-78EA46BDE048@syseleven.de>
References: <E57C3C60-6AA1-4601-874C-7ACA71A253E0@syseleven.de>
	<508802AF.1050504@itechnical.de>
	<0EEAC8C7-D4D5-4570-9613-78EA46BDE048@syseleven.de>
Content-Type: text/plain; charset="UTF-8"
Organization: Red Hat UK Ltd
Date: Thu, 25 Oct 2012 13:21:22 +0100
Message-ID: <1351167682.2710.35.camel@menhir>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] CLVM performance
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 25 Oct 2012 12:22:19 -0000

Hi,

On Wed, 2012-10-24 at 17:27 +0200, Andrew Holway wrote:
> On Oct 24, 2012, at 5:01 PM, Heiko Nardmann wrote:
> 
> > Am 24.10.2012 16:38, schrieb Andrew Holway:
> >> Hello,
> >> 
> >> Ive been doing some testing.
> >> I have an iSCSI device that I have set up with CLVM. 
> >> I have 4 physical hosts, all with top of the range xeons and 144GB ram. 
> >> I have 12 KVM machines per physical machine with a total of 48 VMs.
> >> Each KVM is mounted on a LV.
> >> The performance is not very good.
> >> I am not a fish.
> >> 
> >> Could CLVM be the bottleneck? Especially with so many LV's?
> >> I though I would ask before I set up 48 physical luns on the iSCSI device :)
> >> 
> >> Thanks,
> >> 
> >> Andrew
> >> 
> >> 
> >> 
> >> 
> > Looks like you should open a ticket with RedHat and give them/us some
> > more infos (including expected perf. vs. experienced perf., cluster
> > configuration) ...
> 
> That would be tricky! We don't have Redhat subscription!
> 
> In any case, Im just interested if it *could* be a problem. I will have to test this with no CLVM before I can open a ticket somewhere.
> 
> Ta,
> 
> Andrew
> 

What is it that is not working at the speed that you think it should?
Are you looking at disk throughput, or time taken to scan the LVs or
something else? Does the throughput improve if you use the iSCSI LUN
directly?

I think we'd need more information before this can be solved. Also I'd
suggest asking on the LVM list as there may be more people there who can
help.

Unless this is specifically about the cluster bit of CLVM (and the
cluster bit is only in use when configuration changes are made, or when
things are scanned at boot time) then that may be a better bet for
finding a solution,

Steve.




From terance@socialtwist.com Mon Oct 29 01:24:45 2012
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9T5OjV4024613 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 29 Oct 2012 01:24:45 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9T5OeGw018409
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 01:24:40 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9T5OKP3021653
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 01:24:39 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so4045812pbb.33
	for <linux-cluster@redhat.com>; Sun, 28 Oct 2012 22:24:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=google.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:x-gm-message-state;
	bh=7vdbMjbNsxGXIe6Xwq3fHls4z/XBiRHYbwQJ9UtXQbo=;
	b=YBxBOriMSoY4yBabgrvpv0h8X8OOS9HeMGGyBdr3lbUCZCy5ahlCIJrPEioljcP4Ze
	pj1wZoOzFCq4ifCcq7EV8Ng2qJlmpMSX2v5rL5Sm8N4HYnroO15JDgvhdj6Gn1xeaOGi
	65yY4Zs2JjXBhWoZrSxGZVuPL2tw/sokbfld/OzN7hGPMqfqqqPIuB6ATP2x3dDqumhl
	8eWcUeX+ZXQQF7SMyn8p5AoTcJzMtXILtXOp9d8dbb8+yShSzWzbal76z2zgfFbDlu54
	oet5tOGlVpP/pt04B9cQjWoT4gs2Xsm6F23CEDn5XVkD5NYBx6oUM2dIiyjeh9YmoDFj
	bRBA==
MIME-Version: 1.0
Received: by 10.68.125.230 with SMTP id mt6mr89918204pbb.110.1351488278996;
	Sun, 28 Oct 2012 22:24:38 -0700 (PDT)
Received: by 10.68.146.162 with HTTP; Sun, 28 Oct 2012 22:24:38 -0700 (PDT)
In-Reply-To: <5084F6C1.8010406@redhat.com>
References: <CAK76X7TqhLn6Hxd-4xDTLf+XgKQL59u6ZRN5OnhcAQS3hVZg4A@mail.gmail.com>
	<CAK76X7Rwkn1Rn4yXFgpEbh72NBnn_cHnSHRbTP-o6iG6U1V9sw@mail.gmail.com>
	<5084F6C1.8010406@redhat.com>
Date: Mon, 29 Oct 2012 10:54:38 +0530
Message-ID: <CAK76X7ThtrV9XZoH2rQkzaSV0wEHKEuiFuE278igOtw6RcO_Eg@mail.gmail.com>
From: Terance Dias <terance@socialtwist.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b2e4446c9a89e04cd2be274
X-Gm-Message-State: ALoCoQkIKM0U8jFvn9bBKo63w6KJySbZNWXR2dZ094uuHZ4KR5ykkgH91lhc8P7hJxu2ArkoEDuz
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] CMAN nodes in different LANs
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 29 Oct 2012 05:24:46 -0000

--047d7b2e4446c9a89e04cd2be274
Content-Type: text/plain; charset=ISO-8859-1

Thanks for your reply Fabio. I think the problem may be at our end. Our
infrastructure is on Amazon EC2 and it turns out that the interfaces file
of a EC2 node does not have reference to its public IP address.

On Mon, Oct 22, 2012 at 1:03 PM, Fabio M. Di Nitto <fdinitto@redhat.com>wrote:

> On 10/17/2012 03:12 PM, Terance Dias wrote:
> > Hi,
> >
> > We're trying to create a cluster in which the nodes lie in 2 different
> > LANs. Since the nodes lie in different networks, they cannot resolve the
> > other node by their internal IP. So in my cluster.conf file, I've
> > provided their external IPs. But now when I start CMAN service, I get
> > the following error.
> >
>
> First of all, we never tested nodes on different LANs, so you might have
> issues there that we are not aware of (beside that, latency between
> nodes *MUST* be < 2ms).
>
> As for the IP/name that should work, but I recall fixing something
> related not too long ago.
>
> What version of cman did you install and which distribution/OS?
>
> Fabio
>
> > -----------------------------------
> >
> > Starting cluster:
> >    Checking Network Manager... [  OK  ]
> >    Global setup... [  OK  ]
> >    Loading kernel modules... [  OK  ]
> >    Mounting configfs... [  OK  ]
> >    Starting cman... Cannot find node name in cluster.conf
> > Unable to get the configuration
> > Cannot find node name in cluster.conf
> > cman_tool: corosync daemon didn't start
> > [FAILED]
> >
> > -------------------------------------
> >
> > My cluster.conf file is as below
> >
> > -------------------------------------
> >
> > <?xml version="1.0"?>
> > <!--
> > This is an example of a cluster.conf file to run qpidd HA under
> rgmanager.
> >
> > NOTE: fencing is not shown, you must configure fencing appropriately for
> > your cluster.
> > -->
> >
> > <cluster name="test-cluster" config_version="18">
> >   <!-- The cluster has 2 nodes. Each has a unique nodid and one vote
> >        for quorum. -->
> >   <clusternodes>
> >     <clusternode name="/external-ip-1/" nodeid="1"/>
> >     <clusternode name="/external-ip-2/" nodeid="2"/>
> >   </clusternodes>
> >   <cman two_node="1" expected_votes="1" transport="udpu">
> >   </cman>
> >   <!-- Resouce Manager configuration. -->
> >   <rm>
> >     <!--
> >         There is a failoverdomain for each node containing just that
> node.
> >         This lets us stipulate that the qpidd service should always run
> > on each node.
> >     -->
> >     <failoverdomains>
> >       <failoverdomain name="east-domain" restricted="1">
> >         <failoverdomainnode name="/external-ip-1/"/>
> >       </failoverdomain>
> >       <failoverdomain name="west-domain" restricted="1">
> >         <failoverdomainnode name="/external-ip-2/"/>
> >       </failoverdomain>
> >     </failoverdomains>
> >
> >     <resources>
> >       <!-- This script starts a qpidd broker acting as a backup. -->
> >       <script file="/usr/local/etc/init.d/qpidd" name="qpidd"/>
> >
> >       <!-- This script promotes the qpidd broker on this node to
> > primary. -->
> >       <script file="/usr/local/etc/init.d/qpidd-primary"
> > name="qpidd-primary"/>
> >     </resources>
> >
> >     <!-- There is a qpidd service on each node, it should be restarted
> > if it fails. -->
> >     <service name="east-qpidd-service" domain="east-domain"
> > recovery="restart">
> >       <script ref="qpidd"/>
> >     </service>
> >     <service name="west-qpidd-service" domain="west-domain"
> > recovery="restart">
> >       <script ref="qpidd"/>
> >     </service>
> >
> >     <!-- There should always be a single qpidd-primary service, it can
> > run on any node. -->
> >     <service name="qpidd-primary-service" autostart="1" exclusive="0"
> > recovery="relocate">
> >       <script ref="qpidd-primary"/>
> >     </service>
> >   </rm>
> > </cluster>
> > ------------------------------------------------
> >
> > Thanks,
> > Terance
> >
> >
> >
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--047d7b2e4446c9a89e04cd2be274
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for your reply Fabio. I think the problem may be at our end. Our inf=
rastructure is on Amazon EC2 and it turns out that the interfaces file of a=
 EC2 node does not have reference to its public IP address.<br><br><div cla=
ss=3D"gmail_quote">
On Mon, Oct 22, 2012 at 1:03 PM, Fabio M. Di Nitto <span dir=3D"ltr">&lt;<a=
 href=3D"mailto:fdinitto@redhat.com" target=3D"_blank">fdinitto@redhat.com<=
/a>&gt;</span> wrote:<br><blockquote class=3D"gmail_quote" style=3D"margin:=
0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<div class=3D"im">On 10/17/2012 03:12 PM, Terance Dias wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; We&#39;re trying to create a cluster in which the nodes lie in 2 diffe=
rent<br>
&gt; LANs. Since the nodes lie in different networks, they cannot resolve t=
he<br>
&gt; other node by their internal IP. So in my cluster.conf file, I&#39;ve<=
br>
&gt; provided their external IPs. But now when I start CMAN service, I get<=
br>
&gt; the following error.<br>
&gt;<br>
<br>
</div>First of all, we never tested nodes on different LANs, so you might h=
ave<br>
issues there that we are not aware of (beside that, latency between<br>
nodes *MUST* be &lt; 2ms).<br>
<br>
As for the IP/name that should work, but I recall fixing something<br>
related not too long ago.<br>
<br>
What version of cman did you install and which distribution/OS?<br>
<br>
Fabio<br>
<div class=3D"im"><br>
&gt; -----------------------------------<br>
&gt;<br>
&gt; Starting cluster:<br>
&gt; =A0 =A0Checking Network Manager... [ =A0OK =A0]<br>
&gt; =A0 =A0Global setup... [ =A0OK =A0]<br>
&gt; =A0 =A0Loading kernel modules... [ =A0OK =A0]<br>
&gt; =A0 =A0Mounting configfs... [ =A0OK =A0]<br>
&gt; =A0 =A0Starting cman... Cannot find node name in cluster.conf<br>
&gt; Unable to get the configuration<br>
&gt; Cannot find node name in cluster.conf<br>
&gt; cman_tool: corosync daemon didn&#39;t start<br>
&gt; [FAILED]<br>
&gt;<br>
&gt; -------------------------------------<br>
&gt;<br>
&gt; My cluster.conf file is as below<br>
&gt;<br>
&gt; -------------------------------------<br>
&gt;<br>
&gt; &lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&gt; &lt;!--<br>
&gt; This is an example of a cluster.conf file to run qpidd HA under rgmana=
ger.<br>
&gt;<br>
&gt; NOTE: fencing is not shown, you must configure fencing appropriately f=
or<br>
&gt; your cluster.<br>
&gt; --&gt;<br>
&gt;<br>
&gt; &lt;cluster name=3D&quot;test-cluster&quot; config_version=3D&quot;18&=
quot;&gt;<br>
&gt; =A0 &lt;!-- The cluster has 2 nodes. Each has a unique nodid and one v=
ote<br>
&gt; =A0 =A0 =A0 =A0for quorum. --&gt;<br>
&gt; =A0 &lt;clusternodes&gt;<br>
</div>&gt; =A0 =A0 &lt;clusternode name=3D&quot;/external-ip-1/&quot; nodei=
d=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 &lt;clusternode name=3D&quot;/external-ip-2/&quot; nodeid=3D&q=
uot;2&quot;/&gt;<br>
<div class=3D"im">&gt; =A0 &lt;/clusternodes&gt;<br>
&gt; =A0 &lt;cman two_node=3D&quot;1&quot; expected_votes=3D&quot;1&quot; t=
ransport=3D&quot;udpu&quot;&gt;<br>
&gt; =A0 &lt;/cman&gt;<br>
&gt; =A0 &lt;!-- Resouce Manager configuration. --&gt;<br>
&gt; =A0 &lt;rm&gt;<br>
&gt; =A0 =A0 &lt;!--<br>
&gt; =A0 =A0 =A0 =A0 There is a failoverdomain for each node containing jus=
t that node.<br>
&gt; =A0 =A0 =A0 =A0 This lets us stipulate that the qpidd service should a=
lways run<br>
&gt; on each node.<br>
&gt; =A0 =A0 --&gt;<br>
&gt; =A0 =A0 &lt;failoverdomains&gt;<br>
&gt; =A0 =A0 =A0 &lt;failoverdomain name=3D&quot;east-domain&quot; restrict=
ed=3D&quot;1&quot;&gt;<br>
</div>&gt; =A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quot;/external-ip=
-1/&quot;/&gt;<br>
<div class=3D"im">&gt; =A0 =A0 =A0 &lt;/failoverdomain&gt;<br>
&gt; =A0 =A0 =A0 &lt;failoverdomain name=3D&quot;west-domain&quot; restrict=
ed=3D&quot;1&quot;&gt;<br>
</div>&gt; =A0 =A0 =A0 =A0 &lt;failoverdomainnode name=3D&quot;/external-ip=
-2/&quot;/&gt;<br>
<div class=3D"HOEnZb"><div class=3D"h5">&gt; =A0 =A0 =A0 &lt;/failoverdomai=
n&gt;<br>
&gt; =A0 =A0 &lt;/failoverdomains&gt;<br>
&gt;<br>
&gt; =A0 =A0 &lt;resources&gt;<br>
&gt; =A0 =A0 =A0 &lt;!-- This script starts a qpidd broker acting as a back=
up. --&gt;<br>
&gt; =A0 =A0 =A0 &lt;script file=3D&quot;/usr/local/etc/init.d/qpidd&quot; =
name=3D&quot;qpidd&quot;/&gt;<br>
&gt;<br>
&gt; =A0 =A0 =A0 &lt;!-- This script promotes the qpidd broker on this node=
 to<br>
&gt; primary. --&gt;<br>
&gt; =A0 =A0 =A0 &lt;script file=3D&quot;/usr/local/etc/init.d/qpidd-primar=
y&quot;<br>
&gt; name=3D&quot;qpidd-primary&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/resources&gt;<br>
&gt;<br>
&gt; =A0 =A0 &lt;!-- There is a qpidd service on each node, it should be re=
started<br>
&gt; if it fails. --&gt;<br>
&gt; =A0 =A0 &lt;service name=3D&quot;east-qpidd-service&quot; domain=3D&qu=
ot;east-domain&quot;<br>
&gt; recovery=3D&quot;restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 =A0 &lt;service name=3D&quot;west-qpidd-service&quot; domain=3D&qu=
ot;west-domain&quot;<br>
&gt; recovery=3D&quot;restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 &lt;script ref=3D&quot;qpidd&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; =A0 =A0 &lt;!-- There should always be a single qpidd-primary service,=
 it can<br>
&gt; run on any node. --&gt;<br>
&gt; =A0 =A0 &lt;service name=3D&quot;qpidd-primary-service&quot; autostart=
=3D&quot;1&quot; exclusive=3D&quot;0&quot;<br>
&gt; recovery=3D&quot;relocate&quot;&gt;<br>
&gt; =A0 =A0 =A0 &lt;script ref=3D&quot;qpidd-primary&quot;/&gt;<br>
&gt; =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 &lt;/rm&gt;<br>
&gt; &lt;/cluster&gt;<br>
&gt; ------------------------------------------------<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Terance<br>
&gt;<br>
&gt;<br>
&gt;<br>
<br>
</div></div><div class=3D"HOEnZb"><div class=3D"h5">--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</div></div></blockquote></div><br>

--047d7b2e4446c9a89e04cd2be274--


From engineerzuhairraza@gmail.com Mon Oct 29 07:23:37 2012
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9TBNbDt005375 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 29 Oct 2012 07:23:37 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9TBNWO5030277
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 07:23:32 -0400
Received: from mail-pb0-f46.google.com (mail-pb0-f46.google.com
	[209.85.160.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9TBNUjY014839
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 07:23:30 -0400
Received: by mail-pb0-f46.google.com with SMTP id rr4so4229418pbb.33
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 04:23:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:from:date:message-id:subject:to:content-type;
	bh=GHN27XDSVvVpv3JkQGBsnVa008UMJERdsTJC/1nN+eY=;
	b=Cpx8MU+T15KNlsOmcxlRbLz9zzPrzaRp2DJk1yphaCnTqZjwNilN2plcb5ZCkuAd8z
	0ScCUgmx6h8XyCnX1jGWWc7jh0Os1z+OXe5uUtodEJzBcQVq/KFyw2J8teAYQKaUE9j1
	KOxpEZnzTcnRirmrCsCKqR9BAmTHy9Fo5g6GH63JL3IaBViCjFzVyfhC1cpicS6tFJde
	oEpQyeX7TCoCbEygi1jzNPs7cyFfwc6vyrGua7ZE1uvPhU0TlVaVhgKLKYsSxuXwwb4z
	ky97aMxasRUAyXMSpOJQ8H9A5GVX0w+TZ5vdLQB300avNX9fwKvdgTRtK3sCy2sadIhx
	YmPw==
Received: by 10.68.189.138 with SMTP id gi10mr91177728pbc.165.1351509810455;
	Mon, 29 Oct 2012 04:23:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.41.10 with HTTP; Mon, 29 Oct 2012 04:23:09 -0700 (PDT)
From: Zohair Raza <engineerzuhairraza@gmail.com>
Date: Mon, 29 Oct 2012 15:23:09 +0400
Message-ID: <CAF_PTevnYn_Ck4Wda2TMF=uaULFW4vDZufykPSLY90g=hfP6yg@mail.gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=e89a8fb2091e29a3fa04cd30e63d
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Problem in fencing, gfs2 freezes
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 29 Oct 2012 11:23:37 -0000

--e89a8fb2091e29a3fa04cd30e63d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have setup a Primary/Primary cluster with GFS2.

All works good if I shut down any node regularly, but when I unplug power
of any node, GFS freezes and I can not access the device.

Tried to use http://people.redhat.com/lhh/obliterate

this is what I see in logs

Oct 29 08:05:41 node1 kernel: d-con res0: PingAck did not arrive in time.
Oct 29 08:05:41 node1 kernel: d-con res0: peer( Primary -> Unknown ) conn(
Connected -> NetworkFailure ) pdsk( UpToDate -> DUnknown ) susp( 0 -> 1 )
Oct 29 08:05:41 node1 kernel: d-con res0: asender terminated
Oct 29 08:05:41 node1 kernel: d-con res0: Terminating asender thread
Oct 29 08:05:41 node1 kernel: d-con res0: Connection closed
Oct 29 08:05:41 node1 kernel: d-con res0: conn( NetworkFailure ->
Unconnected )
Oct 29 08:05:41 node1 kernel: d-con res0: receiver terminated
Oct 29 08:05:41 node1 kernel: d-con res0: Restarting receiver thread
Oct 29 08:05:41 node1 kernel: d-con res0: receiver (re)started
Oct 29 08:05:41 node1 kernel: d-con res0: conn( Unconnected -> WFConnection
)
Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
fence-peer res0
Oct 29 08:05:41 node1 fence_node[1912]: fence node2 failed
Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
fence-peer res0 exit code 1 (0x100)
Oct 29 08:05:41 node1 kernel: d-con res0: fence-peer helper broken,
returned 1
Oct 29 08:05:48 node1 corosync[1346]:   [TOTEM ] A processor failed,
forming new configuration.
Oct 29 08:05:53 node1 corosync[1346]:   [QUORUM] Members[1]: 1
Oct 29 08:05:53 node1 corosync[1346]:   [TOTEM ] A processor joined or left
the membership and a new membership was formed.
Oct 29 08:05:53 node1 corosync[1346]:   [CPG   ] chosen downlist: sender
r(0) ip(192.168.23.128) ; members(old:2 left:1)
Oct 29 08:05:53 node1 corosync[1346]:   [MAIN  ] Completed service
synchronization, ready to provide service.
Oct 29 08:05:53 node1 kernel: dlm: closing connection to node 2
Oct 29 08:05:53 node1 fenced[1401]: fencing node node2
Oct 29 08:05:53 node1 kernel: GFS2: fsid=cluster-setup:res0.0: jid=1:
Trying to acquire journal lock...
Oct 29 08:05:53 node1 fenced[1401]: fence node2 dev 0.0 agent
fence_ack_manual result: error from agent
Oct 29 08:05:53 node1 fenced[1401]: fence node2 failed
Oct 29 08:05:56 node1 fenced[1401]: fencing node node2
Oct 29 08:05:56 node1 fenced[1401]: fence node2 dev 0.0 agent
fence_ack_manual result: error from agent
Oct 29 08:05:56 node1 fenced[1401]: fence node2 failed
Oct 29 08:05:59 node1 fenced[1401]: fencing node node2
Oct 29 08:05:59 node1 fenced[1401]: fence node2 dev 0.0 agent
fence_ack_manual result: error from agent
Oct 29 08:05:59 node1 fenced[1401]: fence node2 failed

Regards,
Zohair Raza

--e89a8fb2091e29a3fa04cd30e63d
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div style=3D"color:rgb(34,34,34);font-family:arial,sans-s=
erif;font-size:13px;background-color:rgb(255,255,255)">Hi,=A0</div><div sty=
le=3D"color:rgb(34,34,34);font-family:arial,sans-serif;font-size:13px;backg=
round-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)">I have setup a Primary/Prim=
ary cluster with GFS2.</div><div style=3D"color:rgb(34,34,34);font-family:a=
rial,sans-serif;font-size:13px;background-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)">All works good if I shut do=
wn any node regularly, but when I unplug power of any node, GFS freezes and=
 I can not access the device.=A0</div>

<div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;font-size:13=
px;background-color:rgb(255,255,255)"><br></div><div style=3D"color:rgb(34,=
34,34);font-family:arial,sans-serif;font-size:13px;background-color:rgb(255=
,255,255)">

Tried to use=A0<a href=3D"http://people.redhat.com/lhh/obliterate" target=
=3D"_blank" style=3D"color:rgb(17,85,204)">http://people.redhat.com/lhh/obl=
iterate</a>=A0</div><div style=3D"color:rgb(34,34,34);font-family:arial,san=
s-serif;font-size:13px;background-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)">this is what I see in logs=
=A0</div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fon=
t-size:13px;background-color:rgb(255,255,255)">

<br></div><div style=3D"color:rgb(34,34,34);font-family:arial,sans-serif;fo=
nt-size:13px;background-color:rgb(255,255,255)"><div>Oct 29 08:05:41 node1 =
kernel: d-con res0: PingAck did not arrive in time.</div><div>Oct 29 08:05:=
41 node1 kernel: d-con res0: peer( Primary -&gt; Unknown ) conn( Connected =
-&gt; NetworkFailure ) pdsk( UpToDate -&gt; DUnknown ) susp( 0 -&gt; 1 )</d=
iv>

<div>Oct 29 08:05:41 node1 kernel: d-con res0: asender terminated</div><div=
>Oct 29 08:05:41 node1 kernel: d-con res0: Terminating asender thread</div>=
<div>Oct 29 08:05:41 node1 kernel: d-con res0: Connection closed</div>
<div>
Oct 29 08:05:41 node1 kernel: d-con res0: conn( NetworkFailure -&gt; Unconn=
ected )</div><div>Oct 29 08:05:41 node1 kernel: d-con res0: receiver termin=
ated</div><div>Oct 29 08:05:41 node1 kernel: d-con res0: Restarting receive=
r thread</div>

<div>Oct 29 08:05:41 node1 kernel: d-con res0: receiver (re)started</div><d=
iv>Oct 29 08:05:41 node1 kernel: d-con res0: conn( Unconnected -&gt; WFConn=
ection )</div><div>Oct 29 08:05:41 node1 kernel: d-con res0: helper command=
: /sbin/drbdadm fence-peer res0</div>

<div>Oct 29 08:05:41 node1 fence_node[1912]: fence node2 failed</div><div>O=
ct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm fenc=
e-peer res0 exit code 1 (0x100)</div><div>Oct 29 08:05:41 node1 kernel: d-c=
on res0: fence-peer helper broken, returned 1</div>

<div>Oct 29 08:05:48 node1 corosync[1346]: =A0 [TOTEM ] A processor failed,=
 forming new configuration.</div><div>Oct 29 08:05:53 node1 corosync[1346]:=
 =A0 [QUORUM] Members[1]: 1</div><div>Oct 29 08:05:53 node1 corosync[1346]:=
 =A0 [TOTEM ] A processor joined or left the membership and a new membershi=
p was formed.</div>

<div>Oct 29 08:05:53 node1 corosync[1346]: =A0 [CPG =A0 ] chosen downlist: =
sender r(0) ip(192.168.23.128) ; members(old:2 left:1)</div><div>Oct 29 08:=
05:53 node1 corosync[1346]: =A0 [MAIN =A0] Completed service synchronizatio=
n, ready to provide service.</div>

<div>Oct 29 08:05:53 node1 kernel: dlm: closing connection to node 2</div><=
div>Oct 29 08:05:53 node1 fenced[1401]: fencing node node2</div><div>Oct 29=
 08:05:53 node1 kernel: GFS2: fsid=3Dcluster-setup:res0.0: jid=3D1: Trying =
to acquire journal lock...</div>

<div>Oct 29 08:05:53 node1 fenced[1401]: fence node2 dev 0.0 agent fence_ac=
k_manual result: error from agent</div><div>Oct 29 08:05:53 node1 fenced[14=
01]: fence node2 failed</div><div>Oct 29 08:05:56 node1 fenced[1401]: fenci=
ng node node2</div>

<div>Oct 29 08:05:56 node1 fenced[1401]: fence node2 dev 0.0 agent fence_ac=
k_manual result: error from agent</div><div>Oct 29 08:05:56 node1 fenced[14=
01]: fence node2 failed</div><div>Oct 29 08:05:59 node1 fenced[1401]: fenci=
ng node node2</div>

<div>Oct 29 08:05:59 node1 fenced[1401]: fence node2 dev 0.0 agent fence_ac=
k_manual result: error from agent</div><div>Oct 29 08:05:59 node1 fenced[14=
01]: fence node2 failed</div><div><br></div></div><div dir=3D"ltr">Regards,=
<br>

Zohair Raza=A0</div><br>
</div>

--e89a8fb2091e29a3fa04cd30e63d--


From lists@alteeve.ca Mon Oct 29 13:28:33 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9THSXHN001273 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 29 Oct 2012 13:28:33 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9THSSt0004981
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 13:28:28 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9THSQs9008805
	for <linux-cluster@redhat.com>; Mon, 29 Oct 2012 13:28:27 -0400
Received: from lemass.alteeve.ca (mf70536d0.tmodns.net [208.54.5.247])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id DA01D422461;
	Mon, 29 Oct 2012 13:28:23 -0400 (EDT)
Message-ID: <508EBCB5.2060107@alteeve.ca>
Date: Mon, 29 Oct 2012 10:28:21 -0700
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121016 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAF_PTevnYn_Ck4Wda2TMF=uaULFW4vDZufykPSLY90g=hfP6yg@mail.gmail.com>
In-Reply-To: <CAF_PTevnYn_Ck4Wda2TMF=uaULFW4vDZufykPSLY90g=hfP6yg@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Problem in fencing, gfs2 freezes
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 29 Oct 2012 17:28:33 -0000

Please see the answer given on the DRBD Users list to this question.

digimer

On 10/29/2012 04:23 AM, Zohair Raza wrote:
> Hi, 
> 
> I have setup a Primary/Primary cluster with GFS2.
> 
> All works good if I shut down any node regularly, but when I unplug
> power of any node, GFS freezes and I can not access the device. 
> 
> Tried to use http://people.redhat.com/lhh/obliterate 
> 
> this is what I see in logs 
> 
> Oct 29 08:05:41 node1 kernel: d-con res0: PingAck did not arrive in time.
> Oct 29 08:05:41 node1 kernel: d-con res0: peer( Primary -> Unknown )
> conn( Connected -> NetworkFailure ) pdsk( UpToDate -> DUnknown ) susp( 0
> -> 1 )
> Oct 29 08:05:41 node1 kernel: d-con res0: asender terminated
> Oct 29 08:05:41 node1 kernel: d-con res0: Terminating asender thread
> Oct 29 08:05:41 node1 kernel: d-con res0: Connection closed
> Oct 29 08:05:41 node1 kernel: d-con res0: conn( NetworkFailure ->
> Unconnected )
> Oct 29 08:05:41 node1 kernel: d-con res0: receiver terminated
> Oct 29 08:05:41 node1 kernel: d-con res0: Restarting receiver thread
> Oct 29 08:05:41 node1 kernel: d-con res0: receiver (re)started
> Oct 29 08:05:41 node1 kernel: d-con res0: conn( Unconnected ->
> WFConnection )
> Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
> fence-peer res0
> Oct 29 08:05:41 node1 fence_node[1912]: fence node2 failed
> Oct 29 08:05:41 node1 kernel: d-con res0: helper command: /sbin/drbdadm
> fence-peer res0 exit code 1 (0x100)
> Oct 29 08:05:41 node1 kernel: d-con res0: fence-peer helper broken,
> returned 1
> Oct 29 08:05:48 node1 corosync[1346]:   [TOTEM ] A processor failed,
> forming new configuration.
> Oct 29 08:05:53 node1 corosync[1346]:   [QUORUM] Members[1]: 1
> Oct 29 08:05:53 node1 corosync[1346]:   [TOTEM ] A processor joined or
> left the membership and a new membership was formed.
> Oct 29 08:05:53 node1 corosync[1346]:   [CPG   ] chosen downlist: sender
> r(0) ip(192.168.23.128) ; members(old:2 left:1)
> Oct 29 08:05:53 node1 corosync[1346]:   [MAIN  ] Completed service
> synchronization, ready to provide service.
> Oct 29 08:05:53 node1 kernel: dlm: closing connection to node 2
> Oct 29 08:05:53 node1 fenced[1401]: fencing node node2
> Oct 29 08:05:53 node1 kernel: GFS2: fsid=cluster-setup:res0.0: jid=1:
> Trying to acquire journal lock...
> Oct 29 08:05:53 node1 fenced[1401]: fence node2 dev 0.0 agent
> fence_ack_manual result: error from agent
> Oct 29 08:05:53 node1 fenced[1401]: fence node2 failed
> Oct 29 08:05:56 node1 fenced[1401]: fencing node node2
> Oct 29 08:05:56 node1 fenced[1401]: fence node2 dev 0.0 agent
> fence_ack_manual result: error from agent
> Oct 29 08:05:56 node1 fenced[1401]: fence node2 failed
> Oct 29 08:05:59 node1 fenced[1401]: fencing node node2
> Oct 29 08:05:59 node1 fenced[1401]: fence node2 dev 0.0 agent
> fence_ack_manual result: error from agent
> Oct 29 08:05:59 node1 fenced[1401]: fence node2 failed
> 
> Regards,
> Zohair Raza 
> 
> 
> 


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?


From parvez.h.shaikh@gmail.com Tue Oct 30 04:54:30 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9U8sUnI000537 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 04:54:30 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9U8sP2N032712
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 04:54:25 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9U8sN94010756
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 04:54:23 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so13958bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 01:54:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=nHUuz+BCV91S9CzzAmXgWlccdg6ChrcYBkTSmlnh4QY=;
	b=Dc+oVxPbC17nzBdMrfom9uTZrw72GkZg/QRgzOJefZIKkVvkUN6QKea+HGVak04T/F
	3DQMG8m50eSz8zzw1uSP/8kNO108IED06qiFYb66lxb3jek3/ZnRr2480mN2Y+R8ZO0f
	aWDpuGfU9ZFJQPDGUIpy+hEt8ZhKN6dUC4gMgRH4vJT2YKC+wRkfYpz46vvXbHCOOSsJ
	oNUjqGJpwldJ4vVVld8n+H0KU5FkoVkgJ+yV1psGRUmpb1UgKXSmcO0Nv6tQQgmb8Idf
	hH1rJk6zgdYjjNgk5zRNquSvA3kCvKoXXLcf0Myr7mAD2N/VMPvtsaEexGgMvTlnbF99
	QJYg==
MIME-Version: 1.0
Received: by 10.204.11.133 with SMTP id t5mr10243555bkt.14.1351587262910; Tue,
	30 Oct 2012 01:54:22 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 01:54:22 -0700 (PDT)
Date: Tue, 30 Oct 2012 14:24:22 +0530
Message-ID: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=00151758b404b04f4104cd42ee65
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Not restarting "max_restart" times before
	relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 08:54:30 -0000

--00151758b404b04f4104cd42ee65
Content-Type: text/plain; charset=ISO-8859-1

Hi experts,

I have defined a service as follows in cluster.conf -

                <service autostart="0" domain="mydomain" exclusive="0"
max_restarts="5" name="mgmt" recovery="restart">
                        <script ref="myHaAgent"/>
                        <ip ref="192.168.51.51"/>
                </service>

I mentioned max_restarts=5 hoping that if cluster fails to start service 5
times, then it will relocate to another cluster node in failover domain.

To check this, I turned down NIC hosting service's floating IP and got
following logs -

Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
detected
Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
"192.168.51.51" returned 1 (generic error)
Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
service:mgmt
*Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
recovering*
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed service
service:mgmt
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip "192.168.51.51"
returned 1 (generic error)
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
service:mgmt; return value: 1
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
service:mgmt
*Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
recovering
Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
service service:mgmt*
Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
stopped
Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
stopped

But from the log it appears that cluster tried to restart service only ONCE
before relocating.

I was expecting cluster to retry starting this service five times on the
same node before relocating

Can anybody correct my understanding?

Thanks,
Parvez

--00151758b404b04f4104cd42ee65
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi experts,<br><br>I have defined a service as follows in cluster.conf -<br=
><br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;service autostart=3D=
&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot; max_r=
estarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;restart&qu=
ot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
<br>I mentioned max_restarts=3D5 hoping that if cluster fails to start serv=
ice 5 times, then it will relocate to another cluster node in failover doma=
in.<br>
<br>To check this, I turned down NIC hosting service&#39;s floating IP and =
got following logs -<br><br>Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;wa=
rning&gt; Link for eth1: Not detected<br>Oct 30 14:11:49 XXXX clurgmgrd: [1=
0753]: &lt;warning&gt; No link on eth1...<br>
Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on eth1...=
<br>Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip &quo=
t;192.168.51.51&quot; returned 1 (generic error)<br>Oct 30 14:11:49 XXXX cl=
urgmgrd[10753]: &lt;notice&gt; Stopping service service:mgmt<br>
<b>Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:mg=
mt is recovering</b><br>Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&g=
t; Recovering failed service service:mgmt<br>Oct 30 14:12:00 XXXX clurgmgrd=
[10753]: &lt;notice&gt; start on ip &quot;192.168.51.51&quot; returned 1 (g=
eneric error)<br>
Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to start=
 service:mgmt; return value: 1<br>Oct 30 14:12:00 XXXX clurgmgrd[10753]: &l=
t;notice&gt; Stopping service service:mgmt<br><b>Oct 30 14:12:00 XXXX clurg=
mgrd[10753]: &lt;notice&gt; Service service:mgmt is recovering<br>
Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating fail=
ed service service:mgmt</b><br>Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;n=
otice&gt; Service service:mgmt is stopped<br>Oct 30 14:12:01 XXXX clurgmgrd=
[10753]: &lt;notice&gt; Service service:mgmt is stopped<br>
<br>But from the log it appears that cluster tried to restart service only =
ONCE before relocating.<br><br>I was expecting cluster to retry starting th=
is service five times on the same node before relocating<br><br>Can anybody=
 correct my understanding?<br>
<br>Thanks,<br>Parvez<br>

--00151758b404b04f4104cd42ee65--


From parvez.h.shaikh@gmail.com Tue Oct 30 06:35:03 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UAZ3eS030077 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 06:35:03 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UAYwAK023442
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 06:34:58 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9UAYveZ019574
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 06:34:58 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so65752bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 03:34:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=1PO7/Q6eWK02tC/Iyeujt3Olh8O9bFKAe2rq84ficwo=;
	b=X6fMgx2BpPQjyEA3+s8gh7TQ5D4SFqKO7s5Vxaa+xVV3Tsm8sSB/EhfenLNvnocNUW
	Ln1pMvADhw+gcNc+CzBwb57ZbXmMP2ETszVV50xVGMFXBrk66SKBv9A3j2lY94WPQ03x
	AmCOSdIvUVf7B2KCHlYMt1Spk7EGnYWOVQczh4PG511Hx76ZdnInbuHXN/3V/6moukws
	6a53sHttJmmlBVawOb+TXdhe4hNsPP+QRYKG5I5SpVxiD/X6VpYB0UE7ZJR8f2cBhZ8y
	jChrn5IC6ee9VVAsk5Tphbp9x1BxWikimKVIM6qkRNCtrFb+UeHWHUgTWKyHbXqpx8du
	UlhQ==
MIME-Version: 1.0
Received: by 10.204.7.136 with SMTP id d8mr9955876bkd.85.1351593297119; Tue,
	30 Oct 2012 03:34:57 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 03:34:57 -0700 (PDT)
Date: Tue, 30 Oct 2012 16:04:57 +0530
Message-ID: <CAKrd532rEidJa3CSgK0XisuQO8kaknAhFS1PovKgf8iB593KOQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=00151758a7685b0a9c04cd445653
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Monitoring Frequency - can it be changed?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 10:35:04 -0000

--00151758a7685b0a9c04cd445653
Content-Type: text/plain; charset=ISO-8859-1

Hi experts,

Can we change frequency at which resources are monitored by Cluster?

I observed 30 seconds as monitoring frequency.

Thanks,
Parvez

--00151758a7685b0a9c04cd445653
Content-Type: text/html; charset=ISO-8859-1

Hi experts,<br><br>Can we change frequency at which resources are monitored by Cluster?<br><br>I observed 30 seconds as monitoring frequency. <br><br>Thanks,<br>Parvez<br>

--00151758a7685b0a9c04cd445653--


From lists@alteeve.ca Tue Oct 30 11:56:08 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UFu8GE030093 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 11:56:08 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UFu3eZ024219
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 11:56:03 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9UFu1gT007244
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 11:56:01 -0400
Received: from lemass.alteeve.ca (md20436d0.tmodns.net [208.54.4.210])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id 13BC142249F;
	Tue, 30 Oct 2012 11:55:57 -0400 (EDT)
Message-ID: <508FF88B.9000901@alteeve.ca>
Date: Tue, 30 Oct 2012 08:55:55 -0700
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121016 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
In-Reply-To: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 15:56:09 -0000

On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
> Hi experts,
> 
> I have defined a service as follows in cluster.conf -
> 
>                 <service autostart="0" domain="mydomain" exclusive="0"
> max_restarts="5" name="mgmt" recovery="restart">
>                         <script ref="myHaAgent"/>
>                         <ip ref="192.168.51.51"/>
>                 </service>
> 
> I mentioned max_restarts=5 hoping that if cluster fails to start service
> 5 times, then it will relocate to another cluster node in failover domain.
> 
> To check this, I turned down NIC hosting service's floating IP and got
> following logs -
> 
> Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
> detected
> Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
> "192.168.51.51" returned 1 (generic error)
> Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
> service:mgmt
> *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> recovering*
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
> service service:mgmt
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
> "192.168.51.51" returned 1 (generic error)
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
> service:mgmt; return value: 1
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
> service:mgmt
> *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> recovering
> Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
> service service:mgmt*
> Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> stopped
> Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> stopped
> 
> But from the log it appears that cluster tried to restart service only
> ONCE before relocating.
> 
> I was expecting cluster to retry starting this service five times on the
> same node before relocating
> 
> Can anybody correct my understanding?
> 
> Thanks,
> Parvez

What version? Please paste your full cluster.conf.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?


From rossnick-lists@cybercat.ca Tue Oct 30 15:13:46 2012
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UJDk0B030939 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 30 Oct 2012 15:13:46 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9UJDfJY019487
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 15:13:41 -0400
Received: from cybercat.ca (mail.cybercat.ca [207.96.251.195])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9UJDd54000637
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 15:13:40 -0400
Received: from [70.29.219.205] (account rossnick HELO [192.168.2.34])
	by cybercat.ca (CommuniGate Pro SMTP 5.2.19)
	with ESMTPSA id 131094257 for linux-cluster@redhat.com;
	Tue, 30 Oct 2012 15:13:38 -0400
Message-ID: <509026E4.2070005@cybercat.ca>
Date: Tue, 30 Oct 2012 15:13:40 -0400
From: Nicolas Ross <rossnick-lists@cybercat.ca>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64;
	rv:16.0) Gecko/20121010 Thunderbird/16.0.1
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -2.559  (BAYES_00, RP_MATCHES_RCVD, SPF_HELO_PASS,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Question about KVM and cluster
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 30 Oct 2012 19:13:47 -0000

We have 2 distinct clusters in 2 different server rooms for HA perposes. 
So services in culster A have a replica in cluster B. Files from 
services are rsync periodicly on the other server room.

At about every week or so, we switch the running production services 
from one room to another. This is working perfectly for now.

Now, I need to add a KVM virtual machine to the mix. I will then create 
a VM on cluster A, with it's data residing on the fiberchannel raid 
arrays via lvm. The VM will (I hope so) migrate from one machine to 
another within the same cluster when there's a failure or other. But 
what about migrate it to another server room ? Is this possible ? Is 
there a way to replicate at the block-level a lvm volume ? What are my 
other options ?

My other option would be to have a 2 VMs, 1 in each room, and rsync data 
inside the VMs, but I would like to avoir this.

Best regards.


From parvez.h.shaikh@gmail.com Wed Oct 31 00:25:53 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V4L36W030093 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 00:21:04 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V4Kw9a023105
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:20:58 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V4Ku1r021848
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:20:56 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so458389bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 21:20:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type;
	bh=vsKGkYzlbZ1QKwHpkKuuVEaHuvH6TOLOJPo/Ak2HKII=;
	b=npRHiWEdkN16omVib2dzL2Rv8Lsz/aLP/Cv+8eqUAgXkG/mTbvr3QUhh3gUJGgKhj0
	+sQQauDSFqHXEm18VG7ItEIYF8oCTtSazoE7dVESh8cfH/HnKfJkSkcQmS2ZQ/wtd1LW
	K3DhKljAXHQG8p4ltOweCHMSsqSNqN83nVcw5+bMyu+9fE3VQxO3n8RolK9nEaG7K+Ch
	NUH3MApjWyJO1fGsYiAcHoYa7ZatIs5U33qg32jrDSugk44W1evPnCL32NLCM962g7ev
	s157Z8O9xdEsc5scFItEbu8z/6PsPhJpjWzfJ4Wdi+6CJRnTjh3LoXowCYFDYecoRXZ+
	2zDA==
MIME-Version: 1.0
Received: by 10.204.147.153 with SMTP id l25mr10650402bkv.109.1351657255713;
	Tue, 30 Oct 2012 21:20:55 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 21:20:55 -0700 (PDT)
In-Reply-To: <508FF88B.9000901@alteeve.ca>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
Date: Wed, 31 Oct 2012 09:50:55 +0530
Message-ID: <CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=0015174c40d695bc5e04cd533a25
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 04:25:54 -0000

--0015174c40d695bc5e04cd533a25
Content-Type: text/plain; charset=ISO-8859-1

Hi Digimer,

cman_tool version gives following -

6.2.0 config 22

Cluster.conf -

<?xml version="1.0"?>
<cluster alias="PARVEZ" config_version="22" name="PARVEZ">
        <clusternodes>
                <clusternode name="myblade2" nodeid="2" votes="1">
                        <fence>
                                <method name="1">
                                        <device blade="2"
missing_as_off="1" name="BladeCenterFencing-1"/>
                                </method>
                        </fence>
                </clusternode>
                <clusternode name="myblade1" nodeid="1" votes="1">
                        <fence>
                                <method name="1">
                                        <device blade="1"
missing_as_off="1" name="BladeCenterFencing-1"/>
                                </method>
                        </fence>
                </clusternode>
        </clusternodes>
        <cman expected_votes="1" two_node="1"/>
        <fencedevices>
                <fencedevice agent="fence_bladecenter" ipaddr="
mm-1.mydomain.com" login="XXXX" name="BladeCenterFencing-1" passwd="XXXXX"
shell_timeout="10"/>
        </fencedevices>
        <rm>
                <resources>
                        <script file="/localhome/my/my_ha"
name="myHaAgent"/>
                        <ip address="192.168.51.51" monitor_link="1"/>
                </resources>
                <failoverdomains>
                        <failoverdomain name="mydomain" nofailback="1"
ordered="1" restricted="1">
                                <failoverdomainnode name="myblade2"
priority="2"/>
                                <failoverdomainnode name="myblade1"
priority="1"/>
                        </failoverdomain>
                </failoverdomains>
                <service autostart="0" domain="mydomain" exclusive="0"
max_restarts="5" name="mgmt" recovery="restart">
                        <script ref="myHaAgent"/>
                        <ip ref="192.168.51.51"/>
                </service>
        </rm>
        <fence_daemon clean_start="1" post_fail_delay="0"
post_join_delay="0"/>
</cluster>

Thanks,
Parvez

On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca> wrote:

> On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
> > Hi experts,
> >
> > I have defined a service as follows in cluster.conf -
> >
> >                 <service autostart="0" domain="mydomain" exclusive="0"
> > max_restarts="5" name="mgmt" recovery="restart">
> >                         <script ref="myHaAgent"/>
> >                         <ip ref="192.168.51.51"/>
> >                 </service>
> >
> > I mentioned max_restarts=5 hoping that if cluster fails to start service
> > 5 times, then it will relocate to another cluster node in failover
> domain.
> >
> > To check this, I turned down NIC hosting service's floating IP and got
> > following logs -
> >
> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
> > detected
> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
> > "192.168.51.51" returned 1 (generic error)
> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
> > service:mgmt
> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > recovering*
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
> > service service:mgmt
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
> > "192.168.51.51" returned 1 (generic error)
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
> > service:mgmt; return value: 1
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
> > service:mgmt
> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > recovering
> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
> > service service:mgmt*
> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > stopped
> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
> > stopped
> >
> > But from the log it appears that cluster tried to restart service only
> > ONCE before relocating.
> >
> > I was expecting cluster to retry starting this service five times on the
> > same node before relocating
> >
> > Can anybody correct my understanding?
> >
> > Thanks,
> > Parvez
>
> What version? Please paste your full cluster.conf.
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
>

--0015174c40d695bc5e04cd533a25
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Digimer,<br><br>cman_tool version gives following -<br><br>6.2.0 config =
22<br><br>Cluster.conf -<br><br>&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>=
&lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot; name=
=3D&quot;PARVEZ&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myblade2&quot; nodeid=3D&qu=
ot;2&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &l=
t;method name=3D&quot;1&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;2&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myb=
lade1&quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<=
br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 &lt;method name=3D&quot;1&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;1&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cman =
expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0 &lt;fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 &lt;fencedevice agent=3D&quot;fence_bladecenter&quot; ipaddr=3D&q=
uot;<a href=3D"http://mm-1.mydomain.com">mm-1.mydomain.com</a>&quot; login=
=3D&quot;XXXX&quot; name=3D&quot;BladeCenterFencing-1&quot; passwd=3D&quot;=
XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;/fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;resources&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript file=3D&quot;/localhome/my/my_ha&quot; name=3D&quot;myHaAgent&quot;/&=
gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 &lt;ip address=3D&quot;192.168.51.51&quot; monitor_link=3D&quot;1&quot;=
/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/resources&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomains&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failove=
rdomain name=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot; ordered=3D&q=
uot;1&quot; restricted=3D&quot;1&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode name=3D&quot;myblade2&quot; prior=
ity=3D&quot;2&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode nam=
e=3D&quot;myblade1&quot; priority=3D&quot;1&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/=
failoverdomain&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fa=
iloverdomains&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;serv=
ice autostart=3D&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&qu=
ot;0&quot; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D=
&quot;restart&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;/rm&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;fence_daemon=
 clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&quot; post_join_dela=
y=3D&quot;0&quot;/&gt;<br>
&lt;/cluster&gt;<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote"=
>On Tue, Oct 30, 2012 at 9:25 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"=
mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> =
wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex"><div class=3D"im">On 10/3=
0/2012 01:54 AM, Parvez Shaikh wrote:<br>
&gt; Hi experts,<br>
&gt;<br>
&gt; I have defined a service as follows in cluster.conf -<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; I mentioned max_restarts=3D5 hoping that if cluster fails to start ser=
vice<br>
&gt; 5 times, then it will relocate to another cluster node in failover dom=
ain.<br>
&gt;<br>
&gt; To check this, I turned down NIC hosting service&#39;s floating IP and=
 got<br>
&gt; following logs -<br>
&gt;<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; Link for eth1=
: Not<br>
&gt; detected<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
&gt; recovering*<br>
<div class=3D"im">&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt=
; Recovering failed<br>
&gt; service service:mgmt<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; start on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to =
start<br>
&gt; service:mgmt; return value: 1<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
<div class=3D"im">&gt; recovering<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating=
 failed<br>
</div>&gt; service service:mgmt*<br>
<div class=3D"im">&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt=
; Service service:mgmt is<br>
&gt; stopped<br>
&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:=
mgmt is<br>
&gt; stopped<br>
&gt;<br>
&gt; But from the log it appears that cluster tried to restart service only=
<br>
&gt; ONCE before relocating.<br>
&gt;<br>
&gt; I was expecting cluster to retry starting this service five times on t=
he<br>
&gt; same node before relocating<br>
&gt;<br>
&gt; Can anybody correct my understanding?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
<br>
</div>What version? Please paste your full cluster.conf.<br>
<span class=3D"HOEnZb"><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></blockquote></div><br>

--0015174c40d695bc5e04cd533a25--


From lists@alteeve.ca Wed Oct 31 00:44:56 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V4iuaJ032028 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 00:44:56 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V4ipar029559
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:44:51 -0400
Received: from vm11-an1.alteeve.ca (to02.optical-online.com [64.34.141.16]
	(may be forged))
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V4inhH006591
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:44:49 -0400
Received: from lemass.alteeve.ca (lns1-pool-d8428f69.dsl.look.ca
	[216.66.143.105])
	by vm11-an1.alteeve.ca (Postfix) with ESMTPSA id D6BD3422488;
	Wed, 31 Oct 2012 00:44:44 -0400 (EDT)
Message-ID: <5090ACBD.40703@alteeve.ca>
Date: Tue, 30 Oct 2012 21:44:45 -0700
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:16.0) Gecko/20121016 Thunderbird/16.0.1
MIME-Version: 1.0
To: Parvez Shaikh <parvez.h.shaikh@gmail.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
In-Reply-To: <CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.107  (BAYES_00,RDNS_NONE)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 04:44:56 -0000

What does 'rpm -q cman' return?

This looks very odd;
<fencedevice agent="fence_bladecenter"
> ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>"

Please remove this for now;

 <fence_daemon clean_start="1" post_fail_delay="0"
> post_join_delay="0"/>

In general, you don't want to assume a clean start. It's asking for
trouble. The default delays are also sane. You can always come back to
this later after this issue is resolved, if you wish.

On 10/30/2012 09:20 PM, Parvez Shaikh wrote:
> Hi Digimer,
> 
> cman_tool version gives following -
> 
> 6.2.0 config 22
> 
> Cluster.conf -
> 
> <?xml version="1.0"?>
> <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
>         <clusternodes>
>                 <clusternode name="myblade2" nodeid="2" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="2"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>                 <clusternode name="myblade1" nodeid="1" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="1"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>         </clusternodes>
>         <cman expected_votes="1" two_node="1"/>
>         <fencedevices>
>                 <fencedevice agent="fence_bladecenter"
> ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>" login="XXXX"
> name="BladeCenterFencing-1" passwd="XXXXX" shell_timeout="10"/>
>         </fencedevices>
>         <rm>
>                 <resources>
>                         <script file="/localhome/my/my_ha"
> name="myHaAgent"/>
>                         <ip address="192.168.51.51" monitor_link="1"/>
>                 </resources>
>                 <failoverdomains>
>                         <failoverdomain name="mydomain" nofailback="1"
> ordered="1" restricted="1">
>                                 <failoverdomainnode name="myblade2"
> priority="2"/>
>                                 <failoverdomainnode name="myblade1"
> priority="1"/>
>                         </failoverdomain>
>                 </failoverdomains>
>                 <service autostart="0" domain="mydomain" exclusive="0"
> max_restarts="5" name="mgmt" recovery="restart">
>                         <script ref="myHaAgent"/>
>                         <ip ref="192.168.51.51"/>
>                 </service>
>         </rm>
>         <fence_daemon clean_start="1" post_fail_delay="0"
> post_join_delay="0"/>
> </cluster>
> 
> Thanks,
> Parvez
> 
> On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca
> <mailto:lists@alteeve.ca>> wrote:
> 
>     On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
>     > Hi experts,
>     >
>     > I have defined a service as follows in cluster.conf -
>     >
>     >                 <service autostart="0" domain="mydomain" exclusive="0"
>     > max_restarts="5" name="mgmt" recovery="restart">
>     >                         <script ref="myHaAgent"/>
>     >                         <ip ref="192.168.51.51"/>
>     >                 </service>
>     >
>     > I mentioned max_restarts=5 hoping that if cluster fails to start
>     service
>     > 5 times, then it will relocate to another cluster node in failover
>     domain.
>     >
>     > To check this, I turned down NIC hosting service's floating IP and got
>     > following logs -
>     >
>     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
>     > detected
>     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
>     > "192.168.51.51" returned 1 (generic error)
>     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
>     > service:mgmt
>     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > recovering*
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
>     > service service:mgmt
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
>     > "192.168.51.51" returned 1 (generic error)
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
>     > service:mgmt; return value: 1
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
>     > service:mgmt
>     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > recovering
>     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating
>     failed
>     > service service:mgmt*
>     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > stopped
>     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
>     service:mgmt is
>     > stopped
>     >
>     > But from the log it appears that cluster tried to restart service only
>     > ONCE before relocating.
>     >
>     > I was expecting cluster to retry starting this service five times
>     on the
>     > same node before relocating
>     >
>     > Can anybody correct my understanding?
>     >
>     > Thanks,
>     > Parvez
> 
>     What version? Please paste your full cluster.conf.
> 
>     --
>     Digimer
>     Papers and Projects: https://alteeve.ca/w/
>     What if the cure for cancer is trapped in the mind of a person without
>     access to education?
> 
> 


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without
access to education?


From parvez.h.shaikh@gmail.com Wed Oct 31 00:48:26 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V4mQvT000432 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 00:48:26 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V4mLUo030012
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:48:21 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V4mI2H007082
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 00:48:19 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so461778bkc.33
	for <linux-cluster@redhat.com>; Tue, 30 Oct 2012 21:48:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:cc:content-type;
	bh=Hp+vhDQ7TlacVgXukrETTyZFbJ+loFSP+KFffZHTz4A=;
	b=dhzLaJ0i8zflRs414892Ysyy/BFMNjqdOC0VFvCeLTIDBCGh3UnURv/v+WQPApVIBu
	SfeZQxjIDuySqPZKYvlVm6WKIGdRsWeDdKfun03u1ChPhah0jMVPG0pRKfIGwVIZJoo3
	tzHpQPbh3PCyTFIpV6+JkTRXXPdKHqSzj3lcrIJm66bXyg3LrbntBcVLW3p7mBlpoGz5
	o8ndLTgCYtUALGhTN2IPPxTKjAgGeEzeFkJDMk0fhJQaT6fgYcqiadmhIlgkKtROrJOW
	L3EatYm/sfKBmgA4N2VNLk1pg3tAim5ZXxni2BVgRVrHkp4mMUThxGiK0ELpjbI5TPP3
	A5TA==
MIME-Version: 1.0
Received: by 10.204.7.136 with SMTP id d8mr10735937bkd.85.1351658898178; Tue,
	30 Oct 2012 21:48:18 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Tue, 30 Oct 2012 21:48:18 -0700 (PDT)
In-Reply-To: <5090ACBD.40703@alteeve.ca>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
	<5090ACBD.40703@alteeve.ca>
Date: Wed, 31 Oct 2012 10:18:18 +0530
Message-ID: <CAKrd533uuWLKoh67gqOtbv_zt7K_1qQxqx8X8wRfTw6OB07KbQ@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: Digimer <lists@alteeve.ca>
Content-Type: multipart/alternative; boundary=00151758a7687bc36b04cd539cdd
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 04:48:27 -0000

--00151758a7687bc36b04cd539cdd
Content-Type: text/plain; charset=ISO-8859-1

Digimer,

Out put of rpm -q cman

cman-2.0.115-34.el5

There is no http mentioned in fencedevice, I think email client is
inserting it.


Thanks,
Parvez

On Wed, Oct 31, 2012 at 10:14 AM, Digimer <lists@alteeve.ca> wrote:

> What does 'rpm -q cman' return?
>
> This looks very odd;
> <fencedevice agent="fence_bladecenter"
> > ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>"
>
> Please remove this for now;
>
>  <fence_daemon clean_start="1" post_fail_delay="0"
> > post_join_delay="0"/>
>
> In general, you don't want to assume a clean start. It's asking for
> trouble. The default delays are also sane. You can always come back to
> this later after this issue is resolved, if you wish.
>
> On 10/30/2012 09:20 PM, Parvez Shaikh wrote:
> > Hi Digimer,
> >
> > cman_tool version gives following -
> >
> > 6.2.0 config 22
> >
> > Cluster.conf -
> >
> > <?xml version="1.0"?>
> > <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
> >         <clusternodes>
> >                 <clusternode name="myblade2" nodeid="2" votes="1">
> >                         <fence>
> >                                 <method name="1">
> >                                         <device blade="2"
> > missing_as_off="1" name="BladeCenterFencing-1"/>
> >                                 </method>
> >                         </fence>
> >                 </clusternode>
> >                 <clusternode name="myblade1" nodeid="1" votes="1">
> >                         <fence>
> >                                 <method name="1">
> >                                         <device blade="1"
> > missing_as_off="1" name="BladeCenterFencing-1"/>
> >                                 </method>
> >                         </fence>
> >                 </clusternode>
> >         </clusternodes>
> >         <cman expected_votes="1" two_node="1"/>
> >         <fencedevices>
> >                 <fencedevice agent="fence_bladecenter"
> > ipaddr="mm-1.mydomain.com <http://mm-1.mydomain.com>" login="XXXX"
> > name="BladeCenterFencing-1" passwd="XXXXX" shell_timeout="10"/>
> >         </fencedevices>
> >         <rm>
> >                 <resources>
> >                         <script file="/localhome/my/my_ha"
> > name="myHaAgent"/>
> >                         <ip address="192.168.51.51" monitor_link="1"/>
> >                 </resources>
> >                 <failoverdomains>
> >                         <failoverdomain name="mydomain" nofailback="1"
> > ordered="1" restricted="1">
> >                                 <failoverdomainnode name="myblade2"
> > priority="2"/>
> >                                 <failoverdomainnode name="myblade1"
> > priority="1"/>
> >                         </failoverdomain>
> >                 </failoverdomains>
> >                 <service autostart="0" domain="mydomain" exclusive="0"
> > max_restarts="5" name="mgmt" recovery="restart">
> >                         <script ref="myHaAgent"/>
> >                         <ip ref="192.168.51.51"/>
> >                 </service>
> >         </rm>
> >         <fence_daemon clean_start="1" post_fail_delay="0"
> > post_join_delay="0"/>
> > </cluster>
> >
> > Thanks,
> > Parvez
> >
> > On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca
> > <mailto:lists@alteeve.ca>> wrote:
> >
> >     On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
> >     > Hi experts,
> >     >
> >     > I have defined a service as follows in cluster.conf -
> >     >
> >     >                 <service autostart="0" domain="mydomain"
> exclusive="0"
> >     > max_restarts="5" name="mgmt" recovery="restart">
> >     >                         <script ref="myHaAgent"/>
> >     >                         <ip ref="192.168.51.51"/>
> >     >                 </service>
> >     >
> >     > I mentioned max_restarts=5 hoping that if cluster fails to start
> >     service
> >     > 5 times, then it will relocate to another cluster node in failover
> >     domain.
> >     >
> >     > To check this, I turned down NIC hosting service's floating IP and
> got
> >     > following logs -
> >     >
> >     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1:
> Not
> >     > detected
> >     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on
> eth1...
> >     > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on
> eth1...
> >     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
> >     > "192.168.51.51" returned 1 (generic error)
> >     > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
> >     > service:mgmt
> >     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > recovering*
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
> >     > service service:mgmt
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
> >     > "192.168.51.51" returned 1 (generic error)
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to
> start
> >     > service:mgmt; return value: 1
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
> >     > service:mgmt
> >     > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > recovering
> >     > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating
> >     failed
> >     > service service:mgmt*
> >     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > stopped
> >     > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service
> >     service:mgmt is
> >     > stopped
> >     >
> >     > But from the log it appears that cluster tried to restart service
> only
> >     > ONCE before relocating.
> >     >
> >     > I was expecting cluster to retry starting this service five times
> >     on the
> >     > same node before relocating
> >     >
> >     > Can anybody correct my understanding?
> >     >
> >     > Thanks,
> >     > Parvez
> >
> >     What version? Please paste your full cluster.conf.
> >
> >     --
> >     Digimer
> >     Papers and Projects: https://alteeve.ca/w/
> >     What if the cure for cancer is trapped in the mind of a person
> without
> >     access to education?
> >
> >
>
>
> --
> Digimer
> Papers and Projects: https://alteeve.ca/w/
> What if the cure for cancer is trapped in the mind of a person without
> access to education?
>

--00151758a7687bc36b04cd539cdd
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Digimer,<br><br>Out put of rpm -q cman<br><br>cman-2.0.115-34.el5<br><br>Th=
ere is no http mentioned in fencedevice, I think email client is inserting =
it.<br><br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote">On Wed, =
Oct 31, 2012 at 10:14 AM, Digimer <span dir=3D"ltr">&lt;<a href=3D"mailto:l=
ists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> wrote:<b=
r>
<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex">What does &#39;rpm -q cma=
n&#39; return?<br>
<br>
This looks very odd;<br>
&lt;fencedevice agent=3D&quot;fence_bladecenter&quot;<br>
&gt; ipaddr=3D&quot;<a href=3D"http://mm-1.mydomain.com" target=3D"_blank">=
mm-1.mydomain.com</a> &lt;<a href=3D"http://mm-1.mydomain.com" target=3D"_b=
lank">http://mm-1.mydomain.com</a>&gt;&quot;<br>
<br>
Please remove this for now;<br>
<div class=3D"im"><br>
=A0&lt;fence_daemon clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&q=
uot;<br>
&gt; post_join_delay=3D&quot;0&quot;/&gt;<br>
<br>
</div>In general, you don&#39;t want to assume a clean start. It&#39;s aski=
ng for<br>
trouble. The default delays are also sane. You can always come back to<br>
this later after this issue is resolved, if you wish.<br>
<div><div class=3D"h5"><br>
On 10/30/2012 09:20 PM, Parvez Shaikh wrote:<br>
&gt; Hi Digimer,<br>
&gt;<br>
&gt; cman_tool version gives following -<br>
&gt;<br>
&gt; 6.2.0 config 22<br>
&gt;<br>
&gt; Cluster.conf -<br>
&gt;<br>
&gt; &lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&gt; &lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot;=
 name=3D&quot;PARVEZ&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;clusternodes&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;clusternode name=3D&quot;myblade2&=
quot; nodeid=3D&quot;2&quot; votes=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;me=
thod name=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 &lt;device blade=3D&quot;2&quot;<br>
&gt; missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;=
/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/m=
ethod&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/clusternode&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;clusternode name=3D&quot;myblade1&=
quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;me=
thod name=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 &lt;device blade=3D&quot;1&quot;<br>
&gt; missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;=
/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/m=
ethod&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/fence&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/clusternode&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;/clusternodes&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;cman expected_votes=3D&quot;1&quot; two_node=3D&qu=
ot;1&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;fencedevices&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fencedevice agent=3D&quot;fence_bl=
adecenter&quot;<br>
</div></div>&gt; ipaddr=3D&quot;<a href=3D"http://mm-1.mydomain.com" target=
=3D"_blank">mm-1.mydomain.com</a> &lt;<a href=3D"http://mm-1.mydomain.com" =
target=3D"_blank">http://mm-1.mydomain.com</a>&gt;&quot; login=3D&quot;XXXX=
&quot;<br>

<div class=3D"HOEnZb"><div class=3D"h5">&gt; name=3D&quot;BladeCenterFencin=
g-1&quot; passwd=3D&quot;XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br=
>
&gt; =A0 =A0 =A0 =A0 &lt;/fencedevices&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;rm&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;resources&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script file=3D&quo=
t;/localhome/my/my_ha&quot;<br>
&gt; name=3D&quot;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip address=3D&quot=
;192.168.51.51&quot; monitor_link=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/resources&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;failoverdomains&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;failoverdomain nam=
e=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot;<br>
&gt; ordered=3D&quot;1&quot; restricted=3D&quot;1&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fa=
iloverdomainnode name=3D&quot;myblade2&quot;<br>
&gt; priority=3D&quot;2&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;fa=
iloverdomainnode name=3D&quot;myblade1&quot;<br>
&gt; priority=3D&quot;1&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/failoverdomain&gt=
;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/failoverdomains&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;/rm&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;fence_daemon clean_start=3D&quot;1&quot; post_fail=
_delay=3D&quot;0&quot;<br>
&gt; post_join_delay=3D&quot;0&quot;/&gt;<br>
&gt; &lt;/cluster&gt;<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
&gt;<br>
&gt; On Tue, Oct 30, 2012 at 9:25 PM, Digimer &lt;<a href=3D"mailto:lists@a=
lteeve.ca">lists@alteeve.ca</a><br>
</div></div><div class=3D"HOEnZb"><div class=3D"h5">&gt; &lt;mailto:<a href=
=3D"mailto:lists@alteeve.ca">lists@alteeve.ca</a>&gt;&gt; wrote:<br>
&gt;<br>
&gt; =A0 =A0 On 10/30/2012 01:54 AM, Parvez Shaikh wrote:<br>
&gt; =A0 =A0 &gt; Hi experts,<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; I have defined a service as follows in cluster.conf -<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&=
quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; =A0 =A0 &gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; reco=
very=3D&quot;restart&quot;&gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;scrip=
t ref=3D&quot;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip re=
f=3D&quot;192.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 &gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; I mentioned max_restarts=3D5 hoping that if cluster fails=
 to start<br>
&gt; =A0 =A0 service<br>
&gt; =A0 =A0 &gt; 5 times, then it will relocate to another cluster node in=
 failover<br>
&gt; =A0 =A0 domain.<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; To check this, I turned down NIC hosting service&#39;s fl=
oating IP and got<br>
&gt; =A0 =A0 &gt; following logs -<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; =
Link for eth1: Not<br>
&gt; =A0 =A0 &gt; detected<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; =
No link on eth1...<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; =
No link on eth1...<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; sta=
tus on ip<br>
&gt; =A0 =A0 &gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; =A0 =A0 &gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Sto=
pping service<br>
&gt; =A0 =A0 &gt; service:mgmt<br>
&gt; =A0 =A0 &gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Se=
rvice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; recovering*<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Rec=
overing failed<br>
&gt; =A0 =A0 &gt; service service:mgmt<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; sta=
rt on ip<br>
&gt; =A0 =A0 &gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #6=
8: Failed to start<br>
&gt; =A0 =A0 &gt; service:mgmt; return value: 1<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Sto=
pping service<br>
&gt; =A0 =A0 &gt; service:mgmt<br>
&gt; =A0 =A0 &gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Se=
rvice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; recovering<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #7=
1: Relocating<br>
&gt; =A0 =A0 failed<br>
&gt; =A0 =A0 &gt; service service:mgmt*<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Ser=
vice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; stopped<br>
&gt; =A0 =A0 &gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Ser=
vice<br>
&gt; =A0 =A0 service:mgmt is<br>
&gt; =A0 =A0 &gt; stopped<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; But from the log it appears that cluster tried to restart=
 service only<br>
&gt; =A0 =A0 &gt; ONCE before relocating.<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; I was expecting cluster to retry starting this service fi=
ve times<br>
&gt; =A0 =A0 on the<br>
&gt; =A0 =A0 &gt; same node before relocating<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; Can anybody correct my understanding?<br>
&gt; =A0 =A0 &gt;<br>
&gt; =A0 =A0 &gt; Thanks,<br>
&gt; =A0 =A0 &gt; Parvez<br>
&gt;<br>
&gt; =A0 =A0 What version? Please paste your full cluster.conf.<br>
&gt;<br>
&gt; =A0 =A0 --<br>
&gt; =A0 =A0 Digimer<br>
&gt; =A0 =A0 Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=
=3D"_blank">https://alteeve.ca/w/</a><br>
&gt; =A0 =A0 What if the cure for cancer is trapped in the mind of a person=
 without<br>
&gt; =A0 =A0 access to education?<br>
&gt;<br>
&gt;<br>
<br>
<br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</div></div></blockquote></div><br>

--00151758a7687bc36b04cd539cdd--


From emi2fast@gmail.com Wed Oct 31 05:23:32 2012
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9V9NW1v013075 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 05:23:32 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9V9NRiU008394
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 05:23:27 -0400
Received: from mail-ia0-f174.google.com (mail-ia0-f174.google.com
	[209.85.210.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9V9NKaE002881
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 05:23:20 -0400
Received: by mail-ia0-f174.google.com with SMTP id y32so1001465iag.33
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 02:23:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=AYz/GkmetEi8Qds7QYWQxygQXk9yj477AboqXrkwFbc=;
	b=wPZmmFeddIhRY15PoCI51yrY3xRhNyC2+Sv54qIJg4QtA+3+QwRLbH1JEAkQP4LZn4
	hkDLCyghmWLyPdkfteoO+Z0iuvtCJVjo/hFoC3yVyTB/idthKE60Z4LfaH98Uqg1fLol
	cj40pzSKqUDiUnBxTlIon3+Ua/0UtdrgDf+woUoQU819+kBiTqPOQJ8pKxj14NQ68+Di
	w+dSCCdeU9jAURg/8IGsniWir1iWHOLNHuRHfbvWU6ykWDVcwic0ogFMM7pUXvjF5Lqc
	NtVpoft2JK9pmroQMc8wCZS7T9AdBWwYlEdY/seaQiakO9+wclvc3amInQnOBGuNAgxX
	KdLw==
MIME-Version: 1.0
Received: by 10.50.184.232 with SMTP id ex8mr714058igc.30.1351675400155; Wed,
	31 Oct 2012 02:23:20 -0700 (PDT)
Received: by 10.50.15.226 with HTTP; Wed, 31 Oct 2012 02:23:20 -0700 (PDT)
In-Reply-To: <CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
Date: Wed, 31 Oct 2012 10:23:20 +0100
Message-ID: <CAE7pJ3A3PZZBQ-KQEG5Yz_tQknzLF6U1Ds3M+2k6WFmQH3mW4A@mail.gmail.com>
From: emmanuel segura <emi2fast@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=14dae9340ef113f24804cd577478
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 09:23:32 -0000

--14dae9340ef113f24804cd577478
Content-Type: text/plain; charset=ISO-8859-1

Hello

Maybe you missing recovery="restart" in your services

2012/10/31 Parvez Shaikh <parvez.h.shaikh@gmail.com>

> Hi Digimer,
>
> cman_tool version gives following -
>
> 6.2.0 config 22
>
> Cluster.conf -
>
> <?xml version="1.0"?>
> <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
>         <clusternodes>
>                 <clusternode name="myblade2" nodeid="2" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="2"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>                 <clusternode name="myblade1" nodeid="1" votes="1">
>                         <fence>
>                                 <method name="1">
>                                         <device blade="1"
> missing_as_off="1" name="BladeCenterFencing-1"/>
>                                 </method>
>                         </fence>
>                 </clusternode>
>         </clusternodes>
>         <cman expected_votes="1" two_node="1"/>
>         <fencedevices>
>                 <fencedevice agent="fence_bladecenter" ipaddr="
> mm-1.mydomain.com" login="XXXX" name="BladeCenterFencing-1"
> passwd="XXXXX" shell_timeout="10"/>
>         </fencedevices>
>         <rm>
>                 <resources>
>                         <script file="/localhome/my/my_ha"
> name="myHaAgent"/>
>                         <ip address="192.168.51.51" monitor_link="1"/>
>                 </resources>
>                 <failoverdomains>
>                         <failoverdomain name="mydomain" nofailback="1"
> ordered="1" restricted="1">
>                                 <failoverdomainnode name="myblade2"
> priority="2"/>
>                                 <failoverdomainnode name="myblade1"
> priority="1"/>
>                         </failoverdomain>
>                 </failoverdomains>
>                 <service autostart="0" domain="mydomain" exclusive="0"
> max_restarts="5" name="mgmt" recovery="restart">
>                         <script ref="myHaAgent"/>
>                         <ip ref="192.168.51.51"/>
>                 </service>
>         </rm>
>         <fence_daemon clean_start="1" post_fail_delay="0"
> post_join_delay="0"/>
> </cluster>
>
> Thanks,
> Parvez
>
> On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca> wrote:
>
>> On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
>> > Hi experts,
>> >
>> > I have defined a service as follows in cluster.conf -
>> >
>> >                 <service autostart="0" domain="mydomain" exclusive="0"
>> > max_restarts="5" name="mgmt" recovery="restart">
>> >                         <script ref="myHaAgent"/>
>> >                         <ip ref="192.168.51.51"/>
>> >                 </service>
>> >
>> > I mentioned max_restarts=5 hoping that if cluster fails to start service
>> > 5 times, then it will relocate to another cluster node in failover
>> domain.
>> >
>> > To check this, I turned down NIC hosting service's floating IP and got
>> > following logs -
>> >
>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
>> > detected
>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
>> > "192.168.51.51" returned 1 (generic error)
>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
>> > service:mgmt
>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > recovering*
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
>> > service service:mgmt
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
>> > "192.168.51.51" returned 1 (generic error)
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
>> > service:mgmt; return value: 1
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
>> > service:mgmt
>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > recovering
>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
>> > service service:mgmt*
>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > stopped
>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>> > stopped
>> >
>> > But from the log it appears that cluster tried to restart service only
>> > ONCE before relocating.
>> >
>> > I was expecting cluster to retry starting this service five times on the
>> > same node before relocating
>> >
>> > Can anybody correct my understanding?
>> >
>> > Thanks,
>> > Parvez
>>
>> What version? Please paste your full cluster.conf.
>>
>> --
>> Digimer
>> Papers and Projects: https://alteeve.ca/w/
>> What if the cure for cancer is trapped in the mind of a person without
>> access to education?
>>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>



-- 
esta es mi vida e me la vivo hasta que dios quiera

--14dae9340ef113f24804cd577478
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello<br><br>Maybe you missing recovery=3D&quot;restart&quot; in your servi=
ces<br><br><div class=3D"gmail_quote">2012/10/31 Parvez Shaikh <span dir=3D=
"ltr">&lt;<a href=3D"mailto:parvez.h.shaikh@gmail.com" target=3D"_blank">pa=
rvez.h.shaikh@gmail.com</a>&gt;</span><br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Hi Digimer,<br><br>cman_tool version gives f=
ollowing -<br><br>6.2.0 config 22<br><br>Cluster.conf -<br><br>&lt;?xml ver=
sion=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot; name=
=3D&quot;PARVEZ&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myblade2&quot; nodeid=3D&qu=
ot;2&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &l=
t;method name=3D&quot;1&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;2&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myb=
lade1&quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<=
br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 &lt;method name=3D&quot;1&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;1&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cman =
expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0 &lt;fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 &lt;fencedevice agent=3D&quot;fence_bladecenter&quot; ipaddr=3D&q=
uot;<a href=3D"http://mm-1.mydomain.com" target=3D"_blank">mm-1.mydomain.co=
m</a>&quot; login=3D&quot;XXXX&quot; name=3D&quot;BladeCenterFencing-1&quot=
; passwd=3D&quot;XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br>

=A0=A0=A0=A0=A0=A0=A0 &lt;/fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;resources&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript file=3D&quot;/localhome/my/my_ha&quot; name=3D&quot;myHaAgent&quot;/&=
gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 &lt;ip address=3D&quot;192.168.51.51&quot; monitor_link=3D&quot;1&quot;=
/&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/resources&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomains&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failove=
rdomain name=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot; ordered=3D&q=
uot;1&quot; restricted=3D&quot;1&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode name=3D&quot;myblade2&quot; prior=
ity=3D&quot;2&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode nam=
e=3D&quot;myblade1&quot; priority=3D&quot;1&quot;/&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/=
failoverdomain&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fa=
iloverdomains&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;serv=
ice autostart=3D&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&qu=
ot;0&quot; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D=
&quot;restart&quot;&gt;<br>

=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;/rm&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;fence_daemon=
 clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&quot; post_join_dela=
y=3D&quot;0&quot;/&gt;<br>

&lt;/cluster&gt;<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote"=
>On Tue, Oct 30, 2012 at 9:25 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"=
mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> =
wrote:<br>

<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex"><div>On 10/30/2012 01:54 =
AM, Parvez Shaikh wrote:<br>
&gt; Hi experts,<br>
&gt;<br>
&gt; I have defined a service as follows in cluster.conf -<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; I mentioned max_restarts=3D5 hoping that if cluster fails to start ser=
vice<br>
&gt; 5 times, then it will relocate to another cluster node in failover dom=
ain.<br>
&gt;<br>
&gt; To check this, I turned down NIC hosting service&#39;s floating IP and=
 got<br>
&gt; following logs -<br>
&gt;<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; Link for eth1=
: Not<br>
&gt; detected<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
&gt; recovering*<br>
<div>&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Recovering =
failed<br>
&gt; service service:mgmt<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; start on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to =
start<br>
&gt; service:mgmt; return value: 1<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
<div>&gt; recovering<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating=
 failed<br>
</div>&gt; service service:mgmt*<br>
<div>&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service ser=
vice:mgmt is<br>
&gt; stopped<br>
&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:=
mgmt is<br>
&gt; stopped<br>
&gt;<br>
&gt; But from the log it appears that cluster tried to restart service only=
<br>
&gt; ONCE before relocating.<br>
&gt;<br>
&gt; I was expecting cluster to retry starting this service five times on t=
he<br>
&gt; same node before relocating<br>
&gt;<br>
&gt; Can anybody correct my understanding?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
<br>
</div>What version? Please paste your full cluster.conf.<span class=3D"HOEn=
Zb"><font color=3D"#888888"><br>
<span><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></font></span></blockquote></div><br>
<br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br><br clear=3D"all"><br>-- <br>esta es mi vida e me la vivo=
 hasta que dios quiera<br>


--14dae9340ef113f24804cd577478--


From parvez.h.shaikh@gmail.com Wed Oct 31 13:35:13 2012
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9VHZDdr023434 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 13:35:13 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9VHZ8eO006141
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 13:35:08 -0400
Received: from mail-bk0-f46.google.com (mail-bk0-f46.google.com
	[209.85.214.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9VHZ5PJ010579
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 13:35:06 -0400
Received: by mail-bk0-f46.google.com with SMTP id jk13so809331bkc.33
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 10:35:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=2+L0/VPOf4wi90KE3udhZVss2XklZ3C+nOTN0hxfz3o=;
	b=iG6DgkKT0fbKIGxv7M0MAsh7VkTFjXMg3ftPK3U6bwR2g7nWzxt9d+6Ic1ii4Z4xae
	Bv/fmrk2YwcdBHP99QGJg4V8eAeijLuXoPhU4RLvE4l7h6VDD3Fw+ahFSY13VrZknJch
	kVBWQUyxI9E4n52/uTG0YwKZ130311JPZ3jIK+idEDt6DTkeJiJcYkd6yMbyopifEIMR
	QCdGkiFefY/jWK3jnmPeYzlvyCMIRlmh7J/k0u8LEJMoGe4zVTvV4ZzrggUcNfpqnODA
	UW3bQktPFf5tGT3cStSofq+68MKGdm5+8aBnhd81IS0NjFCZ62On2kjf/9AAL0Seo5Jp
	m8/w==
MIME-Version: 1.0
Received: by 10.204.11.133 with SMTP id t5mr11770346bkt.14.1351704905384; Wed,
	31 Oct 2012 10:35:05 -0700 (PDT)
Received: by 10.204.36.8 with HTTP; Wed, 31 Oct 2012 10:35:05 -0700 (PDT)
In-Reply-To: <CAE7pJ3A3PZZBQ-KQEG5Yz_tQknzLF6U1Ds3M+2k6WFmQH3mW4A@mail.gmail.com>
References: <CAKrd532MfD+jR6Pfv64mMY9MW7hx4PKA-c5s2ituD=pqqgydFg@mail.gmail.com>
	<508FF88B.9000901@alteeve.ca>
	<CAKrd5307Lg1wJecyktAU36pRno=-koXPezE2hk2ViCwVxhbMLQ@mail.gmail.com>
	<CAE7pJ3A3PZZBQ-KQEG5Yz_tQknzLF6U1Ds3M+2k6WFmQH3mW4A@mail.gmail.com>
Date: Wed, 31 Oct 2012 23:05:05 +0530
Message-ID: <CAKrd530dBW=972kBwD_36vRG_fkKjveZQEVhWHYEUcMCvmRjeA@mail.gmail.com>
From: Parvez Shaikh <parvez.h.shaikh@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=00151758b404ba038d04cd5e52e9
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Not restarting "max_restart" times before
 relocating failed service
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 17:35:13 -0000

--00151758b404ba038d04cd5e52e9
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am using recovery=restart as evident from earlier attached cluster.conf

Thanks,
Parvez

On Wed, Oct 31, 2012 at 2:53 PM, emmanuel segura <emi2fast@gmail.com> wrote:

> Hello
>
> Maybe you missing recovery="restart" in your services
>
> 2012/10/31 Parvez Shaikh <parvez.h.shaikh@gmail.com>
>
>> Hi Digimer,
>>
>> cman_tool version gives following -
>>
>> 6.2.0 config 22
>>
>> Cluster.conf -
>>
>> <?xml version="1.0"?>
>> <cluster alias="PARVEZ" config_version="22" name="PARVEZ">
>>         <clusternodes>
>>                 <clusternode name="myblade2" nodeid="2" votes="1">
>>                         <fence>
>>                                 <method name="1">
>>                                         <device blade="2"
>> missing_as_off="1" name="BladeCenterFencing-1"/>
>>                                 </method>
>>                         </fence>
>>                 </clusternode>
>>                 <clusternode name="myblade1" nodeid="1" votes="1">
>>                         <fence>
>>                                 <method name="1">
>>                                         <device blade="1"
>> missing_as_off="1" name="BladeCenterFencing-1"/>
>>                                 </method>
>>                         </fence>
>>                 </clusternode>
>>         </clusternodes>
>>         <cman expected_votes="1" two_node="1"/>
>>         <fencedevices>
>>                 <fencedevice agent="fence_bladecenter" ipaddr="
>> mm-1.mydomain.com" login="XXXX" name="BladeCenterFencing-1"
>> passwd="XXXXX" shell_timeout="10"/>
>>         </fencedevices>
>>         <rm>
>>                 <resources>
>>                         <script file="/localhome/my/my_ha"
>> name="myHaAgent"/>
>>                         <ip address="192.168.51.51" monitor_link="1"/>
>>                 </resources>
>>                 <failoverdomains>
>>                         <failoverdomain name="mydomain" nofailback="1"
>> ordered="1" restricted="1">
>>                                 <failoverdomainnode name="myblade2"
>> priority="2"/>
>>                                 <failoverdomainnode name="myblade1"
>> priority="1"/>
>>                         </failoverdomain>
>>                 </failoverdomains>
>>                 <service autostart="0" domain="mydomain" exclusive="0"
>> max_restarts="5" name="mgmt" recovery="restart">
>>                         <script ref="myHaAgent"/>
>>                         <ip ref="192.168.51.51"/>
>>                 </service>
>>         </rm>
>>         <fence_daemon clean_start="1" post_fail_delay="0"
>> post_join_delay="0"/>
>> </cluster>
>>
>> Thanks,
>> Parvez
>>
>> On Tue, Oct 30, 2012 at 9:25 PM, Digimer <lists@alteeve.ca> wrote:
>>
>>> On 10/30/2012 01:54 AM, Parvez Shaikh wrote:
>>> > Hi experts,
>>> >
>>> > I have defined a service as follows in cluster.conf -
>>> >
>>> >                 <service autostart="0" domain="mydomain" exclusive="0"
>>> > max_restarts="5" name="mgmt" recovery="restart">
>>> >                         <script ref="myHaAgent"/>
>>> >                         <ip ref="192.168.51.51"/>
>>> >                 </service>
>>> >
>>> > I mentioned max_restarts=5 hoping that if cluster fails to start
>>> service
>>> > 5 times, then it will relocate to another cluster node in failover
>>> domain.
>>> >
>>> > To check this, I turned down NIC hosting service's floating IP and got
>>> > following logs -
>>> >
>>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> Link for eth1: Not
>>> > detected
>>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>>> > Oct 30 14:11:49 XXXX clurgmgrd: [10753]: <warning> No link on eth1...
>>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> status on ip
>>> > "192.168.51.51" returned 1 (generic error)
>>> > Oct 30 14:11:49 XXXX clurgmgrd[10753]: <notice> Stopping service
>>> > service:mgmt
>>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt
>>> is
>>> > recovering*
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Recovering failed
>>> > service service:mgmt
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> start on ip
>>> > "192.168.51.51" returned 1 (generic error)
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #68: Failed to start
>>> > service:mgmt; return value: 1
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Stopping service
>>> > service:mgmt
>>> > *Oct 30 14:12:00 XXXX clurgmgrd[10753]: <notice> Service service:mgmt
>>> is
>>> > recovering
>>> > Oct 30 14:12:00 XXXX clurgmgrd[10753]: <warning> #71: Relocating failed
>>> > service service:mgmt*
>>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>>> > stopped
>>> > Oct 30 14:12:01 XXXX clurgmgrd[10753]: <notice> Service service:mgmt is
>>> > stopped
>>> >
>>> > But from the log it appears that cluster tried to restart service only
>>> > ONCE before relocating.
>>> >
>>> > I was expecting cluster to retry starting this service five times on
>>> the
>>> > same node before relocating
>>> >
>>> > Can anybody correct my understanding?
>>> >
>>> > Thanks,
>>> > Parvez
>>>
>>> What version? Please paste your full cluster.conf.
>>>
>>> --
>>> Digimer
>>> Papers and Projects: https://alteeve.ca/w/
>>> What if the cure for cancer is trapped in the mind of a person without
>>> access to education?
>>>
>>
>>
>> --
>> Linux-cluster mailing list
>> Linux-cluster@redhat.com
>> https://www.redhat.com/mailman/listinfo/linux-cluster
>>
>
>
>
> --
> esta es mi vida e me la vivo hasta que dios quiera
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>

--00151758b404ba038d04cd5e52e9
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><br>I am using recovery=3Drestart as evident from earlier attached c=
luster.conf<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote">On W=
ed, Oct 31, 2012 at 2:53 PM, emmanuel segura <span dir=3D"ltr">&lt;<a href=
=3D"mailto:emi2fast@gmail.com" target=3D"_blank">emi2fast@gmail.com</a>&gt;=
</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Hello<br><br>Maybe you missing recovery=3D&q=
uot;restart&quot; in your services<br><br><div class=3D"gmail_quote">2012/1=
0/31 Parvez Shaikh <span dir=3D"ltr">&lt;<a href=3D"mailto:parvez.h.shaikh@=
gmail.com" target=3D"_blank">parvez.h.shaikh@gmail.com</a>&gt;</span><br>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div class=3D"h5">Hi Digimer,<br><br>cm=
an_tool version gives following -<br><br>6.2.0 config 22<br><br>Cluster.con=
f -<br>
<br>&lt;?xml version=3D&quot;1.0&quot;?&gt;<br>
&lt;cluster alias=3D&quot;PARVEZ&quot; config_version=3D&quot;22&quot; name=
=3D&quot;PARVEZ&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myblade2&quot; nodeid=3D&qu=
ot;2&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &l=
t;method name=3D&quot;1&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;2&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;clusternode name=3D&quot;myb=
lade1&quot; nodeid=3D&quot;1&quot; votes=3D&quot;1&quot;&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;fence&gt;<=
br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 &lt;method name=3D&quot;1&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;device blade=3D&quot;1&quot;=
 missing_as_off=3D&quot;1&quot; name=3D&quot;BladeCenterFencing-1&quot;/&gt=
;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/method&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fence&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/clusternode&gt;<br>=A0=
=A0=A0=A0=A0=A0=A0 &lt;/clusternodes&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;cman =
expected_votes=3D&quot;1&quot; two_node=3D&quot;1&quot;/&gt;<br>=A0=A0=A0=
=A0=A0=A0=A0 &lt;fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 &lt;fencedevice agent=3D&quot;fence_bladecenter&quot; ipaddr=3D&q=
uot;<a href=3D"http://mm-1.mydomain.com" target=3D"_blank">mm-1.mydomain.co=
m</a>&quot; login=3D&quot;XXXX&quot; name=3D&quot;BladeCenterFencing-1&quot=
; passwd=3D&quot;XXXXX&quot; shell_timeout=3D&quot;10&quot;/&gt;<br>


=A0=A0=A0=A0=A0=A0=A0 &lt;/fencedevices&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;rm=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;resources&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript file=3D&quot;/localhome/my/my_ha&quot; name=3D&quot;myHaAgent&quot;/&=
gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 &lt;ip address=3D&quot;192.168.51.51&quot; monitor_link=3D&quot;1&quot;=
/&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/resources&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomains&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failove=
rdomain name=3D&quot;mydomain&quot; nofailback=3D&quot;1&quot; ordered=3D&q=
uot;1&quot; restricted=3D&quot;1&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode name=3D&quot;myblade2&quot; prior=
ity=3D&quot;2&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;failoverdomainnode nam=
e=3D&quot;myblade1&quot; priority=3D&quot;1&quot;/&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/=
failoverdomain&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/fa=
iloverdomains&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;serv=
ice autostart=3D&quot;0&quot; domain=3D&quot;mydomain&quot; exclusive=3D&qu=
ot;0&quot; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D=
&quot;restart&quot;&gt;<br>


=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;s=
cript ref=3D&quot;myHaAgent&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;ip ref=3D&quot;192.168.51.51&quot;=
/&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/service&gt;<br>=
=A0=A0=A0=A0=A0=A0=A0 &lt;/rm&gt;<br>=A0=A0=A0=A0=A0=A0=A0 &lt;fence_daemon=
 clean_start=3D&quot;1&quot; post_fail_delay=3D&quot;0&quot; post_join_dela=
y=3D&quot;0&quot;/&gt;<br>


&lt;/cluster&gt;<br><br>Thanks,<br>Parvez<br><br><div class=3D"gmail_quote"=
>On Tue, Oct 30, 2012 at 9:25 PM, Digimer <span dir=3D"ltr">&lt;<a href=3D"=
mailto:lists@alteeve.ca" target=3D"_blank">lists@alteeve.ca</a>&gt;</span> =
wrote:<br>


<blockquote class=3D"gmail_quote" style=3D"margin:0pt 0pt 0pt 0.8ex;border-=
left:1px solid rgb(204,204,204);padding-left:1ex"><div>On 10/30/2012 01:54 =
AM, Parvez Shaikh wrote:<br>
&gt; Hi experts,<br>
&gt;<br>
&gt; I have defined a service as follows in cluster.conf -<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;service autostart=3D&quot;0&quot; =
domain=3D&quot;mydomain&quot; exclusive=3D&quot;0&quot;<br>
&gt; max_restarts=3D&quot;5&quot; name=3D&quot;mgmt&quot; recovery=3D&quot;=
restart&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;script ref=3D&quot=
;myHaAgent&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;ip ref=3D&quot;192=
.168.51.51&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/service&gt;<br>
&gt;<br>
&gt; I mentioned max_restarts=3D5 hoping that if cluster fails to start ser=
vice<br>
&gt; 5 times, then it will relocate to another cluster node in failover dom=
ain.<br>
&gt;<br>
&gt; To check this, I turned down NIC hosting service&#39;s floating IP and=
 got<br>
&gt; following logs -<br>
&gt;<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; Link for eth1=
: Not<br>
&gt; detected<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd: [10753]: &lt;warning&gt; No link on et=
h1...<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; status on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:11:49 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
&gt; recovering*<br>
<div>&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Recovering =
failed<br>
&gt; service service:mgmt<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; start on ip<br>
&gt; &quot;192.168.51.51&quot; returned 1 (generic error)<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #68: Failed to =
start<br>
&gt; service:mgmt; return value: 1<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Stopping service=
<br>
&gt; service:mgmt<br>
</div>&gt; *Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;notice&gt; Service s=
ervice:mgmt is<br>
<div>&gt; recovering<br>
&gt; Oct 30 14:12:00 XXXX clurgmgrd[10753]: &lt;warning&gt; #71: Relocating=
 failed<br>
</div>&gt; service service:mgmt*<br>
<div>&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service ser=
vice:mgmt is<br>
&gt; stopped<br>
&gt; Oct 30 14:12:01 XXXX clurgmgrd[10753]: &lt;notice&gt; Service service:=
mgmt is<br>
&gt; stopped<br>
&gt;<br>
&gt; But from the log it appears that cluster tried to restart service only=
<br>
&gt; ONCE before relocating.<br>
&gt;<br>
&gt; I was expecting cluster to retry starting this service five times on t=
he<br>
&gt; same node before relocating<br>
&gt;<br>
&gt; Can anybody correct my understanding?<br>
&gt;<br>
&gt; Thanks,<br>
&gt; Parvez<br>
<br>
</div>What version? Please paste your full cluster.conf.<span><font color=
=3D"#888888"><br>
<span><font color=3D"#888888"><br>
--<br>
Digimer<br>
Papers and Projects: <a href=3D"https://alteeve.ca/w/" target=3D"_blank">ht=
tps://alteeve.ca/w/</a><br>
What if the cure for cancer is trapped in the mind of a person without<br>
access to education?<br>
</font></span></font></span></blockquote></div><br>
<br></div></div><span class=3D"HOEnZb"><font color=3D"#888888">--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com" target=3D"_blank">Linux-cluster=
@redhat.com</a><br>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></fon=
t></span></blockquote></div><span class=3D"HOEnZb"><font color=3D"#888888">=
<br>
<br clear=3D"all"><br>-- <br>esta es mi vida e me la vivo hasta que dios qu=
iera<br>

</font></span><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br>

--00151758b404ba038d04cd5e52e9--


From jamespedia@gmail.com Wed Oct 31 15:07:12 2012
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id q9VJ7CCs023388 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 31 Oct 2012 15:07:12 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id q9VJ77XJ026885
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 15:07:07 -0400
Received: from mail-ob0-f174.google.com (mail-ob0-f174.google.com
	[209.85.214.174])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id q9VJ75t7013579
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 15:07:05 -0400
Received: by mail-ob0-f174.google.com with SMTP id uo13so2013972obb.33
	for <linux-cluster@redhat.com>; Wed, 31 Oct 2012 12:07:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=V8N/dZzfn7pslpqQmkcgnEAy7dlRebyBuR8uZKPL56k=;
	b=r8KsC9Z9kElxCD77U4DlVESswmBocRMn2odVtyEIbJpm4EFOqx2I28j1iSlN3jMxZP
	HNUXZGoKj3L2eYOhlIA6fE7vwyCx8quLqzHH6t8yLoPcSNmWKvxuHBcIrr7DfAWWkoum
	aWfq3dKYFJDNtzGWpEO/aWhXLvc4r13EQ/uqdWd9gqBWZsK7bdNkzIu8Ik0l3j+h0lcY
	x4xiW6DE3RZtzSRs2l+gHdllePnogZenuIfDBM2zI8z+XYmbqu6SSgN6HMT9ipYCzc5u
	SynMjOXtyQDh2nnxNUAVxB6qtyL1Tvl9eUZHCefn25ZgjeSOFMYAp2Sisfn9/+oPE9wa
	C4+Q==
MIME-Version: 1.0
Received: by 10.182.64.34 with SMTP id l2mr31572553obs.28.1351710425116; Wed,
	31 Oct 2012 12:07:05 -0700 (PDT)
Received: by 10.182.36.202 with HTTP; Wed, 31 Oct 2012 12:07:04 -0700 (PDT)
Date: Wed, 31 Oct 2012 14:07:04 -0500
Message-ID: <CAAxr-=8Yj6n53UF=TLbjfUdv6Sbx50MYbwA-AbG__Tdo9ZgBCA@mail.gmail.com>
From: james pedia <jamespedia@gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=14dae93a1909ba6f9704cd5f9b2e
X-RedHat-Spam-Score: -2.699  (BAYES_00, DKIM_SIGNED, DKIM_VALID, DKIM_VALID_AU,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] gfs2_tool unfreeze hang
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 31 Oct 2012 19:07:12 -0000

--14dae93a1909ba6f9704cd5f9b2e
Content-Type: text/plain; charset=ISO-8859-1

Noticed this thread for the same issue at:

https://www.redhat.com/archives/linux-cluster/2012-September/msg00084.html:

I think I hit the same issue:

(CentOS6.3)
# uname -r
2.6.32-279.el6.x86_64

gfs2-utils-3.0.12.1-32.el6_3.1.x86_64 is in use here.


# gfs2_tool freeze /var/www/html
# ls -l /var/www/html/
total 8
-rw-r--r-- 1 root root 10 Oct 30 23:47 a
-rw-r--r-- 1 root root 41 Oct 30 20:44 index.html
# cp /var/www/html/a /var/www/html/b
(HANG HERE)

Then try this:
# gfs2_tool unfreeze /var/www/html
(HANG AS WELL)

The whole cluster has to be reset to recover from this.

'dmsetup suspend' and 'dmsetup resume' are working fine.

Are these commands basically doing the same thing ('dmsetup suspend' vs
'gfs2_tool freeze')?

Is there a way to see if GFS2 file system is currently being suspended or
frozen?

Thanks,

--14dae93a1909ba6f9704cd5f9b2e
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Noticed this thread for the same issue at:<div><br></div><div><a href=3D"ht=
tps://www.redhat.com/archives/linux-cluster/2012-September/msg00084.html">h=
ttps://www.redhat.com/archives/linux-cluster/2012-September/msg00084.html</=
a>:<div>
<br></div><div>I think I hit the same issue:</div><div><br></div><div>(Cent=
OS6.3)</div><div><div># uname -r</div><div>2.6.32-279.el6.x86_64</div></div=
><div><br></div><div>gfs2-utils-3.0.12.1-32.el6_3.1.x86_64 is in use here.<=
/div>
<div><br></div><div><br></div><div><div># gfs2_tool freeze /var/www/html</d=
iv></div><div><div># ls -l /var/www/html/</div><div>total 8</div><div>-rw-r=
--r-- 1 root root 10 Oct 30 23:47 a</div><div>-rw-r--r-- 1 root root 41 Oct=
 30 20:44 index.html</div>
</div><div><div># cp /var/www/html/a /var/www/html/b</div></div><div>(HANG =
HERE)</div><div><br></div><div>Then try this:</div><div><div># gfs2_tool un=
freeze /var/www/html</div></div><div>(HANG AS WELL)</div><div><br></div>
<div>The whole cluster has to be reset to recover from this.=A0</div><div><=
br></div><div>&#39;dmsetup suspend&#39; and &#39;dmsetup resume&#39; are wo=
rking fine.=A0</div><div><br></div><div>Are these commands basically doing =
the same thing (&#39;dmsetup suspend&#39; vs &#39;gfs2_tool freeze&#39;)?=
=A0</div>
<div><br></div><div>Is there a way to see if GFS2 file system is currently =
being suspended or frozen?</div><div><br></div><div>Thanks,</div></div>

--14dae93a1909ba6f9704cd5f9b2e--



From stephen.rankin@stfc.ac.uk Mon Mar 10 14:19:27 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2AIJR0l022334 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 10 Mar 2014 14:19:27 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2AIJRvw028313
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 14:19:27 -0400
Received: from engine19-1277-3.icritical.com (engine19-1277-3.icritical.com
	[93.95.13.95])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2AIJOST024876
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 14:19:25 -0400
Received: by iCritical outbound mailer at engine19-1277-3.icritical.com
	for linux-cluster@redhat.com; Mon, 10 Mar 2014 18:19:19 +0000
Received: from engine19-1277-3.icritical.com ([127.0.0.1])
	by localhost (engine19-1277-3.icritical.com [127.0.0.1]) (amavisd-new,
	port 10024) with SMTP id 30556-07 for <linux-cluster@redhat.com>;
	Mon, 10 Mar 2014 18:19:16 +0000 (GMT)
Received: (qmail 31420 invoked by uid 599); 10 Mar 2014 18:19:16 -0000
Received: from unknown (HELO exchsmtp.stfc.ac.uk) (130.246.236.11)
	by engine19-1277-3.icritical.com (qpsmtpd/0.28) with ESMTP;
	Mon, 10 Mar 2014 18:19:16 +0000
Received: from EXCHMBX03.fed.cclrc.ac.uk ([169.254.1.203]) by
	EXCHHUB03.fed.cclrc.ac.uk ([130.246.236.11]) with mapi id
	14.02.0318.004; Mon, 10 Mar 2014 18:15:10 +0000
From: <stephen.rankin@stfc.ac.uk>
To: <linux-cluster@redhat.com>
Thread-Topic: gfs2 and quotas - system crash
Thread-Index: Ac85Zl1WF8EaKrMOQrqHa31s3NCmEQDITcrgAAE9XiA=
Date: Mon, 10 Mar 2014 18:15:08 +0000
Message-ID: <4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
In-Reply-To: <4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [130.246.58.15]
Content-Type: multipart/alternative;
	boundary="_000_4EC8429AA448A54D86E52F450C43247E74223A18EXCHMBX03fedccl_"
MIME-Version: 1.0
X-Virus-Scanned: by iCritical at engine19-1277-3.icritical.com
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 10 Mar 2014 18:19:27 -0000

--_000_4EC8429AA448A54D86E52F450C43247E74223A18EXCHMBX03fedccl_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,



When using gfs2 with quotas on a SAN that is providing storage to two
clustered systems running CentOS6.5, one of the systems
can crash. This crash appears to be caused when a user tries
to add something to a SAN disk when they have exceeded their
quota on that disk. Sometimes a stack trace is produced in /var/log/message=
s
which appears to indicate that it was gfs2 that caused the problem.
At the same time you get the gfs2 stack trace you also see problems
with someone exceeding their quota.

The stack trace is below.

Has anyone got a solution to this, other than switching of quotas? I have
switched of quotas which appears to have stabilised the system so far, but =
I
do need the quotas on.

Your help is appreciated.

Stephen Rankin
STFC, RAL, ISIS

Mar  5 11:40:50 chadwick kernel: GFS2: fsid=3Danalysis:lvol0.1: quota excee=
ded for user 101355
Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] ldap_explode_dn(usi660) ret=
urned NULL: Success
Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] ldap_result() failed: Inval=
id DN syntax
Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] lookup of user usi660 faile=
d: Invalid DN syntax
Mar  5 11:41:46 chadwick kernel: ------------[ cut here ]------------
Mar  5 11:41:46 chadwick kernel: WARNING: at lib/list_debug.c:26 __list_add=
+0x6d/0xa0() (Not tainted)
Mar  5 11:41:46 chadwick kernel: Hardware name: PowerEdge R910
Mar  5 11:41:46 chadwick kernel: list_add corruption. next->prev should be =
prev (ffff8820531518d0), but was ffff884d4c4594d0. (next=3Dffff884d4c4594d0=
).
Mar  5 11:41:46 chadwick kernel: Modules linked in: gfs2 dlm configfs bridg=
e autofs4 des_generic ecb md4 nls_utf8 cifs bnx2fc cnic uio fcoe libfcoe li=
bfc 8021q garp stp llc ipv6 microcode power_meter iTCO_wdt iTCO_vendor_supp=
ort dcdbas serio_raw ixgbe dca ptp pps_core mdio lpc_ich mfd_core sg ses en=
closure i7core_edac edac_core bnx2 ext4 jbd2 mbcache dm_round_robin sr_mod =
cdrom sd_mod crc_t10dif qla2xxx scsi_transport_fc scsi_tgt pata_acpi ata_ge=
neric ata_piix megaraid_sas dm_multipath dm_mirror dm_region_hash dm_log dm=
_mod [last unloaded: speedstep_lib]
Mar  5 11:41:46 chadwick kernel: Pid: 74823, comm: vncserver Not tainted 2.=
6.32-431.3.1.el6.x86_64 #1
Mar  5 11:41:46 chadwick kernel: Call Trace:
Mar  5 11:41:46 chadwick kernel: [<ffffffff81071e27>] ? warn_slowpath_commo=
n+0x87/0xc0
Mar  5 11:41:46 chadwick kernel: [<ffffffff81071f16>] ? warn_slowpath_fmt+0=
x46/0x50
Mar  5 11:41:46 chadwick kernel: [<ffffffff812944ed>] ? __list_add+0x6d/0xa=
0
Mar  5 11:41:46 chadwick kernel: [<ffffffff811a6c02>] ? new_inode+0x72/0xb0
Mar  5 11:41:46 chadwick kernel: [<ffffffffa03f45d5>] ? gfs2_create_inode+0=
x1b5/0x1150 [gfs2]
Mar  5 11:41:46 chadwick kernel: [<ffffffffa03f3986>] ? gfs2_glock_nq_init+=
0x16/0x40 [gfs2]
Mar  5 11:41:46 chadwick kernel: [<ffffffffa03ffc74>] ? gfs2_mkdir+0x24/0x3=
0 [gfs2]
Mar  5 11:41:46 chadwick kernel: [<ffffffff8122766f>] ? security_inode_mkdi=
r+0x1f/0x30
Mar  5 11:41:46 chadwick kernel: [<ffffffff81198149>] ? vfs_mkdir+0xd9/0x14=
0
Mar  5 11:41:46 chadwick kernel: [<ffffffff8119ab67>] ? sys_mkdirat+0xc7/0x=
1b0
Mar  5 11:41:46 chadwick kernel: [<ffffffff8119ac68>] ? sys_mkdir+0x18/0x20
Mar  5 11:41:46 chadwick kernel: [<ffffffff8100b072>] ? system_call_fastpat=
h+0x16/0x1b
Mar  5 11:41:46 chadwick kernel: ---[ end trace e51734a39976a028 ]---
Mar  5 11:41:46 chadwick kernel: GFS2: fsid=3Danalysis:lvol0.1: quota excee=
ded for user 101355
Mar  5 11:41:47 chadwick abrtd: Directory 'oops-2014-03-05-11:41:47-12194-1=
' creation detected
Mar  5 11:41:47 chadwick abrt-dump-oops: Reported 1 kernel oopses to Abrt
Mar  5 11:41:47 chadwick abrtd: Can't open file '/var/spool/abrt/oops-2014-=
03-05-11:41:47-12194-1/uid': No such file or directory
Mar  5 11:41:54 chadwick kernel: GFS2: fsid=3Danalysis:lvol0.1: quota excee=
ded for user 101355




-- =0AScanned by iCritical.=0A

--_000_4EC8429AA448A54D86E52F450C43247E74223A18EXCHMBX03fedccl_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-priority:99;
	mso-style-link:"Plain Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:Consolas;
	mso-fareast-language:EN-US;}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-priority:99;
	mso-style-link:"Plain Text";
	font-family:Consolas;}
span.EmailStyle19
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle20
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.EmailStyle21
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-GB" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoPlainText"><span style=3D"font-family:&quot;Courier New&quot=
;">Hello,<o:p></o:p></span></p>
<p class=3D"MsoPlainText"><span style=3D"font-family:&quot;Courier New&quot=
;"><o:p>&nbsp;</o:p></span></p>
<p class=3D"MsoPlainText"><span style=3D"font-family:&quot;Courier New&quot=
;">When using gfs2 with quotas on a SAN that is providing storage to two<br=
>
clustered systems running CentOS6.5, one of the systems<br>
can crash. This crash appears to be caused when a user tries<br>
to add something to a SAN disk when they have exceeded their<br>
quota on that disk. Sometimes a stack trace is produced in /var/log/message=
s<br>
which appears to indicate that it was gfs2 that caused the problem.<br>
At the same time you get the gfs2 stack trace you also see problems<br>
with someone exceeding their quota.<br>
<br>
The stack trace is below.<br>
<br>
Has anyone got a solution to this, other than switching of quotas? I have<b=
r>
switched of quotas which appears to have stabilised the system so far, but =
I<br>
do need the quotas on. <br>
<br>
Your help is appreciated.<br>
<br>
Stephen Rankin<br>
STFC, RAL, ISIS<br>
<br>
Mar&nbsp; 5 11:40:50 chadwick kernel: GFS2: fsid=3Danalysis:lvol0.1: quota =
exceeded for user 101355<br>
Mar&nbsp; 5 11:40:50 chadwick nslcd[11420]: [767df3] ldap_explode_dn(usi660=
) returned NULL: Success<br>
Mar&nbsp; 5 11:40:50 chadwick nslcd[11420]: [767df3] ldap_result() failed: =
Invalid DN syntax<br>
Mar&nbsp; 5 11:40:50 chadwick nslcd[11420]: [767df3] lookup of user usi660 =
failed: Invalid DN syntax<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: ------------[ cut here ]------------<=
br>
Mar&nbsp; 5 11:41:46 chadwick kernel: WARNING: at lib/list_debug.c:26 __lis=
t_add&#43;0x6d/0xa0() (Not tainted)<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: Hardware name: PowerEdge R910<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: list_add corruption. next-&gt;prev sh=
ould be prev (ffff8820531518d0), but was ffff884d4c4594d0. (next=3Dffff884d=
4c4594d0).<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: Modules linked in: gfs2 dlm configfs =
bridge autofs4 des_generic ecb md4 nls_utf8 cifs bnx2fc cnic uio fcoe libfc=
oe libfc 8021q garp stp llc ipv6 microcode power_meter iTCO_wdt iTCO_vendor=
_support dcdbas serio_raw ixgbe dca ptp
 pps_core mdio lpc_ich mfd_core sg ses enclosure i7core_edac edac_core bnx2=
 ext4 jbd2 mbcache dm_round_robin sr_mod cdrom sd_mod crc_t10dif qla2xxx sc=
si_transport_fc scsi_tgt pata_acpi ata_generic ata_piix megaraid_sas dm_mul=
tipath dm_mirror dm_region_hash
 dm_log dm_mod [last unloaded: speedstep_lib]<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: Pid: 74823, comm: vncserver Not taint=
ed 2.6.32-431.3.1.el6.x86_64 #1<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: Call Trace:<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff81071e27&gt;] ? warn_slo=
wpath_common&#43;0x87/0xc0<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff81071f16&gt;] ? warn_slo=
wpath_fmt&#43;0x46/0x50<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff812944ed&gt;] ? __list_a=
dd&#43;0x6d/0xa0<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff811a6c02&gt;] ? new_inod=
e&#43;0x72/0xb0<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffffa03f45d5&gt;] ? gfs2_cre=
ate_inode&#43;0x1b5/0x1150 [gfs2]<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffffa03f3986&gt;] ? gfs2_glo=
ck_nq_init&#43;0x16/0x40 [gfs2]<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffffa03ffc74&gt;] ? gfs2_mkd=
ir&#43;0x24/0x30 [gfs2]<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff8122766f&gt;] ? security=
_inode_mkdir&#43;0x1f/0x30<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff81198149&gt;] ? vfs_mkdi=
r&#43;0xd9/0x140<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff8119ab67&gt;] ? sys_mkdi=
rat&#43;0xc7/0x1b0<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff8119ac68&gt;] ? sys_mkdi=
r&#43;0x18/0x20<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: [&lt;ffffffff8100b072&gt;] ? system_c=
all_fastpath&#43;0x16/0x1b<br>
Mar&nbsp; 5 11:41:46 chadwick kernel: ---[ end trace e51734a39976a028 ]---<=
br>
Mar&nbsp; 5 11:41:46 chadwick kernel: GFS2: fsid=3Danalysis:lvol0.1: quota =
exceeded for user 101355<br>
Mar&nbsp; 5 11:41:47 chadwick abrtd: Directory 'oops-2014-03-05-11:41:47-12=
194-1' creation detected<br>
Mar&nbsp; 5 11:41:47 chadwick abrt-dump-oops: Reported 1 kernel oopses to A=
brt<br>
Mar&nbsp; 5 11:41:47 chadwick abrtd: Can't open file '/var/spool/abrt/oops-=
2014-03-05-11:41:47-12194-1/uid': No such file or directory<br>
Mar&nbsp; 5 11:41:54 chadwick kernel: GFS2: fsid=3Danalysis:lvol0.1: quota =
exceeded for user 101355</span><o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>

<br>=
<p>-- =0A<BR>Scanned by iCritical.=0A</p>
<br>=
</body>
</html>

--_000_4EC8429AA448A54D86E52F450C43247E74223A18EXCHMBX03fedccl_--

From adas@redhat.com Mon Mar 10 15:38:08 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2AJc7Pe013549 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 10 Mar 2014 15:38:07 -0400
Received: from mx4-phx2.redhat.com (mx02.colomx.prod.int.phx2.redhat.com
	[10.5.7.2])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2AJc70i006947
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 15:38:07 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx4-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2AJc78m029442
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 15:38:07 -0400
Date: Mon, 10 Mar 2014 15:38:06 -0400 (EDT)
From: Abhijith Das <adas@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <382425903.12347329.1394480286571.JavaMail.zimbra@redhat.com>
In-Reply-To: <4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.11]
Thread-Topic: gfs2 and quotas - system crash
Thread-Index: Ac85Zl1WF8EaKrMOQrqHa31s3NCmEQDITcrgAAE9XiCBXTxBsw==
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 10 Mar 2014 19:38:08 -0000



----- Original Message -----
> From: "stephen rankin" <stephen.rankin@stfc.ac.uk>
> To: linux-cluster@redhat.com
> Sent: Monday, March 10, 2014 1:15:08 PM
> Subject: [Linux-cluster] gfs2 and quotas - system crash
> 
> Hello,
> 
> 
> 
> When using gfs2 with quotas on a SAN that is providing storage to two
> clustered systems running CentOS6.5, one of the systems
> can crash. This crash appears to be caused when a user tries
> to add something to a SAN disk when they have exceeded their
> quota on that disk. Sometimes a stack trace is produced in /var/log/messages
> which appears to indicate that it was gfs2 that caused the problem.
> At the same time you get the gfs2 stack trace you also see problems
> with someone exceeding their quota.
> 
> The stack trace is below.
> 
> Has anyone got a solution to this, other than switching of quotas? I have
> switched of quotas which appears to have stabilised the system so far, but I
> do need the quotas on.
> 
> Your help is appreciated.
> 

Hi Stephen,

We have another report of this bug when gfs2 was exported using NFS. 
https://bugzilla.redhat.com/show_bug.cgi?id=1059808. Are you using
NFS in your setup as well? We have not able to reproduce it to figure
out what might be going on. Do you have a set procedure that you're
able to recreate with reliably? If so, it would be of great help.
Also, more info about your setup (file sizes, number of files, how
many nodes mounting gfs2, what kinds of operations are being run)
etc would be helpful as well.

Cheers!
--Abhi

> Stephen Rankin
> STFC, RAL, ISIS
> 
> Mar  5 11:40:50 chadwick kernel: GFS2: fsid=analysis:lvol0.1: quota exceeded
> for user 101355
> Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] ldap_explode_dn(usi660)
> returned NULL: Success
> Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] ldap_result() failed: Invalid
> DN syntax
> Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] lookup of user usi660 failed:
> Invalid DN syntax
> Mar  5 11:41:46 chadwick kernel: ------------[ cut here ]------------
> Mar  5 11:41:46 chadwick kernel: WARNING: at lib/list_debug.c:26
> __list_add+0x6d/0xa0() (Not tainted)
> Mar  5 11:41:46 chadwick kernel: Hardware name: PowerEdge R910
> Mar  5 11:41:46 chadwick kernel: list_add corruption. next->prev should be
> prev (ffff8820531518d0), but was ffff884d4c4594d0. (next=ffff884d4c4594d0).
> Mar  5 11:41:46 chadwick kernel: Modules linked in: gfs2 dlm configfs bridge
> autofs4 des_generic ecb md4 nls_utf8 cifs bnx2fc cnic uio fcoe libfcoe libfc
> 8021q garp stp llc ipv6 microcode power_meter iTCO_wdt iTCO_vendor_support
> dcdbas serio_raw ixgbe dca ptp pps_core mdio lpc_ich mfd_core sg ses
> enclosure i7core_edac edac_core bnx2 ext4 jbd2 mbcache dm_round_robin sr_mod
> cdrom sd_mod crc_t10dif qla2xxx scsi_transport_fc scsi_tgt pata_acpi
> ata_generic ata_piix megaraid_sas dm_multipath dm_mirror dm_region_hash
> dm_log dm_mod [last unloaded: speedstep_lib]
> Mar  5 11:41:46 chadwick kernel: Pid: 74823, comm: vncserver Not tainted
> 2.6.32-431.3.1.el6.x86_64 #1
> Mar  5 11:41:46 chadwick kernel: Call Trace:
> Mar  5 11:41:46 chadwick kernel: [<ffffffff81071e27>] ?
> warn_slowpath_common+0x87/0xc0
> Mar  5 11:41:46 chadwick kernel: [<ffffffff81071f16>] ?
> warn_slowpath_fmt+0x46/0x50
> Mar  5 11:41:46 chadwick kernel: [<ffffffff812944ed>] ? __list_add+0x6d/0xa0
> Mar  5 11:41:46 chadwick kernel: [<ffffffff811a6c02>] ? new_inode+0x72/0xb0
> Mar  5 11:41:46 chadwick kernel: [<ffffffffa03f45d5>] ?
> gfs2_create_inode+0x1b5/0x1150 [gfs2]
> Mar  5 11:41:46 chadwick kernel: [<ffffffffa03f3986>] ?
> gfs2_glock_nq_init+0x16/0x40 [gfs2]
> Mar  5 11:41:46 chadwick kernel: [<ffffffffa03ffc74>] ? gfs2_mkdir+0x24/0x30
> [gfs2]
> Mar  5 11:41:46 chadwick kernel: [<ffffffff8122766f>] ?
> security_inode_mkdir+0x1f/0x30
> Mar  5 11:41:46 chadwick kernel: [<ffffffff81198149>] ? vfs_mkdir+0xd9/0x140
> Mar  5 11:41:46 chadwick kernel: [<ffffffff8119ab67>] ?
> sys_mkdirat+0xc7/0x1b0
> Mar  5 11:41:46 chadwick kernel: [<ffffffff8119ac68>] ? sys_mkdir+0x18/0x20
> Mar  5 11:41:46 chadwick kernel: [<ffffffff8100b072>] ?
> system_call_fastpath+0x16/0x1b
> Mar  5 11:41:46 chadwick kernel: ---[ end trace e51734a39976a028 ]---
> Mar  5 11:41:46 chadwick kernel: GFS2: fsid=analysis:lvol0.1: quota exceeded
> for user 101355
> Mar  5 11:41:47 chadwick abrtd: Directory 'oops-2014-03-05-11:41:47-12194-1'
> creation detected
> Mar  5 11:41:47 chadwick abrt-dump-oops: Reported 1 kernel oopses to Abrt
> Mar  5 11:41:47 chadwick abrtd: Can't open file
> '/var/spool/abrt/oops-2014-03-05-11:41:47-12194-1/uid': No such file or
> directory
> Mar  5 11:41:54 chadwick kernel: GFS2: fsid=analysis:lvol0.1: quota exceeded
> for user 101355
> 
> 
> 
> 
> --
> Scanned by iCritical.
> 
> 
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From ajb2@mssl.ucl.ac.uk Mon Mar 10 16:47:29 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2AKlSCf026032 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 10 Mar 2014 16:47:28 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2AKlRL9016433
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 16:47:28 -0400
Received: from msslax.mssl.ucl.ac.uk (msslax.mssl.ucl.ac.uk [128.40.71.164])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2AKlACM002432
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 16:47:11 -0400
Received: from [192.168.178.11] (host-92-27-146-159.static.as13285.net
	[92.27.146.159]) (authenticated bits=0)
	by msslax.mssl.ucl.ac.uk (8.13.8/8.13.8) with ESMTP id s2AKkvk0027573
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES128-SHA bits=128 verify=NO)
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 20:46:59 GMT
Message-ID: <531E24C1.5000005@mssl.ucl.ac.uk>
Date: Mon, 10 Mar 2014 20:46:57 +0000
From: Alan Brown <ajb2@mssl.ucl.ac.uk>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
In-Reply-To: <4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
Content-Type: multipart/alternative;
	boundary="------------040102020509010604070202"
X-MSSL-MailScanner-Information: Please contact the ISP for more information
X-MSSL-MailScanner-ID: s2AKkvk0027573
X-MSSL-MailScanner: No virus found
X-MSSL-MailScanner-SpamCheck: not spam, SpamAssassin (not cached,
	score=-2.899, required 6, autolearn=not spam, ALL_TRUSTED -1.00,
	BAYES_00 -1.90, HTML_MESSAGE 0.00)
X-MSSL-MailScanner-From: ajb2@mssl.ucl.ac.uk
X-Spam-Status: No
X-RedHat-Spam-Score: -4.109  (BAYES_00, DCC_REPUT_70_89, HTML_MESSAGE,
	RCVD_IN_DNSWL_MED, T_RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 10 Mar 2014 20:47:29 -0000

This is a multi-part message in MIME format.
--------------040102020509010604070202
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 10/03/14 18:15, stephen.rankin@stfc.ac.uk wrote:
>
> Hello,
>
> When using gfs2 with quotas on a SAN that is providing storage to two
> clustered systems running CentOS6.5, one of the systems
> can crash. This crash appears to be caused when a user tries
> to add something to a SAN disk when they have exceeded their
> quota on that disk. Sometimes a stack trace is produced in 
> /var/log/messages
> which appears to indicate that it was gfs2 that caused the problem.
> At the same time you get the gfs2 stack trace you also see problems
> with someone exceeding their quota.
>

We have exactly the same problem and an open ticket with RH support.

They've been trying to finger FS corruption as the cause.







--------------040102020509010604070202
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#CCCCCC" text="#000000">
    <div class="moz-cite-prefix">On 10/03/14 18:15,
      <a class="moz-txt-link-abbreviated" href="mailto:stephen.rankin@stfc.ac.uk">stephen.rankin@stfc.ac.uk</a> wrote:<br>
    </div>
    <blockquote
cite="mid:4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk"
      type="cite">
      <meta http-equiv="Content-Type" content="text/html;
        charset=ISO-8859-1">
      <meta name="Generator" content="Microsoft Word 14 (filtered
        medium)">
      <style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-priority:99;
	mso-style-link:"Plain Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:Consolas;
	mso-fareast-language:EN-US;}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-priority:99;
	mso-style-link:"Plain Text";
	font-family:Consolas;}
span.EmailStyle19
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle20
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.EmailStyle21
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]-->
      <div class="WordSection1">
        <p class="MsoPlainText"><span style="font-family:&quot;Courier
            New&quot;">Hello,<o:p></o:p></span></p>
        <p class="MsoPlainText"><span style="font-family:&quot;Courier
            New&quot;"><o:p>&nbsp;</o:p></span></p>
        <p class="MsoPlainText"><span style="font-family:&quot;Courier
            New&quot;">When using gfs2 with quotas on a SAN that is
            providing storage to two<br>
            clustered systems running CentOS6.5, one of the systems<br>
            can crash. This crash appears to be caused when a user tries<br>
            to add something to a SAN disk when they have exceeded their<br>
            quota on that disk. Sometimes a stack trace is produced in
            /var/log/messages<br>
            which appears to indicate that it was gfs2 that caused the
            problem.<br>
            At the same time you get the gfs2 stack trace you also see
            problems<br>
            with someone exceeding their quota.<br>
            <br>
          </span></p>
      </div>
    </blockquote>
    <br>
    We have exactly the same problem and an open ticket with RH support.
    <br>
    <br>
    They've been trying to finger FS corruption as the cause.<br>
    <br>
    <br>
    <br>
    <br>
  </body>
</html>

--------------040102020509010604070202--

From ajb2@mssl.ucl.ac.uk Mon Mar 10 16:48:47 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2AKmlc4013940 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 10 Mar 2014 16:48:47 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2AKmkX7016962
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 16:48:46 -0400
Received: from msslax.mssl.ucl.ac.uk (msslax.mssl.ucl.ac.uk [128.40.71.164])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2AKmfHl030056
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 16:48:43 -0400
Received: from [192.168.178.11] (host-92-27-146-159.static.as13285.net
	[92.27.146.159]) (authenticated bits=0)
	by msslax.mssl.ucl.ac.uk (8.13.8/8.13.8) with ESMTP id s2AKmT9k027599
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES128-SHA bits=128 verify=NO)
	for <linux-cluster@redhat.com>; Mon, 10 Mar 2014 20:48:31 GMT
Message-ID: <531E251D.10003@mssl.ucl.ac.uk>
Date: Mon, 10 Mar 2014 20:48:29 +0000
From: Alan Brown <ajb2@mssl.ucl.ac.uk>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
In-Reply-To: <4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
Content-Type: multipart/alternative;
	boundary="------------060905090502040807020001"
X-MSSL-MailScanner-Information: Please contact the ISP for more information
X-MSSL-MailScanner-ID: s2AKmT9k027599
X-MSSL-MailScanner: No virus found
X-MSSL-MailScanner-SpamCheck: not spam, SpamAssassin (not cached,
	score=-2.899, required 6, autolearn=not spam, ALL_TRUSTED -1.00,
	BAYES_00 -1.90, HTML_MESSAGE 0.00)
X-MSSL-MailScanner-From: ajb2@mssl.ucl.ac.uk
X-Spam-Status: No
X-RedHat-Spam-Score: -4.109  (BAYES_00, DCC_REPUT_70_89, HTML_MESSAGE,
	RCVD_IN_DNSWL_MED, T_RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 10 Mar 2014 20:48:47 -0000

This is a multi-part message in MIME format.
--------------060905090502040807020001
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 10/03/14 18:15, stephen.rankin@stfc.ac.uk wrote:
>
> Hello,
>
> When using gfs2 with quotas on a SAN that is providing storage to two
> clustered systems running CentOS6.5,
>

As a matter of interest: how are you exporting the storage, or is this 
integral to the cluster itself?







--------------060905090502040807020001
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body bgcolor="#CCCCCC" text="#000000">
    <div class="moz-cite-prefix">On 10/03/14 18:15,
      <a class="moz-txt-link-abbreviated" href="mailto:stephen.rankin@stfc.ac.uk">stephen.rankin@stfc.ac.uk</a> wrote:<br>
    </div>
    <blockquote
cite="mid:4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk"
      type="cite">
      <meta http-equiv="Content-Type" content="text/html;
        charset=ISO-8859-1">
      <meta name="Generator" content="Microsoft Word 14 (filtered
        medium)">
      <style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-priority:99;
	mso-style-link:"Plain Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:Consolas;
	mso-fareast-language:EN-US;}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-priority:99;
	mso-style-link:"Plain Text";
	font-family:Consolas;}
span.EmailStyle19
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle20
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.EmailStyle21
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext="edit" spidmax="1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext="edit">
<o:idmap v:ext="edit" data="1" />
</o:shapelayout></xml><![endif]-->
      <div class="WordSection1">
        <p class="MsoPlainText"><span style="font-family:&quot;Courier
            New&quot;">Hello,<o:p></o:p></span></p>
        <p class="MsoPlainText"><span style="font-family:&quot;Courier
            New&quot;"><o:p>&nbsp;</o:p></span></p>
        <p class="MsoPlainText"><span style="font-family:&quot;Courier
            New&quot;">When using gfs2 with quotas on a SAN that is
            providing storage to two<br>
            clustered systems running CentOS6.5,</span><br>
        </p>
      </div>
    </blockquote>
    <br>
    As a matter of interest: how are you exporting the storage, or is
    this integral to the cluster itself?<br>
    <br>
    <br>
    <br>
    <br>
  </body>
</html>

--------------060905090502040807020001--

From stephen.rankin@stfc.ac.uk Tue Mar 11 05:48:36 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2B9maWw006386 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 11 Mar 2014 05:48:36 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2B9mZGN000854
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 05:48:35 -0400
Received: from engine19-1277-1.icritical.com (engine19-1277-1.icritical.com
	[93.95.13.253])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2B9mYG3028174
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 05:48:34 -0400
Received: by iCritical outbound mailer at engine19-1277-1.icritical.com
	for linux-cluster@redhat.com; Tue, 11 Mar 2014 09:49:18 +0000
Received: from engine19-1277-1.icritical.com ([127.0.0.1])
	by localhost (engine19-1277-1.icritical.com [127.0.0.1]) (amavisd-new,
	port 10024) with SMTP id 13383-05 for <linux-cluster@redhat.com>;
	Tue, 11 Mar 2014 09:49:16 +0000 (GMT)
Received: (qmail 13543 invoked by uid 599); 11 Mar 2014 09:49:05 -0000
Received: from unknown (HELO exchsmtp.stfc.ac.uk) (130.246.236.11)
	by engine19-1277-1.icritical.com (qpsmtpd/0.28) with ESMTP;
	Tue, 11 Mar 2014 09:49:05 +0000
Received: from EXCHMBX03.fed.cclrc.ac.uk ([169.254.1.203]) by
	EXCHHUB03.fed.cclrc.ac.uk ([130.246.236.11]) with mapi id
	14.02.0318.004; Tue, 11 Mar 2014 09:47:41 +0000
From: <stephen.rankin@stfc.ac.uk>
To: <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster] gfs2 and quotas - system crash
Thread-Index: Ac85Zl1WF8EaKrMOQrqHa31s3NCmEQDITcrgAAE9XiAABWNUgAAbC7pQ
Date: Tue, 11 Mar 2014 09:47:40 +0000
Message-ID: <4EC8429AA448A54D86E52F450C43247E74223C24@EXCHMBX03.fed.cclrc.ac.uk>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
	<531E251D.10003@mssl.ucl.ac.uk>
In-Reply-To: <531E251D.10003@mssl.ucl.ac.uk>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [130.246.58.15]
Content-Type: multipart/alternative;
	boundary="_000_4EC8429AA448A54D86E52F450C43247E74223C24EXCHMBX03fedccl_"
MIME-Version: 1.0
X-Virus-Scanned: by iCritical at engine19-1277-1.icritical.com
X-RedHat-Spam-Score: -2.599  (BAYES_00,HTML_MESSAGE,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 11 Mar 2014 09:48:36 -0000

--_000_4EC8429AA448A54D86E52F450C43247E74223C24EXCHMBX03fedccl_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

The storage is a separate Hitachi SAN connected by 4Gig fibre channel, whic=
h itself does not report any problems when the crash happens. With the quot=
a switched off, all is fine.

From: Alan Brown [mailto:ajb2@mssl.ucl.ac.uk]
Sent: 10 March 2014 20:48
To: linux clustering
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash

On 10/03/14 18:15, stephen.rankin@stfc.ac.uk<mailto:stephen.rankin@stfc.ac.=
uk> wrote:

Hello,



When using gfs2 with quotas on a SAN that is providing storage to two
clustered systems running CentOS6.5,

As a matter of interest: how are you exporting the storage, or is this inte=
gral to the cluster itself?




-- =0AScanned by iCritical.=0A

--_000_4EC8429AA448A54D86E52F450C43247E74223C24EXCHMBX03fedccl_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	color:black;
	mso-fareast-language:EN-US;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-priority:99;
	mso-style-link:"Plain Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:Consolas;
	color:black;
	mso-fareast-language:EN-US;}
span.PlainTextChar
	{mso-style-name:"Plain Text Char";
	mso-style-priority:99;
	mso-style-link:"Plain Text";
	font-family:Consolas;}
span.EmailStyle19
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle20
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.EmailStyle21
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.EmailStyle22
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body bgcolor=3D"#CCCCCC" lang=3D"EN-GB" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal"><span style=3D"color:#1F497D">The storage is a separ=
ate Hitachi SAN connected by 4Gig fibre channel, which itself does not repo=
rt any problems when the crash happens. With the quota switched off, all is=
 fine.<o:p></o:p></span></p>
<p class=3D"MsoNormal"><span style=3D"color:#1F497D"><o:p>&nbsp;</o:p></spa=
n></p>
<div>
<div style=3D"border:none;border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0cm =
0cm 0cm">
<p class=3D"MsoNormal"><b><span lang=3D"EN-US" style=3D"font-size:10.0pt;fo=
nt-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:windowtext;mso-fa=
reast-language:EN-GB">From:</span></b><span lang=3D"EN-US" style=3D"font-si=
ze:10.0pt;font-family:&quot;Tahoma&quot;,&quot;sans-serif&quot;;color:windo=
wtext;mso-fareast-language:EN-GB">
 Alan Brown [mailto:ajb2@mssl.ucl.ac.uk] <br>
<b>Sent:</b> 10 March 2014 20:48<br>
<b>To:</b> linux clustering<br>
<b>Subject:</b> Re: [Linux-cluster] gfs2 and quotas - system crash<o:p></o:=
p></span></p>
</div>
</div>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<div>
<p class=3D"MsoNormal">On 10/03/14 18:15, <a href=3D"mailto:stephen.rankin@=
stfc.ac.uk">
stephen.rankin@stfc.ac.uk</a> wrote:<o:p></o:p></p>
</div>
<blockquote style=3D"margin-top:5.0pt;margin-bottom:5.0pt">
<p class=3D"MsoPlainText"><span style=3D"font-family:&quot;Courier New&quot=
;,&quot;serif&quot;">Hello,</span><o:p></o:p></p>
<p class=3D"MsoPlainText"><span style=3D"font-family:&quot;Courier New&quot=
;,&quot;serif&quot;">&nbsp;</span><o:p></o:p></p>
<p class=3D"MsoPlainText"><span style=3D"font-family:&quot;Courier New&quot=
;,&quot;serif&quot;">When using gfs2 with quotas on a SAN that is providing=
 storage to two<br>
clustered systems running CentOS6.5,</span><o:p></o:p></p>
</blockquote>
<p class=3D"MsoNormal" style=3D"margin-bottom:12.0pt"><span style=3D"font-s=
ize:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;;mso-fa=
reast-language:EN-GB"><br>
As a matter of interest: how are you exporting the storage, or is this inte=
gral to the cluster itself?<br>
<br>
<br>
<br>
<o:p></o:p></span></p>
</div>

<br>=
<p>-- =0A<BR>Scanned by iCritical.=0A</p>
<br>=
</body>
</html>

--_000_4EC8429AA448A54D86E52F450C43247E74223C24EXCHMBX03fedccl_--

From swhiteho@redhat.com Tue Mar 11 06:02:59 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2BA2xNY027378 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 11 Mar 2014 06:02:59 -0400
Received: from [10.36.7.165] (vpn1-7-165.ams2.redhat.com [10.36.7.165])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2BA2v8J005593; Tue, 11 Mar 2014 06:02:58 -0400
From: Steven Whitehouse <swhiteho@redhat.com>
To: stephen.rankin@stfc.ac.uk
In-Reply-To: <4EC8429AA448A54D86E52F450C43247E74223C24@EXCHMBX03.fed.cclrc.ac.uk>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
	<531E251D.10003@mssl.ucl.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223C24@EXCHMBX03.fed.cclrc.ac.uk>
Content-Type: text/plain; charset="UTF-8"
Organization: Red Hat UK Ltd
Date: Tue, 11 Mar 2014 10:01:30 +0000
Message-ID: <1394532090.2747.5.camel@menhir>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Cc: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 11 Mar 2014 10:02:59 -0000

Hi,

On Tue, 2014-03-11 at 09:47 +0000, stephen.rankin@stfc.ac.uk wrote:
> The storage is a separate Hitachi SAN connected by 4Gig fibre channel,
> which itself does not report any problems when the crash happens. With
> the quota switched off, all is fine.
> 
Are you exporting that GFS2 filesystem via NFS, or can you reproduce
this without NFS? Also, what kind of workload is involved? Is this a lot
of small files, or are they mostly larger ones? Are they being
read/written sequentially or randomly? Is there anything unusual going
on (e.g. use of splice, ACLs or non-standard mount options, etc.)

Steve.



From stephen.rankin@stfc.ac.uk Tue Mar 11 06:45:34 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2BAjYW3002609 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 11 Mar 2014 06:45:34 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2BAjXBx023193
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 06:45:33 -0400
Received: from engine29-1277-4.icritical.com (engine29-1277-4.icritical.com
	[212.57.248.93])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2BAjTTO009788
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 06:45:29 -0400
Received: by iCritical outbound mailer at engine29-1277-4.icritical.com
	for linux-cluster@redhat.com; Tue, 11 Mar 2014 10:45:29 +0000
Received: from engine29-1277-4.icritical.com ([127.0.0.1])
	by localhost (engine29-1277-4.icritical.com [127.0.0.1]) (amavisd-new,
	port 10024) with SMTP id 31584-04 for <linux-cluster@redhat.com>;
	Tue, 11 Mar 2014 10:45:25 +0000 (GMT)
Received: (qmail 31641 invoked by uid 599); 11 Mar 2014 10:45:15 -0000
Received: from unknown (HELO exchsmtp.stfc.ac.uk) (130.246.236.11)
	by engine29-1277-4.icritical.com (qpsmtpd/0.28) with ESMTP;
	Tue, 11 Mar 2014 10:45:15 +0000
Received: from EXCHMBX03.fed.cclrc.ac.uk ([169.254.1.203]) by
	EXCHHUB03.fed.cclrc.ac.uk ([130.246.236.11]) with mapi id
	14.02.0318.004; Tue, 11 Mar 2014 10:43:25 +0000
From: <stephen.rankin@stfc.ac.uk>
To: <linux-cluster@redhat.com>
Thread-Topic: gfs2 and quotas - system crash
Thread-Index: Ac85Zl1WF8EaKrMOQrqHa31s3NCmEQDITcrgAAE9XiCBXTxBsyuG5Low
Date: Tue, 11 Mar 2014 10:43:24 +0000
Message-ID: <4EC8429AA448A54D86E52F450C43247E74223C93@EXCHMBX03.fed.cclrc.ac.uk>
References: <4EC8429AA448A54D86E52F450C43247E7421E76B@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E742239E7@EXCHMBX03.fed.cclrc.ac.uk>
	<4EC8429AA448A54D86E52F450C43247E74223A18@EXCHMBX03.fed.cclrc.ac.uk>
	<382425903.12347329.1394480286571.JavaMail.zimbra@redhat.com>
In-Reply-To: <382425903.12347329.1394480286571.JavaMail.zimbra@redhat.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [130.246.58.15]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-Virus-Scanned: by iCritical at engine29-1277-4.icritical.com
X-RedHat-Spam-Score: -2.6  (BAYES_00,RCVD_IN_DNSWL_LOW)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id s2BAjYW3002609
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 11 Mar 2014 10:45:35 -0000

No we are not using NFS. Our setup is:

1. Two node cluster with two node option.
2. Hitachi SAN (RAID 6) connected to both nodes via 4 Gig.
3. 10TB, two 4TB and one 2TB disks to each node using gfs2 (separate file systems on each disk) with user quota enabled. Only the two nodes in the cluster mount the drives. 
4. User fills up their quota on the 10TB disk and the system crashes (which appears to be a consistent outcome).

The quota was only 10G for the user so they were not using a vast amount of space. In total 5TB is currently used on the drive:

Filesystem                           Size  Used Avail Use% Mounted on
/dev/mapper/vg_chadwick-LogVol00     9.8G  3.4G  6.0G  36% /
tmpfs                                253G   47M  253G   1% /dev/shm
/dev/mapper/mpathap3                1008M  148M  810M  16% /boot
/dev/mapper/vg_chadwick-LogVol06      11T  4.7T  5.8T  45% /home
/dev/mapper/vg_chadwick-LogVol05     9.8G  7.5G  1.8G  82% /opt
/dev/mapper/vg_chadwick-LogVol01     5.0G  140M  4.6G   3% /tmp
/dev/mapper/vg_chadwick-LogVol02     9.8G  8.3G  976M  90% /usr
/dev/mapper/vg_chadwick-LogVol03     5.0G  2.7G  2.1G  57% /var
/dev/mapper/sanvg1-sanlv1            4.0T  2.9T  1.2T  71% /san1
/dev/mapper/sanvg2-sanlv2            4.0T  3.2T  851G  80% /san2
/dev/mapper/sanvg3-sanlv3            2.0T  1.8T  259G  88% /san3
/dev/mapper/sanvg4-lvol0              10T  5.1T  5.0T  51% /san4

Filesystem                              Inodes   IUsed      IFree IUse% Mounted on
/dev/mapper/vg_chadwick-LogVol00        647168   54317     592851    9% /
tmpfs                                 66157732      58   66157674    1% /dev/shm
/dev/mapper/mpathap3                     65536      62      65474    1% /boot
/dev/mapper/vg_chadwick-LogVol06     749502464 1002734  748499730    1% /home
/dev/mapper/vg_chadwick-LogVol05        647168  236023     411145   37% /opt
/dev/mapper/vg_chadwick-LogVol01        327680     378     327302    1% /tmp
/dev/mapper/vg_chadwick-LogVol02        647168  318728     328440   50% /usr
/dev/mapper/vg_chadwick-LogVol03        327680    7228     320452    3% /var
/dev/mapper/sanvg1-sanlv1            320266537  140997  320125540    1% /san1
/dev/mapper/sanvg2-sanlv2            223028034   44074  222983960    1% /san2
/dev/mapper/sanvg3-sanlv3             67820453    8357   67812096    1% /san3
/dev/mapper/sanvg4-lvol0            1336002497  392526 1335609971    1% /san4

Thanks,

Stephen.

-----Original Message-----
From: Abhijith Das [mailto:adas@redhat.com] 
Sent: 10 March 2014 19:38
To: linux clustering
Subject: Re: [Linux-cluster] gfs2 and quotas - system crash



----- Original Message -----
> From: "stephen rankin" <stephen.rankin@stfc.ac.uk>
> To: linux-cluster@redhat.com
> Sent: Monday, March 10, 2014 1:15:08 PM
> Subject: [Linux-cluster] gfs2 and quotas - system crash
> 
> Hello,
> 
> 
> 
> When using gfs2 with quotas on a SAN that is providing storage to two 
> clustered systems running CentOS6.5, one of the systems can crash. 
> This crash appears to be caused when a user tries to add something to 
> a SAN disk when they have exceeded their quota on that disk. Sometimes 
> a stack trace is produced in /var/log/messages which appears to 
> indicate that it was gfs2 that caused the problem.
> At the same time you get the gfs2 stack trace you also see problems 
> with someone exceeding their quota.
> 
> The stack trace is below.
> 
> Has anyone got a solution to this, other than switching of quotas? I 
> have switched of quotas which appears to have stabilised the system so 
> far, but I do need the quotas on.
> 
> Your help is appreciated.
> 

Hi Stephen,

We have another report of this bug when gfs2 was exported using NFS. 
https://bugzilla.redhat.com/show_bug.cgi?id=1059808. Are you using NFS in your setup as well? We have not able to reproduce it to figure out what might be going on. Do you have a set procedure that you're able to recreate with reliably? If so, it would be of great help.
Also, more info about your setup (file sizes, number of files, how many nodes mounting gfs2, what kinds of operations are being run) etc would be helpful as well.

Cheers!
--Abhi

> Stephen Rankin
> STFC, RAL, ISIS
> 
> Mar  5 11:40:50 chadwick kernel: GFS2: fsid=analysis:lvol0.1: quota 
> exceeded for user 101355 Mar  5 11:40:50 chadwick nslcd[11420]: 
> [767df3] ldap_explode_dn(usi660) returned NULL: Success Mar  5 
> 11:40:50 chadwick nslcd[11420]: [767df3] ldap_result() failed: Invalid 
> DN syntax Mar  5 11:40:50 chadwick nslcd[11420]: [767df3] lookup of 
> user usi660 failed:
> Invalid DN syntax
> Mar  5 11:41:46 chadwick kernel: ------------[ cut here ]------------ 
> Mar  5 11:41:46 chadwick kernel: WARNING: at lib/list_debug.c:26
> __list_add+0x6d/0xa0() (Not tainted)
> Mar  5 11:41:46 chadwick kernel: Hardware name: PowerEdge R910 Mar  5 
> 11:41:46 chadwick kernel: list_add corruption. next->prev should be 
> prev (ffff8820531518d0), but was ffff884d4c4594d0. (next=ffff884d4c4594d0).
> Mar  5 11:41:46 chadwick kernel: Modules linked in: gfs2 dlm configfs 
> bridge
> autofs4 des_generic ecb md4 nls_utf8 cifs bnx2fc cnic uio fcoe libfcoe 
> libfc 8021q garp stp llc ipv6 microcode power_meter iTCO_wdt 
> iTCO_vendor_support dcdbas serio_raw ixgbe dca ptp pps_core mdio 
> lpc_ich mfd_core sg ses enclosure i7core_edac edac_core bnx2 ext4 jbd2 
> mbcache dm_round_robin sr_mod cdrom sd_mod crc_t10dif qla2xxx 
> scsi_transport_fc scsi_tgt pata_acpi ata_generic ata_piix megaraid_sas 
> dm_multipath dm_mirror dm_region_hash dm_log dm_mod [last unloaded: 
> speedstep_lib] Mar  5 11:41:46 chadwick kernel: Pid: 74823, comm: 
> vncserver Not tainted
> 2.6.32-431.3.1.el6.x86_64 #1
> Mar  5 11:41:46 chadwick kernel: Call Trace:
> Mar  5 11:41:46 chadwick kernel: [<ffffffff81071e27>] ?
> warn_slowpath_common+0x87/0xc0
> Mar  5 11:41:46 chadwick kernel: [<ffffffff81071f16>] ?
> warn_slowpath_fmt+0x46/0x50
> Mar  5 11:41:46 chadwick kernel: [<ffffffff812944ed>] ? 
> __list_add+0x6d/0xa0 Mar  5 11:41:46 chadwick kernel: 
> [<ffffffff811a6c02>] ? new_inode+0x72/0xb0 Mar  5 11:41:46 chadwick kernel: [<ffffffffa03f45d5>] ?
> gfs2_create_inode+0x1b5/0x1150 [gfs2]
> Mar  5 11:41:46 chadwick kernel: [<ffffffffa03f3986>] ?
> gfs2_glock_nq_init+0x16/0x40 [gfs2]
> Mar  5 11:41:46 chadwick kernel: [<ffffffffa03ffc74>] ? 
> gfs2_mkdir+0x24/0x30 [gfs2] Mar  5 11:41:46 chadwick kernel: 
> [<ffffffff8122766f>] ?
> security_inode_mkdir+0x1f/0x30
> Mar  5 11:41:46 chadwick kernel: [<ffffffff81198149>] ? 
> vfs_mkdir+0xd9/0x140 Mar  5 11:41:46 chadwick kernel: [<ffffffff8119ab67>] ?
> sys_mkdirat+0xc7/0x1b0
> Mar  5 11:41:46 chadwick kernel: [<ffffffff8119ac68>] ? 
> sys_mkdir+0x18/0x20 Mar  5 11:41:46 chadwick kernel: [<ffffffff8100b072>] ?
> system_call_fastpath+0x16/0x1b
> Mar  5 11:41:46 chadwick kernel: ---[ end trace e51734a39976a028 ]--- 
> Mar  5 11:41:46 chadwick kernel: GFS2: fsid=analysis:lvol0.1: quota 
> exceeded for user 101355 Mar  5 11:41:47 chadwick abrtd: Directory 
> 'oops-2014-03-05-11:41:47-12194-1'
> creation detected
> Mar  5 11:41:47 chadwick abrt-dump-oops: Reported 1 kernel oopses to 
> Abrt Mar  5 11:41:47 chadwick abrtd: Can't open file
> '/var/spool/abrt/oops-2014-03-05-11:41:47-12194-1/uid': No such file 
> or directory Mar  5 11:41:54 chadwick kernel: GFS2: 
> fsid=analysis:lvol0.1: quota exceeded for user 101355
> 
> 
> 
> 
> --
> Scanned by iCritical.
> 
> 
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

--
Linux-cluster mailing list
Linux-cluster@redhat.com
https://www.redhat.com/mailman/listinfo/linux-cluster
-- 
Scanned by iCritical.

From eranb@celltick.com Tue Mar 11 08:03:52 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2BC3qNn006734 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 11 Mar 2014 08:03:52 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2BC3pnO029786
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 08:03:51 -0400
Received: from mrelay.celltick.com (mrelay.celltick.com [212.150.2.147])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2BC3mi1008576
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 08:03:48 -0400
Received: from Cobra.celltick.com ([172.17.252.101]) by Cobra.celltick.com
	([172.17.252.101]) with mapi id 14.03.0174.001;
	Tue, 11 Mar 2014 14:02:43 +0200
From: Eran Ben Natan <eranb@celltick.com>
To: "linux-cluster@redhat.com" <linux-cluster@redhat.com>
Thread-Topic: A Newbie question about HA fail over
Thread-Index: Ac89Ic2xRI/1uY43Tom4aThrKA/oxg==
Date: Tue, 11 Mar 2014 12:02:41 +0000
Message-ID: <705C9B8622696B478640B16B7A1A1B94106EF8@Cobra.celltick.com>
Accept-Language: he-IL, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.17.252.41]
Content-Type: multipart/alternative;
	boundary="_000_705C9B8622696B478640B16B7A1A1B94106EF8Cobracelltickcom_"
MIME-Version: 1.0
X-RedHat-Spam-Score: -1.91  (BAYES_00, HTML_MESSAGE, SPF_PASS,
	T_RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] A Newbie question about HA fail over
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 11 Mar 2014 12:03:52 -0000

--_000_705C9B8622696B478640B16B7A1A1B94106EF8Cobracelltickcom_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have just set up a 2 nodes RH cluster with MySQL. I was able to start the=
 service and relocate it to the other node.
When I restart the active node, MySQL relocates automatically to the other =
node, but when I disconnect the active node from the network, it doesn't.
Is this behavior normal? How can I set the resource to relocate in this sit=
uation?

Thanks,

Eran Ben-Natan | R&D Infrastructure



--_000_705C9B8622696B478640B16B7A1A1B94106EF8Cobracelltickcom_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3D"Generator" content=3D"Microsoft Word 14 (filtered medium)">
<style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-priority:99;
	mso-style-link:"Balloon Text Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-priority:99;
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{mso-style-type:export-only;
	font-family:"Calibri","sans-serif";}
@page WordSection1
	{size:612.0pt 792.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]-->
</head>
<body lang=3D"EN-US" link=3D"blue" vlink=3D"purple">
<div class=3D"WordSection1">
<p class=3D"MsoNormal">Hi,<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">I have just set up a 2 nodes RH cluster with MySQL. =
I was able to start the service and relocate it to the other node.<o:p></o:=
p></p>
<p class=3D"MsoNormal">When I restart the active node, MySQL relocates auto=
matically to the other node, but when I disconnect the active node from the=
 network, it doesn't.<o:p></o:p></p>
<p class=3D"MsoNormal">Is this behavior normal? How can I set the resource =
to relocate in this situation?<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal">Thanks,<o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
<p class=3D"MsoNormal"><b><span style=3D"color:#101010">Eran Ben-Natan | R&=
amp;D Infrastructure</span></b><span style=3D"color:#101010"><br>
<br>
</span><o:p></o:p></p>
<p class=3D"MsoNormal"><o:p>&nbsp;</o:p></p>
</div>
</body>
</html>

--_000_705C9B8622696B478640B16B7A1A1B94106EF8Cobracelltickcom_--

From emi2fast@gmail.com Tue Mar 11 09:43:55 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2BDhtd6008533 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 11 Mar 2014 09:43:55 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2BDhtZA017834
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 09:43:55 -0400
Received: from mail-ob0-f182.google.com (mail-ob0-f182.google.com
	[209.85.214.182])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2BDhrxP015124
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 09:43:53 -0400
Received: by mail-ob0-f182.google.com with SMTP id uz6so8468907obc.41
	for <linux-cluster@redhat.com>; Tue, 11 Mar 2014 06:43:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=Ba7V5Qce82XzMIqCEpkskqSqvcJ4wkrTeS1nj/Y97mg=;
	b=vSr3I8tVj1De1SWTrn9NW8kaAI8r7dMoIWmxSmrUjE0tj9LOOoTsEwu5Z0th7L/9On
	kmZBdOBnakGmOlsvAbK+oyZ2xGPfvDpdxpPYANZtufQqWKfaG+S5+O1hIk4eMmnxcsjt
	IdG8a4PHzpAEl4CvhmDxsYYO9BVcTkoltfDtjFX/9yi0AvxvbHDjc05GHqZQIPeq7Q4L
	bXccm4S0SnlPMzrgb/QSnFiJINuFeFr5CTBr2/gk0vf0S94E3EjqVruchHgLx3zWuZeZ
	mqp/tFqE8H9k0Y0EaBVL74qgWcrc/kirj8/5rEbUIHu9c9mdxf19DuPydjaZ06VoF1qC
	P8Bg==
MIME-Version: 1.0
X-Received: by 10.60.132.142 with SMTP id ou14mr6817564oeb.48.1394545433153;
	Tue, 11 Mar 2014 06:43:53 -0700 (PDT)
Received: by 10.76.81.3 with HTTP; Tue, 11 Mar 2014 06:43:53 -0700 (PDT)
In-Reply-To: <705C9B8622696B478640B16B7A1A1B94106EF8@Cobra.celltick.com>
References: <705C9B8622696B478640B16B7A1A1B94106EF8@Cobra.celltick.com>
Date: Tue, 11 Mar 2014 14:43:53 +0100
Message-ID: <CAE7pJ3CrdLp6orRu+0rYOZOwnGRKEqENuAKTs=6h4wBO7LTzvw@mail.gmail.com>
From: emmanuel segura <emi2fast@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b4724a22aebcc04f454e913
X-RedHat-Spam-Score: -3.099  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_FROM, HTML_MESSAGE,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] A Newbie question about HA fail over
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 11 Mar 2014 13:43:55 -0000

--047d7b4724a22aebcc04f454e913
Content-Type: text/plain; charset=ISO-8859-1

maybe you are missing to show your cluster.conf and tell us what network of
cluster you disconneted


2014-03-11 13:02 GMT+01:00 Eran Ben Natan <eranb@celltick.com>:

>  Hi,
>
>
>
> I have just set up a 2 nodes RH cluster with MySQL. I was able to start
> the service and relocate it to the other node.
>
> When I restart the active node, MySQL relocates automatically to the other
> node, but when I disconnect the active node from the network, it doesn't.
>
> Is this behavior normal? How can I set the resource to relocate in this
> situation?
>
>
>
> Thanks,
>
>
>
> *Eran Ben-Natan | R&D Infrastructure*
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>



-- 
esta es mi vida e me la vivo hasta que dios quiera

--047d7b4724a22aebcc04f454e913
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">maybe you are missing to show your cluster.conf and tell u=
s what network of cluster you disconneted<br></div><div class=3D"gmail_extr=
a"><br><br><div class=3D"gmail_quote">2014-03-11 13:02 GMT+01:00 Eran Ben N=
atan <span dir=3D"ltr">&lt;<a href=3D"mailto:eranb@celltick.com" target=3D"=
_blank">eranb@celltick.com</a>&gt;</span>:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">





<div link=3D"blue" vlink=3D"purple" lang=3D"EN-US">
<div>
<p class=3D"MsoNormal">Hi,<u></u><u></u></p>
<p class=3D"MsoNormal"><u></u>=A0<u></u></p>
<p class=3D"MsoNormal">I have just set up a 2 nodes RH cluster with MySQL. =
I was able to start the service and relocate it to the other node.<u></u><u=
></u></p>
<p class=3D"MsoNormal">When I restart the active node, MySQL relocates auto=
matically to the other node, but when I disconnect the active node from the=
 network, it doesn&#39;t.<u></u><u></u></p>
<p class=3D"MsoNormal">Is this behavior normal? How can I set the resource =
to relocate in this situation?<u></u><u></u></p>
<p class=3D"MsoNormal"><u></u>=A0<u></u></p>
<p class=3D"MsoNormal">Thanks,<u></u><u></u></p>
<p class=3D"MsoNormal"><u></u>=A0<u></u></p>
<p class=3D"MsoNormal"><b><span style=3D"color:#101010">Eran Ben-Natan | R&=
amp;D Infrastructure</span></b><span style=3D"color:#101010"><br>
<br>
</span><u></u><u></u></p>
<p class=3D"MsoNormal"><u></u>=A0<u></u></p>
</div>
</div>

<br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br><br clear=3D"all"><br>-- <br>esta es mi vida e me la vivo=
 hasta que dios quiera
</div>

--047d7b4724a22aebcc04f454e913--

From lipson12@yahoo.com Wed Mar 12 02:34:25 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2C6YPsN008190 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 12 Mar 2014 02:34:25 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2C6YP3w027688
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 02:34:25 -0400
Received: from nm37.bullet.mail.ne1.yahoo.com (nm37.bullet.mail.ne1.yahoo.com
	[98.138.229.30])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2C6YN8R010930
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 02:34:24 -0400
Received: from [127.0.0.1] by nm37.bullet.mail.ne1.yahoo.com with NNFMP;
	12 Mar 2014 06:34:23 -0000
Received: from [98.138.100.118] by nm37.bullet.mail.ne1.yahoo.com with NNFMP;
	12 Mar 2014 06:31:27 -0000
Received: from [98.139.212.153] by tm109.bullet.mail.ne1.yahoo.com with NNFMP;
	12 Mar 2014 06:31:27 -0000
Received: from [98.139.212.219] by tm10.bullet.mail.bf1.yahoo.com with NNFMP;
	12 Mar 2014 06:31:27 -0000
Received: from [127.0.0.1] by omp1028.mail.bf1.yahoo.com with NNFMP;
	12 Mar 2014 06:31:27 -0000
X-Yahoo-Newman-Property: ymail-4
X-Yahoo-Newman-Id: 359733.66028.bm@omp1028.mail.bf1.yahoo.com
Received: (qmail 81691 invoked by uid 60001); 12 Mar 2014 06:31:27 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1394605887; bh=u09EfgpcjnFDVQh7Ns1VHFDYc6RTRTsMRFC7VIzn5nw=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=iuWBnqIHzi3qmy+bmOdbtRjmhkFKBqo2VL/31Sd1uMuLLGJEcn05xXIX4+aV7++fbubN73QCoTWcmWT/rJu1J7FQOnOZrpEFBF52BrCOxfpDiyBurHJXH1yx7yPk+UPzLBpBe0oAM85CX149yZy1zjlqw8DykujhVp8een9iNh0=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=OuyhKfjfBCJnw1VS//E4R/IjcD/hULgorg2eRyVaP1/NLju71QAjKR6FltSbzja+vapdinnyh6edmUAcrnsUaKysAfBsxEh6Py/1Y1Ek5J+ikabBp1ZMiLbRgM4d/LLGhHnITeHlYyzujg74n1DGRK2st6V5tsufrqhxEMt4CcM=;
X-YMail-OSG: wiIeA5AVM1nPCtX9od_YXgayNtRpFPEM_em.9UnjkrprvA2
	ehMGWbh.D5e9zjfi9gFc25uqG5tkpS3slV7FO8wfvngz8gkP3RhiUSDji_U5
	ZBhEIo86m_ClP9AgUU79aC1thWdqXqz0Ai1HRQGgsTbRDXwWrQfKYz6Uwz8X
	kwGp.KUjcIs2sN4YdVJLvV_fW_pzknUYohMaxYG_SEUC10jCUggSaXKWKqKi
	IoKhSLnD.GvWXDpk_ZAKEPewJCkxo5fToyICkQlNk6lRk.L9sKeh6CaCj0Md
	HOsQXIC0u2B0lTkRIZizoQOyCFqVzw3MA6I3.FF0jGT_Gw2TxqC3dYsuEi8L
	30UpGgkHI.5qFnetK_KhLhP1B8lv8y1Kp1aVfTETug05ldfu_RCLrnoiAX_H
	yA0aZGspsYaPjkvRRXzMsh3LKIEHdu89gI7cK.Vm3AewlmMaTsbp2B.YnGIU
	6zVDhMyzGNQX6c3_CBT9arxP5qQKnGEuQ86zhL0XAiEAnAb0XkbV4v1.KYzh
	r1gDF.K0UC9z_a8v7y6ofkGOijDKme7SoeVw6h8VmGB37RJwYZmdHawel1AH
	FVFJDK2xhIcdIuyIQoIQLOXA0WZJg7Vho
Received: from [122.248.15.72] by web141203.mail.bf1.yahoo.com via HTTP;
	Tue, 11 Mar 2014 23:31:27 PDT
X-Rocket-MIMEInfo: 002.001,
	CgoKCkRlYXIgRXhwZXJ0cyA6CgoKwqBmb2xsb3dpbmcgcnVsZSBpcyBub3Qgd29ya2luZyB0byBjcmVhdGUgc3ltbGluayBmb3IgaXNjc2kgZGlzayAsIG15IGlzY3NpIGRldmljZSBJRCAvZGV2L3NkYSBhbmQgd2FudCB0byBsaW5rIGFzIC9kZXYvaXNjc2kvdmVuZG9yX2tlcm5lbAoKcGxlYXNlIGd1aWRlIG1lIGlmIGkgbWlzcyBhbnl0aGluZyAuCgoKQUNUSU9OPT0iYWRkIiwgU1VCU1lTVEVNPT0iYmxvY2siLCBFTlZ7SURfTU9ERUx9PT0iVklSVFVBTC1ESVNLIiwgU1lNTElOSys9aXNjc2kvJUV7SURfVkUBMAEBAQE-
References: <1394605577.86561.YahooMailNeo@web141205.mail.bf1.yahoo.com>
Message-ID: <1394605887.60258.YahooMailNeo@web141203.mail.bf1.yahoo.com>
Date: Tue, 11 Mar 2014 23:31:27 -0700 (PDT)
From: Kaisar Ahmed Khan <lipson12@yahoo.com>
To: "linux-cluster@redhat.com" <linux-cluster@redhat.com>
In-Reply-To: <1394605577.86561.YahooMailNeo@web141205.mail.bf1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="1123101620-1418805781-1394605887=:60258"
X-RedHat-Spam-Score: -1.918  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT,
	FREEMAIL_FROM, FREEMAIL_REPLYTO_END_DIGIT, HTML_MESSAGE,
	RCVD_IN_DNSWL_NONE, T_RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] iscsi sysmlink  create problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Kaisar Ahmed Khan <lipson12@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 12 Mar 2014 06:34:25 -0000

--1123101620-1418805781-1394605887=:60258
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0A=0A=0ADear Experts :=0A=0A=0A=A0following rule is not working to crea=
te symlink for iscsi disk , my iscsi device ID /dev/sda and want to link as=
 /dev/iscsi/vendor_kernel=0A=0Aplease guide me if i miss anything .=0A=0A=
=0AACTION=3D=3D"add", SUBSYSTEM=3D=3D"block", ENV{ID_MODEL}=3D=3D"VIRTUAL-D=
ISK", SYMLINK+=3Discsi/%E{ID_VENDOR}_%K", MODE=3D"0664"=0A=0AThanks =0A=A0k=
aisar
--1123101620-1418805781-1394605887=:60258
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:He=
lveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;fo=
nt-size:12pt"><div><span><br></span></div><div style=3D"display: block;" cl=
ass=3D"yahoo_quoted"><div style=3D"font-family: HelveticaNeue, Helvetica Ne=
ue, Helvetica, Arial, Lucida Grande, sans-serif; font-size: 12pt;"><div sty=
le=3D"font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida =
Grande, sans-serif; font-size: 12pt;"><br><div class=3D"y_msg_container"><d=
iv id=3D"yiv6343355727"><div><div style=3D"color:#000;background-color:#fff=
;font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande=
, sans-serif;font-size:12pt;"><div>Dear Experts :<br><span></span></div><di=
v style=3D"color:rgb(0, 0, 0);font-size:16px;font-family:HelveticaNeue, Hel=
vetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;background-color:t=
ransparent;font-style:normal;"><span><br></span></div><div>&nbsp;following =
rule is not
 working to create symlink for iscsi disk , my iscsi device ID /dev/sda and=
 want to link as /dev/iscsi/vendor_kernel<br><br>please guide me if i miss =
anything .<br><br></div><div style=3D"color:rgb(0, 0, 0);font-size:13px;fon=
t-family:arial, helvetica, clean, sans-serif;background-color:transparent;f=
ont-style:normal;">ACTION=3D=3D"add", SUBSYSTEM=3D=3D"block", ENV{ID_MODEL}=
=3D=3D"VIRTUAL-DISK", SYMLINK+=3Discsi/%E{ID_VENDOR}_%K", MODE=3D"0664"<br>=
<font style=3D"font-weight:bold;" size=3D"4"><br>Thanks=0A <br></font></div=
>&nbsp;kaisar</div></div></div><br><br></div>  </div> </div>  </div> </div>=
</body></html>
--1123101620-1418805781-1394605887=:60258--

From emi2fast@gmail.com Wed Mar 12 07:43:40 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2CBhdcS025821 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 12 Mar 2014 07:43:39 -0400
Received: from mx1.redhat.com (ext-mx12.extmail.prod.ext.phx2.redhat.com
	[10.5.110.17])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2CBhd0m011524
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 07:43:39 -0400
Received: from mail-ob0-f176.google.com (mail-ob0-f176.google.com
	[209.85.214.176])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2CBhbnb007576
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 07:43:38 -0400
Received: by mail-ob0-f176.google.com with SMTP id wp18so9878569obc.35
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 04:43:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=+Gyprpk5X0JGzitVU4PYonVmruUSvZhGXyC9A9GT63w=;
	b=ZbYFSUtJuE776Aq4o33+Z1Zsz55hBX7uvS8JC6osR717uNT6U51WEhSuutkwNqGiSm
	NAOrzajfH+iJJnwOzRweuHins1kF+68uPejExGf6ywTmgF3aPLu17bzR0fmfC4xNl5uD
	79bDEScknasf5FGoLMCzTb4beKrnS+p9P/zCPEBGkn+DhYgFqJdiOOCDIeuNAPssSjkV
	iykFOdoZt8tzL2WFsKQmq2J8jwu6cMoo+QrvQcZC7r3a1I6gCueCOU6xZhkWAnGzo+S6
	DADWNrcGqYYC21iZNkaZRIv8YRh5g6w0xDjU5hu7N2FpIk4qb5wG6YdKUWVrBtseZrbT
	rlGg==
MIME-Version: 1.0
X-Received: by 10.60.83.234 with SMTP id t10mr32393420oey.4.1394624617663;
	Wed, 12 Mar 2014 04:43:37 -0700 (PDT)
Received: by 10.76.81.3 with HTTP; Wed, 12 Mar 2014 04:43:37 -0700 (PDT)
In-Reply-To: <1394605887.60258.YahooMailNeo@web141203.mail.bf1.yahoo.com>
References: <1394605577.86561.YahooMailNeo@web141205.mail.bf1.yahoo.com>
	<1394605887.60258.YahooMailNeo@web141203.mail.bf1.yahoo.com>
Date: Wed, 12 Mar 2014 12:43:37 +0100
Message-ID: <CAE7pJ3Ah==ffS_suuazua4RXLJ81z-xrK3QySo4RT0jtL4bNhA@mail.gmail.com>
From: emmanuel segura <emi2fast@gmail.com>
To: Kaisar Ahmed Khan <lipson12@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=089e0116019cee537904f46758c2
X-RedHat-Spam-Score: -1.2  (BAYES_20, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.17
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] iscsi sysmlink create problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 12 Mar 2014 11:43:40 -0000

--089e0116019cee537904f46758c2
Content-Type: text/plain; charset=ISO-8859-1

but it's a cluster problem? ummm


2014-03-12 7:31 GMT+01:00 Kaisar Ahmed Khan <lipson12@yahoo.com>:

>
>
> Dear Experts :
>
>  following rule is not working to create symlink for iscsi disk , my iscsi
> device ID /dev/sda and want to link as /dev/iscsi/vendor_kernel
>
> please guide me if i miss anything .
>
> ACTION=="add", SUBSYSTEM=="block", ENV{ID_MODEL}=="VIRTUAL-DISK",
> SYMLINK+=iscsi/%E{ID_VENDOR}_%K", MODE="0664"
>
> Thanks
>  kaisar
>
>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>



-- 
esta es mi vida e me la vivo hasta que dios quiera

--089e0116019cee537904f46758c2
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">but it&#39;s a cluster problem? ummm<br></div><div class=
=3D"gmail_extra"><br><br><div class=3D"gmail_quote">2014-03-12 7:31 GMT+01:=
00 Kaisar Ahmed Khan <span dir=3D"ltr">&lt;<a href=3D"mailto:lipson12@yahoo=
.com" target=3D"_blank">lipson12@yahoo.com</a>&gt;</span>:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div style=3D"font-size:12pt;font-famil=
y:HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif"><d=
iv>
<span><br></span></div><div style=3D"display:block"><div style=3D"font-fami=
ly:HelveticaNeue,Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif;fo=
nt-size:12pt"><div style=3D"font-family:HelveticaNeue,Helvetica Neue,Helvet=
ica,Arial,Lucida Grande,sans-serif;font-size:12pt">
<br><div><div><div><div style=3D"font-size:12pt;font-family:HelveticaNeue,H=
elvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif"><div>Dear Experts :=
<br><span></span></div><div style=3D"font-style:normal;font-size:16px;backg=
round-color:transparent;font-family:HelveticaNeue,Helvetica Neue,Helvetica,=
Arial,Lucida Grande,sans-serif">
<span><br></span></div><div>=A0following rule is not
 working to create symlink for iscsi disk , my iscsi device ID /dev/sda and=
 want to link as /dev/iscsi/vendor_kernel<br><br>please guide me if i miss =
anything .<br><br></div><div style=3D"font-style:normal;font-size:13px;back=
ground-color:transparent;font-family:arial,helvetica,clean,sans-serif">
ACTION=3D=3D&quot;add&quot;, SUBSYSTEM=3D=3D&quot;block&quot;, ENV{ID_MODEL=
}=3D=3D&quot;VIRTUAL-DISK&quot;, SYMLINK+=3Discsi/%E{ID_VENDOR}_%K&quot;, M=
ODE=3D&quot;0664&quot;<br><font style=3D"font-weight:bold" size=3D"4"><br>T=
hanks
 <br></font></div><span class=3D"HOEnZb"><font color=3D"#888888">=A0kaisar<=
/font></span></div></div></div><br><br></div>  </div> </div>  </div> </div>=
</div><br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br><br clear=3D"all"><br>-- <br>esta es mi vida e me la vivo=
 hasta que dios quiera
</div>

--089e0116019cee537904f46758c2--

From ekuric@redhat.com Wed Mar 12 08:02:39 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2CC2d10004330 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 12 Mar 2014 08:02:39 -0400
Received: from [10.34.1.189] (dhcp-1-189.brq.redhat.com [10.34.1.189])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2CC2cvp009874
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 08:02:38 -0400
Message-ID: <53204CA8.2060300@redhat.com>
Date: Wed, 12 Mar 2014 13:01:44 +0100
From: Elvir Kuric <ekuric@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <1394605577.86561.YahooMailNeo@web141205.mail.bf1.yahoo.com>	<1394605887.60258.YahooMailNeo@web141203.mail.bf1.yahoo.com>
	<CAE7pJ3Ah==ffS_suuazua4RXLJ81z-xrK3QySo4RT0jtL4bNhA@mail.gmail.com>
In-Reply-To: <CAE7pJ3Ah==ffS_suuazua4RXLJ81z-xrK3QySo4RT0jtL4bNhA@mail.gmail.com>
X-Enigmail-Version: 1.6
Content-Type: multipart/alternative;
	boundary="------------070101050204040506070001"
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] iscsi sysmlink create problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 12 Mar 2014 12:02:39 -0000

This is a multi-part message in MIME format.
--------------070101050204040506070001
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 03/12/2014 12:43 PM, emmanuel segura wrote:
> but it's a cluster problem? ummm
>
>
> 2014-03-12 7:31 GMT+01:00 Kaisar Ahmed Khan <lipson12@yahoo.com
> <mailto:lipson12@yahoo.com>>:
>
>
>
>     Dear Experts :
>
>      following rule is not working to create symlink for iscsi disk ,
>     my iscsi device ID /dev/sda and want to link as
>     /dev/iscsi/vendor_kernel
>
>     please guide me if i miss anything .
>
>     ACTION=="add", SUBSYSTEM=="block", ENV{ID_MODEL}=="VIRTUAL-DISK",
>     SYMLINK+=iscsi/%E{ID_VENDOR}_%K", MODE="0664"
>
>     Thanks
>      kaisar
>
>
>
>     --
>     Linux-cluster mailing list
>     Linux-cluster@redhat.com <mailto:Linux-cluster@redhat.com>
>     https://www.redhat.com/mailman/listinfo/linux-cluster
>
>
>
>
> -- 
> esta es mi vida e me la vivo hasta que dios quiera
>
>
if you  share more information with us ( os version ) it could help.

Also below outputs can help to understand how system see device

if rhel 5  ( and clones )

#udevinfo -a -p $(udevinfo -q path -n /dev/DEVICE)

if rhel 6 ( and clones )

# udevadm info --query=all -n /dev/DEVICE --attribute-walk

where DEVICE is device you want to write udev rule for.

Kind regards,

-- 
Elvir Kuric,TSE / Red Hat / GSS EMEA / 


--------------070101050204040506070001
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body text="#000000" bgcolor="#FFFFFF">
    <div class="moz-cite-prefix">On 03/12/2014 12:43 PM, emmanuel segura
      wrote:<br>
    </div>
    <blockquote
cite="mid:CAE7pJ3Ah==ffS_suuazua4RXLJ81z-xrK3QySo4RT0jtL4bNhA@mail.gmail.com"
      type="cite">
      <div dir="ltr">but it's a cluster problem? ummm<br>
      </div>
      <div class="gmail_extra"><br>
        <br>
        <div class="gmail_quote">2014-03-12 7:31 GMT+01:00 Kaisar Ahmed
          Khan <span dir="ltr">&lt;<a moz-do-not-send="true"
              href="mailto:lipson12@yahoo.com" target="_blank">lipson12@yahoo.com</a>&gt;</span>:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0
            .8ex;border-left:1px #ccc solid;padding-left:1ex">
            <div>
              <div
                style="font-size:12pt;font-family:HelveticaNeue,Helvetica
                Neue,Helvetica,Arial,Lucida Grande,sans-serif">
                <div>
                  <span><br>
                  </span></div>
                <div style="display:block">
                  <div style="font-family:HelveticaNeue,Helvetica
                    Neue,Helvetica,Arial,Lucida
                    Grande,sans-serif;font-size:12pt">
                    <div style="font-family:HelveticaNeue,Helvetica
                      Neue,Helvetica,Arial,Lucida
                      Grande,sans-serif;font-size:12pt">
                      <br>
                      <div>
                        <div>
                          <div>
                            <div
                              style="font-size:12pt;font-family:HelveticaNeue,Helvetica
                              Neue,Helvetica,Arial,Lucida
                              Grande,sans-serif">
                              <div>Dear Experts :<br>
                                <span></span></div>
                              <div
                                style="font-style:normal;font-size:16px;background-color:transparent;font-family:HelveticaNeue,Helvetica
                                Neue,Helvetica,Arial,Lucida
                                Grande,sans-serif">
                                <span><br>
                                </span></div>
                              <div>&nbsp;following rule is not working to
                                create symlink for iscsi disk , my iscsi
                                device ID /dev/sda and want to link as
                                /dev/iscsi/vendor_kernel<br>
                                <br>
                                please guide me if i miss anything .<br>
                                <br>
                              </div>
                              <div
style="font-style:normal;font-size:13px;background-color:transparent;font-family:arial,helvetica,clean,sans-serif">ACTION=="add",
                                SUBSYSTEM=="block",
                                ENV{ID_MODEL}=="VIRTUAL-DISK",
                                SYMLINK+=iscsi/%E{ID_VENDOR}_%K",
                                MODE="0664"<br>
                                <font style="font-weight:bold" size="4"><br>
                                  Thanks <br>
                                </font></div>
                              <span class="HOEnZb"><font color="#888888">&nbsp;kaisar</font></span></div>
                          </div>
                        </div>
                        <br>
                        <br>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br>
            --<br>
            Linux-cluster mailing list<br>
            <a moz-do-not-send="true"
              href="mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br>
            <a moz-do-not-send="true"
              href="https://www.redhat.com/mailman/listinfo/linux-cluster"
              target="_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
          </blockquote>
        </div>
        <br>
        <br clear="all">
        <br>
        -- <br>
        esta es mi vida e me la vivo hasta que dios quiera
      </div>
      <br>
      <fieldset class="mimeAttachmentHeader"></fieldset>
      <br>
    </blockquote>
    <tt>if you&nbsp; share more information with us ( os version ) it could
      help.</tt><tt><br>
    </tt><tt><br>
    </tt><tt>Also below outputs can help to understand how system see
      dev</tt><tt>ice </tt><tt><br>
    </tt><tt><br>
    </tt><tt>if rhel 5&nbsp; ( and clones ) </tt><tt><br>
    </tt><tt><br>
    </tt><tt>#</tt><tt> </tt><tt>udevinfo -a -p $(udevinfo -q path -n
      /dev/DEVICE)
    </tt>
    <meta name="Description" content="Copy-Paste Buffer">
    <meta name="Generator" content="Zim">
    <tt><br>
    </tt><tt><br>
    </tt><tt>if rhel 6 ( and clones ) </tt><tt><br>
    </tt><tt><br>
    </tt><tt># </tt>
    <meta http-equiv="Content-Type" content="text/html;
      charset=ISO-8859-1">
    <tt>
    </tt><tt>udevadm info --query=all -n /dev/DEVICE --attribute-walk</tt><tt><br>
      <br>
    </tt><tt>where DEVICE is device you want to write udev rule for. </tt><tt><br>
    </tt><tt><br>
    </tt><tt>Kind regards, </tt><br>
    <meta name="Description" content="Copy-Paste Buffer">
    <meta name="Generator" content="Zim">
    <pre class="moz-signature" cols="72">-- 
Elvir Kuric,TSE / Red Hat / GSS EMEA / </pre>
  </body>
</html>

--------------070101050204040506070001--

From Mark.Vallevand@UNISYS.com Wed Mar 12 10:43:48 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2CEhm9A029235 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 12 Mar 2014 10:43:48 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2CEhls5021783
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 10:43:48 -0400
Received: from mail1.bemta7.messagelabs.com (mail1.bemta7.messagelabs.com
	[216.82.254.113])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2CEhhrb014563
	for <linux-cluster@redhat.com>; Wed, 12 Mar 2014 10:43:44 -0400
Received: from [216.82.254.195:27529] by server-17.bemta-7.messagelabs.com id
	D1/A1-29184-F9270235; Wed, 12 Mar 2014 14:43:43 +0000
X-Env-Sender: Mark.Vallevand@UNISYS.com
X-Msg-Ref: server-11.tower-200.messagelabs.com!1394635422!17818045!1
X-Originating-IP: [192.61.61.104]
X-StarScan-Received: 
X-StarScan-Version: 6.9.16; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 841 invoked from network); 12 Mar 2014 14:43:42 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
	by server-11.tower-200.messagelabs.com with RC4-SHA encrypted SMTP;
	12 Mar 2014 14:43:42 -0000
Received: from usea-nahubcas3.na.uis.unisys.com (129.224.76.101) by
	USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server
	(TLS) id 8.3.327.1; Wed, 12 Mar 2014 09:43:41 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
	usea-nahubcas3.na.uis.unisys.com ([129.224.76.101]) with mapi;
	Wed, 12 Mar 2014 09:43:42 -0500
From: "Vallevand, Mark K" <Mark.Vallevand@UNISYS.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Wed, 12 Mar 2014 09:43:41 -0500
Thread-Topic: Resource placement rules
Thread-Index: Ac8+AXXmQsknivG4TXuDBESSTyV9Jw==
Message-ID: <99C8B2929B39C24493377AC7A121E21FC5E0C32347@USEA-EXCH8.na.uis.unisys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_99C8B2929B39C24493377AC7A121E21FC5E0C32347USEAEXCH8naui_"
MIME-Version: 1.0
X-RedHat-Spam-Score: -2.009  (BAYES_00, DCC_REPUT_13_19, HTML_MESSAGE,
	RCVD_IN_DNSWL_NONE, SPF_PASS, UNPARSEABLE_RELAY)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Resource placement rules
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 12 Mar 2014 14:43:48 -0000

--_000_99C8B2929B39C24493377AC7A121E21FC5E0C32347USEAEXCH8naui_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have resources A, B, C and D.  (Or more.)  All are using agent X.  Is the=
re a way to simply specify that resources A, B, C and D must each run on a =
different node?
I can create a series of negative infinity collocation rules something like=
:
                collocation c1 -inf: A ( B C D )
                collocation c2 -inf: B ( A C D )
                collocation c3 -inf: C ( A B D )
                collocation c4 -inf: D ( A B C )
Is that my choice?  Will that have the affect I want?  Is there a more conc=
ise way to specify it?
It would be nice to just set an attribute saying any resource using agent X=
 must run on its own node.

Regards.
Mark K Vallevand   Mark.Vallevand@Unisys.com<mailto:Mark.Vallevand@Unisys.c=
om>
May you live in interesting times, may you come to the attention of importa=
nt people and may all your wishes come true.
THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


--_000_99C8B2929B39C24493377AC7A121E21FC5E0C32347USEAEXCH8naui_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40"><head><meta http-equiv=3DContent-Type content=
=3D"text/html; charset=3Dus-ascii"><meta name=3DGenerator content=3D"Micros=
oft Word 12 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue vli=
nk=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>I have resources=
 A, B, C and D.&nbsp; (Or more.) &nbsp;All are using agent X. &nbsp;Is ther=
e a way to simply specify that resources A, B, C and D must each run on a d=
ifferent node?<o:p></o:p></p><p class=3DMsoNormal>I can create a series of =
negative infinity collocation rules something like:<o:p></o:p></p><p class=
=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp; collocation c1 &#8211;inf: A ( B C D )<o:p></o=
:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; collocation c2 &#8211;inf: B ( =
A C D )<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; collocation c3 &=
#8211;inf: C ( A B D )<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; c=
ollocation c4 &#8211;inf: D ( A B C )<o:p></o:p></p><p class=3DMsoNormal>Is=
 that my choice?&nbsp; Will that have the affect I want?&nbsp; Is there a m=
ore concise way to specify it?<o:p></o:p></p><p class=3DMsoNormal>It would =
be nice to just set an attribute saying any resource using agent X must run=
 on its own node.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><=
p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:=
auto'><span style=3D'font-size:10.0pt;font-family:"Arial","sans-serif";colo=
r:black'>Regards.</span><span style=3D'font-size:12.0pt;font-family:"Times =
New Roman","serif"'><br></span><span style=3D'font-size:10.0pt;font-family:=
"Arial","sans-serif";color:black'>Mark K Vallevand&nbsp;&nbsp; <a href=3D"m=
ailto:Mark.Vallevand@Unisys.com"><span style=3D'color:blue'>Mark.Vallevand@=
Unisys.com</span></a></span><span style=3D'font-size:12.0pt;font-family:"Ti=
mes New Roman","serif"'><o:p></o:p></span></p><p class=3DMsoNormal style=3D=
'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span style=3D'font-si=
ze:12.0pt;font-family:"Times New Roman","serif"'>May you live in interestin=
g times, may you come to the attention of important people and may all your=
 wishes come true.<o:p></o:p></span></p><p class=3DMsoNormal style=3D'mso-m=
argin-top-alt:auto;mso-margin-bottom-alt:auto'><span style=3D'font-size:10.=
0pt;font-family:"Times New Roman","serif"'>THIS COMMUNICATION MAY CONTAIN C=
ONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and is thus for use only =
by the intended recipient. If you received this in error, please contact th=
e sender and delete the e-mail and its attachments from all computers.</spa=
n><span style=3D'font-size:12.0pt;font-family:"Times New Roman","serif"'><o=
:p></o:p></span></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></body>=
</html>=

--_000_99C8B2929B39C24493377AC7A121E21FC5E0C32347USEAEXCH8naui_--

From andreas@hastexo.com Thu Mar 13 06:34:41 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2DAYeL4012498 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 13 Mar 2014 06:34:41 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2DAYeQw030995
	for <linux-cluster@redhat.com>; Thu, 13 Mar 2014 06:34:40 -0400
Received: from mail-we0-f179.google.com (mail-we0-f179.google.com
	[74.125.82.179])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2DAYbRn009740
	for <linux-cluster@redhat.com>; Thu, 13 Mar 2014 06:34:38 -0400
Received: by mail-we0-f179.google.com with SMTP id x48so650017wes.38
	for <linux-cluster@redhat.com>; Thu, 13 Mar 2014 03:34:37 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
	d=1e100.net; s=20130820;
	h=x-gm-message-state:message-id:date:from:organization:user-agent
	:mime-version:to:subject:references:in-reply-to:content-type;
	bh=sWiVJ5/wLo9Svbg5nUWERMLf0cJVLnzK/RXwcs79O1g=;
	b=ajZvFnFvmHNTtjhITrztd2mGTv5NkWXXrNGf8rbY1WDh0gioKCT8SxJzM9ZvytNIJ3
	LX6Baesd5Zsh5IgptFgYNh3yHzXkZYdL3n4pqZr4nqc9eMzzqI0mIyj6kBEI+k7GsFuW
	m7hewJ3PS8uZQf8id1q55nUpFgQ9O59plwfbT597QplAcKEPP8PvvoMZz08esTcUg93s
	P1Czh4fhfBx5h+GVWLPMn2meNWHHCtW4xjobBp2pNIvX266T+WGn30KHd35007cyuJIm
	S92wcsz549d8x5jXFN44m4vlvXqwpQGm7tlXCguf30mMRPaZf7xXMiyfhtMVPUc0ZWk1
	7lNQ==
X-Gm-Message-State: ALoCoQnxIqRFLKPIXssx7IEUZXsUBg6l2+R2Wssx1GUPchtTGX8aixmDbC/n2eB7Z4j8Xw/1ExNO
X-Received: by 10.180.101.166 with SMTP id fh6mr1022754wib.2.1394706876986;
	Thu, 13 Mar 2014 03:34:36 -0700 (PDT)
Received: from [10.0.0.100] (h081217016175.dyn.cm.kabsi.at. [81.217.16.175])
	by mx.google.com with ESMTPSA id
	qg3sm24278429wic.10.2014.03.13.03.34.34
	for <linux-cluster@redhat.com>
	(version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
	Thu, 13 Mar 2014 03:34:35 -0700 (PDT)
Message-ID: <532189B9.2060108@hastexo.com>
Date: Thu, 13 Mar 2014 11:34:33 +0100
From: Andreas Kurz <andreas@hastexo.com>
Organization: hastexo Professional Services GmbH
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <99C8B2929B39C24493377AC7A121E21FC5E0C32347@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FC5E0C32347@USEA-EXCH8.na.uis.unisys.com>
X-Enigmail-Version: 1.6
Content-Type: multipart/signed; micalg=pgp-sha256;
	protocol="application/pgp-signature";
	boundary="xPldfKJ5vrWQqn2Whjcdmusrj9k7wn1eF"
X-RedHat-Spam-Score: -1.102  (BAYES_20, DCC_REPUT_00_12, RCVD_IN_DNSWL_LOW,
	SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Resource placement rules
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 13 Mar 2014 10:34:41 -0000

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--xPldfKJ5vrWQqn2Whjcdmusrj9k7wn1eF
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

On 2014-03-12 15:43, Vallevand, Mark K wrote:
> I have resources A, B, C and D.  (Or more.)  All are using agent X.  Is=

> there a way to simply specify that resources A, B, C and D must each ru=
n
> on a different node?
>=20
> I can create a series of negative infinity collocation rules something =
like:
>=20
>                 collocation c1 =96inf: A ( B C D )
>=20
>                 collocation c2 =96inf: B ( A C D )
>=20
>                 collocation c3 =96inf: C ( A B D )
>=20
>                 collocation c4 =96inf: D ( A B C )
>=20
> Is that my choice?  Will that have the affect I want?  Is there a more
> concise way to specify it?
>=20
> It would be nice to just set an attribute saying any resource using
> agent X must run on its own node.

All resources use agentX ... what keeps you from using a clone resource?

Regards,
Andreas


>=20
> =20
>=20
> Regards.
> Mark K Vallevand   Mark.Vallevand@Unisys.com
> <mailto:Mark.Vallevand@Unisys.com>
>=20
> May you live in interesting times, may you come to the attention of
> important people and may all your wishes come true.
>=20
> THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETAR=
Y
> MATERIAL and is thus for use only by the intended recipient. If you
> received this in error, please contact the sender and delete the e-mail=

> and its attachments from all computers.
>=20
> =20
>=20
>=20
>=20



--xPldfKJ5vrWQqn2Whjcdmusrj9k7wn1eF
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iFcDBQFTIYm6vbRMOVM2Q/IRCEdfAQCaHwIew2RsJ1Nl8VTqaH0BgZ7W3HZqXnyr
Z+p3izL0oQEAtYlfBbvbUGrIfbHeSFFtyhyr14wBXNz092YGQ+r3/R8=
=4RaB
-----END PGP SIGNATURE-----

--xPldfKJ5vrWQqn2Whjcdmusrj9k7wn1eF--

From pine5514@gmail.com Tue Mar 18 09:38:05 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IDc4Xd025485 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 09:38:04 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IDc4mA026593
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 09:38:04 -0400
Received: from mail-la0-f67.google.com (mail-la0-f67.google.com
	[209.85.215.67])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2IDc1VK024426
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 09:38:02 -0400
Received: by mail-la0-f67.google.com with SMTP id gl10so1324900lab.10
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 06:38:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=qZFIqXgr1jkteEaOR/4EltR1exwbZIkecCHqsvzI4AA=;
	b=R9WyJ0duuovCdBK+neJW7eLCNVPHLXI/zlrbU8H5egkS9k2L2o7z/j8n/pRyD0K+wz
	xkdfHtg3sScppq6c9OxPb2cWsvc87PvNVzFgsN2gwlkdX5AUrPqGCy/iyFpsVwNS79IF
	XJ7J3Z0BjFYZVDCbvhb8uz9YClgiDEM4sUrFvxLWVpYZ6Gl2AOcIN3tTKjkVPmlNA3Bi
	cszgRwzs3yg89MtuhOpIphuYA2SQ6yCsLRXV4vp2uT7GicIUv9USuhmi1/5MH7yfc6Mo
	Xvmnd3kDOEiejoJ1yYPzkwUsjSjTlStHGaqr595IOeHZ8qBqBZoDdh2iBVCUHfK1qOMw
	hrlg==
MIME-Version: 1.0
X-Received: by 10.112.97.178 with SMTP id eb18mr20102272lbb.13.1395149880306; 
	Tue, 18 Mar 2014 06:38:00 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 06:38:00 -0700 (PDT)
Date: Tue, 18 Mar 2014 17:08:00 +0330
Message-ID: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux-cluster@redhat.com
Content-Type: multipart/alternative; boundary=001a1133e308062fa704f4e1a54c
X-RedHat-Spam-Score: -2.548  (BAYES_00, DCC_REPUT_13_19, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT,
	FREEMAIL_FROM, HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS,
	URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 13:38:05 -0000

--001a1133e308062fa704f4e1a54c
Content-Type: text/plain; charset=ISO-8859-1

I have accidentally reformatted a GFS cluster.
We need to unformat it.. is there any way to recover disk ?

I read this post
http://web.archiveorange.com/archive/v/TUhSn11xEn9QxXBIZ0k6

it say that I can use gfs2_edit to recover data.
I need more details about changing block map to 0xff

tnx

--001a1133e308062fa704f4e1a54c
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><pre>I have accidentally reformatted a GFS cluster.<br>We =
need to unformat it.. is there any way to recover disk ?<br></pre><pre>I re=
ad this post <br><a href=3D"http://web.archiveorange.com/archive/v/TUhSn11x=
En9QxXBIZ0k6">http://web.archiveorange.com/archive/v/TUhSn11xEn9QxXBIZ0k6</=
a><br>
</pre><pre>it say that I can use gfs2_edit to recover data.<br>I need more =
details about changing block map to 0xff</pre><pre>tnx<br></pre></div>

--001a1133e308062fa704f4e1a54c--

From lists@alteeve.ca Tue Mar 18 12:10:47 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IGAluI004904 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 12:10:47 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IGAeR5005422
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 12:10:47 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2IGAVDt005697
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 12:10:33 -0400
Received: from lemass.alteeve.ca (dhcp-108-168-20-202.cable.user.start.ca
	[108.168.20.202])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id 84B122012F
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 12:10:29 -0400 (EDT)
Message-ID: <53286FF6.40707@alteeve.ca>
Date: Tue, 18 Mar 2014 12:10:30 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
In-Reply-To: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 16:10:48 -0000

On 18/03/14 09:38 AM, Mr.Pine wrote:
> I have accidentally reformatted a GFS cluster.
> We need to unformat it.. is there any way to recover disk ?
>
> I read this post
> http://web.archiveorange.com/archive/v/TUhSn11xEn9QxXBIZ0k6
>
> it say that I can use gfs2_edit to recover data.
> I need more details about changing block map to 0xff
>
> tnx

Do you have a support agreement with Red Hat? If so, open a ticket with 
them. If not, then you can try also asking for help in freenode's 
#linux-cluster channel. It says "no gfs support", but that's to prevent 
confusion with tracking open tickets, which won't apply if you don't 
have official red hat support.

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From rpeterso@redhat.com Tue Mar 18 12:38:11 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IGcAPk021220 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 12:38:10 -0400
Received: from mx3-phx2.redhat.com (mx01.colomx.prod.int.phx2.redhat.com
	[10.5.7.1])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IGcAeW016328
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 12:38:10 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx3-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2IGc9nZ025674
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 12:38:09 -0400
Date: Tue, 18 Mar 2014 12:38:07 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.11]
Thread-Topic: unformat gfs2
Thread-Index: qGEJg92ZDoWWYt+/dYXQTNKDjAemUw==
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 16:38:11 -0000

----- Original Message -----
> I have accidentally reformatted a GFS cluster.
> We need to unformat it.. is there any way to recover disk ?
> 
> I read this post
> http://web.archiveorange.com/archive/v/TUhSn11xEn9QxXBIZ0k6
> 
> it say that I can use gfs2_edit to recover data.
> I need more details about changing block map to 0xff
> 
> tnx

Hi,

Sorry to hear about your file system mishap.

It's not clear from your post whether you mean GFS or GFS2. Your subject
like says GFS2, but your comment said you reformatted it to GFS.
So my first questions are: What was it really? and What is it now?

Assuming it was, and still is, gfs2, there's another important question:
Was the file system _ever_ grown via gfs2_grow since the very first mkfs?
If so, the subsequent mkfs would most likely place the resource groups in
a different location, so the file system would be damaged beyond repair.

The next important question is: did you override any of the mkfs.gfs2
parameters either the first time or the second time, like -b, -J, -j,
or -r? Once again, if you specified a different block size (-b) or
resource group size, the second mkfs.gfs2 would have placed the
resource groups in different locations, once again damaging the original
contents beyond repair.

The third important question is: Was the device altered in any other
way, for example, mkfs.ext4 or mkfs.xfs, which might have changed things?
If so, it's probably done irreparable damage.

However, if you never ran gfs2_grow, and never overrode -b or -r during
either mkfs, the mkfs would likely have placed the resource groups in the
exact same locations as it did the first time. In that case, you might
be able to repair the file system by doing what you describe: Setting
all the bits in the bitmaps to 0xff, then letting fsck.gfs2 sort it out.

Unfortunately, there is no tool that can do this en-mass.
You could manually set the bits to 0xff with gfs2_edit, but depending
on the size of the file system, it would take a very long time.

If it was my valuable data, and I had no backup, I would first
make a block-for-block copy of the entire device so I had a sandbox
to run experiments on. Next, I'd write a program that opened the block
device, did a block-by-block search for GFS2 dinodes, then twiddle that
block's bitmap from 0 to 3. Then I'd run fsck.gfs2 to see how well it can
put the pieces back together. That program would have to be a hybrid
with pieces pulled from fsck.gfs2 and gfs2_edit. It's no small task,
and you'd have to know what you're doing. Unfortunately, there are only
a handful of programmers who know enough about this to do it correctly
(I'm one of them). All of them work for Red Hat. As much as it sounds
like a fun project, it would probably be considered a conflict of
interest, unless you somehow hired Red Hat and got my management
involved. If I got their blessing, I'd be happy to do this. The trouble is,
even with such a program, there are no guarantees that your file system
would be back the way it used to be. It would likely be cheaper and
better to restore from a backup.

Regards,

Bob Peterson
Red Hat File Systems

From pine5514@gmail.com Tue Mar 18 13:11:37 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IHBbgV000399 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 13:11:37 -0400
Received: from mx2.redhat.com (ext-mx01.extmail.prod.ext.rdu2.redhat.com
	[10.11.55.1])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IHBbxQ006634
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:11:37 -0400
Received: from mail-lb0-f179.google.com (mail-lb0-f179.google.com
	[209.85.217.179])
	by mx2.redhat.com (8.14.4/8.14.4) with ESMTP id s2IHBRsn016624
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:11:28 -0400
Received: by mail-lb0-f179.google.com with SMTP id p9so5074184lbv.10
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 10:11:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=UiyY5Gp/YIlAUXk5COd6EV2uoFRUQnLsw1MIxeCBj+A=;
	b=YoJFZqnVeOlJX1R8krBmF8WLcrqb4cULrFMMwEWL3dwYUNQvdbco1rbOoSOdHqgQI4
	A1jRl1LLKIxsA8jUaalRQU8E/2zgioXvJCPDsHDnLOnFqC1gQKaOK0E/RZqhcBEi2kyR
	Fxw6kCjKBpArFmT0WYMBwq9snqcr6rZxPmzj/qY6/zf+aJebnYIT/USfLMrElWM0EuMC
	rx126NTmMtcsKOTeFQiP2BRcop4gR0wxD5CCC2w73BfpybwrbUHiPul7Tb+2uWpUmD5k
	BUG1/1vCGX5dpgB94s+zlpuDhPlrcH8DSm/sDc+S5sd1xncooSUFxkKxMXlZx+5WPLKK
	3AIA==
MIME-Version: 1.0
X-Received: by 10.112.122.174 with SMTP id lt14mr48217lbb.79.1395162687109;
	Tue, 18 Mar 2014 10:11:27 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 10:11:27 -0700 (PDT)
In-Reply-To: <746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
Date: Tue, 18 Mar 2014 20:41:27 +0330
Message-ID: <CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.849  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.11.55.1
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 17:11:38 -0000

On Tue, Mar 18, 2014 at 8:08 PM, Bob Peterson <rpeterso@redhat.com> wrote:
>
> ----- Original Message -----
> > I have accidentally reformatted a GFS cluster.
> > We need to unformat it.. is there any way to recover disk ?
> >
> > I read this post
> > http://web.archiveorange.com/archive/v/TUhSn11xEn9QxXBIZ0k6
> >
> > it say that I can use gfs2_edit to recover data.
> > I need more details about changing block map to 0xff
> >
> > tnx
>
> Hi,
>
> Sorry to hear about your file system mishap.
>
> It's not clear from your post whether you mean GFS or GFS2. Your subject
> like says GFS2, but your comment said you reformatted it to GFS.
> So my first questions are: What was it really? and What is it now?

It's GFS2 .

>
> Assuming it was, and still is, gfs2, there's another important question:
> Was the file system _ever_ grown via gfs2_grow since the very first mkfs?
> If so, the subsequent mkfs would most likely place the resource groups in
> a different location, so the file system would be damaged beyond repair.

Without any use of gfs2_grow,

>
> The next important question is: did you override any of the mkfs.gfs2
> parameters either the first time or the second time, like -b, -J, -j,
> or -r? Once again, if you specified a different block size (-b) or
> resource group size, the second mkfs.gfs2 would have placed the
> resource groups in different locations, once again damaging the original
> contents beyond repair.
>

All options are equal ..

> The third important question is: Was the device altered in any other
> way, for example, mkfs.ext4 or mkfs.xfs, which might have changed things?
> If so, it's probably done irreparable damage

No,
.
>
> However, if you never ran gfs2_grow, and never overrode -b or -r during
> either mkfs, the mkfs would likely have placed the resource groups in the
> exact same locations as it did the first time. In that case, you might
> be able to repair the file system by doing what you describe: Setting
> all the bits in the bitmaps to 0xff, then letting fsck.gfs2 sort it out.
>
> Unfortunately, there is no tool that can do this en-mass.
> You could manually set the bits to 0xff with gfs2_edit, but depending
> on the size of the file system, it would take a very long time.
>
> If it was my valuable data, and I had no backup, I would first
> make a block-for-block copy of the entire device so I had a sandbox
> to run experiments on. Next, I'd write a program that opened the block
> device, did a block-by-block search for GFS2 dinodes, then twiddle that
> block's bitmap from 0 to 3. Then I'd run fsck.gfs2 to see how well it can

There is many many block types (http://linux.die.net/man/8/gfs2_edit),
Do we find 4 (Dinode)? instead of for example 3 (Resource Group Bitmap)?

How we could fine bitmaps?

> put the pieces back together. That program would have to be a hybrid
> with pieces pulled from fsck.gfs2 and gfs2_edit. It's no small task,
> and you'd have to know what you're doing. Unfortunately, there are only
> a handful of programmers who know enough about this to do it correctly
> (I'm one of them). All of them work for Red Hat. As much as it sounds
> like a fun project, it would probably be considered a conflict of
> interest, unless you somehow hired Red Hat and got my management
> involved. If I got their blessing, I'd be happy to do this. The trouble is,
> even with such a program, there are no guarantees that your file system
> would be back the way it used to be. It would likely be cheaper and
> better to restore from a backup.
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From rpeterso@redhat.com Tue Mar 18 13:31:22 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IHVK0j021432 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 13:31:20 -0400
Received: from mx4-phx2.redhat.com (mx02.colomx.prod.int.phx2.redhat.com
	[10.5.7.2])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IHVK5H018656
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:31:20 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx4-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2IHUiFV013417
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:30:55 -0400
Date: Tue, 18 Mar 2014 13:30:44 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.12]
Thread-Topic: unformat gfs2
Thread-Index: NOaNUjBGbW/qL05DGFZLmPdxlXzSpw==
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 17:31:23 -0000

----- Original Message -----
> It's GFS2 .
> Without any use of gfs2_grow,
> All options are equal ..
> No,
> 
> There is many many block types (http://linux.die.net/man/8/gfs2_edit),
> Do we find 4 (Dinode)? instead of for example 3 (Resource Group Bitmap)?
> 
> How we could fine bitmaps?

Hi,

To use gfs2_edit properly, you should have an understanding of how the
gfs2 file system is kept on disk. If you are a Red Hat customer, I have
several videos on the Red Hat customer portal on how to use gfs2_edit.

The dinode blocks are type 4. There are two kinds of bitmaps: bitmaps
associated with rgrps (type 2) and bitmaps that follow rgrps (type 3).
The rgrps are indexed by the rindex system file in the master directory,
and ri_length tells you how many bitmap blocks follow each rgrp block.

In newer versions (RHEL6+) there are little helper functions in gfs2_edit
that can tell you the bitmap status, and alter it. For example:

gfs2_edit -p <block number> blocktype /dev/your/device

This command will tell you the block type, for example:
# gfs2_edit -p root blocktype /dev/mpathc/scratch
4 (Block 22 is type 4: Dinode)

gfs2_edit -p <block number> blockalloc /dev/your/device
This command will tell you the current bitmap setting. The bitmap setting
may be changed to "3" (dinode) with:
gfs2_edit -p <block number> blockalloc 3 /dev/your/device

So you could write a script to do it, but again, you would have to be
careful, and work on a copy, never the original.

Regards,

Bob Peterson
Red Hat File Systems

From pine5514@gmail.com Tue Mar 18 13:43:27 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IHhRkW002574 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 13:43:27 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IHhRQ8019523
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:43:27 -0400
Received: from mail-la0-f46.google.com (mail-la0-f46.google.com
	[209.85.215.46])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2IHhOwu004585
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:43:24 -0400
Received: by mail-la0-f46.google.com with SMTP id hr17so5040969lab.33
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 10:43:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=b6OVOmMnmLJRncbyKgNvXXjlCzFi54MRzB8ASaRhJn8=;
	b=a2KXdDRlNTGxWWhPecb/ku78bBllVarlMytNrjNbauCDBY8LmWxK6bYtym794o+5pC
	7h9HHf78WlSN1KvGrq4sFEgOss3N3PS0ZAWTIrZOQGDEmJ9KzVsVwDVdmfDWT5fBLc8F
	htFU2Lna1k1SQMqCNs7bKPUvlwNQ+8phuwZCDXqU/lYGzpduShykAbAVfk/bWuzTLmAL
	BeNnuqqhm+A05d7YhAg2hWeZ3x1+tu0VJ2BIkAHeTXFqlY6iBFefDBYZQHM65Bc+JPtP
	4atuVq4uiWQ9tBHnPOIzEGG69YXxE9WbMv4rGbjURK6KNttN7KA5JvLw+tnERz4xJedt
	E/WQ==
MIME-Version: 1.0
X-Received: by 10.112.151.146 with SMTP id uq18mr2446559lbb.38.1395164603519; 
	Tue, 18 Mar 2014 10:43:23 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 10:43:23 -0700 (PDT)
In-Reply-To: <1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
Date: Tue, 18 Mar 2014 21:13:23 +0330
Message-ID: <CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.849  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 17:43:27 -0000

On Tue, Mar 18, 2014 at 9:00 PM, Bob Peterson <rpeterso@redhat.com> wrote:
> ----- Original Message -----
>> It's GFS2 .
>> Without any use of gfs2_grow,
>> All options are equal ..
>> No,
>>
>> There is many many block types (http://linux.die.net/man/8/gfs2_edit),
>> Do we find 4 (Dinode)? instead of for example 3 (Resource Group Bitmap)?
>>
>> How we could fine bitmaps?
>
> Hi,
>
> To use gfs2_edit properly, you should have an understanding of how the
> gfs2 file system is kept on disk. If you are a Red Hat customer, I have
> several videos on the Red Hat customer portal on how to use gfs2_edit.
>
> The dinode blocks are type 4. There are two kinds of bitmaps: bitmaps
> associated with rgrps (type 2) and bitmaps that follow rgrps (type 3).
> The rgrps are indexed by the rindex system file in the master directory,
> and ri_length tells you how many bitmap blocks follow each rgrp block.
>
> In newer versions (RHEL6+) there are little helper functions in gfs2_edit
> that can tell you the bitmap status, and alter it. For example:
>
> gfs2_edit -p <block number> blocktype /dev/your/device
>
> This command will tell you the block type, for example:
> # gfs2_edit -p root blocktype /dev/mpathc/scratch
> 4 (Block 22 is type 4: Dinode)
>
> gfs2_edit -p <block number> blockalloc /dev/your/device
> This command will tell you the current bitmap setting. The bitmap setting
> may be changed to "3" (dinode) with:
> gfs2_edit -p <block number> blockalloc 3 /dev/your/device
>
> So you could write a script to do it, but again, you would have to be
> careful, and work on a copy, never the original.
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>

What is your opinion about this scrip?

for ((i = 17; i < 1756377984; ++i)); do gfs2_edit -p $i blockalloc 3
/dev/sdb >/dev/null 2>&1; done

Could we change all of block allocations to "3"?

> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From rpeterso@redhat.com Tue Mar 18 13:55:50 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IHtoZx017479 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 13:55:50 -0400
Received: from mx4-phx2.redhat.com (mx02.colomx.prod.int.phx2.redhat.com
	[10.5.7.2])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IHtofr026361
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:55:50 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx4-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2IHtmf8019125
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 13:55:48 -0400
Date: Tue, 18 Mar 2014 13:55:48 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.12]
Thread-Topic: unformat gfs2
Thread-Index: mUk8J3fDbDDHHxdgwbz4JJZa/DIC2g==
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 17:55:50 -0000

----- Original Message -----
> What is your opinion about this scrip?
> 
> for ((i = 17; i < 1756377984; ++i)); do gfs2_edit -p $i blockalloc 3
> /dev/sdb >/dev/null 2>&1; done
> 
> Could we change all of block allocations to "3"?

Hi,

That would be dangerous. I would hope that the resource groups would be
ignored, but I've never done it. I wouldn't be surprised if you had
gfs2_edit segfault for some of it. At the very least, you would be turning
all your journal blocks to appear like dinodes, as well as all the
extended attributes, directory leaf blocks, etc., which will confuse
fsck.gfs2. The fsck.gfs2 will do a much better job if you only change
the dinode blocks from 0 to 3.

You would be much better off writing a loop that first checked the
block's current type, with -p <block number> blocktype, and only
change its bit to 3 if it is type 4 (dinode).

Also, the script would take a very long time, because it's going to
invoke gfs2_edit a trillion and a half times. Writing a program to
do this once would be quicker.

Regards,

Bob Peterson
Red Hat File Systems

From rpeterso@redhat.com Tue Mar 18 14:06:42 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2II6f9t016979 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 14:06:41 -0400
Received: from mx3-phx2.redhat.com (mx01.colomx.prod.int.phx2.redhat.com
	[10.5.7.1])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2II6fCV031678
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:06:41 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx3-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2II6etw014057
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:06:40 -0400
Date: Tue, 18 Mar 2014 14:06:40 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <296851692.1537300.1395166000377.JavaMail.zimbra@redhat.com>
In-Reply-To: <1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.12]
Thread-Topic: unformat gfs2
Thread-Index: mUk8J3fDbDDHHxdgwbz4JJZa/DIC2rpVGj7N
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 18:06:42 -0000

----- Original Message -----
> ----- Original Message -----
> > What is your opinion about this scrip?
> > 
> > for ((i = 17; i < 1756377984; ++i)); do gfs2_edit -p $i blockalloc 3
> > /dev/sdb >/dev/null 2>&1; done
> > 
> > Could we change all of block allocations to "3"?
> 
> Hi,
> 
> gfs2_edit segfault for some of it. At the very least, you would be turning
> all your journal blocks to appear like dinodes, as well as all the

This is worth clarifying:

You should be careful with the journals. The journal blocks may look
like dinodes, but they should be marked as data blocks. That's because
the journal's data can contain dinodes. Will fsck.gfs2 figure it out
properly? I don't know. It might, but it might not. Better to be safe
with your data.

Regards,

Bob Peterson
Red Hat File Systems

From pine5514@gmail.com Tue Mar 18 14:11:14 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IIBDpb007608 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 14:11:13 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IIBDLB002934
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:11:13 -0400
Received: from mail-la0-f41.google.com (mail-la0-f41.google.com
	[209.85.215.41])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2IIB7iN032444
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:11:08 -0400
Received: by mail-la0-f41.google.com with SMTP id gl10so5205574lab.28
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 11:11:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=BtEit9UW3nqrvozAyNXAA1ajrfNdKyD02G4EwPLRZvE=;
	b=kFL626KlyFPDHq0KkD4/+27f3sTfdWYDlqpxNNhRct/G3b0joNdaaTz/lQEemZFGJY
	CmM844f5WycsYSwfTJkeHD4KVli8Y2r8CsN3tRkMA0eopWS5gCWr63phTP0O1/N5VGM5
	jkxqNLKJDRsTw2pEbbi5KTrZsQ4bynnxU98k+RzfM2YYPlYhjW1mEhxl1HWQ78aopaWm
	+6x0dMvG8809QxaQXu5Kc5A9Ls//PTiypxPYkA0S/RVAY/U35kDeJ9phPMlTNIJbeaNt
	TCSuo04Fj7STttmQbUryj4i+MS0+zPBHg5BLslcNdW1Y+ZIEvSrsVL8nf4ijl86/bS3h
	IThQ==
MIME-Version: 1.0
X-Received: by 10.112.64.37 with SMTP id l5mr1936785lbs.49.1395166267525; Tue,
	18 Mar 2014 11:11:07 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 11:11:07 -0700 (PDT)
In-Reply-To: <1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
Date: Tue, 18 Mar 2014 21:41:07 +0330
Message-ID: <CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 18:11:14 -0000

On Tue, Mar 18, 2014 at 9:25 PM, Bob Peterson <rpeterso@redhat.com> wrote:
> ----- Original Message -----
>> What is your opinion about this scrip?
>>
>> for ((i = 17; i < 1756377984; ++i)); do gfs2_edit -p $i blockalloc 3
>> /dev/sdb >/dev/null 2>&1; done
>>
>> Could we change all of block allocations to "3"?
>
> Hi,
>
> That would be dangerous. I would hope that the resource groups would be
> ignored, but I've never done it. I wouldn't be surprised if you had
> gfs2_edit segfault for some of it. At the very least, you would be turning
> all your journal blocks to appear like dinodes, as well as all the
> extended attributes, directory leaf blocks, etc., which will confuse
> fsck.gfs2. The fsck.gfs2 will do a much better job if you only change
> the dinode blocks from 0 to 3.
>
> You would be much better off writing a loop that first checked the
> block's current type, with -p <block number> blocktype, and only
> change its bit to 3 if it is type 4 (dinode).
>
> Also, the script would take a very long time, because it's going to
> invoke gfs2_edit a trillion and a half times. Writing a program to
> do this once would be quicker.
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

Hi,

Do you mean program likes this?

for ((i = 17; i < 1756377984; ++i)); do
        ss=$(gfs2_edit -p $i blocktype /dev/sdc | cut -d " " -f 1);
        if [[ $ss -eq 4 ]]; then
                gfs2_edit -p $i blockalloc 3 /dev/sdb >/dev/null 2>&1;
        fi
done

I'm a C/C++ programmer, if you trust program logic, i would try
to implement with C/C++. and would public in reply.

Regards.
Pine.

From rpeterso@redhat.com Tue Mar 18 14:22:20 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IIMKqP008866 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 14:22:20 -0400
Received: from mx4-phx2.redhat.com (mx02.colomx.prod.int.phx2.redhat.com
	[10.5.7.2])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IIMKsF021465
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:22:20 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx4-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2IIMJg6026105
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:22:19 -0400
Date: Tue, 18 Mar 2014 14:22:19 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.12]
Thread-Topic: unformat gfs2
Thread-Index: frd+7vUsvlpnUJMAWi8qwc+tzbERSw==
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 18:22:21 -0000

----- Original Message -----
> Hi,
> 
> Do you mean program likes this?
> 
> for ((i = 17; i < 1756377984; ++i)); do
>         ss=$(gfs2_edit -p $i blocktype /dev/sdc | cut -d " " -f 1);
>         if [[ $ss -eq 4 ]]; then
>                 gfs2_edit -p $i blockalloc 3 /dev/sdb >/dev/null 2>&1;
>         fi
> done
> 
> I'm a C/C++ programmer, if you trust program logic, i would try
> to implement with C/C++. and would public in reply.
> 
> Regards.
> Pine.

Hi,

Yes, you can do something like that, but again, do not include the
journal's blocks. You can do gfs2_edit -p master /dev/sdc to
determine the block of the quota file, which should be past the
journals. Then use that value for the starting point of i.
For example:
# gfs2_edit -p master /dev/mpathc/scratch | grep quota
   8/8 [6c1c0fed] 12/33132 (0xc/0x816c): File    quota
for ((i = 33133; ...

Regards,

Bob Peterson
Red Hat File Systems

From pine5514@gmail.com Tue Mar 18 14:31:28 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IIVSJT007170 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 14:31:28 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IIVSYB012957
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:31:28 -0400
Received: from mail-lb0-f181.google.com (mail-lb0-f181.google.com
	[209.85.217.181])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2IIVOj1025501
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:31:25 -0400
Received: by mail-lb0-f181.google.com with SMTP id c11so4999695lbj.40
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 11:31:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=dLEH0ZTOvpU3GKxJlEOsrAGLl1Hzc4oj7AlrGmUnWF8=;
	b=wbHvrmVHJQW0HufJo8B95/Go4qdVQibEvynHlQsiNd2Y4EJ5GJEd5tJji9DlrkgB5V
	M4pWhcB7PB2SnTObxxNhGcMiFCiogFKxUYc4SX1N6dkb2vMiPhT5rroxiH6mJux5NMVO
	yHrdrbBtlum/ivAsPRr2HOkOciFtyOeU1SudqvzD9COS4S5CNnHUuktxe9gtWpW4K1tU
	ONmV1DKvyMYfA5D2BmkdiguUcGr5x8DeZAgHu52FGNpzzpSY+9H2LSppkdJIO/Bm6p4o
	8CcWo+hsbSaYCrEI5DYwz+yEIelNtbqqHnK+RfpepBrCRrdH/DHgw//dpgMXvdMhoux/
	RJIA==
MIME-Version: 1.0
X-Received: by 10.112.13.101 with SMTP id g5mr2563668lbc.39.1395167484601;
	Tue, 18 Mar 2014 11:31:24 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 11:31:24 -0700 (PDT)
In-Reply-To: <1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<746485932.1415874.1395160687725.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
Date: Tue, 18 Mar 2014 22:01:24 +0330
Message-ID: <CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 18:31:29 -0000

On Tue, Mar 18, 2014 at 9:52 PM, Bob Peterson <rpeterso@redhat.com> wrote:
> ----- Original Message -----
>> Hi,
>>
>> Do you mean program likes this?
>>
>> for ((i = 17; i < 1756377984; ++i)); do
>>         ss=$(gfs2_edit -p $i blocktype /dev/sdc | cut -d " " -f 1);
>>         if [[ $ss -eq 4 ]]; then
>>                 gfs2_edit -p $i blockalloc 3 /dev/sdb >/dev/null 2>&1;
>>         fi
>> done
>>
>> I'm a C/C++ programmer, if you trust program logic, i would try
>> to implement with C/C++. and would public in reply.
>>
>> Regards.
>> Pine.
>
> Hi,
>
> Yes, you can do something like that, but again, do not include the
> journal's blocks. You can do gfs2_edit -p master /dev/sdc to
> determine the block of the quota file, which should be past the
> journals. Then use that value for the starting point of i.
> For example:
> # gfs2_edit -p master /dev/mpathc/scratch | grep quota
>    8/8 [6c1c0fed] 12/33132 (0xc/0x816c): File    quota
> for ((i = 33133; ...
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

Hi,

Output of this command on my system:

gfs2_edit -p master /dev/sdb | grep quota
     8. (8). 264950 (0x40af6): File    quota

Do you mean "i" would start from 264950?
All blocks before 264950 are journal blocks?

Regards
Pine.

From rpeterso@redhat.com Tue Mar 18 14:36:09 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IIa9r3028106 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 14:36:09 -0400
Received: from mx4-phx2.redhat.com (mx02.colomx.prod.int.phx2.redhat.com
	[10.5.7.2])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IIa8uh009488
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:36:08 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx4-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2IIa8j6029138
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:36:08 -0400
Date: Tue, 18 Mar 2014 14:36:08 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.12]
Thread-Topic: unformat gfs2
Thread-Index: j3RbWy6BloyFvAWIKesUDzOyX/rDkg==
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 18:36:09 -0000

----- Original Message -----
> Hi,
> 
> Output of this command on my system:
> 
> gfs2_edit -p master /dev/sdb | grep quota
>      8. (8). 264950 (0x40af6): File    quota
> 
> Do you mean "i" would start from 264950?
> All blocks before 264950 are journal blocks?
> 
> Regards
> Pine.

Yes, exactly. You could try that and see how well it works,
but again, it might take a very long time to do more than
3 trillion invocations of the program.

Regards,

Bob Peterson
Red Hat File Systems

From pine5514@gmail.com Tue Mar 18 14:42:52 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2IIgpQB009456 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 14:42:52 -0400
Received: from mx2.redhat.com (ext-mx01.extmail.prod.ext.rdu2.redhat.com
	[10.11.55.1])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2IIgpN8018294
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:42:51 -0400
Received: from mail-la0-f50.google.com (mail-la0-f50.google.com
	[209.85.215.50])
	by mx2.redhat.com (8.14.4/8.14.4) with ESMTP id s2IIgmGc001376
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 14:42:48 -0400
Received: by mail-la0-f50.google.com with SMTP id y1so5008997lam.23
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 11:42:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=mbkhOv1//TpwroNbYMScE80ouymuPAXfBrjfFlaPFYE=;
	b=dJdIjtOfNoXm9AAEMlITi3ipie8OD/0erIlsrOHA4aNOQcN2ceKJAoGUyp25tNobud
	aSqzrZyqiNFZ3XHLWC2CA5rYg5wLIlqWeJhIbu4cSw5mSxlMP7/AnGvwbGc22gEqSZCU
	ohesTgdhlcmsmbVqxUrWZnQUJt8vMjjL/luHZaME8tQJlPNpPtPtdO+9462qLcCg4ttd
	3yik9U02e+esILJC7xxhAKAGqWVwT9jn/a7KNoFJx2Pz9TcoyscHKeeHicu7HLqdKUfU
	sFf+g/34B955HMkkuXXvD8X9/4DS1kxDktXp9vaG4v6WBwFryk0w0pLsX5hJRHtRVUkV
	xevw==
MIME-Version: 1.0
X-Received: by 10.152.199.104 with SMTP id jj8mr3165lac.70.1395168167475; Tue,
	18 Mar 2014 11:42:47 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 11:42:47 -0700 (PDT)
In-Reply-To: <105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
Date: Tue, 18 Mar 2014 22:12:47 +0330
Message-ID: <CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.11.55.1
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Tue, 18 Mar 2014 18:42:52 -0000

Tnx alot,

I would run script and send back result.
Regards.
Pine.


On Tue, Mar 18, 2014 at 10:06 PM, Bob Peterson <rpeterso@redhat.com> wrote:
> ----- Original Message -----
>> Hi,
>>
>> Output of this command on my system:
>>
>> gfs2_edit -p master /dev/sdb | grep quota
>>      8. (8). 264950 (0x40af6): File    quota
>>
>> Do you mean "i" would start from 264950?
>> All blocks before 264950 are journal blocks?
>>
>> Regards
>> Pine.
>
> Yes, exactly. You could try that and see how well it works,
> but again, it might take a very long time to do more than
> 3 trillion invocations of the program.
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From lists@alteeve.ca Tue Mar 18 21:27:07 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2J1R7I5021502 for <linux-cluster@listman.util.phx.redhat.com>;
	Tue, 18 Mar 2014 21:27:07 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2J1R7rq018076
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 21:27:07 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2J1R54J001738
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 21:27:05 -0400
Received: from lemass.alteeve.ca (dhcp-108-168-20-202.cable.user.start.ca
	[108.168.20.202])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id A236F2012F
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 21:27:02 -0400 (EDT)
Message-ID: <5328F268.9080605@alteeve.ca>
Date: Tue, 18 Mar 2014 21:27:04 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Adding a stop timeout to a VM service using 'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 01:27:07 -0000

Hi all,

   I would like to tell rgmanager to give more time for VMs to stop. I 
want this:

<vm name="vm01-win2008" domain="primary_n01" autostart="0" 
path="/shared/definitions/" exclusive="0" recovery="restart" 
max_restarts="2" restart_expire_time="600">
   <action name="stop" timeout="10m" />
</vm>

I already use ccs to create the entry:

<vm name="vm01-win2008" domain="primary_n01" autostart="0" 
path="/shared/definitions/" exclusive="0" recovery="restart" 
max_restarts="2" restart_expire_time="600"/>

via:

ccs -h localhost --activate --sync --password "secret" \
  --addvm vm01-win2008 \
  --domain="primary_n01" \
  path="/shared/definitions/" \
  autostart="0" \
  exclusive="0" \
  recovery="restart" \
  max_restarts="2" \
  restart_expire_time="600"

I'm hoping it's a simple additional switch. :)

Thanks!

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From pine5514@gmail.com Wed Mar 19 02:23:17 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2J6NGcm030444 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 02:23:16 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2J6NGS3009763
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 02:23:16 -0400
Received: from mail-lb0-f172.google.com (mail-lb0-f172.google.com
	[209.85.217.172])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2J6NF34000604
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 02:23:15 -0400
Received: by mail-lb0-f172.google.com with SMTP id c11so5529067lbj.17
	for <linux-cluster@redhat.com>; Tue, 18 Mar 2014 23:23:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=iXuvu2cdRcli7fq776O4jZ9gyMALe+N5LG7tCtxpI5M=;
	b=ETWf+HuuRvBVMdyIADxjYP3hONnUkXA7UhAt9vBK9kql4BABjUn0V+q4SWaRe5ZHTZ
	dt9qUtBrPpEMDjmY+8d13cka2gUmQLJP1WcygYvEaT1GEP40s6WL+ay0XgALl2Usxb7p
	lKsZw24wf1QJx1S3s957nqOon0oTMEyhslFXDk+SzB8C6DPlUuVKgG9x/z3SzWBokS7u
	lt3bENZ9/7EhYvilEEvEiV4iYcPUxXLUZNFbzFiitLzGQ7KGvBgyRe6YUrr+YcfN6ZQC
	uKQkG88Y+0Txo4nDl4ZtVrrAuXklIw1yZud06yBD2SMivo6jtCgYZI68ExeLPR8OsxjR
	HJAQ==
MIME-Version: 1.0
X-Received: by 10.152.21.137 with SMTP id v9mr36156lae.44.1395210194779; Tue,
	18 Mar 2014 23:23:14 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Tue, 18 Mar 2014 23:23:14 -0700 (PDT)
In-Reply-To: <CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<CAJ7bT7WJwLPyemRWbtJ9og6KdZOFk4u_Bw2cSy20hCRRdfBegw@mail.gmail.com>
	<1619187131.1466288.1395163844339.JavaMail.zimbra@redhat.com>
	<CAJ7bT7U6bhi92-BT6nCtuAYnm8+p45nFoC+ZM3Bj7izZNdLsvA@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
Date: Wed, 19 Mar 2014 10:53:14 +0430
Message-ID: <CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 06:23:17 -0000

On Tue, Mar 18, 2014 at 11:12 PM, Mr.Pine <pine5514@gmail.com> wrote:
> Tnx alot,
>
> I would run script and send back result.
> Regards.
> Pine.
>
>
Hi,

Scripts is very very slow, so i should write program in c/c++.

I need some confidence about data structures and data location on disk.
As i reviewed blocks of data:

All reserved blocks (GFS2 specific blocks) start by : 0x01161970
Blocktype store location is at Byte # 8,
Type of start block of each resource group is: 2
Bitmaps are in block types 2 & 3.
In block type 2, bitmap info starts from Byte # 129
In block type 3, bitmap info starts from Byte # 25
Length of RGs are const, 5 in my volume (out put of gfs2_edit -p rindex /dev/..)

Is this info right?

Logic of my program seams should be like this:

(1)
Loop in device and temporary store block id of dinode blocks, and also
their bitmap locations

(2)
Change bitmap of blocks to 3 (11)

Bob, could you confirm this?

Regards
Pine.

From rpeterso@redhat.com Wed Mar 19 08:28:39 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JCSdC6019840 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 08:28:39 -0400
Received: from mx3-phx2.redhat.com (mx01.colomx.prod.int.phx2.redhat.com
	[10.5.7.1])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2JCSdZm005762
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 08:28:39 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx3-phx2.redhat.com (8.13.8/8.13.8) with ESMTP id s2JCSdsD021248
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 08:28:39 -0400
Date: Wed, 19 Mar 2014 08:28:38 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <518413955.1970349.1395232118989.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
	<CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.12]
Thread-Topic: unformat gfs2
Thread-Index: fgbUknbzswM4umgKw3FNu/jqWnFNFg==
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 12:28:40 -0000

----- Original Message -----
> Hi,
> 
> Scripts is very very slow, so i should write program in c/c++.
> 
> I need some confidence about data structures and data location on disk.
> As i reviewed blocks of data:
> 
> All reserved blocks (GFS2 specific blocks) start by : 0x01161970
> Blocktype store location is at Byte # 8,
> Type of start block of each resource group is: 2
> Bitmaps are in block types 2 & 3.
> In block type 2, bitmap info starts from Byte # 129
> In block type 3, bitmap info starts from Byte # 25
> Length of RGs are const, 5 in my volume (out put of gfs2_edit -p rindex
> /dev/..)
> 
> Is this info right?
> 
> Logic of my program seams should be like this:
> 
> (1)
> Loop in device and temporary store block id of dinode blocks, and also
> their bitmap locations
> 
> (2)
> Change bitmap of blocks to 3 (11)
> 
> Bob, could you confirm this?
> 
> Regards
> Pine.

Hi Pine,

This is correct. The length of RGs is properly determined by the values
in the "rindex" system file, but 5 is very common, and is usually constant.
(It may change if you used gfs2_grow or gfs2_convert from gfs1).
The bitmap is 2 bits per block in the resource group, and it's relative
to the start of the particular rgrp. You should probably use the same
algorithm in libgfs2 to change the proper bit in the bitmaps. You can
get this from the public gfs2-utils git tree.

Regards,

Bob Peterson
Red Hat File Systems

From mgrac@redhat.com Wed Mar 19 10:37:52 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JEbq6t007037 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 10:37:52 -0400
Received: from [10.34.131.208] (dhcp131-208.brq.redhat.com [10.34.131.208])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JEbodn011264; Wed, 19 Mar 2014 10:37:51 -0400
Message-ID: <5329ABBE.70304@redhat.com>
Date: Wed, 19 Mar 2014 15:37:50 +0100
From: Marek Grac <mgrac@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: David Smith <dsmith@mypchelp.com>,
	linux clustering <linux-cluster@redhat.com>
References: <CAMKtzE9pjic-cXah9_wKbEhxVmcQj+K4fH88voSdfKP4dPjLfw@mail.gmail.com>
In-Reply-To: <CAMKtzE9pjic-cXah9_wKbEhxVmcQj+K4fH88voSdfKP4dPjLfw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] joining the gitfence-agents group
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 14:37:52 -0000

On 03/18/2014 12:20 AM, David Smith wrote:
> any chance you can sponsor and approve so i can submit the code via git?
>
> or, if you prefer, I can send you the code modifications.
>
Hi,

sorry for late response,

The write access to git repository is still limited to very small group 
of people and I will be happy to add you there after you become regular 
contributor. Currently, please send a patch to cluster-devel@redhat.com 
where code review will be done. After that review, we will add your code 
into upstream using git-am so you will be preserved as author.

m,

From ajb2@mssl.ucl.ac.uk Wed Mar 19 11:17:14 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JFHEKG021281 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 11:17:14 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2JFHE7L003452
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 11:17:14 -0400
Received: from msslaw.mssl.ucl.ac.uk (msslaw.mssl.ucl.ac.uk [128.40.71.165])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2JFHBJx016656
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 11:17:12 -0400
Received: from mssle5.mssl.ucl.ac.uk (mssle5.mssl.ucl.ac.uk [128.40.73.30])
	(authenticated bits=0)
	by msslaw.mssl.ucl.ac.uk (8.13.8/8.13.8) with ESMTP id s2JFGvuS006484
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES128-SHA bits=128 verify=NO)
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 15:16:57 GMT
Message-ID: <5329B4E9.9070400@site.mssl.ucl.ac.uk>
Date: Wed, 19 Mar 2014 15:16:57 +0000
From: Alan Brown <ajb2@mssl.ucl.ac.uk>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
In-Reply-To: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-MSSL-MailScanner-Information: Please contact the ISP for more information
X-MSSL-MailScanner-ID: s2JFGvuS006484
X-MSSL-MailScanner: No virus found
X-MSSL-MailScanner-SpamCheck: not spam, SpamAssassin (not cached,
	score=-2.91, required 6, autolearn=not spam, ALL_TRUSTED -1.00,
	BAYES_00 -1.90, T_RP_MATCHES_RCVD -0.01)
X-MSSL-MailScanner-From: ajb2@site.mssl.ucl.ac.uk
X-Spam-Status: No
X-RedHat-Spam-Score: -4.11  (BAYES_00, DCC_REPUT_70_89, RCVD_IN_DNSWL_MED,
	T_RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 15:17:14 -0000

On 18/03/14 13:38, Mr.Pine wrote:
> I have accidentally reformatted a GFS cluster.
> We need to unformat it.. is there any way to recover disk ?

Backups?





From Mark.Vallevand@UNISYS.com Wed Mar 19 15:55:51 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JJtpNd001553 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 15:55:51 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2JJto2f010541
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 15:55:51 -0400
Received: from mail1.bemta7.messagelabs.com (mail1.bemta7.messagelabs.com
	[216.82.254.113])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2JJtm3b012314
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 15:55:48 -0400
Received: from [216.82.254.195:36031] by server-17.bemta-7.messagelabs.com id
	B8/EE-07464-446F9235; Wed, 19 Mar 2014 19:55:48 +0000
X-Env-Sender: Mark.Vallevand@UNISYS.com
X-Msg-Ref: server-14.tower-200.messagelabs.com!1395258920!12351865!13
X-Originating-IP: [192.61.61.105]
X-StarScan-Received: 
X-StarScan-Version: 6.11.1; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 3335 invoked from network); 19 Mar 2014 19:55:45 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
	by server-14.tower-200.messagelabs.com with RC4-SHA encrypted SMTP;
	19 Mar 2014 19:55:45 -0000
Received: from usea-nahubcas3.na.uis.unisys.com (129.224.76.101) by
	USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server
	(TLS) id 8.3.327.1; Wed, 19 Mar 2014 14:55:45 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
	usea-nahubcas3.na.uis.unisys.com ([129.224.76.101]) with mapi;
	Wed, 19 Mar 2014 14:55:45 -0500
From: "Vallevand, Mark K" <Mark.Vallevand@UNISYS.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Wed, 19 Mar 2014 14:55:44 -0500
Thread-Topic: Resource instance is getting restarted when a node is rebooted
Thread-Index: Ac9DrTaKMg/UoVGfTYmsL64yM9erkw==
Message-ID: <99C8B2929B39C24493377AC7A121E21FC5E11149A7@USEA-EXCH8.na.uis.unisys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_99C8B2929B39C24493377AC7A121E21FC5E11149A7USEAEXCH8naui_"
MIME-Version: 1.0
X-RedHat-Spam-Score: -2.008  (BAYES_00, DCC_REPUT_13_19, HTML_MESSAGE,
	RCVD_IN_DNSWL_NONE, SPF_PASS, UNPARSEABLE_RELAY, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] Resource instance is getting restarted when a node
	is rebooted
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 19:55:51 -0000

--_000_99C8B2929B39C24493377AC7A121E21FC5E11149A7USEAEXCH8naui_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm testing my cluster configuration by rebooting nodes to see what happens=
.  I can't explain what I see in some cases.

The setup:  I have a cloned resource with its own agent and an IP address r=
esource that is collocated with the cloned resource.  The IP address doesn'=
t need to run on all of the nodes running an instance of the cloned resourc=
e.  It just needs to be on one of the nodes.  It's not cloned or meant to b=
e load-balanced.

I do something like this:
crm -F configure <<EOF
                                        primitive IP ocf:heartbeat:IPaddr2 =
\
                                                params ip=3D10.1.1.1 nic=3D=
eth0 cidr_netmask=3D24 \
                                                op monitor interval=3D30s t=
imeout=3D20s \
                                                op start timeout=3D30s \
                                                op stop timeout=3D30s
                                        primitive P ocf:heartbeat:my_agent =
\
                                                op monitor interval=3D30s t=
imeout=3D10s \
                                                op start timeout=3D30s \
                                                op stop timeout=3D30s
                                        clone P_clone P \
                                                meta clone-max=3D2 notify=
=3D"true" clone-node-max=3D1
                                        colocation P_withIP INFINITY: IP P_=
clone
                                        order P_AfterIP INFINITY: IP P_clon=
e
                                        commit
                                        exit
EOF

This works great.  In my 2 node system, node1 has IP and P:0 on it, node2 h=
as P:1 on it, and node3 has nothing on it.
Reboot node2.  I see P:1 start on node3.  Good.
Reboot node3.  I see P:1 start on node2.  Good.
Reboot node1.  I see P:0 and IP start on node3.  Good.  And I see P:1 resta=
rt on node2.
What's up with that?
Have I done my collocation incorrectly?  If I reboot the node that has the =
IP resource on it, all instances of P_clone move or restart.

Any ideas are very welcome.

Regards.
Mark K Vallevand   Mark.Vallevand@Unisys.com<mailto:Mark.Vallevand@Unisys.c=
om>
May you live in interesting times, may you come to the attention of importa=
nt people and may all your wishes come true.
THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


--_000_99C8B2929B39C24493377AC7A121E21FC5E11149A7USEAEXCH8naui_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40"><head><meta http-equiv=3DContent-Type content=
=3D"text/html; charset=3Dus-ascii"><meta name=3DGenerator content=3D"Micros=
oft Word 12 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue vli=
nk=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal>I&#8217;m testin=
g my cluster configuration by rebooting nodes to see what happens.&nbsp; I =
can&#8217;t explain what I see in some cases.<o:p></o:p></p><p class=3DMsoN=
ormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>The setup:&nbsp; I have a c=
loned resource with its own agent and an IP address resource that is colloc=
ated with the cloned resource.&nbsp; The IP address doesn&#8217;t need to r=
un on all of the nodes running an instance of the cloned resource.&nbsp; It=
 just needs to be on one of the nodes.&nbsp; It&#8217;s not cloned or meant=
 to be load-balanced.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p><=
/p><p class=3DMsoNormal>I do something like this:<o:p></o:p></p><p class=3D=
MsoNormal>crm -F configure &lt;&lt;EOF <o:p></o:p></p><p class=3DMsoNormal>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;primitive IP ocf:heartbeat:IPaddr2 \<o:p></o:p></p><p class=
=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; para=
ms ip=3D10.1.1.1 nic=3Deth0 cidr_netmask=3D24 \<o:p></o:p></p><p class=3DMs=
oNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op monito=
r interval=3D30s timeout=3D20s \<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op start timeout=3D30s \=
<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; op stop timeout=3D30s <o:p></o:p></p><p class=3DMsoNorma=
l>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;primitive P ocf:heartbeat:my_agent \<o:p></o:p></p><p clas=
s=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op =
monitor interval=3D30s timeout=3D10s \<o:p></o:p></p><p class=3DMsoNormal>&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;op start timeout=
=3D30s \<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp; op stop timeout=3D30s<o:p></o:p></p><p class=3DM=
soNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; clone P_clone P \<o:p></o:p></p><p class=3DMsoNormal>&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; meta clone-max=3D2 n=
otify=3D&quot;true&quot; clone-node-max=3D1<o:p></o:p></p><p class=3DMsoNor=
mal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp; colocation P_withIP INFINITY: IP P_clone<o:p></o:p></p><p cla=
ss=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp; order P_AfterIP INFINITY: IP P_clone <o:p></o:p></=
p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commit<o:p></o:p></p><p class=3DMsoNo=
rmal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; exit<o:p></o:p></p><p class=3DMsoNormal>EOF<o:p></o:p></p><p=
 class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>This works gre=
at.&nbsp; In my 2 node system, node1 has IP and P:0 on it, node2 has P:1 on=
 it, and node3 has nothing on it.<o:p></o:p></p><p class=3DMsoNormal>Reboot=
 node2.&nbsp; I see P:1 start on node3.&nbsp; Good.<o:p></o:p></p><p class=
=3DMsoNormal>Reboot node3.&nbsp; I see P:1 start on node2.&nbsp; Good.<o:p>=
</o:p></p><p class=3DMsoNormal>Reboot node1. &nbsp;I see P:0 and IP start o=
n node3. &nbsp;Good. &nbsp;And I see P:1 restart on node2.&nbsp; <o:p></o:p=
></p><p class=3DMsoNormal>What&#8217;s up with that?<o:p></o:p></p><p class=
=3DMsoNormal>Have I done my collocation incorrectly?&nbsp; If I reboot the =
node that has the IP resource on it, all instances of P_clone move or resta=
rt.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoN=
ormal>Any ideas are very welcome.<o:p></o:p></p><p class=3DMsoNormal><o:p>&=
nbsp;</o:p></p><p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-ma=
rgin-bottom-alt:auto'><span style=3D'font-size:10.0pt;font-family:"Arial","=
sans-serif";color:black'>Regards.</span><span style=3D'font-size:12.0pt;fon=
t-family:"Times New Roman","serif"'><br></span><span style=3D'font-size:10.=
0pt;font-family:"Arial","sans-serif";color:black'>Mark K Vallevand&nbsp;&nb=
sp; <a href=3D"mailto:Mark.Vallevand@Unisys.com"><span style=3D'color:blue'=
>Mark.Vallevand@Unisys.com</span></a></span><span style=3D'font-size:12.0pt=
;font-family:"Times New Roman","serif"'><o:p></o:p></span></p><p class=3DMs=
oNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span =
style=3D'font-size:12.0pt;font-family:"Times New Roman","serif"'>May you li=
ve in interesting times, may you come to the attention of important people =
and may all your wishes come true.<o:p></o:p></span></p><p class=3DMsoNorma=
l style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span style=
=3D'font-size:10.0pt;font-family:"Times New Roman","serif"'>THIS COMMUNICAT=
ION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and is t=
hus for use only by the intended recipient. If you received this in error, =
please contact the sender and delete the e-mail and its attachments from al=
l computers.</span><span style=3D'font-size:12.0pt;font-family:"Times New R=
oman","serif"'><o:p></o:p></span></p><p class=3DMsoNormal><o:p>&nbsp;</o:p>=
</p></div></body></html>=

--_000_99C8B2929B39C24493377AC7A121E21FC5E11149A7USEAEXCH8naui_--

From Mark.Vallevand@UNISYS.com Wed Mar 19 16:52:48 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JKqmon003507 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 16:52:48 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2JKql4l012178
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 16:52:48 -0400
Received: from mail1.bemta8.messagelabs.com (mail1.bemta8.messagelabs.com
	[216.82.243.205])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2JKqhuW026796
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 16:52:43 -0400
Received: from [216.82.241.196:31689] by server-13.bemta-8.messagelabs.com id
	60/65-20975-A930A235; Wed, 19 Mar 2014 20:52:42 +0000
X-Env-Sender: Mark.Vallevand@UNISYS.com
X-Msg-Ref: server-9.tower-46.messagelabs.com!1395262361!28227454!1
X-Originating-IP: [192.61.61.105]
X-StarScan-Received: 
X-StarScan-Version: 6.11.1; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 13132 invoked from network); 19 Mar 2014 20:52:42 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
	by server-9.tower-46.messagelabs.com with RC4-SHA encrypted SMTP;
	19 Mar 2014 20:52:42 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
	USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server
	(TLS) id 8.3.327.1; Wed, 19 Mar 2014 15:52:41 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
	usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi;
	Wed, 19 Mar 2014 15:52:41 -0500
From: "Vallevand, Mark K" <Mark.Vallevand@UNISYS.com>
To: linux clustering <linux-cluster@redhat.com>
Date: Wed, 19 Mar 2014 15:52:40 -0500
Thread-Topic: [Linux-cluster] Resource instance is getting restarted when a
	node	is rebooted
Thread-Index: Ac9DrTaKMg/UoVGfTYmsL64yM9erkwAB6Chw
Message-ID: <99C8B2929B39C24493377AC7A121E21FC5E1114AF9@USEA-EXCH8.na.uis.unisys.com>
References: <99C8B2929B39C24493377AC7A121E21FC5E11149A7@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FC5E11149A7@USEA-EXCH8.na.uis.unisys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_99C8B2929B39C24493377AC7A121E21FC5E1114AF9USEAEXCH8naui_"
MIME-Version: 1.0
X-RedHat-Spam-Score: -2.008  (BAYES_00, DCC_REPUT_13_19, HTML_MESSAGE,
	RCVD_IN_DNSWL_NONE, SPF_PASS, UNPARSEABLE_RELAY, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Resource instance is getting restarted when a
 node	is rebooted
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 20:52:48 -0000

--_000_99C8B2929B39C24493377AC7A121E21FC5E1114AF9USEAEXCH8naui_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Never mind.  It's like one of Murphy's Laws, or at least a Murphy's Corolla=
ry.
As soon as you ask for help and describe a problem in some detail, the answ=
er becomes obvious.
It's the order command.  Duh.

Regards.
Mark K Vallevand   Mark.Vallevand@Unisys.com<mailto:Mark.Vallevand@Unisys.c=
om>
May you live in interesting times, may you come to the attention of importa=
nt people and may all your wishes come true.
THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.

From: linux-cluster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat=
.com] On Behalf Of Vallevand, Mark K
Sent: Wednesday, March 19, 2014 02:56 PM
To: linux clustering
Subject: [Linux-cluster] Resource instance is getting restarted when a node=
 is rebooted

I'm testing my cluster configuration by rebooting nodes to see what happens=
.  I can't explain what I see in some cases.

The setup:  I have a cloned resource with its own agent and an IP address r=
esource that is collocated with the cloned resource.  The IP address doesn'=
t need to run on all of the nodes running an instance of the cloned resourc=
e.  It just needs to be on one of the nodes.  It's not cloned or meant to b=
e load-balanced.

I do something like this:
crm -F configure <<EOF
                                        primitive IP ocf:heartbeat:IPaddr2 =
\
                                                params ip=3D10.1.1.1 nic=3D=
eth0 cidr_netmask=3D24 \
                                                op monitor interval=3D30s t=
imeout=3D20s \
                                                op start timeout=3D30s \
                                                op stop timeout=3D30s
                                        primitive P ocf:heartbeat:my_agent =
\
                                                op monitor interval=3D30s t=
imeout=3D10s \
                                                op start timeout=3D30s \
                                                op stop timeout=3D30s
                                        clone P_clone P \
                                                meta clone-max=3D2 notify=
=3D"true" clone-node-max=3D1
                                        colocation P_withIP INFINITY: IP P_=
clone
                                        order P_AfterIP INFINITY: IP P_clon=
e
                                        commit
                                        exit
EOF

This works great.  In my 2 node system, node1 has IP and P:0 on it, node2 h=
as P:1 on it, and node3 has nothing on it.
Reboot node2.  I see P:1 start on node3.  Good.
Reboot node3.  I see P:1 start on node2.  Good.
Reboot node1.  I see P:0 and IP start on node3.  Good.  And I see P:1 resta=
rt on node2.
What's up with that?
Have I done my collocation incorrectly?  If I reboot the node that has the =
IP resource on it, all instances of P_clone move or restart.

Any ideas are very welcome.

Regards.
Mark K Vallevand   Mark.Vallevand@Unisys.com<mailto:Mark.Vallevand@Unisys.c=
om>
May you live in interesting times, may you come to the attention of importa=
nt people and may all your wishes come true.
THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


--_000_99C8B2929B39C24493377AC7A121E21FC5E1114AF9USEAEXCH8naui_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" xmlns:o=3D"urn:schemas-micr=
osoft-com:office:office" xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" xmlns=3D"http:=
//www.w3.org/TR/REC-html40"><head><meta http-equiv=3DContent-Type content=
=3D"text/html; charset=3Dus-ascii"><meta name=3DGenerator content=3D"Micros=
oft Word 12 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue vli=
nk=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span style=3D'c=
olor:#1F497D'>Never mind.&nbsp; It&#8217;s like one of Murphy&#8217;s Laws,=
 or at least a Murphy&#8217;s Corollary.<o:p></o:p></span></p><p class=3DMs=
oNormal><span style=3D'color:#1F497D'>As soon as you ask for help and descr=
ibe a problem in some detail, the answer becomes obvious.<o:p></o:p></span>=
</p><p class=3DMsoNormal><span style=3D'color:#1F497D'>It&#8217;s the order=
 command.&nbsp; Duh.<o:p></o:p></span></p><p class=3DMsoNormal><span style=
=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><div><p class=3DMsoNormal st=
yle=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span style=3D'f=
ont-size:10.0pt;font-family:"Arial","sans-serif";color:black'>Regards.</spa=
n><span style=3D'font-size:12.0pt;font-family:"Times New Roman","serif";col=
or:#1F497D'><br></span><span style=3D'font-size:10.0pt;font-family:"Arial",=
"sans-serif";color:black'>Mark K Vallevand&nbsp;&nbsp; <a href=3D"mailto:Ma=
rk.Vallevand@Unisys.com">Mark.Vallevand@Unisys.com</a></span><span style=3D=
'font-size:12.0pt;font-family:"Times New Roman","serif";color:#1F497D'><o:p=
></o:p></span></p><p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso=
-margin-bottom-alt:auto'><span style=3D'font-size:12.0pt;font-family:"Times=
 New Roman","serif";color:#1F497D'>May you live in interesting times, may y=
ou come to the attention of important people and may all your wishes come t=
rue.<o:p></o:p></span></p><p class=3DMsoNormal style=3D'mso-margin-top-alt:=
auto;mso-margin-bottom-alt:auto'><span style=3D'font-size:10.0pt;font-famil=
y:"Times New Roman","serif";color:#1F497D'>THIS COMMUNICATION MAY CONTAIN C=
ONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and is thus for use only =
by the intended recipient. If you received this in error, please contact th=
e sender and delete the e-mail and its attachments from all computers.</spa=
n><span style=3D'font-size:12.0pt;font-family:"Times New Roman","serif";col=
or:#1F497D'><o:p></o:p></span></p></div><p class=3DMsoNormal><span style=3D=
'color:#1F497D'><o:p>&nbsp;</o:p></span></p><div><div style=3D'border:none;=
border-top:solid #B5C4DF 1.0pt;padding:3.0pt 0in 0in 0in'><p class=3DMsoNor=
mal><b><span style=3D'font-size:10.0pt;font-family:"Tahoma","sans-serif"'>F=
rom:</span></b><span style=3D'font-size:10.0pt;font-family:"Tahoma","sans-s=
erif"'> linux-cluster-bounces@redhat.com [mailto:linux-cluster-bounces@redh=
at.com] <b>On Behalf Of </b>Vallevand, Mark K<br><b>Sent:</b> Wednesday, Ma=
rch 19, 2014 02:56 PM<br><b>To:</b> linux clustering<br><b>Subject:</b> [Li=
nux-cluster] Resource instance is getting restarted when a node is rebooted=
<o:p></o:p></span></p></div></div><p class=3DMsoNormal><o:p>&nbsp;</o:p></p=
><p class=3DMsoNormal>I&#8217;m testing my cluster configuration by rebooti=
ng nodes to see what happens.&nbsp; I can&#8217;t explain what I see in som=
e cases.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=
=3DMsoNormal>The setup:&nbsp; I have a cloned resource with its own agent a=
nd an IP address resource that is collocated with the cloned resource.&nbsp=
; The IP address doesn&#8217;t need to run on all of the nodes running an i=
nstance of the cloned resource.&nbsp; It just needs to be on one of the nod=
es.&nbsp; It&#8217;s not cloned or meant to be load-balanced.<o:p></o:p></p=
><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>I do someth=
ing like this:<o:p></o:p></p><p class=3DMsoNormal>crm -F configure &lt;&lt;=
EOF <o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primitive IP ocf:hea=
rtbeat:IPaddr2 \<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; params ip=3D10.1.1.1 nic=3Deth0 cidr_net=
mask=3D24 \<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op monitor interval=3D30s timeout=3D20s \<o:p=
></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp; op start timeout=3D30s \<o:p></o:p></p><p class=3DMsoNormal>=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op stop timeout=
=3D30s <o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;primitive P ocf:h=
eartbeat:my_agent \<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op monitor interval=3D30s timeout=3D1=
0s \<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;op start timeout=3D30s \<o:p></o:p></p><p class=3DMs=
oNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; op stop t=
imeout=3D30s<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clone P_clone P \=
<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp; meta clone-max=3D2 notify=3D&quot;true&quot; clone-node-=
max=3D1<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; colocation P_withIP IN=
FINITY: IP P_clone<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nb=
sp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; order P_Aft=
erIP INFINITY: IP P_clone <o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;commit<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; exit<o:p></o:p></p><p=
 class=3DMsoNormal>EOF<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p>=
</p><p class=3DMsoNormal>This works great.&nbsp; In my 2 node system, node1=
 has IP and P:0 on it, node2 has P:1 on it, and node3 has nothing on it.<o:=
p></o:p></p><p class=3DMsoNormal>Reboot node2.&nbsp; I see P:1 start on nod=
e3.&nbsp; Good.<o:p></o:p></p><p class=3DMsoNormal>Reboot node3.&nbsp; I se=
e P:1 start on node2.&nbsp; Good.<o:p></o:p></p><p class=3DMsoNormal>Reboot=
 node1. &nbsp;I see P:0 and IP start on node3. &nbsp;Good. &nbsp;And I see =
P:1 restart on node2.&nbsp; <o:p></o:p></p><p class=3DMsoNormal>What&#8217;=
s up with that?<o:p></o:p></p><p class=3DMsoNormal>Have I done my collocati=
on incorrectly?&nbsp; If I reboot the node that has the IP resource on it, =
all instances of P_clone move or restart.<o:p></o:p></p><p class=3DMsoNorma=
l><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Any ideas are very welcome.<o:p=
></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal s=
tyle=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span style=3D'=
font-size:10.0pt;font-family:"Arial","sans-serif";color:black'>Regards.</sp=
an><span style=3D'font-size:12.0pt;font-family:"Times New Roman","serif"'><=
br></span><span style=3D'font-size:10.0pt;font-family:"Arial","sans-serif";=
color:black'>Mark K Vallevand&nbsp;&nbsp; <a href=3D"mailto:Mark.Vallevand@=
Unisys.com">Mark.Vallevand@Unisys.com</a></span><span style=3D'font-size:12=
.0pt;font-family:"Times New Roman","serif"'><o:p></o:p></span></p><p class=
=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><=
span style=3D'font-size:12.0pt;font-family:"Times New Roman","serif"'>May y=
ou live in interesting times, may you come to the attention of important pe=
ople and may all your wishes come true.<o:p></o:p></span></p><p class=3DMso=
Normal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'><span s=
tyle=3D'font-size:10.0pt;font-family:"Times New Roman","serif"'>THIS COMMUN=
ICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and =
is thus for use only by the intended recipient. If you received this in err=
or, please contact the sender and delete the e-mail and its attachments fro=
m all computers.</span><span style=3D'font-size:12.0pt;font-family:"Times N=
ew Roman","serif"'><o:p></o:p></span></p><p class=3DMsoNormal><o:p>&nbsp;</=
o:p></p></div></body></html>=

--_000_99C8B2929B39C24493377AC7A121E21FC5E1114AF9USEAEXCH8naui_--

From cfeist@redhat.com Wed Mar 19 18:31:21 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JMVLCR020521 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 18:31:21 -0400
Received: from [10.15.80.79] (gold.msp.redhat.com [10.15.80.79])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2JMVKtq017569; Wed, 19 Mar 2014 18:31:20 -0400
Message-ID: <532A1AB8.307@redhat.com>
Date: Wed, 19 Mar 2014 17:31:20 -0500
From: Chris Feist <cfeist@redhat.com>
Organization: Red Hat, Inc.
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux-cluster@redhat.com, digimer@alteeve.ca
References: <5328F268.9080605@alteeve.ca>
In-Reply-To: <5328F268.9080605@alteeve.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 22:31:21 -0000

On 03/18/2014 08:27 PM, Digimer wrote:
> Hi all,
>
>    I would like to tell rgmanager to give more time for VMs to stop. I want this:
>
> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
> path="/shared/definitions/" exclusive="0" recovery="restart" max_restarts="2"
> restart_expire_time="600">
>    <action name="stop" timeout="10m" />
> </vm>
>
> I already use ccs to create the entry:
>
> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
> path="/shared/definitions/" exclusive="0" recovery="restart" max_restarts="2"
> restart_expire_time="600"/>
>
> via:
>
> ccs -h localhost --activate --sync --password "secret" \
>   --addvm vm01-win2008 \
>   --domain="primary_n01" \
>   path="/shared/definitions/" \
>   autostart="0" \
>   exclusive="0" \
>   recovery="restart" \
>   max_restarts="2" \
>   restart_expire_time="600"
>
> I'm hoping it's a simple additional switch. :)

Unfortunately currently ccs doesn't support setting resource actions.  However 
it's my understanding that rgmanager doesn't check timeouts unless 
__enforce_timeouts is set to "1".  So you shouldn't be seeing a vm resource go 
to failed if it takes a long time to stop.  Are you trying to make the vm 
resource fail if it takes longer than 10 minutes to stop?

>
> Thanks!
>

From lists@alteeve.ca Wed Mar 19 19:46:08 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2JNk8uG000876 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 19:46:08 -0400
Received: from mx2.redhat.com (ext-mx01.extmail.prod.ext.rdu2.redhat.com
	[10.11.55.1])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2JNk6Cs013432; Wed, 19 Mar 2014 19:46:07 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx2.redhat.com (8.14.4/8.14.4) with ESMTP id s2JNjwiQ031507;
	Wed, 19 Mar 2014 19:45:58 -0400
Received: from lemass.alteeve.ca (dhcp-108-168-20-202.cable.user.start.ca
	[108.168.20.202])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id CC650200E0;
	Wed, 19 Mar 2014 19:45:54 -0400 (EDT)
Message-ID: <532A2C34.3080903@alteeve.ca>
Date: Wed, 19 Mar 2014 19:45:56 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>,
	Chris Feist <cfeist@redhat.com>
References: <5328F268.9080605@alteeve.ca> <532A1AB8.307@redhat.com>
In-Reply-To: <532A1AB8.307@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.11.55.1
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Wed, 19 Mar 2014 23:46:08 -0000

On 19/03/14 06:31 PM, Chris Feist wrote:
> On 03/18/2014 08:27 PM, Digimer wrote:
>> Hi all,
>>
>>    I would like to tell rgmanager to give more time for VMs to stop. I
>> want this:
>>
>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>> path="/shared/definitions/" exclusive="0" recovery="restart"
>> max_restarts="2"
>> restart_expire_time="600">
>>    <action name="stop" timeout="10m" />
>> </vm>
>>
>> I already use ccs to create the entry:
>>
>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>> path="/shared/definitions/" exclusive="0" recovery="restart"
>> max_restarts="2"
>> restart_expire_time="600"/>
>>
>> via:
>>
>> ccs -h localhost --activate --sync --password "secret" \
>>   --addvm vm01-win2008 \
>>   --domain="primary_n01" \
>>   path="/shared/definitions/" \
>>   autostart="0" \
>>   exclusive="0" \
>>   recovery="restart" \
>>   max_restarts="2" \
>>   restart_expire_time="600"
>>
>> I'm hoping it's a simple additional switch. :)
>
> Unfortunately currently ccs doesn't support setting resource actions.
> However it's my understanding that rgmanager doesn't check timeouts
> unless __enforce_timeouts is set to "1".  So you shouldn't be seeing a
> vm resource go to failed if it takes a long time to stop.  Are you
> trying to make the vm resource fail if it takes longer than 10 minutes
> to stop?

I was afraid you were going to say that. :(

The problem is that after calling 'disable' against the VM service, 
rgmanager waits two minutes. If the service isn't closed in that time, 
the server is forced off (at least, this was the behaviour when I last 
tested this).

The concern is that, by default, windows installs queue updates to 
install when the system shuts down. During this time, windows makes it 
very clear that you should not power off the system during the updates. 
So if this timer is hit, and the VM is forced off, the guest OS can be 
damaged.

Of course, we can debate the (lack of) wisdom of this behaviour, and I 
already document this concern (and even warn people to check for updates 
before stopping the server), it's not sufficient. If a user doesn't read 
the warning, or simply forgets to check, the consequences can be 
non-trivial.

If ccs can't be made to add this attribute, and if the behaviour 
persists (I will test shortly after sending this reply), then I will 
have to edit the cluster.conf directly, something I am loath to do if at 
all avoidable.

Cheers

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From esanchezvela@gmail.com Wed Mar 19 21:13:45 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2K1DjFo008964 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 21:13:45 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2K1DjUM013676
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 21:13:45 -0400
Received: from mail-pb0-f41.google.com (mail-pb0-f41.google.com
	[209.85.160.41])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2K1DhM7022372
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 21:13:43 -0400
Received: by mail-pb0-f41.google.com with SMTP id jt11so152829pbb.28
	for <linux-cluster@redhat.com>; Wed, 19 Mar 2014 18:13:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:sender:in-reply-to:references:date:message-id:subject
	:from:to:content-type;
	bh=3n/8ZRLzwNDUSutNwFx3oxe4/mBFYjzyFb+4GdIxHgg=;
	b=OPx9UymEqiHUr7PpNgbX9w6HiSZPfSiGas70FMkx4EG9S9JGwf/o6nFD3LUWDr12QT
	tqkSr6WoBv3+TF3k0muCn38l+LaN+1PSp3EiOIywiI460MItXQxoPUG7Cx2baZJ7a/Hj
	ELRXIDPDgmtbenw76hcO0FWj6AiX3y+2ZwnDIUWBOTDk4YdlMLKlPbJB/lAKeKtmHRON
	sLDBCzSomLaLgrskJ8Oe+2NiY6xbbtvXMuRaFz3yDKZ6hOdqJ7NOxMyX1d85lgs9nE/u
	B4l+CsFeaBdwyJfjFS1e4NpmJ3Sgm799TR5VfjLNyATOD8KI/OZetxSiShrfPWbSMsWL
	R7Dw==
MIME-Version: 1.0
X-Received: by 10.69.1.69 with SMTP id be5mr42872604pbd.126.1395278023555;
	Wed, 19 Mar 2014 18:13:43 -0700 (PDT)
Sender: esanchezvela@gmail.com
Received: by 10.68.32.3 with HTTP; Wed, 19 Mar 2014 18:13:43 -0700 (PDT)
In-Reply-To: <CADYQ591QvSaCzAyc-OSrTzHGd-QC_qk57z-+7hczbR8PZkHOjg@mail.gmail.com>
References: <CADYQ591QvSaCzAyc-OSrTzHGd-QC_qk57z-+7hczbR8PZkHOjg@mail.gmail.com>
Date: Wed, 19 Mar 2014 21:13:43 -0400
X-Google-Sender-Auth: BclQd4pz_Em4l5mrNxZchob14e4
Message-ID: <CAGH+ktiH6mxFnpTGZZLEFWUsEqtpu84HgSj6j4m3gUVfagHkPg@mail.gmail.com>
From: Enrique Sanchez <esanchezvela.redhatcluster@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=047d7b160503f5019e04f4ff7aaa
X-RedHat-Spam-Score: -3.098  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_FROM, HTML_MESSAGE,
	RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] RH Summit '14
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 20 Mar 2014 01:13:46 -0000

--047d7b160503f5019e04f4ff7aaa
Content-Type: text/plain; charset=ISO-8859-1

I just found out I am going, want me to send u a text message to meet up?


On Thu, Feb 27, 2014 at 12:04 PM, Jeff Stoner <jeff.stoner@dimensiondata.com
> wrote:

> Anyone else going to Red Hat Summit this year? Wanna meetup for a
> beer/coffee/tea/soda?
>
> --
> *Jeff Stoner *
> *Cloud Evangelist*
> Dimension Data CBU
> Tel +1-703-723-5620
> Mobile +1-703-475-7720
> jeff.stoner@dimensiondata.com
> Twitter <http://twitter.com/didatacloud>
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>



-- 
Enrique Sanchez Vela
------------------------------------------

--047d7b160503f5019e04f4ff7aaa
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">I just found out I am going, want me to send u a text mess=
age to meet up?</div><div class=3D"gmail_extra"><br><br><div class=3D"gmail=
_quote">On Thu, Feb 27, 2014 at 12:04 PM, Jeff Stoner <span dir=3D"ltr">&lt=
;<a href=3D"mailto:jeff.stoner@dimensiondata.com" target=3D"_blank">jeff.st=
oner@dimensiondata.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div dir=3D"ltr">Anyone else going to Red Ha=
t Summit this year? Wanna meetup for a beer/coffee/tea/soda?<span class=3D"=
HOEnZb"><font color=3D"#888888"><br clear=3D"all">
<div><br></div>-- <br><span style=3D"border-collapse:collapse"><span style=
=3D"border-collapse:separate"><span style=3D"border-collapse:collapse"><div=
 style=3D"font-family:verdana,sans-serif">
<font color=3D"navy"><font><font face=3D"Arial"><b>Jeff Stoner </b></font><=
/font></font><span style=3D"font-family:arial,sans-serif;font-size:13px"><b=
 style=3D"color:rgb(68,68,68)"><b><font color=3D"navy" face=3D"Arial"><span=
 style=3D"font-size:10pt;font-family:Arial;color:navy"></span></font></b></=
b><b style=3D"color:rgb(68,68,68)"><b><font color=3D"navy" face=3D"Arial"><=
span style=3D"font-size:10pt;font-family:Arial;color:navy"></span></font></=
b></b><b style=3D"color:rgb(68,68,68)"><b><font color=3D"red" face=3D"Arial=
"><span style=3D"font-size:10pt;font-family:Arial;color:red"><br>

 </span></font></b></b><b style=3D"color:rgb(68,68,68)"><b><font color=3D"n=
avy" face=3D"Arial"><span style=3D"font-size:10pt;font-family:Arial;color:n=
avy">Cloud Evangelist</span></font></b></b><font style=3D"color:rgb(68,68,6=
8)" color=3D"navy" face=3D"Arial"><span style=3D"font-size:10pt;font-family=
:Arial;color:navy"><br>

Dimension Data CBU<br>Tel <a value=3D"+14085672064" style=3D"color:rgb(34,3=
4,34)">+1-703-723-5620</a> <br></span></font><font style=3D"color:rgb(68,68=
,68)" color=3D"navy" face=3D"Arial"><span style=3D"font-size:10pt;font-fami=
ly:Arial;color:navy">Mobile <a style=3D"color:rgb(34,34,34)">+1-703-475-772=
0</a> <br>

<a href=3D"mailto:jeff.stoner@dimensiondata.com" target=3D"_blank">jeff.sto=
ner@dimensiondata.com</a><br></span></font></span></div></span></span></spa=
n><a href=3D"http://twitter.com/didatacloud" target=3D"_blank">Twitter</a>
</font></span></div>
<br>--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br></blo=
ckquote></div><br><br clear=3D"all"><div><br></div>-- <br>Enrique Sanchez V=
ela<br>
------------------------------------------
</div>

--047d7b160503f5019e04f4ff7aaa--

From lists@alteeve.ca Wed Mar 19 21:27:00 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2K1R0D9007687 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 21:27:00 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2K1R02I018669; Wed, 19 Mar 2014 21:27:00 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2K1QwY8024235;
	Wed, 19 Mar 2014 21:26:58 -0400
Received: from lemass.alteeve.ca (dhcp-108-168-20-202.cable.user.start.ca
	[108.168.20.202])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id AF0F6200E0;
	Wed, 19 Mar 2014 21:26:55 -0400 (EDT)
Message-ID: <532A43E0.6030603@alteeve.ca>
Date: Wed, 19 Mar 2014 21:26:56 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>,
	Chris Feist <cfeist@redhat.com>
References: <5328F268.9080605@alteeve.ca> <532A1AB8.307@redhat.com>
	<532A2C34.3080903@alteeve.ca>
In-Reply-To: <532A2C34.3080903@alteeve.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 20 Mar 2014 01:27:00 -0000

On 19/03/14 07:45 PM, Digimer wrote:
> On 19/03/14 06:31 PM, Chris Feist wrote:
>> On 03/18/2014 08:27 PM, Digimer wrote:
>>> Hi all,
>>>
>>>    I would like to tell rgmanager to give more time for VMs to stop. I
>>> want this:
>>>
>>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>>> path="/shared/definitions/" exclusive="0" recovery="restart"
>>> max_restarts="2"
>>> restart_expire_time="600">
>>>    <action name="stop" timeout="10m" />
>>> </vm>
>>>
>>> I already use ccs to create the entry:
>>>
>>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>>> path="/shared/definitions/" exclusive="0" recovery="restart"
>>> max_restarts="2"
>>> restart_expire_time="600"/>
>>>
>>> via:
>>>
>>> ccs -h localhost --activate --sync --password "secret" \
>>>   --addvm vm01-win2008 \
>>>   --domain="primary_n01" \
>>>   path="/shared/definitions/" \
>>>   autostart="0" \
>>>   exclusive="0" \
>>>   recovery="restart" \
>>>   max_restarts="2" \
>>>   restart_expire_time="600"
>>>
>>> I'm hoping it's a simple additional switch. :)
>>
>> Unfortunately currently ccs doesn't support setting resource actions.
>> However it's my understanding that rgmanager doesn't check timeouts
>> unless __enforce_timeouts is set to "1".  So you shouldn't be seeing a
>> vm resource go to failed if it takes a long time to stop.  Are you
>> trying to make the vm resource fail if it takes longer than 10 minutes
>> to stop?
>
> I was afraid you were going to say that. :(
>
> The problem is that after calling 'disable' against the VM service,
> rgmanager waits two minutes. If the service isn't closed in that time,
> the server is forced off (at least, this was the behaviour when I last
> tested this).
>
> The concern is that, by default, windows installs queue updates to
> install when the system shuts down. During this time, windows makes it
> very clear that you should not power off the system during the updates.
> So if this timer is hit, and the VM is forced off, the guest OS can be
> damaged.
>
> Of course, we can debate the (lack of) wisdom of this behaviour, and I
> already document this concern (and even warn people to check for updates
> before stopping the server), it's not sufficient. If a user doesn't read
> the warning, or simply forgets to check, the consequences can be
> non-trivial.
>
> If ccs can't be made to add this attribute, and if the behaviour
> persists (I will test shortly after sending this reply), then I will
> have to edit the cluster.conf directly, something I am loath to do if at
> all avoidable.
>
> Cheers

Confirmed;

I called disable on a VM with gnome running, so that I could abort the 
VM's shut down.

an-c05n01:~# date; clusvcadm -d vm:vm01-rhel6; date
Wed Mar 19 21:06:29 EDT 2014
Local machine disabling vm:vm01-rhel6...Success
Wed Mar 19 21:08:36 EDT 2014

2 minutes and 7 seconds, then rgmanager forced-off the VM. Had this been 
a windows guest in the middle of installing updates, it would be highly 
likely to be screwed now.

To confirm, I changed the config to:

<vm autostart="0" domain="primary_n01" exclusive="0" max_restarts="2" 
name="vm01-rhel6" path="/shared/definitions/" recovery="restart" 
restart_expire_time="600">
   <action name="stop" timeout="10m"/>
</vm>

Then I repeated the test:

an-c05n01:~# date; clusvcadm -d vm:vm01-rhel6; date
Wed Mar 19 21:13:18 EDT 2014
Local machine disabling vm:vm01-rhel6...Success
Wed Mar 19 21:23:31 EDT 2014

10 minutes and 13 seconds before the cluster killed the server, much 
less likely to interrupt a in-progress OS update (truth be told, I plan 
to set 30 minutes.

I understand that this blocks other processes, but in an HA environment, 
I'd strongly argue that safe > speed.

digimer

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From morpheus.ibis@gmail.com Wed Mar 19 22:12:15 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2K2CFbo015388 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 22:12:15 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2K2CF6K016184; Wed, 19 Mar 2014 22:12:15 -0400
Received: from mail-ee0-f43.google.com (mail-ee0-f43.google.com [74.125.83.43])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2K2CCKO008334;
	Wed, 19 Mar 2014 22:12:12 -0400
Received: by mail-ee0-f43.google.com with SMTP id e53so109426eek.16
	for <multiple recipients>; Wed, 19 Mar 2014 19:12:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=from:to:cc:subject:date:message-id:user-agent:in-reply-to
	:references:mime-version:content-transfer-encoding:content-type;
	bh=ECUl2OPHZm5L2zF+znRIOiwx1KyUpx02XRW9wdAxPHw=;
	b=WajIPhJGwiVncl4UMyRCgWp9HmAx/cGmR6PaEmFfp8hfQXUOJ4+VlZ3i7rmX0VcV2T
	TkL33jfoUfaULWKQBnNMe9H+PB4SIktO36v3Q2T5OcM/Aml0GnQZhg1tJXtwXCn3irIy
	AJ4IDHUG8jVyMDQzWI3j/lU8QrBBFuY6Uva1xgbJIsEypuOTYyQkyy7gsRdeXUZeqEkS
	4czSpdhYd/3Wb8Vdaxu4505252hBav2P5Hz2G+qlVzqU+BCeoV4Ovgw7+fcPjpNB2rjF
	LVZ8+QFF4CPHSIZg94LXQxzHuxgc4QtmmuDpVO8gTBelxMzBVVjL3hw7wh4Y736rKIFM
	qRyg==
X-Received: by 10.14.88.7 with SMTP id z7mr6330088eee.90.1395281531907;
	Wed, 19 Mar 2014 19:12:11 -0700 (PDT)
Received: from bloomfield.localnet ([2001:718:1e03:a01::514])
	by mx.google.com with ESMTPSA id e42sm834457eev.32.2014.03.19.19.12.10
	for <multiple recipients>
	(version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
	Wed, 19 Mar 2014 19:12:11 -0700 (PDT)
From: Pavel Herrmann <morpheus.ibis@gmail.com>
To: linux-cluster@redhat.com
Date: Thu, 20 Mar 2014 03:12:08 +0100
Message-ID: <1857777.TcdlaGUVy9@bloomfield>
User-Agent: KMail/4.12.2 (Linux/3.10.9-gentoo; KDE/4.12.2; x86_64; ; )
In-Reply-To: <532A43E0.6030603@alteeve.ca>
References: <5328F268.9080605@alteeve.ca> <532A2C34.3080903@alteeve.ca>
	<532A43E0.6030603@alteeve.ca>
MIME-Version: 1.0
Content-Transfer-Encoding: 7Bit
Content-Type: text/plain; charset="us-ascii"
X-RedHat-Spam-Score: -3.1  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 20 Mar 2014 02:12:16 -0000

Hi

On Wednesday 19 of March 2014 21:26:56 Digimer wrote:
> On 19/03/14 07:45 PM, Digimer wrote:
> > On 19/03/14 06:31 PM, Chris Feist wrote:
> >> On 03/18/2014 08:27 PM, Digimer wrote:
> >>> Hi all,
> >>> 
> >>>    I would like to tell rgmanager to give more time for VMs to stop. I
> >>> 
> >>> want this:
> >>> 
> >>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
> >>> path="/shared/definitions/" exclusive="0" recovery="restart"
> >>> max_restarts="2"
> >>> restart_expire_time="600">
> >>> 
> >>>    <action name="stop" timeout="10m" />
> >>> 
> >>> </vm>
> >>> 
> >>> I already use ccs to create the entry:
> >>> 
> >>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
> >>> path="/shared/definitions/" exclusive="0" recovery="restart"
> >>> max_restarts="2"
> >>> restart_expire_time="600"/>
> >>> 
> >>> via:
> >>> 
> >>> ccs -h localhost --activate --sync --password "secret" \
> >>> 
> >>>   --addvm vm01-win2008 \
> >>>   --domain="primary_n01" \
> >>>   path="/shared/definitions/" \
> >>>   autostart="0" \
> >>>   exclusive="0" \
> >>>   recovery="restart" \
> >>>   max_restarts="2" \
> >>>   restart_expire_time="600"
> >>> 
> >>> I'm hoping it's a simple additional switch. :)
> >> 
> >> Unfortunately currently ccs doesn't support setting resource actions.
> >> However it's my understanding that rgmanager doesn't check timeouts
> >> unless __enforce_timeouts is set to "1".  So you shouldn't be seeing a
> >> vm resource go to failed if it takes a long time to stop.  Are you
> >> trying to make the vm resource fail if it takes longer than 10 minutes
> >> to stop?
> > 
> > I was afraid you were going to say that. :(
> > 
> > The problem is that after calling 'disable' against the VM service,
> > rgmanager waits two minutes. If the service isn't closed in that time,
> > the server is forced off (at least, this was the behaviour when I last
> > tested this).
> > 
> > The concern is that, by default, windows installs queue updates to
> > install when the system shuts down. During this time, windows makes it
> > very clear that you should not power off the system during the updates.
> > So if this timer is hit, and the VM is forced off, the guest OS can be
> > damaged.
> > 
> > Of course, we can debate the (lack of) wisdom of this behaviour, and I
> > already document this concern (and even warn people to check for updates
> > before stopping the server), it's not sufficient. If a user doesn't read
> > the warning, or simply forgets to check, the consequences can be
> > non-trivial.
> > 
> > If ccs can't be made to add this attribute, and if the behaviour
> > persists (I will test shortly after sending this reply), then I will
> > have to edit the cluster.conf directly, something I am loath to do if at
> > all avoidable.
> > 
> > Cheers
> 
> Confirmed;
> 
> I called disable on a VM with gnome running, so that I could abort the
> VM's shut down.
> 
> an-c05n01:~# date; clusvcadm -d vm:vm01-rhel6; date
> Wed Mar 19 21:06:29 EDT 2014
> Local machine disabling vm:vm01-rhel6...Success
> Wed Mar 19 21:08:36 EDT 2014
> 
> 2 minutes and 7 seconds, then rgmanager forced-off the VM. Had this been
> a windows guest in the middle of installing updates, it would be highly
> likely to be screwed now.

Is this really the best way to handle such an event?

>From what I remember, Windows can (or could, I don't have any 'modern' windows 
laying around) be told to shutdown without updating. maybe a wiser approach 
would be to make the stop event (which I believe is delivered to the guest as 
pressing the ACPI power button) trigger a shutdown without updates.

keep in mind that doing system updates on timer is dangerous, irrelevant of 
the actual time

regards
Pavel Herrmann

> To confirm, I changed the config to:
> 
> <vm autostart="0" domain="primary_n01" exclusive="0" max_restarts="2"
> name="vm01-rhel6" path="/shared/definitions/" recovery="restart"
> restart_expire_time="600">
>    <action name="stop" timeout="10m"/>
> </vm>
> 
> Then I repeated the test:
> 
> an-c05n01:~# date; clusvcadm -d vm:vm01-rhel6; date
> Wed Mar 19 21:13:18 EDT 2014
> Local machine disabling vm:vm01-rhel6...Success
> Wed Mar 19 21:23:31 EDT 2014
> 
> 10 minutes and 13 seconds before the cluster killed the server, much
> less likely to interrupt a in-progress OS update (truth be told, I plan
> to set 30 minutes.
> 
> I understand that this blocks other processes, but in an HA environment,
> I'd strongly argue that safe > speed.
> 
> digimer

From lists@alteeve.ca Wed Mar 19 22:36:02 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2K2a2gB018938 for <linux-cluster@listman.util.phx.redhat.com>;
	Wed, 19 Mar 2014 22:36:02 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2K2a2fZ003381; Wed, 19 Mar 2014 22:36:02 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2K2Zw5L011067;
	Wed, 19 Mar 2014 22:36:00 -0400
Received: from lemass.alteeve.ca (dhcp-108-168-20-202.cable.user.start.ca
	[108.168.20.202])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id 6603D200E0;
	Wed, 19 Mar 2014 22:35:54 -0400 (EDT)
Message-ID: <532A540B.8070104@alteeve.ca>
Date: Wed, 19 Mar 2014 22:35:55 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: Pavel Herrmann <morpheus.ibis@gmail.com>, linux-cluster@redhat.com
References: <5328F268.9080605@alteeve.ca> <532A2C34.3080903@alteeve.ca>
	<532A43E0.6030603@alteeve.ca> <1857777.TcdlaGUVy9@bloomfield>
In-Reply-To: <1857777.TcdlaGUVy9@bloomfield>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 20 Mar 2014 02:36:02 -0000

On 19/03/14 10:12 PM, Pavel Herrmann wrote:
> Hi
>
> On Wednesday 19 of March 2014 21:26:56 Digimer wrote:
>> On 19/03/14 07:45 PM, Digimer wrote:
>>> On 19/03/14 06:31 PM, Chris Feist wrote:
>>>> On 03/18/2014 08:27 PM, Digimer wrote:
>>>>> Hi all,
>>>>>
>>>>>     I would like to tell rgmanager to give more time for VMs to stop. I
>>>>>
>>>>> want this:
>>>>>
>>>>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>>>>> path="/shared/definitions/" exclusive="0" recovery="restart"
>>>>> max_restarts="2"
>>>>> restart_expire_time="600">
>>>>>
>>>>>     <action name="stop" timeout="10m" />
>>>>>
>>>>> </vm>
>>>>>
>>>>> I already use ccs to create the entry:
>>>>>
>>>>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>>>>> path="/shared/definitions/" exclusive="0" recovery="restart"
>>>>> max_restarts="2"
>>>>> restart_expire_time="600"/>
>>>>>
>>>>> via:
>>>>>
>>>>> ccs -h localhost --activate --sync --password "secret" \
>>>>>
>>>>>    --addvm vm01-win2008 \
>>>>>    --domain="primary_n01" \
>>>>>    path="/shared/definitions/" \
>>>>>    autostart="0" \
>>>>>    exclusive="0" \
>>>>>    recovery="restart" \
>>>>>    max_restarts="2" \
>>>>>    restart_expire_time="600"
>>>>>
>>>>> I'm hoping it's a simple additional switch. :)
>>>>
>>>> Unfortunately currently ccs doesn't support setting resource actions.
>>>> However it's my understanding that rgmanager doesn't check timeouts
>>>> unless __enforce_timeouts is set to "1".  So you shouldn't be seeing a
>>>> vm resource go to failed if it takes a long time to stop.  Are you
>>>> trying to make the vm resource fail if it takes longer than 10 minutes
>>>> to stop?
>>>
>>> I was afraid you were going to say that. :(
>>>
>>> The problem is that after calling 'disable' against the VM service,
>>> rgmanager waits two minutes. If the service isn't closed in that time,
>>> the server is forced off (at least, this was the behaviour when I last
>>> tested this).
>>>
>>> The concern is that, by default, windows installs queue updates to
>>> install when the system shuts down. During this time, windows makes it
>>> very clear that you should not power off the system during the updates.
>>> So if this timer is hit, and the VM is forced off, the guest OS can be
>>> damaged.
>>>
>>> Of course, we can debate the (lack of) wisdom of this behaviour, and I
>>> already document this concern (and even warn people to check for updates
>>> before stopping the server), it's not sufficient. If a user doesn't read
>>> the warning, or simply forgets to check, the consequences can be
>>> non-trivial.
>>>
>>> If ccs can't be made to add this attribute, and if the behaviour
>>> persists (I will test shortly after sending this reply), then I will
>>> have to edit the cluster.conf directly, something I am loath to do if at
>>> all avoidable.
>>>
>>> Cheers
>>
>> Confirmed;
>>
>> I called disable on a VM with gnome running, so that I could abort the
>> VM's shut down.
>>
>> an-c05n01:~# date; clusvcadm -d vm:vm01-rhel6; date
>> Wed Mar 19 21:06:29 EDT 2014
>> Local machine disabling vm:vm01-rhel6...Success
>> Wed Mar 19 21:08:36 EDT 2014
>>
>> 2 minutes and 7 seconds, then rgmanager forced-off the VM. Had this been
>> a windows guest in the middle of installing updates, it would be highly
>> likely to be screwed now.
>
> Is this really the best way to handle such an event?
>
>  From what I remember, Windows can (or could, I don't have any 'modern' windows
> laying around) be told to shutdown without updating. maybe a wiser approach
> would be to make the stop event (which I believe is delivered to the guest as
> pressing the ACPI power button) trigger a shutdown without updates.
>
> keep in mind that doing system updates on timer is dangerous, irrelevant of
> the actual time
>
> regards
> Pavel Herrmann

This assumes that we can modify how windows behaves. Unless there is a 
magic ACPI event that windows will reliably interpret as "power off 
without updating", we can't rely on this.

We have clients (and I am sure we aren't the only ones) who install 
their own OSes without any input from us. As mentioned earlier, we do 
document the risks, but that's not good enough. We can't force users to 
read.

So we have a choice; Take mitigating steps or let the user shoot 
themselves in the foot "because they should have known better". As 
personally satisfying as option #2 might seem, option #1 is the more 
professional approach, I would _strongly_ argue.

digimer

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From lists@alteeve.ca Thu Mar 20 15:31:25 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2KJVPSp026905 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 20 Mar 2014 15:31:25 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2KJVPMv015557
	for <linux-cluster@redhat.com>; Thu, 20 Mar 2014 15:31:25 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2KJVNZr001026
	for <linux-cluster@redhat.com>; Thu, 20 Mar 2014 15:31:23 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id D2EFE2012F
	for <linux-cluster@redhat.com>; Thu, 20 Mar 2014 15:31:20 -0400 (EDT)
Message-ID: <532B420A.5060606@alteeve.ca>
Date: Thu, 20 Mar 2014 15:31:22 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <5328F268.9080605@alteeve.ca>
In-Reply-To: <5328F268.9080605@alteeve.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 20 Mar 2014 19:31:26 -0000

On 18/03/14 09:27 PM, Digimer wrote:
> Hi all,
>
>    I would like to tell rgmanager to give more time for VMs to stop. I
> want this:
>
> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
> path="/shared/definitions/" exclusive="0" recovery="restart"
> max_restarts="2" restart_expire_time="600">
>    <action name="stop" timeout="10m" />
> </vm>
>
> I already use ccs to create the entry:
>
> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
> path="/shared/definitions/" exclusive="0" recovery="restart"
> max_restarts="2" restart_expire_time="600"/>
>
> via:
>
> ccs -h localhost --activate --sync --password "secret" \
>   --addvm vm01-win2008 \
>   --domain="primary_n01" \
>   path="/shared/definitions/" \
>   autostart="0" \
>   exclusive="0" \
>   recovery="restart" \
>   max_restarts="2" \
>   restart_expire_time="600"
>
> I'm hoping it's a simple additional switch. :)
>
> Thanks!

As per the request on #linux-cluster, I have opened a rhbz for this:

https://bugzilla.redhat.com/show_bug.cgi?id=1079032

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From lists@alteeve.ca Thu Mar 20 16:14:28 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2KKESYp022564 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 20 Mar 2014 16:14:28 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2KKERai003118
	for <linux-cluster@redhat.com>; Thu, 20 Mar 2014 16:14:27 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2KKE5hu018735
	for <linux-cluster@redhat.com>; Thu, 20 Mar 2014 16:14:06 -0400
Received: from lemass.alteeve.ca (unknown [216.154.16.237])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id 1E09D2012F
	for <linux-cluster@redhat.com>; Thu, 20 Mar 2014 16:06:13 -0400 (EDT)
Message-ID: <532B4A36.90703@alteeve.ca>
Date: Thu, 20 Mar 2014 16:06:14 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <5328F268.9080605@alteeve.ca> <532B420A.5060606@alteeve.ca>
In-Reply-To: <532B420A.5060606@alteeve.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] Adding a stop timeout to a VM service using
	'ccs'
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 20 Mar 2014 20:14:28 -0000

On 20/03/14 03:31 PM, Digimer wrote:
> On 18/03/14 09:27 PM, Digimer wrote:
>> Hi all,
>>
>>    I would like to tell rgmanager to give more time for VMs to stop. I
>> want this:
>>
>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>> path="/shared/definitions/" exclusive="0" recovery="restart"
>> max_restarts="2" restart_expire_time="600">
>>    <action name="stop" timeout="10m" />
>> </vm>
>>
>> I already use ccs to create the entry:
>>
>> <vm name="vm01-win2008" domain="primary_n01" autostart="0"
>> path="/shared/definitions/" exclusive="0" recovery="restart"
>> max_restarts="2" restart_expire_time="600"/>
>>
>> via:
>>
>> ccs -h localhost --activate --sync --password "secret" \
>>   --addvm vm01-win2008 \
>>   --domain="primary_n01" \
>>   path="/shared/definitions/" \
>>   autostart="0" \
>>   exclusive="0" \
>>   recovery="restart" \
>>   max_restarts="2" \
>>   restart_expire_time="600"
>>
>> I'm hoping it's a simple additional switch. :)
>>
>> Thanks!
>
> As per the request on #linux-cluster, I have opened a rhbz for this:
>
> https://bugzilla.redhat.com/show_bug.cgi?id=1079032

Split the rgmanager section out:

https://bugzilla.redhat.com/show_bug.cgi?id=1079039

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From pine5514@gmail.com Sat Mar 22 16:13:11 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2MKDBc5011721 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 22 Mar 2014 16:13:11 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2MKDBCd026041
	for <linux-cluster@redhat.com>; Sat, 22 Mar 2014 16:13:11 -0400
Received: from mail-la0-f43.google.com (mail-la0-f43.google.com
	[209.85.215.43])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2MKD6Ve012593
	for <linux-cluster@redhat.com>; Sat, 22 Mar 2014 16:13:07 -0400
Received: by mail-la0-f43.google.com with SMTP id e16so2657021lan.30
	for <linux-cluster@redhat.com>; Sat, 22 Mar 2014 13:13:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=eA3/V2JwRVPWu1t1731cg7OPUxH5D/m3VCg1KcmZx8s=;
	b=EDBpgt708GE/jD552soOlN32qQtn91/q5qt4ftp/yUqqBXHOZeI09s3uQTnxfEyOlO
	qdHIMHe6p98LV6/TH47FsvCWcTdi6Qk3tRDwg27j/qei860xCSCMg9SVdPJDDHqXkrfw
	A606AOJeNcdg+deznFbsI0XesdJ3X4BlsoV+Guy5lst0NQw3djZn8ybh9cy6kvugAU6v
	Ko56WRgyN9b5v1IJu8gvN/rV4JfE9ipSUTc9ktI4JyE9YCEcQPGhPnpKmPh4kRu5ZOOS
	7QenrkMHasyhsnzz8bMB68l4o0LcGP6Fwy0YG0g2YQWyZZmpZn7aYCRBpHBiv5VXw28L
	9Vuw==
MIME-Version: 1.0
X-Received: by 10.152.36.73 with SMTP id o9mr2711197laj.30.1395519186646; Sat,
	22 Mar 2014 13:13:06 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Sat, 22 Mar 2014 13:13:06 -0700 (PDT)
In-Reply-To: <518413955.1970349.1395232118989.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>
	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
	<CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>
	<518413955.1970349.1395232118989.JavaMail.zimbra@redhat.com>
Date: Sun, 23 Mar 2014 00:43:06 +0430
Message-ID: <CAJ7bT7V8_dwaGUkaswJZ3HRLT3AAm=AW8T6-Pe8U1z2kzfe-GA@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 22 Mar 2014 20:13:12 -0000

Good news for all :
I successfully recoved all of my data(1.5TB) without even one bit lost!
my program tooks only 1 hour to do all the jobs on my 1.7 TB
partition.(I could not wait 100 days for my bash script to finish).

I will publish my  source code very soon for the public use.

Special thanks to Bob for the help.

Mr.Pine

On Wed, Mar 19, 2014 at 4:58 PM, Bob Peterson <rpeterso@redhat.com> wrote:
> ----- Original Message -----
>> Hi,
>>
>> Scripts is very very slow, so i should write program in c/c++.
>>
>> I need some confidence about data structures and data location on disk.
>> As i reviewed blocks of data:
>>
>> All reserved blocks (GFS2 specific blocks) start by : 0x01161970
>> Blocktype store location is at Byte # 8,
>> Type of start block of each resource group is: 2
>> Bitmaps are in block types 2 & 3.
>> In block type 2, bitmap info starts from Byte # 129
>> In block type 3, bitmap info starts from Byte # 25
>> Length of RGs are const, 5 in my volume (out put of gfs2_edit -p rindex
>> /dev/..)
>>
>> Is this info right?
>>
>> Logic of my program seams should be like this:
>>
>> (1)
>> Loop in device and temporary store block id of dinode blocks, and also
>> their bitmap locations
>>
>> (2)
>> Change bitmap of blocks to 3 (11)
>>
>> Bob, could you confirm this?
>>
>> Regards
>> Pine.
>
> Hi Pine,
>
> This is correct. The length of RGs is properly determined by the values
> in the "rindex" system file, but 5 is very common, and is usually constant.
> (It may change if you used gfs2_grow or gfs2_convert from gfs1).
> The bitmap is 2 bits per block in the resource group, and it's relative
> to the start of the particular rgrp. You should probably use the same
> algorithm in libgfs2 to change the proper bit in the bitmaps. You can
> get this from the public gfs2-utils git tree.
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From lists@alteeve.ca Sat Mar 22 21:35:01 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2N1Z04I013732 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 22 Mar 2014 21:35:00 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2N1Z0NT011511
	for <linux-cluster@redhat.com>; Sat, 22 Mar 2014 21:35:00 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2N1YvYw004914
	for <linux-cluster@redhat.com>; Sat, 22 Mar 2014 21:34:58 -0400
Received: from lemass.alteeve.ca (unknown [199.119.233.176])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id 5E3D32012F
	for <linux-cluster@redhat.com>; Sat, 22 Mar 2014 21:34:54 -0400 (EDT)
Message-ID: <532E3A34.6050107@alteeve.ca>
Date: Sat, 22 Mar 2014 21:34:44 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.3.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>	<1958363147.1528636.1395165348118.JavaMail.zimbra@redhat.com>	<CAJ7bT7VKb7w2rdv827WV7EnSKQ-uDckPyn=6AYZBLpxVvXjPug@mail.gmail.com>	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>	<CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>	<CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>	<518413955.1970349.1395232118989.JavaMail.zimbra@redhat.com>
	<CAJ7bT7V8_dwaGUkaswJZ3HRLT3AAm=AW8T6-Pe8U1z2kzfe-GA@mail.gmail.com>
In-Reply-To: <CAJ7bT7V8_dwaGUkaswJZ3HRLT3AAm=AW8T6-Pe8U1z2kzfe-GA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -1.909  (BAYES_00,T_RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 23 Mar 2014 01:35:02 -0000

That is very good news! Now, about your backups... ;)

Look forward to seeing your code!

digimer

On 22/03/14 04:13 PM, Mr.Pine wrote:
> Good news for all :
> I successfully recoved all of my data(1.5TB) without even one bit lost!
> my program tooks only 1 hour to do all the jobs on my 1.7 TB
> partition.(I could not wait 100 days for my bash script to finish).
>
> I will publish my  source code very soon for the public use.
>
> Special thanks to Bob for the help.
>
> Mr.Pine
>
> On Wed, Mar 19, 2014 at 4:58 PM, Bob Peterson <rpeterso@redhat.com> wrote:
>> ----- Original Message -----
>>> Hi,
>>>
>>> Scripts is very very slow, so i should write program in c/c++.
>>>
>>> I need some confidence about data structures and data location on disk.
>>> As i reviewed blocks of data:
>>>
>>> All reserved blocks (GFS2 specific blocks) start by : 0x01161970
>>> Blocktype store location is at Byte # 8,
>>> Type of start block of each resource group is: 2
>>> Bitmaps are in block types 2 & 3.
>>> In block type 2, bitmap info starts from Byte # 129
>>> In block type 3, bitmap info starts from Byte # 25
>>> Length of RGs are const, 5 in my volume (out put of gfs2_edit -p rindex
>>> /dev/..)
>>>
>>> Is this info right?
>>>
>>> Logic of my program seams should be like this:
>>>
>>> (1)
>>> Loop in device and temporary store block id of dinode blocks, and also
>>> their bitmap locations
>>>
>>> (2)
>>> Change bitmap of blocks to 3 (11)
>>>
>>> Bob, could you confirm this?
>>>
>>> Regards
>>> Pine.
>>
>> Hi Pine,
>>
>> This is correct. The length of RGs is properly determined by the values
>> in the "rindex" system file, but 5 is very common, and is usually constant.
>> (It may change if you used gfs2_grow or gfs2_convert from gfs1).
>> The bitmap is 2 bits per block in the resource group, and it's relative
>> to the start of the particular rgrp. You should probably use the same
>> algorithm in libgfs2 to change the proper bit in the bitmaps. You can
>> get this from the public gfs2-utils git tree.
>>
>> Regards,
>>
>> Bob Peterson
>> Red Hat File Systems
>>
>> --
>> Linux-cluster mailing list
>> Linux-cluster@redhat.com
>> https://www.redhat.com/mailman/listinfo/linux-cluster
>


-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From rpeterso@redhat.com Mon Mar 24 08:19:58 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2OCJwMH028022 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 24 Mar 2014 08:19:58 -0400
Received: from mx3-phx2.redhat.com (mx04.colomx.prod.int.phx2.redhat.com
	[10.5.7.4])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2OCJwaV020782
	for <linux-cluster@redhat.com>; Mon, 24 Mar 2014 08:19:58 -0400
Received: from zmail12.collab.prod.int.phx2.redhat.com
	(zmail12.collab.prod.int.phx2.redhat.com [10.5.83.14])
	by mx3-phx2.redhat.com (8.14.4/8.14.4) with ESMTP id s2OCJwZI014719
	for <linux-cluster@redhat.com>; Mon, 24 Mar 2014 08:19:58 -0400
Date: Mon, 24 Mar 2014 08:19:58 -0400 (EDT)
From: Bob Peterson <rpeterso@redhat.com>
To: linux clustering <linux-cluster@redhat.com>
Message-ID: <25322364.403317.1395663598176.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAJ7bT7V8_dwaGUkaswJZ3HRLT3AAm=AW8T6-Pe8U1z2kzfe-GA@mail.gmail.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
	<CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>
	<518413955.1970349.1395232118989.JavaMail.zimbra@redhat.com>
	<CAJ7bT7V8_dwaGUkaswJZ3HRLT3AAm=AW8T6-Pe8U1z2kzfe-GA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [10.5.82.6]
Thread-Topic: unformat gfs2
Thread-Index: fhpFmkf3MOSGSkdVNPfjN3r5Sq5Baw==
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 24 Mar 2014 12:19:58 -0000

----- Original Message -----
> Good news for all :
> I successfully recoved all of my data(1.5TB) without even one bit lost!
> my program tooks only 1 hour to do all the jobs on my 1.7 TB
> partition.(I could not wait 100 days for my bash script to finish).
> 
> I will publish my  source code very soon for the public use.
> 
> Special thanks to Bob for the help.
> 
> Mr.Pine

Hi Mr. Pine,

I'm glad I could help. Perhaps when you post your program, we can
somehow incorporate it into "gfs2_edit unformat" tool or something.
I assume you ran fsck.gfs2 after the program, right?

Regards,

Bob Peterson
Red Hat File Systems

From pine5514@gmail.com Mon Mar 24 12:19:32 2014
Received: from int-mx01.intmail.prod.int.phx2.redhat.com
	(int-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.11])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2OGJW6s007408 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 24 Mar 2014 12:19:32 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx01.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2OGJWk8025374
	for <linux-cluster@redhat.com>; Mon, 24 Mar 2014 12:19:32 -0400
Received: from mail-la0-f45.google.com (mail-la0-f45.google.com
	[209.85.215.45])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2OGJQpr016775
	for <linux-cluster@redhat.com>; Mon, 24 Mar 2014 12:19:28 -0400
Received: by mail-la0-f45.google.com with SMTP id hr17so3783193lab.4
	for <linux-cluster@redhat.com>; Mon, 24 Mar 2014 09:19:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type; bh=AuZK8MHu5qCdh8SPJLeUnDiV+xaf+ikByKeZR4K2XNg=;
	b=gRDqzUeqJ/ke/xZ5eWhC+NH3772wWh/G4+FDDMsCUwTKdgD84TLH2wNunWrda+5s49
	UgZxnm7SICuHIy88pmw2jbmrLRHrv9j00U3a8WZqjcOVzc+WwlodWOotHDD6weFhgFoo
	p8H8eGGDxTkReEtvmHZJiwuPuXRaJSDjEQbpgSv2EboUQNtuzRoCzMqDPk7T4iRpm/Fh
	ti9jZuv5Xxp+W4GRkjie5zS0bwqIxldQeKsDttBnOKb2VNIDkmTg64DSmp2UuuBJqOVW
	JbwWVgSgSp2rBB++zXp23eGNnOVJljsYTHVZJcQbYz1dKSJ8MCEINNrF72p+I0FLriC9
	UEjg==
MIME-Version: 1.0
X-Received: by 10.152.120.195 with SMTP id le3mr46707843lab.6.1395677966158;
	Mon, 24 Mar 2014 09:19:26 -0700 (PDT)
Received: by 10.114.183.208 with HTTP; Mon, 24 Mar 2014 09:19:26 -0700 (PDT)
In-Reply-To: <25322364.403317.1395663598176.JavaMail.zimbra@redhat.com>
References: <CAJ7bT7V+2gvZqbUXa3bZ2cwawEwikDy9SH3Hpf_ju87HKdYFnw@mail.gmail.com>
	<1499819462.1547710.1395166939684.JavaMail.zimbra@redhat.com>
	<CAJ7bT7W9WB8u8vceACqoNx9QP0ua7PHKvOoYw_VUVtyMgqi68w@mail.gmail.com>
	<105078529.1554190.1395167768555.JavaMail.zimbra@redhat.com>
	<CAJ7bT7WRCv_3h5ZBC49SxbWYOmjTVs2X2=tM1kd6_RUjzWAx0A@mail.gmail.com>
	<CAJ7bT7VnUntai30CgkoJOS165rf=tRhm3KRdaUsgbrJ2u+Z=+g@mail.gmail.com>
	<518413955.1970349.1395232118989.JavaMail.zimbra@redhat.com>
	<CAJ7bT7V8_dwaGUkaswJZ3HRLT3AAm=AW8T6-Pe8U1z2kzfe-GA@mail.gmail.com>
	<25322364.403317.1395663598176.JavaMail.zimbra@redhat.com>
Date: Mon, 24 Mar 2014 20:49:26 +0430
Message-ID: <CAJ7bT7XjmEAj9pc_zO7Y10yqg9quksZZDWq78j3ZJ-hHcxXAFg@mail.gmail.com>
From: "Mr.Pine" <pine5514@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.11
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] unformat gfs2
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 24 Mar 2014 16:19:32 -0000

Hi Bob
Very good Idea ... It can be useful for many users.
Yes your right. I ran fsck.gfs2 and It took less than a hour to fix filesystem.

Mr.Pine

On Mon, Mar 24, 2014 at 4:49 PM, Bob Peterson <rpeterso@redhat.com> wrote:
> ----- Original Message -----
>> Good news for all :
>> I successfully recoved all of my data(1.5TB) without even one bit lost!
>> my program tooks only 1 hour to do all the jobs on my 1.7 TB
>> partition.(I could not wait 100 days for my bash script to finish).
>>
>> I will publish my  source code very soon for the public use.
>>
>> Special thanks to Bob for the help.
>>
>> Mr.Pine
>
> Hi Mr. Pine,
>
> I'm glad I could help. Perhaps when you post your program, we can
> somehow incorporate it into "gfs2_edit unformat" tool or something.
> I assume you ran fsck.gfs2 after the program, right?
>
> Regards,
>
> Bob Peterson
> Red Hat File Systems
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster

From lipson12@yahoo.com Thu Mar 27 00:15:33 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2R4FXdo024143 for <linux-cluster@listman.util.phx.redhat.com>;
	Thu, 27 Mar 2014 00:15:33 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2R4FWmZ012338
	for <linux-cluster@redhat.com>; Thu, 27 Mar 2014 00:15:32 -0400
Received: from nm35.bullet.mail.ne1.yahoo.com (nm35.bullet.mail.ne1.yahoo.com
	[98.138.229.28])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2R4FNpw004680
	for <linux-cluster@redhat.com>; Thu, 27 Mar 2014 00:15:27 -0400
Received: from [127.0.0.1] by nm35.bullet.mail.ne1.yahoo.com with NNFMP;
	27 Mar 2014 04:15:23 -0000
Received: from [98.138.226.176] by nm35.bullet.mail.ne1.yahoo.com with NNFMP;
	27 Mar 2014 04:12:23 -0000
Received: from [98.139.212.150] by tm11.bullet.mail.ne1.yahoo.com with NNFMP;
	27 Mar 2014 04:12:23 -0000
Received: from [98.139.212.205] by tm7.bullet.mail.bf1.yahoo.com with NNFMP;
	27 Mar 2014 04:12:23 -0000
Received: from [127.0.0.1] by omp1014.mail.bf1.yahoo.com with NNFMP;
	27 Mar 2014 04:12:23 -0000
X-Yahoo-Newman-Property: ymail-4
X-Yahoo-Newman-Id: 92399.25837.bm@omp1014.mail.bf1.yahoo.com
Received: (qmail 55999 invoked by uid 60001); 27 Mar 2014 04:12:22 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024;
	t=1395893542; bh=u1oj1xQYZ3Ex3RiAYwkVWb9mFjfwSPO9/f97fNVATeU=;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=VEbDnk3osRYxoMGdaZ819yTLOOSVOMCOxupwTQuelxmOdSGEBhN4BTSDiv+1CNEto0z6tqNoVUR/Kz8IMorZ54zxALg4I1Fja4X9ccW1xcllqHnBcCaUzxNZdD7GkqOro4uNA3X4RNvClIzx5OZyvjy2MR0XEur5aslSUxkY+hc=
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws; s=s1024; d=yahoo.com;
	h=X-YMail-OSG:Received:X-Rocket-MIMEInfo:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
	b=uhffx0is43fSQFG/leU8l7EuVS8UBpRulol06IwDrB92JF3S0L9TeDrQrtP/GY+h0qDki18WK+OhScXSh6PcIGARNUE6YgPXo4/XTmu0EP58ults0IiOMB0nBdB0aPNiyswJBHdCZF/sZIVn/Oz13TVIn1JR2iTVSRv+EJJYhhE=;
X-YMail-OSG: NW2p01EVM1nDB6QoySDCFKvgh7WeHfcxj6YqOA2wOL_tE2e
	.ccCqLEv7o_nLrpl_.GK947e5dk7t5NuRr1onRkg-
Received: from [122.248.15.72] by web141202.mail.bf1.yahoo.com via HTTP;
	Wed, 26 Mar 2014 21:12:22 PDT
X-Rocket-MIMEInfo: 002.001,
	CgrCoApFbHZpciBLdXJpYywKCk15IE9TIHZlcnNpb24gaXMgUkhFTCA2LjIgLCBpIGp1c3Qgd2FudCB0byBjcmVhdGUgU3ltbGluayBmb3IgaXNjc2kgZGlzayAvZGV2L3NkYcKgIHdpdGggdWRldiBydWxlcyAuIGkgaGF2ZSBkb25lIHNhbWUgdGhpbmcgaW4gcmhlbCA1LjQuCgp0aGFua3MKa2Fpc2FyIAoKCgoKT24gV2VkbmVzZGF5LCBNYXJjaCAxMiwgMjAxNCA2OjEyIFBNLCBFbHZpciBLdXJpYyA8ZWt1cmljQHJlZGhhdC5jb20.IHdyb3RlOgogCk9uIDAzLzEyLzIwMTQgMTI6NDMgUE0sIGVtbWFudWVsIHMBMAEBAQE-
References: <1394605577.86561.YahooMailNeo@web141205.mail.bf1.yahoo.com>	<1394605887.60258.YahooMailNeo@web141203.mail.bf1.yahoo.com>	<CAE7pJ3Ah==ffS_suuazua4RXLJ81z-xrK3QySo4RT0jtL4bNhA@mail.gmail.com>
	<53204CA8.2060300@redhat.com>
Message-ID: <1395893542.35997.YahooMailNeo@web141202.mail.bf1.yahoo.com>
Date: Wed, 26 Mar 2014 21:12:22 -0700 (PDT)
From: Kaisar Ahmed Khan <lipson12@yahoo.com>
To: linux clustering <linux-cluster@redhat.com>
In-Reply-To: <53204CA8.2060300@redhat.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="624387052-964115860-1395893542=:35997"
X-RedHat-Spam-Score: -2.297  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT,
	FREEMAIL_FROM, FREEMAIL_REPLYTO_END_DIGIT, HTML_MESSAGE,
	RCVD_IN_DNSWL_NONE, RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] iscsi sysmlink create problem
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: Kaisar Ahmed Khan <lipson12@yahoo.com>,
	linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Thu, 27 Mar 2014 04:15:33 -0000

--624387052-964115860-1395893542=:35997
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0A=A0=0AElvir Kuric,=0A=0AMy OS version is RHEL 6.2 , i just want to cr=
eate Symlink for iscsi disk /dev/sda=A0 with udev rules . i have done same =
thing in rhel 5.4.=0A=0Athanks=0Akaisar =0A=0A=0A=0A=0AOn Wednesday, March =
12, 2014 6:12 PM, Elvir Kuric <ekuric@redhat.com> wrote:=0A =0AOn 03/12/201=
4 12:43 PM, emmanuel segura wrote:=0A=0Abut it's a cluster problem? ummm=0A=
>=0A>=0A>=0A>=0A>2014-03-12 7:31 GMT+01:00 Kaisar Ahmed Khan <lipson12@yaho=
o.com>:=0A>=0A>=0A>>=0A>>=0A>>=0A>>Dear Experts :=0A>>=0A>>=0A>>=0A>>=A0fol=
lowing rule is not working to create symlink for iscsi disk , my iscsi devi=
ce ID /dev/sda and want to link as /dev/iscsi/vendor_kernel=0A>>=0A>>please=
 guide me if i miss anything .=0A>>=0A>>=0A>>ACTION=3D=3D"add", SUBSYSTEM=
=3D=3D"block", ENV{ID_MODEL}=3D=3D"VIRTUAL-DISK", SYMLINK+=3Discsi/%E{ID_VE=
NDOR}_%K", MODE=3D"0664"=0A>>=0A>>Thanks =0A>>=A0kaisar=0A>>=0A>>=0A>>--=0A=
>>Linux-cluster mailing list=0A>>Linux-cluster@redhat.com=0A>>https://www.r=
edhat.com/mailman/listinfo/linux-cluster=0A>>=0A>=0A>=0A>-- =0A>esta es mi =
vida e me la vivo hasta que dios quiera =0A>=0A>if you=A0 share more inform=
ation with us ( os version ) it could help.=0A=0AAlso below outputs can hel=
p to understand how system see device =0A=0Aif rhel 5=A0 ( and clones ) =0A=
=0A#udevinfo -a -p $(udevinfo -q path -n /dev/DEVICE)  =0A=0A=0Aif rhel 6 (=
 and clones ) =0A=0A#  =0Audevadm info --query=3Dall -n /dev/DEVICE --attri=
bute-walk=0A=0Awhere DEVICE is device you want to write udev rule for. =0A=
=0AKind regards, =0A=0A-- =0AElvir Kuric,TSE / Red Hat / GSS EMEA / =0A=0A-=
- =0ALinux-cluster mailing list=0ALinux-cluster@redhat.com=0Ahttps://www.re=
dhat.com/mailman/listinfo/linux-cluster
--624387052-964115860-1395893542=:35997
Content-Type: text/html; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

<html><body><div style=3D"color:#000; background-color:#fff; font-family:He=
lveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;fo=
nt-size:12pt"><div><span><br></span></div><div>&nbsp;</div><div style=3D"co=
lor:rgb(0, 0, 0);font-size:13px;font-family:arial, helvetica, clean, sans-s=
erif;background-color:transparent;font-style:normal;"><br></div>Elvir Kuric=
,<br><br>My OS version is RHEL 6.2 , i just want to create Symlink for iscs=
i disk /dev/sda&nbsp; with udev rules . i have done same thing in rhel 5.4.=
<br><br>thanks<br>kaisar <br><div style=3D"display: block;" class=3D"yahoo_=
quoted"> <br> <br> <div style=3D"font-family: HelveticaNeue, Helvetica Neue=
, Helvetica, Arial, Lucida Grande, sans-serif; font-size: 12pt;"> <div styl=
e=3D"font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida G=
rande, sans-serif; font-size: 12pt;"> <div dir=3D"ltr"> <font face=3D"Arial=
" size=3D"2"> On Wednesday, March 12, 2014 6:12 PM, Elvir Kuric
 &lt;ekuric@redhat.com&gt; wrote:<br> </font> </div>  <div class=3D"y_msg_c=
ontainer"><div id=3D"yiv1214399314"><div>=0A    <div class=3D"yiv1214399314=
yqt8884897367" id=3D"yiv1214399314yqt66383"><div class=3D"yiv1214399314moz-=
cite-prefix">On 03/12/2014 12:43 PM, emmanuel segura=0A      wrote:<br clea=
r=3D"none">=0A    </div>=0A    <blockquote type=3D"cite">=0A      <div dir=
=3D"ltr">but it's a cluster problem? ummm<br clear=3D"none">=0A      </div>=
=0A      <div class=3D"yiv1214399314gmail_extra"><br clear=3D"none">=0A    =
    <br clear=3D"none">=0A        <div class=3D"yiv1214399314gmail_quote">2=
014-03-12 7:31 GMT+01:00 Kaisar Ahmed=0A          Khan <span dir=3D"ltr">&l=
t;<a rel=3D"nofollow" shape=3D"rect" ymailto=3D"mailto:lipson12@yahoo.com" =
target=3D"_blank" href=3D"mailto:lipson12@yahoo.com">lipson12@yahoo.com</a>=
&gt;</span>:<br clear=3D"none">=0A          <blockquote class=3D"yiv1214399=
314gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1px #ccc solid;paddi=
ng-left:1ex;">=0A            <div>=0A              <div style=3D"font-size:=
12pt;font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Gr=
ande, sans-serif;">=0A                <div>=0A                  <span><br c=
lear=3D"none">=0A                  </span></div>=0A                <div sty=
le=3D"display:block;">=0A                  <div style=3D"font-family:Helvet=
icaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;font-s=
ize:12pt;">=0A                    <div style=3D"font-family:HelveticaNeue, =
Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;font-size:12pt;=
">=0A                      <br clear=3D"none">=0A                      <div=
>=0A                        <div>=0A                          <div>=0A     =
                       <div style=3D"font-size:12pt;font-family:HelveticaNe=
ue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;">=0A      =
                        <div>Dear Experts :<br clear=3D"none">=0A          =
                      <span></span></div>=0A                              <=
div style=3D"font-style:normal;font-size:16px;background-color:transparent;=
font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande,=
 sans-serif;">=0A                                <span><br clear=3D"none">=
=0A                                </span></div>=0A                        =
      <div>&nbsp;following rule is not working to=0A                       =
         create symlink for iscsi disk , my iscsi=0A                       =
         device ID /dev/sda and want to link as=0A                         =
       /dev/iscsi/vendor_kernel<br clear=3D"none">=0A                      =
          <br clear=3D"none">=0A                                please guid=
e me if i miss anything .<br clear=3D"none">=0A                            =
    <br clear=3D"none">=0A                              </div>=0A          =
                    <div style=3D"font-style:normal;font-size:13px;backgrou=
nd-color:transparent;font-family:arial, helvetica, clean, sans-serif;">ACTI=
ON=3D=3D"add",=0A                                SUBSYSTEM=3D=3D"block",=0A=
                                ENV{ID_MODEL}=3D=3D"VIRTUAL-DISK",=0A      =
                          SYMLINK+=3Discsi/%E{ID_VENDOR}_%K",=0A           =
                     MODE=3D"0664"<br clear=3D"none">=0A                   =
             <font style=3D"font-weight:bold;" size=3D"4"><br clear=3D"none=
">=0A                                  Thanks <br clear=3D"none">=0A       =
                         </font></div>=0A                              <spa=
n class=3D"yiv1214399314HOEnZb"><font color=3D"#888888">&nbsp;kaisar</font>=
</span></div>=0A                          </div>=0A                        =
</div>=0A                        <br clear=3D"none">=0A                    =
    <br clear=3D"none">=0A                      </div>=0A                  =
  </div>=0A                  </div>=0A                </div>=0A            =
  </div>=0A            </div>=0A            <br clear=3D"none">=0A         =
   --<br clear=3D"none">=0A            Linux-cluster mailing list<br clear=
=3D"none">=0A            <a rel=3D"nofollow" shape=3D"rect" ymailto=3D"mail=
to:Linux-cluster@redhat.com" target=3D"_blank" href=3D"mailto:Linux-cluster=
@redhat.com">Linux-cluster@redhat.com</a><br clear=3D"none">=0A            =
<a rel=3D"nofollow" shape=3D"rect" target=3D"_blank" href=3D"https://www.re=
dhat.com/mailman/listinfo/linux-cluster">https://www.redhat.com/mailman/lis=
tinfo/linux-cluster</a><br clear=3D"none">=0A          </blockquote>=0A    =
    </div>=0A        <br clear=3D"none">=0A        <br clear=3D"all">=0A   =
     <br clear=3D"none">=0A        -- <br clear=3D"none">=0A        esta es=
 mi vida e me la vivo hasta que dios quiera=0A      </div>=0A      <br clea=
r=3D"none">=0A      <fieldset class=3D"yiv1214399314mimeAttachmentHeader"><=
/fieldset>=0A      <br clear=3D"none">=0A    </blockquote></div>=0A    <tt>=
if you&nbsp; share more information with us ( os version ) it could=0A     =
 help.</tt><tt><br clear=3D"none">=0A    </tt><tt><br clear=3D"none">=0A   =
 </tt><tt>Also below outputs can help to understand how system see=0A      =
dev</tt><tt>ice </tt><tt><br clear=3D"none">=0A    </tt><tt><br clear=3D"no=
ne">=0A    </tt><tt>if rhel 5&nbsp; ( and clones ) </tt><tt><br clear=3D"no=
ne">=0A    </tt><tt><br clear=3D"none">=0A    </tt><tt>#</tt><tt> </tt><tt>=
udevinfo -a -p $(udevinfo -q path -n=0A      /dev/DEVICE)=0A    </tt>=0A   =
 </div><div><tt><br clear=3D"none">=0A    </tt><tt><br clear=3D"none">=0A  =
  </tt><tt>if rhel 6 ( and clones ) </tt><tt><br clear=3D"none">=0A    </tt=
><tt><br clear=3D"none">=0A    </tt><tt># </tt>=0A    </div><div><tt>=0A   =
 </tt><tt>udevadm info --query=3Dall -n /dev/DEVICE --attribute-walk</tt><t=
t><br clear=3D"none">=0A      <br clear=3D"none">=0A    </tt><tt>where DEVI=
CE is device you want to write udev rule for. </tt><tt><br clear=3D"none">=
=0A    </tt><tt><br clear=3D"none">=0A    </tt><tt>Kind regards, </tt><br c=
lear=3D"none">=0A    </div><div><pre class=3D"yiv1214399314moz-signature">-=
- =0AElvir Kuric,TSE / Red Hat / GSS EMEA / </pre>=0A  </div></div><br><div=
 class=3D"yqt8884897367" id=3D"yqt39554">-- <br clear=3D"none">Linux-cluste=
r mailing list<br clear=3D"none"><a shape=3D"rect" ymailto=3D"mailto:Linux-=
cluster@redhat.com" href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@=
redhat.com</a><br clear=3D"none"><a shape=3D"rect" href=3D"https://www.redh=
at.com/mailman/listinfo/linux-cluster" target=3D"_blank">https://www.redhat=
.com/mailman/listinfo/linux-cluster</a></div><br><br></div>  </div> </div> =
 </div> </div></body></html>
--624387052-964115860-1395893542=:35997--

From eduar47@gmail.com Fri Mar 28 02:06:48 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2S66mG0013427 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 02:06:48 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2S66mqZ019609
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 02:06:48 -0400
Received: from mail-la0-f49.google.com (mail-la0-f49.google.com
	[209.85.215.49])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2S66j8K023324
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 02:06:46 -0400
Received: by mail-la0-f49.google.com with SMTP id mc6so3357609lab.36
	for <linux-cluster@redhat.com>; Thu, 27 Mar 2014 23:06:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:date:message-id:subject:from:to:content-type;
	bh=WqsFGuyEI+zbcR7rl5z16ORhYVCc2/yUWmwgkesGNPg=;
	b=tb+/nM2HLdT+tRAl9/wlToeduTw45gy/PhI8uS3Xwy7pO0agMsGwanp3tP/XqK/iP3
	HjjF4Dz+0Gzzk1rPDnymN/Vf5ROX13qW/XkZaxNdVo+oqw7QmgMo+Wd0s1pYsSxNmc8E
	Js0iTWSEQKcDOPEYtQVM07sphvY0jH+UMN4JHQzNnrg8AihQiT9IeG5uykVtODvuRhPL
	tNSIs19VyT9GpeO/wnMrhr7kR1evjuLOZ4WjXW9KyPsJutg7/kpYaYvEblBCWoO3qN8D
	GoLr9a+xTufneVu6ok9EXmuPPV8ZDVuzyuoxZn1H0rgAX6yOe4bryGRJrC34JihAg5wE
	lH1w==
MIME-Version: 1.0
X-Received: by 10.112.163.69 with SMTP id yg5mr3978080lbb.14.1395986805107;
	Thu, 27 Mar 2014 23:06:45 -0700 (PDT)
Received: by 10.112.139.66 with HTTP; Thu, 27 Mar 2014 23:06:44 -0700 (PDT)
Date: Fri, 28 Mar 2014 01:06:44 -0500
Message-ID: <CAHqHMet2Yi0voxQEe2koSa2-4L2MFsk2JJwzwtq_U7NuTh2z0w@mail.gmail.com>
From: Eduar Arley <eduar47@gmail.com>
To: linux-cluster@redhat.com
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.85  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED, DKIM_VALID,
	DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	RCVD_IN_DNSWL_LOW, SPF_PASS)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] IP address for replies
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 06:06:48 -0000

Hello everyone.

I have an HA Cluster in CentOS 6, using CMAN + RGManager (the
supported and 'official' stack in CentOS 6.5). Everything works OK;
however, there is a thing that could give me problems in the future,
so I would like thinking right now how to solve it.

When an incoming packet comes to my cluster (through a floating IP
address), mi active node receives it OK; however, it replies from his
'real' IP address, not from the floating IP. As i'm deploying SIP in
this cluster, maybe some provider in the future could dislike this IP
and reject my calls.

I've read heartbeat have some functionality to fix this, called
IPSrcAddr; however I don't see a similar resource in Conga Web
Interface or in Red Hat documentation. In other websites, I've read
about a workaround involving IP routing rules tables, but I don't
think this is an optimal solution.

Anybody knows a way to fix this in my scenario?

Thanks!


Eduar Cardona

From christian.masopust@siemens.com Fri Mar 28 03:24:05 2014
Received: from int-mx14.intmail.prod.int.phx2.redhat.com
	(int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2S7O5BB013265 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 03:24:05 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2S7O5iK029075
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 03:24:05 -0400
Received: from david.siemens.de (david.siemens.de [192.35.17.14])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2S7O2j4006074
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 03:24:03 -0400
Received: from mail2.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.14.3/8.14.3) with ESMTP id s2S7O2Zn021151
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 08:24:02 +0100
Received: from ATVIES991UGMSX.ww300.siemens.net
	(atvies991ugmsx.ww300.siemens.net [158.226.163.37])
	by mail2.siemens.de (8.14.3/8.14.3) with ESMTP id s2S7O12d004595
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 08:24:02 +0100
Received: from ATNETS9912TMSX.ww300.siemens.net ([169.254.6.250]) by
	ATVIES991UGMSX.ww300.siemens.net ([158.226.163.37]) with mapi id
	14.03.0174.001; Fri, 28 Mar 2014 08:24:01 +0100
From: "Masopust, Christian" <christian.masopust@siemens.com>
To: linux clustering <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster] IP address for replies
Thread-Index: AQHPSk1Dx50cJPcwMkm1I7H7zR6NtZr2F57Q
Date: Fri, 28 Mar 2014 07:24:00 +0000
Message-ID: <7615AD3742034A45A23EFE13BE43F2ED1AC2A811@ATNETS9912TMSX.ww300.siemens.net>
References: <CAHqHMet2Yi0voxQEe2koSa2-4L2MFsk2JJwzwtq_U7NuTh2z0w@mail.gmail.com>
In-Reply-To: <CAHqHMet2Yi0voxQEe2koSa2-4L2MFsk2JJwzwtq_U7NuTh2z0w@mail.gmail.com>
Accept-Language: de-AT, en-US
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [158.226.163.12]
Content-Type: text/plain; charset="iso-8859-1"
MIME-Version: 1.0
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id s2S7O5BB013265
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] IP address for replies
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 07:24:06 -0000

Hi Eduar,

I have both configurations running on my systems, some with IPsrcaddr and
one with iptables.
I did the first with iptables only because it was my first cluster and was
not aware about IPsrcaddr and was in a hurry to get the cluster up and running :)

Anyway, both solutions work fine on my CentOS 6.x systems. But I don't use any
Web interface for configuration.

br,
christian

-----Ursprngliche Nachricht-----
Von: linux-cluster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat.com] Im Auftrag von Eduar Arley
Gesendet: Freitag, 28. Mrz 2014 07:07
An: linux-cluster@redhat.com
Betreff: [Linux-cluster] IP address for replies

Hello everyone.

I have an HA Cluster in CentOS 6, using CMAN + RGManager (the supported and 'official' stack in CentOS 6.5). Everything works OK; however, there is a thing that could give me problems in the future, so I would like thinking right now how to solve it.

When an incoming packet comes to my cluster (through a floating IP address), mi active node receives it OK; however, it replies from his 'real' IP address, not from the floating IP. As i'm deploying SIP in this cluster, maybe some provider in the future could dislike this IP and reject my calls.

I've read heartbeat have some functionality to fix this, called IPSrcAddr; however I don't see a similar resource in Conga Web Interface or in Red Hat documentation. In other websites, I've read about a workaround involving IP routing rules tables, but I don't think this is an optimal solution.

Anybody knows a way to fix this in my scenario?

Thanks!


Eduar Cardona

--
Linux-cluster mailing list
Linux-cluster@redhat.com
https://www.redhat.com/mailman/listinfo/linux-cluster

From eduar47@gmail.com Fri Mar 28 08:45:52 2014
Received: from int-mx10.intmail.prod.int.phx2.redhat.com
	(int-mx10.intmail.prod.int.phx2.redhat.com [10.5.11.23])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SCjq42007281 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 08:45:52 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx10.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2SCjpxp001097
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 08:45:52 -0400
Received: from mail-la0-f43.google.com (mail-la0-f43.google.com
	[209.85.215.43])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2SCjl1E005380
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 08:45:48 -0400
Received: by mail-la0-f43.google.com with SMTP id e16so3628117lan.2
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 05:45:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:in-reply-to:references:date:message-id:subject:from:to
	:content-type:content-transfer-encoding;
	bh=edl60gZEGc7UxyITxKScvIvLuSM52bYqHs7whAtrNHE=;
	b=xjwR9g8oSugokaxzA1I9USHPu+uPIVeeIeeBpRMJ/XyMhUTsTxL/L6YA5XqisbuUVi
	1l+mIA6Z1oH9bsDpKvFRUxkwPIdk+05ozuJzSeyadXkb3jsSadMWi++VuHMwupZXs2j8
	GrmMTcK2O8qrt76aKuKwd6ol+fb1j0BteYzIwqAO5rXQi4BWHlYrFKFdSyd+HoCOiJCC
	hBLCgrOgXcMejHGhjkpZMIAgOq4U0yWOB8azFZrxa5LrWMzpLWp+Aj4IkLnbIPaJmAEp
	MfO8hy3g4YzWlLfFb+VHEfjnXCtdnPNKPvFDpLfLtuT3+wFNo6cF1eyEUVh4JG+0SsIU
	U9Ug==
MIME-Version: 1.0
X-Received: by 10.152.120.195 with SMTP id le3mr5524299lab.6.1396010416510;
	Fri, 28 Mar 2014 05:40:16 -0700 (PDT)
Received: by 10.112.139.66 with HTTP; Fri, 28 Mar 2014 05:40:16 -0700 (PDT)
In-Reply-To: <7615AD3742034A45A23EFE13BE43F2ED1AC2A811@ATNETS9912TMSX.ww300.siemens.net>
References: <CAHqHMet2Yi0voxQEe2koSa2-4L2MFsk2JJwzwtq_U7NuTh2z0w@mail.gmail.com>
	<7615AD3742034A45A23EFE13BE43F2ED1AC2A811@ATNETS9912TMSX.ww300.siemens.net>
Date: Fri, 28 Mar 2014 07:40:16 -0500
Message-ID: <CAHqHMev0g3m-TgGRFuDTcB8wm-X+wG3ByH4WC1n=PrzHOGGBnQ@mail.gmail.com>
From: Eduar Arley <eduar47@gmail.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: text/plain; charset=ISO-8859-1
X-RedHat-Spam-Score: -2.849  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, DKIM_VALID_AU, FREEMAIL_ENVFROM_END_DIGIT,
	FREEMAIL_FROM, RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.23
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id s2SCjq42007281
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] IP address for replies
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 12:45:52 -0000

2014-03-28 2:24 GMT-05:00 Masopust, Christian <christian.masopust@siemens.com>:
> Hi Eduar,
>
> I have both configurations running on my systems, some with IPsrcaddr and
> one with iptables.
> I did the first with iptables only because it was my first cluster and was
> not aware about IPsrcaddr and was in a hurry to get the cluster up and running :)
>
> Anyway, both solutions work fine on my CentOS 6.x systems. But I don't use any
> Web interface for configuration.
>
> br,
> christian
>
> -----Ursprngliche Nachricht-----
> Von: linux-cluster-bounces@redhat.com [mailto:linux-cluster-bounces@redhat.com] Im Auftrag von Eduar Arley
> Gesendet: Freitag, 28. Mrz 2014 07:07
> An: linux-cluster@redhat.com
> Betreff: [Linux-cluster] IP address for replies
>
> Hello everyone.
>
> I have an HA Cluster in CentOS 6, using CMAN + RGManager (the supported and 'official' stack in CentOS 6.5). Everything works OK; however, there is a thing that could give me problems in the future, so I would like thinking right now how to solve it.
>
> When an incoming packet comes to my cluster (through a floating IP address), mi active node receives it OK; however, it replies from his 'real' IP address, not from the floating IP. As i'm deploying SIP in this cluster, maybe some provider in the future could dislike this IP and reject my calls.
>
> I've read heartbeat have some functionality to fix this, called IPSrcAddr; however I don't see a similar resource in Conga Web Interface or in Red Hat documentation. In other websites, I've read about a workaround involving IP routing rules tables, but I don't think this is an optimal solution.
>
> Anybody knows a way to fix this in my scenario?
>
> Thanks!
>
>
> Eduar Cardona
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster


Hello Christian, thanks for your advice.

Could you please share here the relevant sections of your cluster.conf
file for IPSrcAddr? I currently use Conga web interface, but I can
directly modify the config file if needed.

Thanks!


Eduar Cardona

From bergman@merctech.com Fri Mar 28 12:37:20 2014
Received: from int-mx14.intmail.prod.int.phx2.redhat.com
	(int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SGbJfe025228 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 12:37:20 -0400
Received: from mx1.redhat.com (ext-mx15.extmail.prod.ext.phx2.redhat.com
	[10.5.110.20])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2SGbJO1002434
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 12:37:19 -0400
Received: from mailbackend.panix.com (mailbackend.panix.com [166.84.1.89])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2SGbIZ9004838
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 12:37:18 -0400
Received: from merctech.com (braid.uphs.upenn.edu [165.123.243.100])
	by mailbackend.panix.com (Postfix) with ESMTP id 9E1CB2EA7C
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 12:37:17 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by merctech.com (8.14.7/8.14.7) with ESMTP id s2SGbHlb012441
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 12:37:17 -0400
To: linux clustering <linux-cluster@redhat.com>
From: bergman@merctech.com
Date: Fri, 28 Mar 2014 12:37:17 -0400
Message-ID: <12440.1396024637@localhost>
X-RedHat-Spam-Score: -4.2  (BAYES_00,RCVD_IN_DNSWL_MED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.20
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: bergman@merctech.com, linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 16:37:20 -0000



I've got a 3-node cluster under CentOS5.

I'd like to add 3 additional nodes, running CentOS6.

Are there any known issues, guidelines, or recommendations for having
a single RHCS cluster with different OS releases on the nodes?

Thanks,

Mark

From fdinitto@redhat.com Fri Mar 28 15:31:40 2014
Received: from int-mx14.intmail.prod.int.phx2.redhat.com
	(int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SJVefs019636 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 15:31:40 -0400
Received: from [10.36.116.35] (ovpn-116-35.ams2.redhat.com [10.36.116.35])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2SJVcxl007851
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 15:31:39 -0400
Message-ID: <5335CE1A.3060509@redhat.com>
Date: Fri, 28 Mar 2014 20:31:38 +0100
From: "Fabio M. Di Nitto" <fdinitto@redhat.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.4.0
MIME-Version: 1.0
To: linux-cluster@redhat.com
References: <12440.1396024637@localhost>
In-Reply-To: <12440.1396024637@localhost>
X-Enigmail-Version: 1.6
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 19:31:40 -0000

On 03/28/2014 05:37 PM, bergman@merctech.com wrote:
> 
> 
> I've got a 3-node cluster under CentOS5.
> 
> I'd like to add 3 additional nodes, running CentOS6.
> 
> Are there any known issues, guidelines, or recommendations for having
> a single RHCS cluster with different OS releases on the nodes?

Only one answer.. don't do it. It's not supported and it's only asking
for troubles.

Fabio

From washer123@gmail.com Fri Mar 28 16:35:26 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SKZPqV002003 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 16:35:25 -0400
Received: from mx1.redhat.com (ext-mx16.extmail.prod.ext.phx2.redhat.com
	[10.5.110.21])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2SKZPWq029470
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 16:35:25 -0400
Received: from mail-qc0-f175.google.com (mail-qc0-f175.google.com
	[209.85.216.175])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2SKZLIV022170
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 16:35:21 -0400
Received: by mail-qc0-f175.google.com with SMTP id e16so6600314qcx.34
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 13:35:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20120113;
	h=mime-version:reply-to:sender:in-reply-to:references:date:message-id
	:subject:from:to:content-type;
	bh=aTNQLeyNbReJZddMai7V/HmfCVsMKKp9X3K8rttCEuo=;
	b=Lbb7mH5vOo0gbEQhPI8TAeBGBV7Jz1VSuwUCULIBmHpoON0j4K1RosHO9h3FWCmF5i
	q2PbuKjsQPBY+9xTS1buGKtB+rXy6HD0SeZr1924Qqy6s62AUTDCbV/CfcrKlqRDN7re
	E/1Tk7Trc99Y+QOL68QlU+i3uTnfQLwqsrNTR/IPPScJZ8AOMHrDn9WWfVYyawQlRte/
	f+VM7Pp1jvcvWybeDRxTyJJiV0b4BW24ExI+na38NzgRhMwkAs7eAqy3+Hrfw2rjJ/Kg
	1n8uPJK7ASD7Lakf0yubcxndfsS/hMXIXaP7jO/KttaJkd+2Z2IFAE+WiiU5CzcZs6du
	DWMw==
MIME-Version: 1.0
X-Received: by 10.229.219.133 with SMTP id hu5mr11805621qcb.5.1396038920852;
	Fri, 28 Mar 2014 13:35:20 -0700 (PDT)
Sender: washer123@gmail.com
Received: by 10.140.19.107 with HTTP; Fri, 28 Mar 2014 13:35:20 -0700 (PDT)
In-Reply-To: <5335CE1A.3060509@redhat.com>
References: <12440.1396024637@localhost>
	<5335CE1A.3060509@redhat.com>
Date: Fri, 28 Mar 2014 13:35:20 -0700
X-Google-Sender-Auth: KZkFKnp2obM246FkXq543K-i7c4
Message-ID: <CAO=CEwFcwVaHW1zcTDNaxc_Gi+7eV2rAM7WgeCNXPt=1Sr2cgg@mail.gmail.com>
From: James Washer <washer@trlp.com>
To: linux clustering <linux-cluster@redhat.com>
Content-Type: multipart/alternative; boundary=001a1133c5e6f85abf04f5b0a3b2
X-RedHat-Spam-Score: -2.748  (BAYES_00, DCC_REPUT_00_12, DKIM_SIGNED,
	DKIM_VALID, FREEMAIL_ENVFROM_END_DIGIT, FREEMAIL_FROM,
	HTML_MESSAGE, RCVD_IN_DNSWL_LOW, SPF_PASS, URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.21
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: washer@trlp.com, linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 20:35:26 -0000

--001a1133c5e6f85abf04f5b0a3b2
Content-Type: text/plain; charset=ISO-8859-1

You can get by, for a short time, with a minor revision difference, say 5.7
and 5.8, but, mixing 5 and 6 will not work. Period


On Fri, Mar 28, 2014 at 12:31 PM, Fabio M. Di Nitto <fdinitto@redhat.com>wrote:

> On 03/28/2014 05:37 PM, bergman@merctech.com wrote:
> >
> >
> > I've got a 3-node cluster under CentOS5.
> >
> > I'd like to add 3 additional nodes, running CentOS6.
> >
> > Are there any known issues, guidelines, or recommendations for having
> > a single RHCS cluster with different OS releases on the nodes?
>
> Only one answer.. don't do it. It's not supported and it's only asking
> for troubles.
>
> Fabio
>
> --
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster
>



-- 


 - jim

--001a1133c5e6f85abf04f5b0a3b2
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr">You can get by, for a short time, with a minor revision di=
fference, say 5.7 and 5.8, but, mixing 5 and 6 will not work. Period<br></d=
iv><div class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On Fri, Ma=
r 28, 2014 at 12:31 PM, Fabio M. Di Nitto <span dir=3D"ltr">&lt;<a href=3D"=
mailto:fdinitto@redhat.com" target=3D"_blank">fdinitto@redhat.com</a>&gt;</=
span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div class=3D"">On 03/28/2014 05:37 PM, <a h=
ref=3D"mailto:bergman@merctech.com">bergman@merctech.com</a> wrote:<br>
&gt;<br>
&gt;<br>
&gt; I&#39;ve got a 3-node cluster under CentOS5.<br>
&gt;<br>
&gt; I&#39;d like to add 3 additional nodes, running CentOS6.<br>
&gt;<br>
&gt; Are there any known issues, guidelines, or recommendations for having<=
br>
&gt; a single RHCS cluster with different OS releases on the nodes?<br>
<br>
</div>Only one answer.. don&#39;t do it. It&#39;s not supported and it&#39;=
s only asking<br>
for troubles.<br>
<span class=3D"HOEnZb"><font color=3D"#888888"><br>
Fabio<br>
</font></span><div class=3D"HOEnZb"><div class=3D"h5"><br>
--<br>
Linux-cluster mailing list<br>
<a href=3D"mailto:Linux-cluster@redhat.com">Linux-cluster@redhat.com</a><br=
>
<a href=3D"https://www.redhat.com/mailman/listinfo/linux-cluster" target=3D=
"_blank">https://www.redhat.com/mailman/listinfo/linux-cluster</a><br>
</div></div></blockquote></div><br><br clear=3D"all"><br>-- <br><br><br>=A0=
- jim<br>
</div>

--001a1133c5e6f85abf04f5b0a3b2--

From ajb2@mssl.ucl.ac.uk Fri Mar 28 18:08:04 2014
Received: from int-mx11.intmail.prod.int.phx2.redhat.com
	(int-mx11.intmail.prod.int.phx2.redhat.com [10.5.11.24])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SM84YX020230 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 18:08:04 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx11.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2SM84Wv011741
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 18:08:04 -0400
Received: from msslax.mssl.ucl.ac.uk (msslax.mssl.ucl.ac.uk [128.40.71.164])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2SM81I6014262
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 18:08:02 -0400
Received: from [192.168.178.11] (host-92-27-146-159.static.as13285.net
	[92.27.146.159]) (authenticated bits=0)
	by msslax.mssl.ucl.ac.uk (8.13.8/8.13.8) with ESMTP id s2SM7mi1002055
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES128-SHA bits=128 verify=NO)
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 22:07:51 GMT
Message-ID: <5335F2B4.6080605@mssl.ucl.ac.uk>
Date: Fri, 28 Mar 2014 22:07:48 +0000
From: Alan Brown <ajb2@mssl.ucl.ac.uk>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.4.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>
References: <12440.1396024637@localhost> <5335CE1A.3060509@redhat.com>
In-Reply-To: <5335CE1A.3060509@redhat.com>
Content-Type: multipart/alternative;
	boundary="------------010209030104050409080105"
X-MSSL-MailScanner-Information: Please contact the ISP for more information
X-MSSL-MailScanner-ID: s2SM7mi1002055
X-MSSL-MailScanner: No virus found
X-MSSL-MailScanner-SpamCheck: not spam, SpamAssassin (not cached,
	score=-2.899, required 6, autolearn=not spam, ALL_TRUSTED -1.00,
	BAYES_00 -1.90, HTML_MESSAGE 0.00)
X-MSSL-MailScanner-From: ajb2@mssl.ucl.ac.uk
X-Spam-Status: No
X-RedHat-Spam-Score: -4.473  (BAYES_00, DCC_REPUT_70_89, HTML_MESSAGE,
	RCVD_IN_DNSWL_MED, RP_MATCHES_RCVD)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.24
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 22:08:05 -0000

This is a multi-part message in MIME format.
--------------010209030104050409080105
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 28/03/14 19:31, Fabio M. Di Nitto wrote:
>
> Are there any known issues, guidelines, or recommendations for having
> a single RHCS cluster with different OS releases on the nodes?
> Only one answer.. don't do it. It's not supported and it's only asking
> for troubles.
>
>

Seconded. There are _substantial_ differences between Centos/RHEL 5 and 
6 clustering.

You can run one or the other OS, but you can't mix them. The on-disk 
format isn't affected.

Best path is to setup a cluster in 6, shut down the 5 cluster, attach 
disks to the 6 cluster and bring it all back up. The 5 boxes can be 
converted to version 6 afterwards.

(I'm going through this at the moment, as I have 2 EL5 clusters and 1 
EL6 cluster.)

TAKE NOTE:  RHEL/CentOS6 clustering is not quite ready for prime-time - 
if you enable GFS2 quotas and someone busts his quota the machine will 
panic.




--------------010209030104050409080105
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
  </head>
  <body text="#000000" bgcolor="#CCCCCC">
    <div class="moz-cite-prefix">On 28/03/14 19:31, Fabio M. Di Nitto
      wrote:<br>
    </div>
    <blockquote cite="mid:5335CE1A.3060509@redhat.com" type="cite"><br>
      <pre wrap="">
Are there any known issues, guidelines, or recommendations for having
a single RHCS cluster with different OS releases on the nodes?
</pre>
      <pre wrap="">
Only one answer.. don't do it. It's not supported and it's only asking
for troubles.


</pre>
    </blockquote>
    <br>
    Seconded. There are _substantial_ differences between Centos/RHEL 5
    and 6 clustering.<br>
    <br>
    You can run one or the other OS, but you can't mix them. The on-disk
    format isn't affected.<br>
    <br>
    Best path is to setup a cluster in 6, shut down the 5 cluster,
    attach disks to the 6 cluster and bring it all back up. The 5 boxes
    can be converted to version 6 afterwards.<br>
    <br>
    (I'm going through this at the moment, as I have 2 EL5 clusters and
    1 EL6 cluster.)<br>
    <br>
    TAKE NOTE:&nbsp; RHEL/CentOS6 clustering is not quite ready for
    prime-time - if you enable GFS2 quotas and someone busts his quota
    the machine will panic.<br>
    <br>
  </body>
</html>

--------------010209030104050409080105--

From bergman@merctech.com Fri Mar 28 18:35:45 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SMZjwj002865 for <linux-cluster@listman.util.phx.redhat.com>;
	Fri, 28 Mar 2014 18:35:45 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2SMZjMN008648
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 18:35:45 -0400
Received: from mailbackend.panix.com (mailbackend.panix.com [166.84.1.89])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2SMZiSR011750
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 18:35:44 -0400
Received: from merctech.com (braid.uphs.upenn.edu [165.123.243.100])
	by mailbackend.panix.com (Postfix) with ESMTP id 7C8512E5EA
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 18:35:43 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by merctech.com (8.14.7/8.14.7) with ESMTP id s2SMZgpC006023
	for <linux-cluster@redhat.com>; Fri, 28 Mar 2014 18:35:42 -0400
To: linux clustering <linux-cluster@redhat.com>
From: bergman@merctech.com
In-Reply-To: Your message of "Fri,
	28 Mar 2014 22:07:48 -0000." <5335F2B4.6080605@mssl.ucl.ac.uk>
References: <5335F2B4.6080605@mssl.ucl.ac.uk> <12440.1396024637@localhost>
	<5335CE1A.3060509@redhat.com>
Date: Fri, 28 Mar 2014 18:35:42 -0400
Message-ID: <6022.1396046142@localhost>
X-RedHat-Spam-Score: -4.2  (BAYES_00,RCVD_IN_DNSWL_MED)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: bergman@merctech.com, linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Fri, 28 Mar 2014 22:35:45 -0000



In the message dated: Fri, 28 Mar 2014 22:07:48 -0000,
The pithy ruminations from Alan Brown on 
<Re: [Linux-cluster] mixing OS versions?> were:
=> On 28/03/14 19:31, Fabio M. Di Nitto wrote:
=> >
=> > Are there any known issues, guidelines, or recommendations for having
=> > a single RHCS cluster with different OS releases on the nodes?
=> > Only one answer.. don't do it. It's not supported and it's only asking
=> > for troubles.

Thanks for all the warnings...not what I wanted to hear, but it's good
to get a clear, consistent message.

=> >
=> >
=> 
=> Seconded. There are _substantial_ differences between Centos/RHEL 5 and 
=> 6 clustering.
=> 
=> You can run one or the other OS, but you can't mix them. The on-disk 
=> format isn't affected.

For clarification, we're not using RHCS to manange any shared storage. The
only 'disk' component is the quorum disk.

We're using GPFS as the storage layer.

RHCS manages several services, such as:

	httpd
	mysql
	nis
	pgsql

=> 
=> Best path is to setup a cluster in 6, shut down the 5 cluster, attach 
=> disks to the 6 cluster and bring it all back up. The 5 boxes can be 
=> converted to version 6 afterwards.

That's what I was expecting, unfortunately.

I'll probably do a more gradual approach...bring up a CentOS6 cluster
with it's own quorum disk, and one-by-one add services (httpd, nis,
etc.) to that, bringing them down on the old cluster. Add in some CNAMES
and coordination with the network group and it should be relatively
transparent to the users.
=> 
=> (I'm going through this at the moment, as I have 2 EL5 clusters and 1 
=> EL6 cluster.)
=> 
=> TAKE NOTE:  RHEL/CentOS6 clustering is not quite ready for prime-time - 
=> if you enable GFS2 quotas and someone busts his quota the machine will 
=> panic.

That's an example of why I no longer use GFS2. :)

Thanks,

Mark

=> 
=> 
=> 
=> 
=> -- 
=> Linux-cluster mailing list
=> Linux-cluster@redhat.com
=> https://www.redhat.com/mailman/listinfo/linux-cluster

From christian.masopust@siemens.com Sat Mar 29 05:00:37 2014
Received: from int-mx02.intmail.prod.int.phx2.redhat.com
	(int-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.12])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2T90bLN005079 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 29 Mar 2014 05:00:37 -0400
Received: from mx2.redhat.com (ext-mx01.extmail.prod.ext.rdu2.redhat.com
	[10.11.55.1])
	by int-mx02.intmail.prod.int.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2T90FAO024207
	for <linux-cluster@redhat.com>; Sat, 29 Mar 2014 05:00:28 -0400
Received: from david.siemens.de (david.siemens.de [192.35.17.14])
	by mx2.redhat.com (8.14.4/8.14.4) with ESMTP id s2T90Ccb017172
	for <linux-cluster@redhat.com>; Sat, 29 Mar 2014 05:00:13 -0400
Received: from mail3.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.14.3/8.14.3) with ESMTP id s2T905g1027777;
	Sat, 29 Mar 2014 10:00:06 +0100
Received: from ATNETS9912ZMSX.ww300.siemens.net
	(atnets9912zmsx.ww300.siemens.net [158.226.163.52])
	by mail3.siemens.de (8.14.3/8.14.3) with ESMTP id s2T905iu020429
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
	Sat, 29 Mar 2014 10:00:05 +0100
Received: from ATNETS9912TMSX.ww300.siemens.net ([169.254.6.250]) by
	ATNETS9912ZMSX.ww300.siemens.net ([158.226.163.52]) with mapi id
	14.03.0174.001; Sat, 29 Mar 2014 10:00:05 +0100
From: "Masopust, Christian" <christian.masopust@siemens.com>
To: "bergman@merctech.com" <bergman@merctech.com>, linux clustering
	<linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster] mixing OS versions?
Thread-Index: AQHPSr5frD6ocKQmG0S1zXEti5cZD5r2/g4AgAAa5EiAAKuVwA==
Date: Sat, 29 Mar 2014 09:00:04 +0000
Message-ID: <7615AD3742034A45A23EFE13BE43F2ED1AC2AFD5@ATNETS9912TMSX.ww300.siemens.net>
References: <5335F2B4.6080605@mssl.ucl.ac.uk> <12440.1396024637@localhost>
	<5335CE1A.3060509@redhat.com> <6022.1396046142@localhost>
In-Reply-To: <6022.1396046142@localhost>
Accept-Language: de-AT, en-US
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [158.226.163.12]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.67 on 10.5.11.12
X-Scanned-By: MIMEDefang 2.68 on 10.11.55.1
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id s2T90bLN005079
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 29 Mar 2014 09:00:37 -0000

> => 
> => TAKE NOTE: RHEL/CentOS6 clustering is not quite ready for prime-time - 
> => if you enable GFS2 quotas and someone busts his quota the machine will => panic.
> 
> That's an example of why I no longer use GFS2. :)
> 
> Thanks,
> 
> Mark

Hi Mark,

what instead of GFS2 ?

br,
christian


From bergman@merctech.com Sat Mar 29 13:30:48 2014
Received: from int-mx14.intmail.prod.int.phx2.redhat.com
	(int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2THUlb1011261 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 29 Mar 2014 13:30:47 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2THUksc016297
	for <linux-cluster@redhat.com>; Sat, 29 Mar 2014 13:30:47 -0400
Received: from mailbackend.panix.com (mailbackend.panix.com [166.84.1.89])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2THUgS3026241
	for <linux-cluster@redhat.com>; Sat, 29 Mar 2014 13:30:44 -0400
Received: from merctech.com (c-71-225-210-127.hsd1.nj.comcast.net
	[71.225.210.127])
	by mailbackend.panix.com (Postfix) with ESMTP id 0A3442EEB6;
	Sat, 29 Mar 2014 13:30:41 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by merctech.com (8.14.7/8.14.7) with ESMTP id s2THUfop022238;
	Sat, 29 Mar 2014 13:30:41 -0400
To: "Masopust, Christian" <christian.masopust@siemens.com>
From: bergman@merctech.com
In-Reply-To: Your message of "Sat, 29 Mar 2014 09:00:04 -0000."
	<7615AD3742034A45A23EFE13BE43F2ED1AC2AFD5@ATNETS9912TMSX.ww300.siemens.net>
References: <7615AD3742034A45A23EFE13BE43F2ED1AC2AFD5@ATNETS9912TMSX.ww300.siemens.net>
	<5335F2B4.6080605@mssl.ucl.ac.uk> <12440.1396024637@localhost>
	<5335CE1A.3060509@redhat.com> <6022.1396046142@localhost>
Date: Sat, 29 Mar 2014 13:30:41 -0400
Message-ID: <22237.1396114241@localhost>
X-RedHat-Spam-Score: -2.3  (BAYES_20,RCVD_IN_DNSWL_MED,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: bergman@merctech.com, linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 29 Mar 2014 17:30:48 -0000



In the message dated: Sat, 29 Mar 2014 09:00:04 -0000,
The pithy ruminations from "Masopust, Christian" on 
<AW: [Linux-cluster] mixing OS versions?> were:
=> > => 
=> > => TAKE NOTE: RHEL/CentOS6 clustering is not quite ready for prime-time - 
=> > => if you enable GFS2 quotas and someone busts his quota the machine will => panic.
=> > 
=> > That's an example of why I no longer use GFS2. :)
=> > 
=> > Thanks,
=> > 
=> > Mark
=> 
=> Hi Mark,
=> 
=> what instead of GFS2 ?

GPFS, as I wrote in the message to which you replied:


-------------------------------------------
From: bergman@merctech.com
To: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] mixing OS versions?
Date: Fri, 28 Mar 2014 18:35:42 -0400

[SNIP!]

For clarification, we're not using RHCS to manange any shared storage. The
only 'disk' component is the quorum disk.

We're using GPFS as the storage layer.

-------------------------------------------

=> 
=> br,
=> christian
=> 
=> 

-- 
Mark Bergman 

From christian.masopust@siemens.com Sat Mar 29 13:50:49 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2THon8M013608 for <linux-cluster@listman.util.phx.redhat.com>;
	Sat, 29 Mar 2014 13:50:49 -0400
Received: from mx1.redhat.com (ext-mx12.extmail.prod.ext.phx2.redhat.com
	[10.5.110.17])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2THontp017080
	for <linux-cluster@redhat.com>; Sat, 29 Mar 2014 13:50:49 -0400
Received: from david.siemens.de (david.siemens.de [192.35.17.14])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2THoldE027417
	for <linux-cluster@redhat.com>; Sat, 29 Mar 2014 13:50:47 -0400
Received: from mail3.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.14.3/8.14.3) with ESMTP id s2THoivT003490;
	Sat, 29 Mar 2014 18:50:44 +0100
Received: from ATVIES991UIMSX.ww300.siemens.net
	(atvies991uimsx.ww300.siemens.net [158.226.163.39])
	by mail3.siemens.de (8.14.3/8.14.3) with ESMTP id s2THoh2j027369
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
	Sat, 29 Mar 2014 18:50:43 +0100
Received: from ATNETS9912TMSX.ww300.siemens.net ([169.254.6.249]) by
	ATVIES991UIMSX.ww300.siemens.net ([158.226.163.39]) with mapi id
	14.03.0181.006; Sat, 29 Mar 2014 18:50:43 +0100
From: "Masopust, Christian" <christian.masopust@siemens.com>
To: "bergman@merctech.com" <bergman@merctech.com>
Thread-Topic: AW: [Linux-cluster] mixing OS versions?
Thread-Index: AQHPSr5frD6ocKQmG0S1zXEti5cZD5r2/g4AgAAa5EiAAKuVwIAAjzjzgAAFIyA=
Date: Sat, 29 Mar 2014 17:50:42 +0000
Message-ID: <7615AD3742034A45A23EFE13BE43F2ED1AC334CE@ATNETS9912TMSX.ww300.siemens.net>
References: <7615AD3742034A45A23EFE13BE43F2ED1AC2AFD5@ATNETS9912TMSX.ww300.siemens.net>
	<5335F2B4.6080605@mssl.ucl.ac.uk> <12440.1396024637@localhost>
	<5335CE1A.3060509@redhat.com> <6022.1396046142@localhost>
	<22237.1396114241@localhost>
In-Reply-To: <22237.1396114241@localhost>
Accept-Language: de-AT, en-US
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [158.226.163.12]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.17
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id s2THon8M013608
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sat, 29 Mar 2014 17:50:49 -0000


> In the message dated: Sat, 29 Mar 2014 09:00:04 -0000, The pithy ruminations from "Masopust, Christian" on
> <AW: [Linux-cluster] mixing OS versions?> were:
> => > =>
> => > => TAKE NOTE: RHEL/CentOS6 clustering is not quite ready for prime-time - => > => if you enable GFS2 quotas 
> and someone busts his quota the machine will => panic.
> => >
> => > That's an example of why I no longer use GFS2. :) => > => > Thanks, => > => > Mark => => Hi Mark, => 
> => what instead of GFS2 ?
> 
> GPFS, as I wrote in the message to which you replied:
> 

sorry, my fault... didn't notice it as GPFS has not been on my radar up to now :)


From swhiteho@redhat.com Sun Mar 30 07:36:04 2014
Received: from int-mx12.intmail.prod.int.phx2.redhat.com
	(int-mx12.intmail.prod.int.phx2.redhat.com [10.5.11.25])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2UBa4Vo018497 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Mar 2014 07:36:04 -0400
Received: from [10.36.7.162] (vpn1-7-162.ams2.redhat.com [10.36.7.162])
	by int-mx12.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2UBa2Wk023755; Sun, 30 Mar 2014 07:36:02 -0400
From: Steven Whitehouse <swhiteho@redhat.com>
To: Alan Brown <ajb2@mssl.ucl.ac.uk>
In-Reply-To: <5335F2B4.6080605@mssl.ucl.ac.uk>
References: <12440.1396024637@localhost> <5335CE1A.3060509@redhat.com>
	<5335F2B4.6080605@mssl.ucl.ac.uk>
Content-Type: text/plain; charset="UTF-8"
Organization: Red Hat UK Ltd
Date: Sun, 30 Mar 2014 12:34:26 +0100
Message-ID: <1396179266.2659.30.camel@menhir>
Mime-Version: 1.0
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.25
X-loop: linux-cluster@redhat.com
Cc: linux clustering <linux-cluster@redhat.com>
Subject: Re: [Linux-cluster] mixing OS versions?
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 30 Mar 2014 11:36:04 -0000

Hi,

On Fri, 2014-03-28 at 22:07 +0000, Alan Brown wrote:
> On 28/03/14 19:31, Fabio M. Di Nitto wrote:
> 
> > 
> > Are there any known issues, guidelines, or recommendations for having
> > a single RHCS cluster with different OS releases on the nodes?
> > Only one answer.. don't do it. It's not supported and it's only asking
> > for troubles.
> > 
> > 
> 
> Seconded. There are _substantial_ differences between Centos/RHEL 5
> and 6 clustering.
> 
> You can run one or the other OS, but you can't mix them. The on-disk
> format isn't affected.
> 
> Best path is to setup a cluster in 6, shut down the 5 cluster, attach
> disks to the 6 cluster and bring it all back up. The 5 boxes can be
> converted to version 6 afterwards.
> 
> (I'm going through this at the moment, as I have 2 EL5 clusters and 1
> EL6 cluster.)
> 
> TAKE NOTE:  RHEL/CentOS6 clustering is not quite ready for prime-time
> - if you enable GFS2 quotas and someone busts his quota the machine
> will panic.
> 
Well that is not entirely true. We have done a great deal of
investigation into this issue. We do test quotas (among many other
things) on each release to ensure that they are working. Our tests have
all passed correctly, and to date you have provided the only report of
this particular issue via our support team. So it is certainly not
something that lots of people are hitting.

We do now have a good idea of where the issue is. However it is clear
that simply exceeding quotas is not enough to trigger it. Instead quotas
need to be exceeded in a particular way.

Abhi is working on a fix which should be available very shortly now.

Returning to the original point however, it is certainly not recommended
to have mixed RHEL or CentOS versions running in the same cluster. It is
much better to keep everything the same, even though the GFS2 on-disk
format has not changed between the versions.

I hope that answers a few questions - let us know if you need more info,

Steve.


> -- 
> Linux-cluster mailing list
> Linux-cluster@redhat.com
> https://www.redhat.com/mailman/listinfo/linux-cluster


From hamid.jafarian@pdnsoft.com Sun Mar 30 10:35:27 2014
Received: from int-mx14.intmail.prod.int.phx2.redhat.com
	(int-mx14.intmail.prod.int.phx2.redhat.com [10.5.11.27])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2UEZRA9031462 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Mar 2014 10:35:27 -0400
Received: from mx1.redhat.com (ext-mx13.extmail.prod.ext.phx2.redhat.com
	[10.5.110.18])
	by int-mx14.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2UEZQ94023534
	for <linux-cluster@redhat.com>; Sun, 30 Mar 2014 10:35:27 -0400
Received: from shasel.com (static.31.95.40.188.clients.your-server.de
	[188.40.95.31])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2UEZOa5012087
	for <linux-cluster@redhat.com>; Sun, 30 Mar 2014 10:35:25 -0400
X-No-Relay: not in my network
Received: from [192.168.43.3] (unknown [2.182.128.193])
	by shasel.com (Postfix) with ESMTPSA id 84DA61C1533
	for <linux-cluster@redhat.com>; Sun, 30 Mar 2014 15:35:11 +0430 (IRDT)
Message-ID: <53382B8B.8060204@pdnsoft.com>
Date: Sun, 30 Mar 2014 19:04:51 +0430
From: Hamid Jafarian <hamid.jafarian@pdnsoft.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:17.0) Gecko/20130625 Thunderbird/17.0.7
MIME-Version: 1.0
To: linux-cluster@redhat.com
X-Enigmail-Version: 1.6
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -0.5  (BAYES_05,SPF_PASS,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.27
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.18
X-loop: linux-cluster@redhat.com
Subject: [Linux-cluster] GFS2 unformat helper tool
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 30 Mar 2014 14:35:27 -0000

Hi,

We developed GFS2 volume unformat helper tool.
Read about this code at:
http://pdnsoft.com/en/web/pdnen/blog/-/blogs/gfs2-unformat-helper-tool-1

Regards

-- 
Hamid Jafarian
CEO at PDNSoft Co.
Web site: http://www.pdnsoft.com
Blog:     http://jafarian.pdnsoft.com

From lists@alteeve.ca Sun Mar 30 14:13:44 2014
Received: from int-mx13.intmail.prod.int.phx2.redhat.com
	(int-mx13.intmail.prod.int.phx2.redhat.com [10.5.11.26])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2UIDiEK023061 for <linux-cluster@listman.util.phx.redhat.com>;
	Sun, 30 Mar 2014 14:13:44 -0400
Received: from mx1.redhat.com (ext-mx14.extmail.prod.ext.phx2.redhat.com
	[10.5.110.19])
	by int-mx13.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2UIDh0H010218; Sun, 30 Mar 2014 14:13:44 -0400
Received: from vm08-mail01.alteeve.ca (mail.alteeve.ca [65.39.153.71])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2UIDgYT020085;
	Sun, 30 Mar 2014 14:13:42 -0400
Received: from lemass.alteeve.ca (unknown [172.56.19.207])
	by vm08-mail01.alteeve.ca (Postfix) with ESMTPSA id B4646200EC;
	Sun, 30 Mar 2014 14:13:39 -0400 (EDT)
Message-ID: <53385ED4.7040006@alteeve.ca>
Date: Sun, 30 Mar 2014 14:13:40 -0400
From: Digimer <lists@alteeve.ca>
User-Agent: Mozilla/5.0 (X11; Linux x86_64;
	rv:24.0) Gecko/20100101 Thunderbird/24.4.0
MIME-Version: 1.0
To: linux clustering <linux-cluster@redhat.com>, rpeterso@redhat.com
References: <53382B8B.8060204@pdnsoft.com>
In-Reply-To: <53382B8B.8060204@pdnsoft.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RedHat-Spam-Score: -2.449  (BAYES_00,RP_MATCHES_RCVD,URIBL_BLOCKED)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.26
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.19
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] GFS2 unformat helper tool
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Sun, 30 Mar 2014 18:13:44 -0000

On 30/03/14 10:34 AM, Hamid Jafarian wrote:
> Hi,
>
> We developed GFS2 volume unformat helper tool.
> Read about this code at:
> http://pdnsoft.com/en/web/pdnen/blog/-/blogs/gfs2-unformat-helper-tool-1
>
> Regards

Thanks for sharing this!

Madi

-- 
Digimer
Papers and Projects: https://alteeve.ca/w/
What if the cure for cancer is trapped in the mind of a person without 
access to education?

From christian.masopust@siemens.com Mon Mar 31 01:52:46 2014
Received: from int-mx09.intmail.prod.int.phx2.redhat.com
	(int-mx09.intmail.prod.int.phx2.redhat.com [10.5.11.22])
	by lists01.pubmisc.prod.ext.phx2.redhat.com (8.13.8/8.13.8) with ESMTP
	id s2V5qkPq030117 for <linux-cluster@listman.util.phx.redhat.com>;
	Mon, 31 Mar 2014 01:52:46 -0400
Received: from mx1.redhat.com (ext-mx11.extmail.prod.ext.phx2.redhat.com
	[10.5.110.16])
	by int-mx09.intmail.prod.int.phx2.redhat.com (8.14.4/8.14.4) with ESMTP
	id s2V5qj4P001342
	for <linux-cluster@redhat.com>; Mon, 31 Mar 2014 01:52:45 -0400
Received: from david.siemens.de (david.siemens.de [192.35.17.14])
	by mx1.redhat.com (8.14.4/8.14.4) with ESMTP id s2V5qhkR016656
	for <linux-cluster@redhat.com>; Mon, 31 Mar 2014 01:52:44 -0400
Received: from mail3.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.14.3/8.14.3) with ESMTP id s2V5qgJK011205
	for <linux-cluster@redhat.com>; Mon, 31 Mar 2014 07:52:42 +0200
Received: from ATNETS99131MSX.ww300.siemens.net
	(atnets99131msx.ww300.siemens.net [158.226.163.54])
	by mail3.siemens.de (8.14.3/8.14.3) with ESMTP id s2V5qfBA009049
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <linux-cluster@redhat.com>; Mon, 31 Mar 2014 07:52:42 +0200
Received: from ATNETS9912TMSX.ww300.siemens.net ([169.254.6.249]) by
	ATNETS99131MSX.ww300.siemens.net ([158.226.163.54]) with mapi id
	14.03.0181.006; Mon, 31 Mar 2014 07:52:41 +0200
From: "Masopust, Christian" <christian.masopust@siemens.com>
To: linux clustering <linux-cluster@redhat.com>
Thread-Topic: [Linux-cluster] IP address for replies
Thread-Index: AQHPSoLex50cJPcwMkm1I7H7zR6NtZr6tLZw
Date: Mon, 31 Mar 2014 05:52:40 +0000
Message-ID: <7615AD3742034A45A23EFE13BE43F2ED1AC34A23@ATNETS9912TMSX.ww300.siemens.net>
References: <CAHqHMet2Yi0voxQEe2koSa2-4L2MFsk2JJwzwtq_U7NuTh2z0w@mail.gmail.com>
	<7615AD3742034A45A23EFE13BE43F2ED1AC2A811@ATNETS9912TMSX.ww300.siemens.net>
	<CAHqHMev0g3m-TgGRFuDTcB8wm-X+wG3ByH4WC1n=PrzHOGGBnQ@mail.gmail.com>
In-Reply-To: <CAHqHMev0g3m-TgGRFuDTcB8wm-X+wG3ByH4WC1n=PrzHOGGBnQ@mail.gmail.com>
Accept-Language: de-AT, en-US
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [158.226.163.12]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
X-RedHat-Spam-Score: -6.9  (BAYES_00,RCVD_IN_DNSWL_HI)
X-Scanned-By: MIMEDefang 2.68 on 10.5.11.22
X-Scanned-By: MIMEDefang 2.68 on 10.5.110.16
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by
	lists01.pubmisc.prod.ext.phx2.redhat.com id s2V5qkPq030117
X-loop: linux-cluster@redhat.com
Subject: Re: [Linux-cluster] IP address for replies
X-BeenThere: linux-cluster@redhat.com
X-Mailman-Version: 2.1.12
Precedence: junk
Reply-To: linux clustering <linux-cluster@redhat.com>
List-Id: linux clustering <linux-cluster.redhat.com>
List-Unsubscribe: <https://www.redhat.com/mailman/options/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=unsubscribe>
List-Archive: <https://www.redhat.com/archives/linux-cluster>
List-Post: <mailto:linux-cluster@redhat.com>
List-Help: <mailto:linux-cluster-request@redhat.com?subject=help>
List-Subscribe: <https://www.redhat.com/mailman/listinfo/linux-cluster>,
	<mailto:linux-cluster-request@redhat.com?subject=subscribe>
X-List-Received-Date: Mon, 31 Mar 2014 05:52:46 -0000

> 
> 
> Hello Christian, thanks for your advice.
> 
> Could you please share here the relevant sections of your cluster.conf file for IPSrcAddr? 
> I currently use Conga web interface, but I can directly modify the config file if needed.
> 
> Thanks!
> 
> 
> Eduar Cardona

Hi Eduar,

sorry, I'm not allowed to give out any configuration settings, but the IPsrcaddr resource
is quite easy to configure:

# pcs resource describe IPsrcaddr
Resource options for: ocf:heartbeat:IPsrcaddr
  ipaddress (required): The IP address.
  cidr_netmask: The netmask for the interface in CIDR format. (ie, 24), or in dotted quad notation 255.255.255.0).

br,
christian

